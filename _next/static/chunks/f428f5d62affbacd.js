(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76497,(e,t,l)=>{"use strict";var a=e.r(91074);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var s=a(e.r(64800)),i=e.r(44855);l.default=(0,s.default)([(0,i.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,i.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},57664,e=>{"use strict";var t,l,a=e.i(44855),s=e.i(58891),i=e.i(62865),n=e.i(74614),r=e.i(72204),o=e.i(15915),d=e.i(32327),c=e.i(54385),h=e.i(65790),x=e.i(54704),u=e.i(45162),p=e.i(3430),j=e.i(75557),m=e.i(92378);e.i(96335);var g=e.i(80622),b=e.i(84933),f=e.i(81706),y=e.i(15127),C=e.i(18420),T=e.i(88795),v=e.i(68418),w=e.i(85760),P=e.i(95262),S=e.i(51480),B=e.i(13740);function I(e){return(0,B.default)("MuiInputAdornment",e)}let k=(0,S.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var A=e.i(96861);let L=["children","className","component","disablePointerEvents","disableTypography","position","variant"],R=(0,P.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:l}=e;return[t.root,t[`position${(0,C.default)(l.position)}`],!0===l.disablePointerEvents&&t.disablePointerEvents,t[l.variant]]}})(({theme:e,ownerState:t})=>(0,b.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${k.positionStart}&:not(.${k.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),N=s.forwardRef(function(e,l){let i=(0,A.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:n,className:r,component:o="div",disablePointerEvents:d=!1,disableTypography:c=!1,position:h,variant:x}=i,u=(0,g.default)(i,L),p=(0,w.default)()||{},j=x;x&&p.variant,p&&!j&&(j=p.variant);let m=(0,b.default)({},i,{hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:d,position:h,variant:j}),P=(e=>{let{classes:t,disablePointerEvents:l,hiddenLabel:a,position:s,size:i,variant:n}=e,r={root:["root",l&&"disablePointerEvents",s&&`position${(0,C.default)(s)}`,n,a&&"hiddenLabel",i&&`size${(0,C.default)(i)}`]};return(0,y.default)(r,I,t)})(m);return(0,a.jsx)(v.default.Provider,{value:null,children:(0,a.jsx)(R,(0,b.default)({as:o,ownerState:m,className:(0,f.default)(P.root,r),ref:l},u,{children:"string"!=typeof n||c?(0,a.jsxs)(s.Fragment,{children:["start"===h?t||(t=(0,a.jsx)("span",{className:"notranslate",children:"​"})):null,n]}):(0,a.jsx)(T.default,{color:"text.secondary",children:n})}))})});var E=e.i(94367),M=e.i(87225),z=e.i(33932),D=e.i(63104),$=e.i(7656),F=e.i(50723),_=e.i(77072),W=e.i(48246),G=e.i(93703),U=e.i(95996),H=e.i(23913),O=e.i(15226),q=e.i(71880),J=e.i(76710),X=e.i(13216),K=e.i(795),V=e.i(7997),Z=e.i(35017);let Q=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],Y=s.forwardRef(function(e,t){var l,s,i,n,r,o,d,c;let{backIconButtonProps:h,count:x,disabled:u=!1,getItemAriaLabel:p,nextIconButtonProps:j,onPageChange:m,page:f,rowsPerPage:y,showFirstButton:C,showLastButton:T,slots:v={},slotProps:w={}}=e,P=(0,g.default)(e,Q),S=(0,q.useRtl)(),B=null!=(l=v.firstButton)?l:K.default,I=null!=(s=v.lastButton)?s:K.default,k=null!=(i=v.nextButton)?i:K.default,A=null!=(n=v.previousButton)?n:K.default,L=null!=(r=v.firstButtonIcon)?r:Z.default,R=null!=(o=v.lastButtonIcon)?o:V.default,N=null!=(d=v.nextButtonIcon)?d:X.default,E=null!=(c=v.previousButtonIcon)?c:J.default,M=S?I:B,z=S?k:A,D=S?A:k,$=S?B:I,F=S?w.lastButton:w.firstButton,_=S?w.nextButton:w.previousButton,W=S?w.previousButton:w.nextButton,G=S?w.firstButton:w.lastButton;return(0,a.jsxs)("div",(0,b.default)({ref:t},P,{children:[C&&(0,a.jsx)(M,(0,b.default)({onClick:e=>{m(e,0)},disabled:u||0===f,"aria-label":p("first",f),title:p("first",f)},F,{children:S?(0,a.jsx)(R,(0,b.default)({},w.lastButtonIcon)):(0,a.jsx)(L,(0,b.default)({},w.firstButtonIcon))})),(0,a.jsx)(z,(0,b.default)({onClick:e=>{m(e,f-1)},disabled:u||0===f,color:"inherit","aria-label":p("previous",f),title:p("previous",f)},null!=_?_:h,{children:S?(0,a.jsx)(N,(0,b.default)({},w.nextButtonIcon)):(0,a.jsx)(E,(0,b.default)({},w.previousButtonIcon))})),(0,a.jsx)(D,(0,b.default)({onClick:e=>{m(e,f+1)},disabled:u||-1!==x&&f>=Math.ceil(x/y)-1,color:"inherit","aria-label":p("next",f),title:p("next",f)},null!=W?W:j,{children:S?(0,a.jsx)(E,(0,b.default)({},w.previousButtonIcon)):(0,a.jsx)(N,(0,b.default)({},w.nextButtonIcon))})),T&&(0,a.jsx)($,(0,b.default)({onClick:e=>{m(e,Math.max(0,Math.ceil(x/y)-1))},disabled:u||f>=Math.ceil(x/y)-1,"aria-label":p("last",f),title:p("last",f)},G,{children:S?(0,a.jsx)(L,(0,b.default)({},w.firstButtonIcon)):(0,a.jsx)(R,(0,b.default)({},w.lastButtonIcon))}))]}))});var ee=e.i(18104);function et(e){return(0,B.default)("MuiTablePagination",e)}let el=(0,S.default)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),ea=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],es=(0,P.default)(H.default,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),ei=(0,P.default)(O.default,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>(0,b.default)({[`& .${el.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${el.actions}`]:{flexShrink:0,marginLeft:20}})),en=(0,P.default)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),er=(0,P.default)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>(0,b.default)({},e.typography.body2,{flexShrink:0})),eo=(0,P.default)(U.default,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>(0,b.default)({[`& .${el.selectIcon}`]:t.selectIcon,[`& .${el.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${el.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),ed=(0,P.default)(G.default,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),ec=(0,P.default)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>(0,b.default)({},e.typography.body2,{flexShrink:0}));function eh({from:e,to:t,count:l}){return`${e}–${t} of ${-1!==l?l:`more than ${t}`}`}function ex(e){return`Go to ${e} page`}let eu=s.forwardRef(function(e,t){var i;let n,r=(0,A.useDefaultProps)({props:e,name:"MuiTablePagination"}),{ActionsComponent:o=Y,backIconButtonProps:d,className:c,colSpan:h,component:x=H.default,count:u,disabled:p=!1,getItemAriaLabel:j=ex,labelDisplayedRows:m=eh,labelRowsPerPage:C="Rows per page:",nextIconButtonProps:T,onPageChange:v,onRowsPerPageChange:w,page:P,rowsPerPage:S,rowsPerPageOptions:B=[10,25,50,100],SelectProps:I={},showFirstButton:k=!1,showLastButton:L=!1,slotProps:R={},slots:N={}}=r,E=(0,g.default)(r,ea),M=(e=>{let{classes:t}=e;return(0,y.default)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},et,t)})(r),z=null!=(i=null==R?void 0:R.select)?i:I,D=z.native?"option":ed;(x===H.default||"td"===x)&&(n=h||1e3);let $=(0,ee.default)(z.id),F=(0,ee.default)(z.labelId);return(0,a.jsx)(es,(0,b.default)({colSpan:n,ref:t,as:x,ownerState:r,className:(0,f.default)(M.root,c)},E,{children:(0,a.jsxs)(ei,{className:M.toolbar,children:[(0,a.jsx)(en,{className:M.spacer}),B.length>1&&(0,a.jsx)(er,{className:M.selectLabel,id:F,children:C}),B.length>1&&(0,a.jsx)(eo,(0,b.default)({variant:"standard"},!z.variant&&{input:l||(l=(0,a.jsx)(W.default,{}))},{value:S,onChange:w,id:$,labelId:F},z,{classes:(0,b.default)({},z.classes,{root:(0,f.default)(M.input,M.selectRoot,(z.classes||{}).root),select:(0,f.default)(M.select,(z.classes||{}).select),icon:(0,f.default)(M.selectIcon,(z.classes||{}).icon)}),disabled:p,children:B.map(e=>(0,s.createElement)(D,(0,b.default)({},!(0,_.default)(D)&&{ownerState:r},{className:M.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e))})),(0,a.jsx)(ec,{className:M.displayedRows,children:m({from:0===u?0:P*S+1,to:-1===u?(P+1)*S:-1===S?u:Math.min(u,(P+1)*S),count:-1===u?-1:u,page:P})}),(0,a.jsx)(o,{className:M.actions,backIconButtonProps:d,count:u,nextIconButtonProps:T,onPageChange:v,page:P,rowsPerPage:S,showFirstButton:k,showLastButton:L,slotProps:R.actions,slots:N.actions,getItemAriaLabel:j,disabled:p})]})}))});var ep=e.i(86012),ej=e.i(92297),em=e.i(20161),eg=e.i(21089),eb=e.i(52059),ef=e.i(1051),ey=e.i(62992),eC=e.i(83161),eT=e.i(47617),ev=e.i(39972),ew=e.i(37451),eP=e.i(9109),eS=e.i(37025),eB=e.i(15708),eI=e.i(10251),ek=e.i(83378),eA=e.i(29360),eL=e.i(34699),eR=e.i(26712),eN=e.i(95532),eE=e.i(94544),eM=e.i(85106),ez=e.i(98721),eD=e.i(13516),e$=e.i(62438),eF=e.i(24918),e_=e.i(20887),eW=e.i(21504),eG=e.i(15254),eU=e.i(13654),eH=e.i(33948),eO=e.i(18295),eq=e.i(92279),eJ=e.i(47379),eX=e.i(84579),eK=e.i(4591),eV=e.i(6909),eZ=e.i(64321),eQ=e.i(63640),eY=e.i(76497);let e0=["CRM","Analytics","Email Marketing","Project Management","Support Desk","Billing"];function e2({open:e,user:t,onClose:l,onSuccess:i,onError:r,availableClients:u}){let[p,g]=(0,s.useState)(0),[b,f]=(0,s.useState)(!1),[y,C]=(0,s.useState)(!1),[T,v]=(0,s.useState)({firstName:"",lastName:"",username:"",email:"",phone:"",zipcode:"",address:"",joiningDate:"",status:"active",isEmployee:!1,isAdmin:!1,isClient:!1,systemsConnected:[]}),[w,P]=(0,s.useState)([]),[S,B]=(0,s.useState)([]),[I,k]=(0,s.useState)([]),A=(0,eU.getBackendUrl)();(0,s.useEffect)(()=>{t&&e&&(v({firstName:t.first_name||"",lastName:t.last_name||"",username:t.username||"",email:t.email||"",phone:t.phone||"",zipcode:t.zipcode||"",address:t.address||"",joiningDate:t.joining_date||new Date().toISOString().split("T")[0],status:t.status||"active",isEmployee:t.is_employee||!1,isAdmin:t.is_admin||!1,isClient:t.is_client||!1,systemsConnected:[]}),g(0),L(t.id))},[t,e]);let L=async e=>{C(!0);try{let[t,l,a]=await Promise.all([fetch(`${A}/api/admin/users/${e}/clients`,{credentials:"include"}),fetch(`${A}/api/admin/users/${e}/tasks`,{credentials:"include"}),fetch(`${A}/api/admin/users/${e}/support-requests`,{credentials:"include"})]);if(t.ok){let e=await t.json();P(e.clients||[])}if(l.ok){let e=await l.json();B(e.tasks||[])}if(a.ok){let e=await a.json();k(e.requests||[])}}catch(e){console.error("Error fetching user data:",e)}finally{C(!1)}},R=async()=>{if(t){f(!0);try{let e=await fetch(`${A}/api/admin/users/${t.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:T.firstName,last_name:T.lastName,username:T.username,email:T.email,phone:T.phone,zipcode:T.zipcode,address:T.address,joining_date:T.joiningDate,status:T.status,is_admin:T.isAdmin,is_employee:T.isEmployee,is_client:T.isClient})});if(e.ok)i("User updated successfully"),l();else{let t=await e.json();r(t.error||"Failed to update user")}}catch(e){r("Failed to update user")}finally{f(!1)}}},N=async e=>{if(t)try{let l=await fetch(`${A}/api/admin/users/${t.id}/unassign-client/${e}`,{method:"DELETE",credentials:"include"});if(l.ok)i("Client unassigned successfully"),L(t.id);else{let e=await l.json();r(e.error||"Failed to unassign client")}}catch(e){r("Failed to unassign client")}};return t?(0,a.jsxs)(eH.Dialog,{open:e,onClose:l,maxWidth:"md",fullWidth:!0,children:[(0,a.jsxs)(eO.DialogTitle,{children:[(0,a.jsx)(o.Typography,{variant:"h6",fontWeight:600,children:"Edit User"}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",children:"Manage user settings, permissions, and assignments"})]}),(0,a.jsxs)(eq.DialogContent,{dividers:!0,children:[(0,a.jsx)(n.Box,{display:"flex",justifyContent:"center",mb:3,children:(0,a.jsxs)(n.Box,{position:"relative",children:[(0,a.jsx)(ey.Avatar,{src:t.profile_image,sx:{width:80,height:80},children:T.firstName?.[0]||t.username?.[0]}),(0,a.jsx)(ep.IconButton,{size:"small",sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:(0,a.jsx)(eY.default,{fontSize:"small"})})]})}),(0,a.jsxs)(d.Tabs,{value:p,onChange:(e,t)=>g(t),sx:{borderBottom:1,borderColor:"divider",mb:3},children:[(0,a.jsx)(c.Tab,{label:"Personal Details"}),(0,a.jsx)(c.Tab,{label:`Assigned Clients (${w.length})`}),(0,a.jsx)(c.Tab,{label:`Tasks (${S.length})`}),(0,a.jsx)(c.Tab,{label:`Support (${I.length})`})]}),0===p&&(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"subtitle2",fontWeight:600,mb:2,children:"Personal Information"}),(0,a.jsxs)(x.Grid,{container:!0,spacing:2,children:[(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"First Name",required:!0,value:T.firstName,onChange:e=>v({...T,firstName:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Last Name",required:!0,value:T.lastName,onChange:e=>v({...T,lastName:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Username",required:!0,value:T.username,onChange:e=>v({...T,username:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Email",required:!0,type:"email",value:T.email,onChange:e=>v({...T,email:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Phone",value:T.phone,onChange:e=>v({...T,phone:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:6,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Joining Date",type:"date",InputLabelProps:{shrink:!0},value:T.joiningDate,onChange:e=>v({...T,joiningDate:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:12,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Zip/Code",value:T.zipcode,onChange:e=>v({...T,zipcode:e.target.value})})}),(0,a.jsx)(x.Grid,{item:!0,xs:12,children:(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Address",multiline:!0,rows:2,value:T.address,onChange:e=>v({...T,address:e.target.value})})})]}),(0,a.jsx)(o.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Permissions"}),(0,a.jsxs)(eB.Stack,{spacing:2,children:[(0,a.jsx)(eX.FormControlLabel,{control:(0,a.jsx)(eK.Switch,{checked:T.isAdmin,onChange:e=>v({...T,isAdmin:e.target.checked})}),label:"Admin Access - Full system control and user management"}),(0,a.jsx)(eX.FormControlLabel,{control:(0,a.jsx)(eK.Switch,{checked:T.isEmployee,onChange:e=>v({...T,isEmployee:e.target.checked})}),label:"Employee Status - Can be assigned clients and tasks"}),(0,a.jsx)(eX.FormControlLabel,{control:(0,a.jsx)(eK.Switch,{checked:T.isClient,onChange:e=>v({...T,isClient:e.target.checked})}),label:"Client Status - External client with limited access"})]}),(0,a.jsx)(o.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Account Status"}),(0,a.jsxs)(eZ.RadioGroup,{row:!0,value:T.status,onChange:e=>v({...T,status:e.target.value}),children:[(0,a.jsx)(eX.FormControlLabel,{value:"active",control:(0,a.jsx)(eV.Radio,{}),label:"Active"}),(0,a.jsx)(eX.FormControlLabel,{value:"pending",control:(0,a.jsx)(eV.Radio,{}),label:"Pending"}),(0,a.jsx)(eX.FormControlLabel,{value:"reported",control:(0,a.jsx)(eV.Radio,{}),label:"Reported"}),(0,a.jsx)(eX.FormControlLabel,{value:"blocked",control:(0,a.jsx)(eV.Radio,{}),label:"Blocked"})]}),T.isClient&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Systems Connected"}),(0,a.jsx)(eQ.Autocomplete,{multiple:!0,options:e0,value:T.systemsConnected,onChange:(e,t)=>v({...T,systemsConnected:t}),renderInput:e=>(0,a.jsx)(m.TextField,{...e,label:"Select Systems"})})]})]}),1===p&&(0,a.jsx)(n.Box,{children:y?(0,a.jsx)(n.Box,{display:"flex",justifyContent:"center",py:4,children:(0,a.jsx)(eS.CircularProgress,{})}):0===w.length?(0,a.jsx)(eP.Alert,{severity:"info",children:"No clients assigned yet"}):(0,a.jsx)(eB.Stack,{spacing:1,children:w.map(e=>(0,a.jsxs)(h.Paper,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center","&:hover":{bgcolor:"action.hover"}},children:[(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"body2",fontWeight:500,children:e.name}),(0,a.jsxs)(o.Typography,{variant:"caption",color:"text.secondary",children:[e.company," • ",e.email]}),(0,a.jsx)(n.Box,{mt:.5,children:(0,a.jsx)(ef.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"default",sx:{textTransform:"capitalize"}})})]}),(0,a.jsx)(ep.IconButton,{size:"small",color:"error",onClick:()=>N(e.id),children:(0,a.jsx)(eE.default,{})})]},e.id))})}),2===p&&(0,a.jsx)(n.Box,{children:y?(0,a.jsx)(n.Box,{display:"flex",justifyContent:"center",py:4,children:(0,a.jsx)(eS.CircularProgress,{})}):0===S.length?(0,a.jsx)(eP.Alert,{severity:"info",children:"No tasks assigned"}):(0,a.jsx)(D.TableContainer,{children:(0,a.jsxs)(E.Table,{size:"small",children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{children:"Task"}),(0,a.jsx)(z.TableCell,{children:"Client"}),(0,a.jsx)(z.TableCell,{children:"Status"}),(0,a.jsx)(z.TableCell,{children:"Priority"}),(0,a.jsx)(z.TableCell,{children:"Due Date"})]})}),(0,a.jsx)(M.TableBody,{children:S.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsxs)(z.TableCell,{children:[(0,a.jsx)(o.Typography,{variant:"body2",fontWeight:500,children:e.title}),e.description&&(0,a.jsxs)(o.Typography,{variant:"caption",color:"text.secondary",children:[e.description.substring(0,50),"..."]})]}),(0,a.jsx)(z.TableCell,{children:e.client_name||"N/A"}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.status,size:"small"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.priority,size:"small",color:"high"===e.priority?"error":"medium"===e.priority?"warning":"default"})}),(0,a.jsx)(z.TableCell,{children:e.due_date?new Date(e.due_date).toLocaleDateString():"N/A"})]},e.id))})]})})}),3===p&&(0,a.jsx)(n.Box,{children:y?(0,a.jsx)(n.Box,{display:"flex",justifyContent:"center",py:4,children:(0,a.jsx)(eS.CircularProgress,{})}):0===I.length?(0,a.jsx)(eP.Alert,{severity:"info",children:"No support requests"}):(0,a.jsx)(D.TableContainer,{children:(0,a.jsxs)(E.Table,{size:"small",children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{children:"Subject"}),(0,a.jsx)(z.TableCell,{children:"Client"}),(0,a.jsx)(z.TableCell,{children:"Priority"}),(0,a.jsx)(z.TableCell,{children:"Status"}),(0,a.jsx)(z.TableCell,{children:"Created"})]})}),(0,a.jsx)(M.TableBody,{children:I.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",fontWeight:500,children:e.subject})}),(0,a.jsx)(z.TableCell,{children:e.client_name||"N/A"}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.priority,size:"small",color:"urgent"===e.priority?"error":"high"===e.priority?"warning":"default"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.status,size:"small"})}),(0,a.jsx)(z.TableCell,{children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})})]}),(0,a.jsxs)(eJ.DialogActions,{sx:{p:2},children:[(0,a.jsx)(j.Button,{onClick:l,disabled:b,children:"Cancel"}),(0,a.jsx)(j.Button,{variant:"contained",onClick:R,disabled:b,children:b?(0,a.jsx)(eS.CircularProgress,{size:24}):"Update User"})]})]}):null}var e1=e.i(8195);function e5(e){let{children:t,value:l,index:s,...i}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:l!==s,id:`crm-tabpanel-${s}`,"aria-labelledby":`crm-tab-${s}`,...i,children:l===s&&(0,a.jsx)(n.Box,{sx:{pt:3},children:t})})}function e6(){let e;(0,ek.useTheme)();let{user:t}=(0,eG.useAuth)(),[l,g]=(0,s.useState)(0),[b,f]=(0,s.useState)(!0),[y,C]=(0,s.useState)(null),[T,v]=(0,s.useState)(null),[w,P]=(0,s.useState)([]),[S,B]=(0,s.useState)([]),[I,k]=(0,s.useState)([]),[A,L]=(0,s.useState)(""),[R,_]=(0,s.useState)("all"),[W,G]=(0,s.useState)("all"),[U,H]=(0,s.useState)(0),[O,q]=(0,s.useState)(10),[J,X]=(0,s.useState)(!1),[K,V]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(null),[Y,ee]=(0,s.useState)(null),[et,el]=(0,s.useState)(null),[ea,es]=(0,s.useState)(null),ei=(0,eU.getBackendUrl)();(0,s.useEffect)(()=>{en()},[]),(0,s.useEffect)(()=>{if(y||T){let e=setTimeout(()=>{C(null),v(null)},5e3);return()=>clearTimeout(e)}},[y,T]);let en=async()=>{f(!0);try{await Promise.all([er(),eo(),ed()])}finally{f(!1)}},er=async()=>{try{let e=await fetch(`${ei}/api/admin/users`,{credentials:"include"});if(e.ok){let t=await e.json();P(t.users||[])}}catch(e){console.error("Error fetching users:",e)}},eo=async()=>{try{let e=await fetch(`${ei}/api/creative/clients`,{credentials:"include"});if(e.ok){let t=await e.json();B(t.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},ed=async()=>{try{let e=await fetch(`${ei}/api/shopify/customers`,{credentials:"include"});if(e.ok){let t=await e.json();k(t.customers||[])}else k([])}catch(e){console.error("Error fetching Shopify customers:",e),k([])}},ec=w.length,eh=S.filter(e=>"active"===e.status||"pending"===e.status).length,ex=S.filter(e=>"prospect"===e.status).length,eH=I.length;w.filter(e=>e.is_employee&&"active"===e.status).length;let eO=(e=A.toLowerCase(),0===l?w.filter(t=>t.username?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.first_name?.toLowerCase().includes(e)||t.last_name?.toLowerCase().includes(e)):1===l?S.filter(t=>{let l=t.name?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.company?.toLowerCase().includes(e),a="all"===R||t.status===R,s="all"===W||"client"===W&&("active"===t.status||"pending"===t.status)||"prospect"===W&&"prospect"===t.status||"lead"===W&&"prospect"===t.status;return l&&a&&s}):2===l?S.filter(t=>{let l=t.name?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.company?.toLowerCase().includes(e);return("prospect"===t.status||"pending"===t.status)&&l}):I.filter(t=>t.email?.toLowerCase().includes(e)||t.firstName?.toLowerCase().includes(e)||t.lastName?.toLowerCase().includes(e))),eq=eO.slice(U*O,U*O+O),eJ=(e,t,l)=>{el(e.currentTarget),es(l),"user"===l?Q(t):ee(t)},eX=()=>{el(null),es(null)},eK=async()=>{if("user"===ea&&Z)try{let e=await fetch(`${ei}/api/admin/users/${Z.id}`,{method:"DELETE",credentials:"include"});if(e.ok)C("User deleted successfully"),er();else{let t=await e.json();v(t.error||"Failed to delete user")}}catch(e){v("Failed to delete user")}else if("client"===ea&&Y)try{let e=await fetch(`${ei}/api/creative/clients/${Y.id}`,{method:"DELETE",credentials:"include"});if(e.ok)C("Client deleted successfully"),eo();else{let t=await e.json();v(t.error||"Failed to delete client")}}catch(e){v("Failed to delete client")}eX()},eV=async(e,t)=>{if("client"===ea&&Y)try{let e=await fetch(`${ei}/api/creative/clients/${Y.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(e.ok)C("Status updated successfully"),eo();else{let t=await e.json();v(t.error||"Failed to update status")}}catch(e){v("Failed to update status")}eX()},eZ=e=>{switch(e){case"active":return"success";case"pending":return"warning";case"prospect":return"info";case"blocked":return"error";default:return"default"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.default,{children:[(0,a.jsx)("title",{children:"CRM Dashboard - iShareHow Labs"}),(0,a.jsx)("meta",{name:"description",content:"Manage users, clients, prospects, and Shopify data"})]}),(0,a.jsx)(eW.default,{children:(0,a.jsx)(e_.default,{active:void 0,children:(0,a.jsxs)(r.Container,{maxWidth:"xl",sx:{py:4},children:[(0,a.jsxs)(n.Box,{sx:{mb:4},children:[(0,a.jsx)(o.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"CRM Dashboard"}),(0,a.jsx)(o.Typography,{variant:"body1",color:"text.secondary",children:"Manage users, clients, prospects, and Shopify data all in one place"})]}),(0,a.jsxs)(x.Grid,{container:!0,spacing:3,sx:{mb:4},children:[(0,a.jsx)(x.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(u.Card,{elevation:2,children:(0,a.jsx)(p.CardContent,{children:(0,a.jsxs)(eB.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,a.jsx)(ey.Avatar,{sx:{bgcolor:"primary.main",width:56,height:56},children:(0,a.jsx)(e$.default,{})}),(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"h4",fontWeight:700,children:ec}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",children:"Total Users"})]})]})})})}),(0,a.jsx)(x.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(u.Card,{elevation:2,children:(0,a.jsx)(p.CardContent,{children:(0,a.jsxs)(eB.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,a.jsx)(ey.Avatar,{sx:{bgcolor:"success.main",width:56,height:56},children:(0,a.jsx)(eM.default,{})}),(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"h4",fontWeight:700,children:eh}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",children:"Active Clients"})]})]})})})}),(0,a.jsx)(x.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(u.Card,{elevation:2,children:(0,a.jsx)(p.CardContent,{children:(0,a.jsxs)(eB.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,a.jsx)(ey.Avatar,{sx:{bgcolor:"info.main",width:56,height:56},children:(0,a.jsx)(ez.default,{})}),(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"h4",fontWeight:700,children:ex}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",children:"Prospects/Leads"})]})]})})})}),(0,a.jsx)(x.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(u.Card,{elevation:2,children:(0,a.jsx)(p.CardContent,{children:(0,a.jsxs)(eB.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,a.jsx)(ey.Avatar,{sx:{bgcolor:"warning.main",width:56,height:56},children:(0,a.jsx)(eD.default,{})}),(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"h4",fontWeight:700,children:eH}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",children:"Shopify Customers"})]})]})})})})]}),y&&(0,a.jsx)(eP.Alert,{severity:"success",sx:{mb:3},onClose:()=>C(null),children:y}),T&&(0,a.jsx)(eP.Alert,{severity:"error",sx:{mb:3},onClose:()=>v(null),children:T}),(0,a.jsxs)(h.Paper,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:[(0,a.jsx)(n.Box,{sx:{borderBottom:1,borderColor:"divider",px:2},children:(0,a.jsxs)(d.Tabs,{value:l,onChange:(e,t)=>{g(t),H(0),L(""),_("all"),G("all")},variant:"scrollable",scrollButtons:"auto",children:[(0,a.jsx)(c.Tab,{icon:(0,a.jsx)(e$.default,{}),iconPosition:"start",label:"Users & Employees",sx:{textTransform:"none",fontWeight:600}}),(0,a.jsx)(c.Tab,{icon:(0,a.jsx)(eM.default,{}),iconPosition:"start",label:"Clients & Customers",sx:{textTransform:"none",fontWeight:600}}),(0,a.jsx)(c.Tab,{icon:(0,a.jsx)(ez.default,{}),iconPosition:"start",label:"Prospects & Leads",sx:{textTransform:"none",fontWeight:600}}),(0,a.jsx)(c.Tab,{icon:(0,a.jsx)(eD.default,{}),iconPosition:"start",label:"Shopify Data",sx:{textTransform:"none",fontWeight:600}})]})}),(0,a.jsxs)(n.Box,{sx:{p:3},children:[(0,a.jsxs)(n.Box,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsx)(m.TextField,{placeholder:"Search...",value:A,onChange:e=>L(e.target.value),InputProps:{startAdornment:(0,a.jsx)(N,{position:"start",children:(0,a.jsx)(eA.default,{})})},sx:{flexGrow:1,maxWidth:400}}),(1===l||2===l)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eC.FormControl,{size:"small",sx:{minWidth:150},children:[(0,a.jsx)(eT.InputLabel,{children:"Status"}),(0,a.jsxs)(ev.Select,{value:R,label:"Status",onChange:e=>_(e.target.value),children:[(0,a.jsx)(em.MenuItem,{value:"all",children:"All Status"}),(0,a.jsx)(em.MenuItem,{value:"active",children:"Active"}),(0,a.jsx)(em.MenuItem,{value:"pending",children:"Pending"}),(0,a.jsx)(em.MenuItem,{value:"prospect",children:"Prospect"}),(0,a.jsx)(em.MenuItem,{value:"inactive",children:"Inactive"})]})]}),(0,a.jsxs)(eC.FormControl,{size:"small",sx:{minWidth:150},children:[(0,a.jsx)(eT.InputLabel,{children:"Type"}),(0,a.jsxs)(ev.Select,{value:W,label:"Type",onChange:e=>G(e.target.value),children:[(0,a.jsx)(em.MenuItem,{value:"all",children:"All Types"}),(0,a.jsx)(em.MenuItem,{value:"client",children:"Client"}),(0,a.jsx)(em.MenuItem,{value:"prospect",children:"Prospect"}),(0,a.jsx)(em.MenuItem,{value:"lead",children:"Lead"})]})]})]}),(0,a.jsx)(j.Button,{variant:"outlined",startIcon:(0,a.jsx)(eF.default,{}),onClick:en,sx:{textTransform:"none"},children:"Refresh"}),(1===l||2===l)&&(0,a.jsxs)(j.Button,{variant:"contained",startIcon:(0,a.jsx)(eL.default,{}),onClick:()=>X(!0),sx:{textTransform:"none"},children:["Add ",2===l?"Prospect":"Client"]})]}),(0,a.jsx)(e5,{value:l,index:0,children:b?(0,a.jsx)(n.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,a.jsx)(eS.CircularProgress,{})}):(0,a.jsxs)(D.TableContainer,{children:[(0,a.jsxs)(E.Table,{children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:"Profile"}),(0,a.jsx)(z.TableCell,{children:"Email & Username"}),(0,a.jsx)(z.TableCell,{children:"Role"}),(0,a.jsx)(z.TableCell,{children:"Status"}),(0,a.jsx)(z.TableCell,{children:"Date"}),(0,a.jsx)(z.TableCell,{align:"right",children:"Actions"})]})}),(0,a.jsx)(M.TableBody,{children:eq.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsxs)(n.Box,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,a.jsx)(ey.Avatar,{src:e.profile_image,sx:{width:40,height:40},children:e.first_name?.[0]||e.username?.[0]}),(0,a.jsxs)(n.Box,{children:[(0,a.jsxs)(o.Typography,{variant:"body2",fontWeight:500,children:[e.first_name," ",e.last_name]}),(0,a.jsxs)(o.Typography,{variant:"caption",color:"text.secondary",children:["#",e.id]})]})]})}),(0,a.jsxs)(z.TableCell,{children:[(0,a.jsx)(o.Typography,{variant:"body2",children:e.email}),(0,a.jsx)(o.Typography,{variant:"caption",color:"text.secondary",children:e.username})]}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.is_admin?"Admin":e.is_employee?"Employee":e.is_client?"Client":"User",size:"small",color:"primary",variant:"outlined"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.status||"Active",size:"small",color:eZ(e.status),sx:{textTransform:"capitalize"}})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})}),(0,a.jsx)(z.TableCell,{align:"right",children:(0,a.jsx)(ep.IconButton,{size:"small",onClick:t=>eJ(t,e,"user"),children:(0,a.jsx)(eR.default,{})})})]},e.id))})]}),(0,a.jsx)(eu,{rowsPerPageOptions:[5,10,25],component:"div",count:eO.length,rowsPerPage:O,page:U,onPageChange:(e,t)=>H(t),onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),H(0)}})]})}),(0,a.jsx)(e5,{value:l,index:1,children:b?(0,a.jsx)(n.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,a.jsx)(eS.CircularProgress,{})}):(0,a.jsxs)(D.TableContainer,{children:[(0,a.jsxs)(E.Table,{children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:"Company & Contact"}),(0,a.jsx)(z.TableCell,{children:"Email & Phone"}),(0,a.jsx)(z.TableCell,{children:"Status"}),(0,a.jsx)(z.TableCell,{children:"Tier"}),(0,a.jsx)(z.TableCell,{children:"Assigned To"}),(0,a.jsx)(z.TableCell,{children:"Date"}),(0,a.jsx)(z.TableCell,{align:"right",children:"Actions"})]})}),(0,a.jsx)(M.TableBody,{children:eq.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"body2",fontWeight:500,children:e.company||e.name}),(0,a.jsx)(o.Typography,{variant:"caption",color:"text.secondary",children:e.name})]})}),(0,a.jsxs)(z.TableCell,{children:[(0,a.jsx)(o.Typography,{variant:"body2",children:e.email}),(0,a.jsx)(o.Typography,{variant:"caption",color:"text.secondary",children:e.phone||"No phone"})]}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.status,size:"small",color:eZ(e.status),sx:{textTransform:"capitalize"}})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.tier||"N/A",size:"small",variant:"outlined"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.assignedEmployee||"Unassigned"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})}),(0,a.jsx)(z.TableCell,{align:"right",children:(0,a.jsx)(ep.IconButton,{size:"small",onClick:t=>eJ(t,e,"client"),children:(0,a.jsx)(eR.default,{})})})]},e.id))})]}),(0,a.jsx)(eu,{rowsPerPageOptions:[5,10,25],component:"div",count:eO.length,rowsPerPage:O,page:U,onPageChange:(e,t)=>H(t),onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),H(0)}})]})}),(0,a.jsx)(e5,{value:l,index:2,children:b?(0,a.jsx)(n.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,a.jsx)(eS.CircularProgress,{})}):(0,a.jsxs)(D.TableContainer,{children:[(0,a.jsxs)(E.Table,{children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:"Contact Info"}),(0,a.jsx)(z.TableCell,{children:"Company"}),(0,a.jsx)(z.TableCell,{children:"Status"}),(0,a.jsx)(z.TableCell,{children:"Source"}),(0,a.jsx)(z.TableCell,{children:"Date"}),(0,a.jsx)(z.TableCell,{align:"right",children:"Actions"})]})}),(0,a.jsx)(M.TableBody,{children:eq.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsxs)(n.Box,{children:[(0,a.jsx)(o.Typography,{variant:"body2",fontWeight:500,children:e.name}),(0,a.jsx)(o.Typography,{variant:"caption",color:"text.secondary",children:e.email})]})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.company||"N/A"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.status,size:"small",color:eZ(e.status),sx:{textTransform:"capitalize"}})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:"Demo Form",size:"small",variant:"outlined"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})}),(0,a.jsx)(z.TableCell,{align:"right",children:(0,a.jsx)(ep.IconButton,{size:"small",onClick:t=>eJ(t,e,"client"),children:(0,a.jsx)(eR.default,{})})})]},e.id))})]}),(0,a.jsx)(eu,{rowsPerPageOptions:[5,10,25],component:"div",count:eO.length,rowsPerPage:O,page:U,onPageChange:(e,t)=>H(t),onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),H(0)}})]})}),(0,a.jsx)(e5,{value:l,index:3,children:b?(0,a.jsx)(n.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,a.jsx)(eS.CircularProgress,{})}):0===I.length?(0,a.jsxs)(n.Box,{sx:{textAlign:"center",py:6},children:[(0,a.jsx)(eD.default,{sx:{fontSize:64,color:"text.secondary",mb:2,opacity:.5}}),(0,a.jsx)(o.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Shopify Data"}),(0,a.jsx)(o.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Shopify integration is not configured or no customers found."}),(0,a.jsx)(j.Button,{variant:"outlined",startIcon:(0,a.jsx)(eF.default,{}),onClick:ed,sx:{textTransform:"none"},children:"Refresh"})]}):(0,a.jsxs)(D.TableContainer,{children:[(0,a.jsxs)(E.Table,{children:[(0,a.jsx)($.TableHead,{children:(0,a.jsxs)(F.TableRow,{children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:"Customer"}),(0,a.jsx)(z.TableCell,{children:"Email"}),(0,a.jsx)(z.TableCell,{children:"Phone"}),(0,a.jsx)(z.TableCell,{children:"Total Spent"}),(0,a.jsx)(z.TableCell,{children:"Orders"}),(0,a.jsx)(z.TableCell,{children:"Date"}),(0,a.jsx)(z.TableCell,{align:"right",children:"Actions"})]})}),(0,a.jsx)(M.TableBody,{children:eq.map(e=>(0,a.jsxs)(F.TableRow,{hover:!0,children:[(0,a.jsx)(z.TableCell,{padding:"checkbox",children:(0,a.jsx)(ew.Checkbox,{})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(n.Box,{children:(0,a.jsxs)(o.Typography,{variant:"body2",fontWeight:500,children:[e.firstName," ",e.lastName]})})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.email})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.phone||"N/A"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsxs)(o.Typography,{variant:"body2",fontWeight:600,children:["$",e.totalSpent.toFixed(2)]})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(ef.Chip,{label:e.ordersCount,size:"small"})}),(0,a.jsx)(z.TableCell,{children:(0,a.jsx)(o.Typography,{variant:"body2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})}),(0,a.jsx)(z.TableCell,{align:"right",children:(0,a.jsx)(ep.IconButton,{size:"small",children:(0,a.jsx)(eR.default,{})})})]},e.id))})]}),(0,a.jsx)(eu,{rowsPerPageOptions:[5,10,25],component:"div",count:eO.length,rowsPerPage:O,page:U,onPageChange:(e,t)=>H(t),onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),H(0)}})]})})]})]}),(0,a.jsxs)(ej.Menu,{anchorEl:et,open:!!et,onClose:eX,children:[(0,a.jsxs)(em.MenuItem,{onClick:()=>{"user"===ea&&Z?V(!0):"client"===ea&&Y&&X(!0),eX()},children:[(0,a.jsx)(eg.ListItemIcon,{children:(0,a.jsx)(eN.default,{fontSize:"small"})}),(0,a.jsx)(eb.ListItemText,{children:"Edit"})]}),"client"===ea&&Y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(em.MenuItem,{onClick:()=>eV(Y,"active"),children:[(0,a.jsx)(eg.ListItemIcon,{children:(0,a.jsx)(ew.Checkbox,{checked:"active"===Y.status})}),(0,a.jsx)(eb.ListItemText,{children:"Mark as Active"})]}),(0,a.jsxs)(em.MenuItem,{onClick:()=>eV(Y,"prospect"),children:[(0,a.jsx)(eg.ListItemIcon,{children:(0,a.jsx)(ew.Checkbox,{checked:"prospect"===Y.status})}),(0,a.jsx)(eb.ListItemText,{children:"Mark as Prospect"})]}),(0,a.jsx)(eI.Divider,{})]}),(0,a.jsxs)(em.MenuItem,{onClick:eK,children:[(0,a.jsx)(eg.ListItemIcon,{children:(0,a.jsx)(eE.default,{fontSize:"small",color:"error"})}),(0,a.jsx)(eb.ListItemText,{children:"Delete"})]})]}),(0,a.jsx)(e1.default,{open:J,onClose:()=>{X(!1),eo()}}),(0,a.jsx)(e2,{open:K,user:Z,onClose:()=>{V(!1),Q(null),er()},onSuccess:C,onError:v,availableClients:S})]})})})]})}e.s(["default",()=>e6],57664)},47607,(e,t,l)=>{let a="/crm";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(57664)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);