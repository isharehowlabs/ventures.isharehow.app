(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58176,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart")},68213,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle")},93212,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-6 0h-4V4h4z"}),"Work")},76497,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)([(0,i.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,i.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},33918,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined")},7294,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment")},16203,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule")},59617,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList")},59096,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline")},78014,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"}),"HourglassEmpty")},926,(e,t,r)=>{"use strict";var a=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e.r(64800)),i=e.r(44855);r.default=(0,s.default)((0,i.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline")},57664,e=>{"use strict";var t,r,a,s=e.i(44855),i=e.i(58891),n=e.i(62865),l=e.i(83344),o=e.i(74614),d=e.i(72204),c=e.i(15915),x=e.i(32327),h=e.i(54385),u=e.i(65790),p=e.i(54704),g=e.i(45162),m=e.i(3430),y=e.i(75557),j=e.i(92378);e.i(96335);var f=e.i(80622),b=e.i(84933),v=e.i(81706),T=e.i(15127),C=e.i(18420),w=e.i(88795),S=e.i(68418),A=e.i(85760),I=e.i(95262),P=e.i(51480),k=e.i(13740);function B(e){return(0,k.default)("MuiInputAdornment",e)}let D=(0,P.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var L=e.i(96861);let E=["children","className","component","disablePointerEvents","disableTypography","position","variant"],R=(0,I.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`position${(0,C.default)(r.position)}`],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(({theme:e,ownerState:t})=>(0,b.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${D.positionStart}&:not(.${D.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),O=i.forwardRef(function(e,t){let a=(0,L.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:n,className:l,component:o="div",disablePointerEvents:d=!1,disableTypography:c=!1,position:x,variant:h}=a,u=(0,f.default)(a,E),p=(0,A.default)()||{},g=h;h&&p.variant,p&&!g&&(g=p.variant);let m=(0,b.default)({},a,{hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:d,position:x,variant:g}),y=(e=>{let{classes:t,disablePointerEvents:r,hiddenLabel:a,position:s,size:i,variant:n}=e,l={root:["root",r&&"disablePointerEvents",s&&`position${(0,C.default)(s)}`,n,a&&"hiddenLabel",i&&`size${(0,C.default)(i)}`]};return(0,T.default)(l,B,t)})(m);return(0,s.jsx)(S.default.Provider,{value:null,children:(0,s.jsx)(R,(0,b.default)({as:o,ownerState:m,className:(0,v.default)(y.root,l),ref:t},u,{children:"string"!=typeof n||c?(0,s.jsxs)(i.Fragment,{children:["start"===x?r||(r=(0,s.jsx)("span",{className:"notranslate",children:"​"})):null,n]}):(0,s.jsx)(w.default,{color:"text.secondary",children:n})}))})});var N=e.i(94367),M=e.i(87225),G=e.i(33932),$=e.i(63104),z=e.i(7656),W=e.i(50723),U=e.i(77072),F=e.i(48246),V=e.i(93703),_=e.i(95996),K=e.i(23913),H=e.i(15226),q=e.i(71880),X=e.i(76710),J=e.i(13216),Y=e.i(795),Z=e.i(7997),Q=e.i(35017);let ee=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],et=i.forwardRef(function(e,t){var r,a,i,n,l,o,d,c;let{backIconButtonProps:x,count:h,disabled:u=!1,getItemAriaLabel:p,nextIconButtonProps:g,onPageChange:m,page:y,rowsPerPage:j,showFirstButton:v,showLastButton:T,slots:C={},slotProps:w={}}=e,S=(0,f.default)(e,ee),A=(0,q.useRtl)(),I=null!=(r=C.firstButton)?r:Y.default,P=null!=(a=C.lastButton)?a:Y.default,k=null!=(i=C.nextButton)?i:Y.default,B=null!=(n=C.previousButton)?n:Y.default,D=null!=(l=C.firstButtonIcon)?l:Q.default,L=null!=(o=C.lastButtonIcon)?o:Z.default,E=null!=(d=C.nextButtonIcon)?d:J.default,R=null!=(c=C.previousButtonIcon)?c:X.default,O=A?P:I,N=A?k:B,M=A?B:k,G=A?I:P,$=A?w.lastButton:w.firstButton,z=A?w.nextButton:w.previousButton,W=A?w.previousButton:w.nextButton,U=A?w.firstButton:w.lastButton;return(0,s.jsxs)("div",(0,b.default)({ref:t},S,{children:[v&&(0,s.jsx)(O,(0,b.default)({onClick:e=>{m(e,0)},disabled:u||0===y,"aria-label":p("first",y),title:p("first",y)},$,{children:A?(0,s.jsx)(L,(0,b.default)({},w.lastButtonIcon)):(0,s.jsx)(D,(0,b.default)({},w.firstButtonIcon))})),(0,s.jsx)(N,(0,b.default)({onClick:e=>{m(e,y-1)},disabled:u||0===y,color:"inherit","aria-label":p("previous",y),title:p("previous",y)},null!=z?z:x,{children:A?(0,s.jsx)(E,(0,b.default)({},w.nextButtonIcon)):(0,s.jsx)(R,(0,b.default)({},w.previousButtonIcon))})),(0,s.jsx)(M,(0,b.default)({onClick:e=>{m(e,y+1)},disabled:u||-1!==h&&y>=Math.ceil(h/j)-1,color:"inherit","aria-label":p("next",y),title:p("next",y)},null!=W?W:g,{children:A?(0,s.jsx)(R,(0,b.default)({},w.previousButtonIcon)):(0,s.jsx)(E,(0,b.default)({},w.nextButtonIcon))})),T&&(0,s.jsx)(G,(0,b.default)({onClick:e=>{m(e,Math.max(0,Math.ceil(h/j)-1))},disabled:u||y>=Math.ceil(h/j)-1,"aria-label":p("last",y),title:p("last",y)},U,{children:A?(0,s.jsx)(D,(0,b.default)({},w.firstButtonIcon)):(0,s.jsx)(L,(0,b.default)({},w.lastButtonIcon))}))]}))});var er=e.i(18104);function ea(e){return(0,k.default)("MuiTablePagination",e)}let es=(0,P.default)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),ei=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],en=(0,I.default)(K.default,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),el=(0,I.default)(H.default,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>(0,b.default)({[`& .${es.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${es.actions}`]:{flexShrink:0,marginLeft:20}})),eo=(0,I.default)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),ed=(0,I.default)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>(0,b.default)({},e.typography.body2,{flexShrink:0})),ec=(0,I.default)(_.default,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>(0,b.default)({[`& .${es.selectIcon}`]:t.selectIcon,[`& .${es.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${es.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),ex=(0,I.default)(V.default,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),eh=(0,I.default)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>(0,b.default)({},e.typography.body2,{flexShrink:0}));function eu({from:e,to:t,count:r}){return`${e}–${t} of ${-1!==r?r:`more than ${t}`}`}function ep(e){return`Go to ${e} page`}let eg=i.forwardRef(function(e,t){var r;let n,l=(0,L.useDefaultProps)({props:e,name:"MuiTablePagination"}),{ActionsComponent:o=et,backIconButtonProps:d,className:c,colSpan:x,component:h=K.default,count:u,disabled:p=!1,getItemAriaLabel:g=ep,labelDisplayedRows:m=eu,labelRowsPerPage:y="Rows per page:",nextIconButtonProps:j,onPageChange:C,onRowsPerPageChange:w,page:S,rowsPerPage:A,rowsPerPageOptions:I=[10,25,50,100],SelectProps:P={},showFirstButton:k=!1,showLastButton:B=!1,slotProps:D={},slots:E={}}=l,R=(0,f.default)(l,ei),O=(e=>{let{classes:t}=e;return(0,T.default)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},ea,t)})(l),N=null!=(r=null==D?void 0:D.select)?r:P,M=N.native?"option":ex;(h===K.default||"td"===h)&&(n=x||1e3);let G=(0,er.default)(N.id),$=(0,er.default)(N.labelId);return(0,s.jsx)(en,(0,b.default)({colSpan:n,ref:t,as:h,ownerState:l,className:(0,v.default)(O.root,c)},R,{children:(0,s.jsxs)(el,{className:O.toolbar,children:[(0,s.jsx)(eo,{className:O.spacer}),I.length>1&&(0,s.jsx)(ed,{className:O.selectLabel,id:$,children:y}),I.length>1&&(0,s.jsx)(ec,(0,b.default)({variant:"standard"},!N.variant&&{input:a||(a=(0,s.jsx)(F.default,{}))},{value:A,onChange:w,id:G,labelId:$},N,{classes:(0,b.default)({},N.classes,{root:(0,v.default)(O.input,O.selectRoot,(N.classes||{}).root),select:(0,v.default)(O.select,(N.classes||{}).select),icon:(0,v.default)(O.selectIcon,(N.classes||{}).icon)}),disabled:p,children:I.map(e=>(0,i.createElement)(M,(0,b.default)({},!(0,U.default)(M)&&{ownerState:l},{className:O.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e))})),(0,s.jsx)(eh,{className:O.displayedRows,children:m({from:0===u?0:S*A+1,to:-1===u?(S+1)*A:-1===A?u:Math.min(u,(S+1)*A),count:-1===u?-1:u,page:S})}),(0,s.jsx)(o,{className:O.actions,backIconButtonProps:d,count:u,nextIconButtonProps:j,onPageChange:C,page:S,rowsPerPage:A,showFirstButton:k,showLastButton:B,slotProps:D.actions,slots:E.actions,getItemAriaLabel:g,disabled:p})]})}))});var em=e.i(86012),ey=e.i(92297),ej=e.i(20161),ef=e.i(21089),eb=e.i(59129),ev=e.i(1051),eT=e.i(62992),eC=e.i(83161),ew=e.i(47617),eS=e.i(39972),eA=e.i(37451),eI=e.i(9109),eP=e.i(37025),ek=e.i(15708),eB=e.i(10251),eD=e.i(83378),eL=e.i(62555),eE=e.i(29360),eR=e.i(34699),eO=e.i(26712),eN=e.i(95532),eM=e.i(94544),eG=e.i(85106),e$=e.i(98721),ez=e.i(13516),eW=e.i(62438),eU=e.i(31862),eF=e.i(24918),eV=e.i(58176),e_=e.i(72695),eK=e.i(9124),eH=e.i(68213),eq=e.i(93212),eX=e.i(79507),eJ=e.i(71088),eY=e.i(25411),eZ=e.i(25806),eQ=e.i(19148),e0=e.i(40382),e1=e.i(612),e2=e.i(21310),e4=e.i(79539),e5=e.i(79728),e3=e.i(61257),e6=e.i(34022),e8=e.i(75684),e9=e.i(58213),e7=e.i(68791);function te(e){var t=(0,e9.useAppDispatch)();return(0,i.useEffect)(()=>{t((0,e7.updatePolarOptions)(e))},[t,e]),null}var tt=e.i(18779),tr=e.i(92736),ta=["layout"];function ts(){return(ts=Object.assign.bind()).apply(null,arguments)}var ti={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},tn=(0,i.forwardRef)(function(e,t){var r,a=(0,tr.resolveDefaultProps)(e.categoricalChartProps,ti),{layout:s}=a,n=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(a,ta),{chartName:l,defaultTooltipEventType:o,validateTooltipEventTypes:d,tooltipPayloadSearcher:c}=e;return i.createElement(e5.RechartsStoreProvider,{preloadedState:{options:{chartName:l,defaultTooltipEventType:o,validateTooltipEventTypes:d,tooltipPayloadSearcher:c,eventEmitter:void 0}},reduxStoreName:null!=(r=a.id)?r:l},i.createElement(e3.ChartDataContextProvider,{chartData:a.data}),i.createElement(e6.ReportMainChartProps,{layout:s,margin:a.margin}),i.createElement(e8.ReportChartProps,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),i.createElement(te,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),i.createElement(tt.CategoricalChart,ts({},n,{ref:t})))});function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var td=["item"],tc=to(to({},ti),{},{layout:"centric",startAngle:0,endAngle:360}),tx=(0,i.forwardRef)((e,t)=>{var r=(0,tr.resolveDefaultProps)(e,tc);return i.createElement(tn,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:td,tooltipPayloadSearcher:e4.arrayTooltipSearcher,categoricalChartProps:r,ref:t})}),th=e.i(3412),tu=e.i(35878),tp=e.i(60924),tg=e.i(57679),tm=e.i(41888),ty=e.i(26607),tj=e.i(94418),tf=e.i(52492),tb=e.i(6603),tv=e.i(48747),tT=e=>e.graphicalItems.polarItems,tC=(0,tu.createSelector)([tf.pickAxisType,tb.pickAxisId],ty.itemAxisPredicate),tw=(0,tu.createSelector)([tT,ty.selectBaseAxis,tC],ty.combineGraphicalItemsSettings),tS=(0,tu.createSelector)([tw],ty.combineGraphicalItemsData),tA=(0,tu.createSelector)([tS,tp.selectChartDataAndAlwaysIgnoreIndexes],ty.combineDisplayedData),tI=(0,tu.createSelector)([tA,ty.selectBaseAxis,tw],ty.combineAppliedValues);(0,tu.createSelector)([tA,ty.selectBaseAxis,tw],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var a;return{value:(0,tm.getValueByDataKey)(e,null!=(a=t.dataKey)?a:r.dataKey),errorDomain:[]}})).filter(Boolean):(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:(0,tm.getValueByDataKey)(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var tP=()=>void 0,tk=(0,tu.createSelector)([tA,ty.selectBaseAxis,tw,ty.selectAllErrorBarSettings,tf.pickAxisType],ty.combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),tB=(0,tu.createSelector)([ty.selectBaseAxis,ty.selectDomainDefinition,ty.selectDomainFromUserPreference,tP,tk,tP,tj.selectChartLayout,tf.pickAxisType],ty.combineNumericalDomain),tD=(0,tu.createSelector)([ty.selectBaseAxis,tj.selectChartLayout,tA,tI,tv.selectStackOffsetType,tf.pickAxisType,tB],ty.combineAxisDomain),tL=(0,tu.createSelector)([tD,ty.selectBaseAxis,ty.selectRealScaleType],ty.combineNiceTicks);function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,tu.createSelector)([ty.selectBaseAxis,tD,tL,tf.pickAxisType],ty.combineAxisDomainWithNiceTicks);var tO=(0,tu.createSelector)([tT,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),tN=[],tM=(e,t,r)=>(null==r?void 0:r.length)===0?tN:r,tG=(0,tu.createSelector)([tp.selectChartDataAndAlwaysIgnoreIndexes,tO,tM],(e,t,r)=>{var a,{chartData:s}=e;if(null!=t&&((a=(null==t?void 0:t.data)!=null&&t.data.length>0?t.data:s)&&a.length||null==r||(a=r.map(e=>tR(tR({},t.presentationProps),e.props))),null!=a))return a}),t$=(0,tu.createSelector)([tG,tO,tM],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,a)=>{var s,i,n=(0,tm.getValueByDataKey)(e,t.nameKey,t.name);return i=null!=r&&null!=(s=r[a])&&null!=(s=s.props)&&s.fill?r[a].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:(0,tm.getTooltipNameProp)(n,t.dataKey),color:i,payload:e,type:t.legendType}})}),tz=(0,tu.createSelector)([tG,tO,tM,tg.selectChartOffsetInternal],(e,t,r,a)=>{if(null!=t&&null!=e)return function(e){var t,r,a,{pieSettings:s,displayedData:i,cells:n,offset:l}=e,{cornerRadius:o,startAngle:d,endAngle:c,dataKey:x,nameKey:h,tooltipType:u}=s,p=Math.abs(s.minAngle),g=(0,tH.mathSign)(c-d)*Math.min(Math.abs(c-d),360),m=Math.abs(g),y=i.length<=1?0:null!=(t=s.paddingAngle)?t:0,j=i.filter(e=>0!==(0,tm.getValueByDataKey)(e,x,0)).length,f=m-j*p-(m>=360?j:j-1)*y,b=i.reduce((e,t)=>{var r=(0,tm.getValueByDataKey)(t,x,0);return e+((0,tH.isNumber)(r)?r:0)},0);return b>0&&(r=i.map((e,t)=>{var r,i=(0,tm.getValueByDataKey)(e,x,0),c=(0,tm.getValueByDataKey)(e,h,t),m=((e,t,r)=>{var a,{top:s,left:i,width:n,height:l}=t,o=(0,tK.getMaxRadius)(n,l),d=i+(0,tH.getPercentValue)(e.cx,n,n/2),c=s+(0,tH.getPercentValue)(e.cy,l,l/2),x=(0,tH.getPercentValue)(e.innerRadius,o,0);return{cx:d,cy:c,innerRadius:x,outerRadius:(a=e.outerRadius,"function"==typeof a?(0,tH.getPercentValue)(a(r),o,.8*o):(0,tH.getPercentValue)(a,o,.8*o)),maxRadius:e.maxRadius||Math.sqrt(n*n+l*l)/2}})(s,l,e),j=((0,tH.isNumber)(i)?i:0)/b,v=rs(rs({},e),n&&n[t]&&n[t].props),T=(r=t?a.endAngle+(0,tH.mathSign)(g)*y*(0!==i):d)+(0,tH.mathSign)(g)*((0!==i?p:0)+j*f),C=(r+T)/2,w=(m.innerRadius+m.outerRadius)/2,S=[{name:c,value:i,payload:v,dataKey:x,type:u}],A=(0,tK.polarToCartesian)(m.cx,m.cy,w,C);return a=rs(rs(rs(rs({},s.presentationProps),{},{percent:j,cornerRadius:"string"==typeof o?parseFloat(o):o,name:c,tooltipPayload:S,midAngle:C,middleRadius:w,tooltipPosition:A},v),m),{},{value:i,dataKey:x,startAngle:r,endAngle:T,payload:v,paddingAngle:(0,tH.mathSign)(g)*y})})),r}({offset:a,pieSettings:t,displayedData:e,cells:r})}),tW=e.i(28185),tU=e.i(77958),tF=e.i(81335),tV=e.i(84309),t_=e.i(93589),tK=e.i(72566),tH=e.i(35806),tq=e.i(68721),tX=e.i(95626),tJ=e.i(67892),tY=e.i(37538),tZ=e.i(2321),tQ=e.i(54364),t0=e.i(75583),t1=e.i(79823),t2=e.i(3142),t4=e.i(59271),t5=e.i(95584),t3=e.i(67438),t6=e.i(41184),t8=e.i(30193),t9=e.i(93941),t7=["key"],re=["onMouseEnter","onClick","onMouseLeave"],rt=["id"],rr=["id"];function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ri(){return(ri=Object.assign.bind()).apply(null,arguments)}function rn(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rl(e){var t=(0,i.useMemo)(()=>(0,t_.findAllByType)(e.children,tV.Cell),[e.children]),r=(0,e9.useAppSelector)(r=>t$(r,e.id,t));return null==r?null:i.createElement(tQ.SetPolarLegendPayload,{legendPayload:r})}var ro=i.memo(e=>{var{dataKey:t,nameKey:r,sectors:a,stroke:s,strokeWidth:n,fill:l,name:o,hide:d,tooltipType:c}=e,x={dataDefinedOnItem:a.map(e=>e.tooltipPayload),positions:a.map(e=>e.tooltipPosition),settings:{stroke:s,strokeWidth:n,fill:l,dataKey:t,nameKey:r,name:(0,tm.getTooltipNameProp)(o,t),hide:d,type:c,color:l,unit:""}};return i.createElement(tY.SetTooltipEntrySettings,{tooltipEntrySettings:x})});function rd(e){var{sectors:t,props:r,showLabels:a}=e,{label:s,labelLine:n,dataKey:l}=r;if(!a||!s||!t)return null;var o=(0,t5.svgPropertiesNoEvents)(r),d=(0,t5.svgPropertiesNoEventsFromUnknown)(s),c=(0,t5.svgPropertiesNoEventsFromUnknown)(n),x="object"==typeof s&&"offsetRadius"in s&&"number"==typeof s.offsetRadius&&s.offsetRadius||20,h=t.map((e,t)=>{var r,a,h=(e.startAngle+e.endAngle)/2,u=(0,tK.polarToCartesian)(e.cx,e.cy,e.outerRadius+x,h),p=rs(rs(rs(rs({},o),e),{},{stroke:"none"},d),{},{index:t,textAnchor:(r=u.x)>(a=e.cx)?"start":r<a?"end":"middle"},u),g=rs(rs(rs(rs({},o),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[(0,tK.polarToCartesian)(e.cx,e.cy,e.outerRadius,h),u],key:"line"});return i.createElement(t8.ZIndexLayer,{zIndex:t9.DefaultZIndexes.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},i.createElement(tW.Layer,null,n&&((e,t)=>{if(i.isValidElement(e))return i.cloneElement(e,t);if("function"==typeof e)return e(t);var r=(0,v.clsx)("recharts-pie-label-line","boolean"!=typeof e?e.className:""),{key:a}=t,s=rn(t,t7);return i.createElement(tU.Curve,ri({},s,{type:"linear",className:r}))})(n,g),((e,t,r)=>{if(i.isValidElement(e))return i.cloneElement(e,t);var a=r;if("function"==typeof e&&(a=e(t),i.isValidElement(a)))return a;var s=(0,v.clsx)("recharts-pie-label-text",e&&"object"==typeof e&&"className"in e&&"string"==typeof e.className?e.className:"");return i.createElement(tF.Text,ri({},t,{alignmentBaseline:"middle",className:s}),a)})(s,p,(0,tm.getValueByDataKey)(e,l))))});return i.createElement(tW.Layer,{className:"recharts-pie-labels"},h)}function rc(e){var{sectors:t,props:r,showLabels:a}=e,{label:s}=r;return"object"==typeof s&&null!=s&&"position"in s?i.createElement(t6.LabelListFromLabelProp,{label:s}):i.createElement(rd,{sectors:t,props:r,showLabels:a})}function rx(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:s,shape:n,id:l}=e,o=(0,e9.useAppSelector)(tZ.selectActiveTooltipIndex),d=(0,e9.useAppSelector)(tZ.selectActiveTooltipDataKey),c=(0,e9.useAppSelector)(tZ.selectActiveTooltipGraphicalItemId),{onMouseEnter:x,onClick:h,onMouseLeave:u}=s,p=rn(s,re),g=(0,tJ.useMouseEnterItemDispatch)(x,s.dataKey,l),m=(0,tJ.useMouseLeaveItemDispatch)(u),y=(0,tJ.useMouseClickItemDispatch)(h,s.dataKey,l);return null==t||0===t.length?null:i.createElement(i.Fragment,null,t.map((e,x)=>{if((null==e?void 0:e.startAngle)===0&&(null==e?void 0:e.endAngle)===0&&1!==t.length)return null;var h=null==c||c===l,u=String(x)===o&&(null==d||s.dataKey===d)&&h,j=r&&u?r:o?a:null,f=rs(rs({},e),{},{stroke:e.stroke,tabIndex:-1,[t0.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:x,[t0.DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:s.dataKey});return i.createElement(tW.Layer,ri({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(x),tabIndex:-1,className:"recharts-pie-sector"},(0,tq.adaptEventsOfChild)(p,e,x),{onMouseEnter:g(e,x),onMouseLeave:m(e,x),onClick:y(e,x)}),i.createElement(tX.Shape,ri({option:null!=n?n:j,index:x,shapeType:"sector",isActive:u},f)))}))}function rh(e){var{showLabels:t,sectors:r,children:a}=e,s=(0,i.useMemo)(()=>t&&r?r.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[r,t]);return i.createElement(t6.PolarLabelListContextProvider,{value:t?s:void 0},a)}function ru(e){var{props:t,previousSectorsRef:r,id:a}=e,{sectors:s,isAnimationActive:n,animationBegin:l,animationDuration:o,animationEasing:d,activeShape:c,inactiveShape:x,onAnimationStart:h,onAnimationEnd:u}=t,p=(0,t1.useAnimationId)(t,"recharts-pie-"),g=r.current,[m,y]=(0,i.useState)(!1),j=(0,i.useCallback)(()=>{"function"==typeof u&&u(),y(!1)},[u]),f=(0,i.useCallback)(()=>{"function"==typeof h&&h(),y(!0)},[h]);return i.createElement(rh,{showLabels:!m,sectors:s},i.createElement(t3.JavascriptAnimate,{animationId:p,begin:l,duration:o,isActive:n,easing:d,onAnimationStart:f,onAnimationEnd:j,key:p},e=>{var n=[],l=s&&s[0],o=null==l?void 0:l.startAngle;return null==s||s.forEach((t,r)=>{var a=g&&g[r],s=r>0?(0,th.default)(t,"paddingAngle",0):0;if(a){var i=(0,tH.interpolate)(a.endAngle-a.startAngle,t.endAngle-t.startAngle,e),l=rs(rs({},t),{},{startAngle:o+s,endAngle:o+i+s});n.push(l),o=l.endAngle}else{var{endAngle:d,startAngle:c}=t,x=(0,tH.interpolate)(0,d-c,e),h=rs(rs({},t),{},{startAngle:o+s,endAngle:o+x+s});n.push(h),o=h.endAngle}}),r.current=n,i.createElement(tW.Layer,null,i.createElement(rx,{sectors:n,activeShape:c,inactiveShape:x,allOtherPieProps:t,shape:t.shape,id:a}))}),i.createElement(rc,{showLabels:!m,sectors:s,props:t}),t.children)}var rp={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:t9.DefaultZIndexes.area};function rg(e){var{id:t}=e,r=rn(e,rt),{hide:a,className:s,rootTabIndex:n}=e,l=(0,i.useMemo)(()=>(0,t_.findAllByType)(e.children,tV.Cell),[e.children]),o=(0,e9.useAppSelector)(e=>tz(e,t,l)),d=(0,i.useRef)(null),c=(0,v.clsx)("recharts-pie",s);return a||null==o?(d.current=null,i.createElement(tW.Layer,{tabIndex:n,className:c})):i.createElement(t8.ZIndexLayer,{zIndex:e.zIndex},i.createElement(ro,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),i.createElement(tW.Layer,{tabIndex:n,className:c},i.createElement(ru,{props:rs(rs({},r),{},{sectors:o}),previousSectorsRef:d,id:t})))}function rm(e){var t=(0,tr.resolveDefaultProps)(e,rp),{id:r}=t,a=rn(t,rr),s=(0,t5.svgPropertiesNoEvents)(a);return i.createElement(t2.RegisterGraphicalItemId,{id:r,type:"pie"},e=>i.createElement(i.Fragment,null,i.createElement(t4.SetPolarGraphicalItem,{type:"pie",id:e,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),i.createElement(rl,ri({},a,{id:e})),i.createElement(rg,ri({},a,{id:e}))))}rm.displayName="Pie";var ry=e.i(20887),rj=e.i(21504),rf=e.i(15254),rb=e.i(13654),rv=e.i(33948),rT=e.i(18295),rC=e.i(92279),rw=e.i(47379),rS=e.i(84579),rA=e.i(6909),rI=e.i(64321),rP=e.i(76497);let rk=[{value:"subscriber",label:"Subscriber"},{value:"client",label:"Client"},{value:"employee",label:"Employee"},{value:"admin",label:"Admin"}];function rB({open:e,user:t,onClose:r,onSuccess:a,onError:n,availableClients:l}){let[d,g]=(0,i.useState)(0),[m,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)(!1),[T,C]=(0,i.useState)({firstName:"",lastName:"",username:"",email:"",phone:"",zipcode:"",address:"",joiningDate:"",status:"active",isEmployee:!1,isAdmin:!1,isClient:!1,userType:"subscriber"}),[w,S]=(0,i.useState)([]),[A,I]=(0,i.useState)([]),[P,k]=(0,i.useState)([]),B=(0,rb.getBackendUrl)();(0,i.useEffect)(()=>{if(t&&e){let e="subscriber";t.is_admin?e="admin":t.is_employee?e="employee":t.is_client&&(e="client"),C({firstName:t.first_name||"",lastName:t.last_name||"",username:t.username||"",email:t.email||"",phone:t.phone||"",zipcode:t.zipcode||"",address:t.address||"",joiningDate:t.joining_date||new Date().toISOString().split("T")[0],status:t.status||"active",isEmployee:t.is_employee||!1,isAdmin:t.is_admin||!1,isClient:t.is_client||!1,userType:e}),g(0),D(t.id)}},[t,e]);let D=async e=>{v(!0);try{let[t,r,a]=await Promise.all([fetch(`${B}/api/admin/users/${e}/clients`,{credentials:"include"}),fetch(`${B}/api/admin/users/${e}/tasks`,{credentials:"include"}),fetch(`${B}/api/admin/users/${e}/support-requests`,{credentials:"include"})]);if(t.ok){let e=await t.json();S(e.clients||[])}if(r.ok){let e=await r.json();I(e.tasks||[])}if(a.ok){let e=await a.json();k(e.requests||[])}}catch(e){console.error("Error fetching user data:",e)}finally{v(!1)}},L=async()=>{if(!t)return;let e="admin"===T.userType,s="employee"===T.userType||"admin"===T.userType,i="client"===T.userType;f(!0);try{let l=await fetch(`${B}/api/admin/users/${t.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:T.firstName,last_name:T.lastName,username:T.username,email:T.email,phone:T.phone,zipcode:T.zipcode,address:T.address,joining_date:T.joiningDate,status:T.status,is_admin:e,is_employee:s,is_client:i})});if(l.ok)a("User updated successfully"),r();else{let e=await l.json();n(e.error||"Failed to update user")}}catch(e){n("Failed to update user")}finally{f(!1)}},E=async e=>{if(t)try{let r=await fetch(`${B}/api/admin/users/${t.id}/unassign-client/${e}`,{method:"DELETE",credentials:"include"});if(r.ok)a("Client unassigned successfully"),D(t.id);else{let e=await r.json();n(e.error||"Failed to unassign client")}}catch(e){n("Failed to unassign client")}};return t?(0,s.jsxs)(rv.Dialog,{open:e,onClose:r,maxWidth:"md",fullWidth:!0,children:[(0,s.jsxs)(rT.DialogTitle,{children:[(0,s.jsx)(c.Typography,{variant:"h6",fontWeight:600,children:"Edit User"}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Manage user settings, permissions, and assignments"})]}),(0,s.jsxs)(rC.DialogContent,{dividers:!0,children:[(0,s.jsx)(o.Box,{display:"flex",justifyContent:"center",mb:3,children:(0,s.jsxs)(o.Box,{position:"relative",children:[(0,s.jsx)(eT.Avatar,{src:t.profile_image,sx:{width:80,height:80},children:T.firstName?.[0]||t.username?.[0]}),(0,s.jsx)(em.IconButton,{size:"small",sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:(0,s.jsx)(rP.default,{fontSize:"small"})})]})}),(0,s.jsxs)(x.Tabs,{value:d,onChange:(e,t)=>g(t),sx:{borderBottom:1,borderColor:"divider",mb:3},children:[(0,s.jsx)(h.Tab,{label:"Personal Details"}),(0,s.jsx)(h.Tab,{label:`Assigned Clients (${w.length})`}),(0,s.jsx)(h.Tab,{label:`Tasks (${A.length})`}),(0,s.jsx)(h.Tab,{label:`Support (${P.length})`})]}),0===d&&(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,mb:2,children:"Personal Information"}),(0,s.jsxs)(p.Grid,{container:!0,spacing:2,children:[(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"First Name",required:!0,value:T.firstName,onChange:e=>C({...T,firstName:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Last Name",required:!0,value:T.lastName,onChange:e=>C({...T,lastName:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Username",required:!0,value:T.username,onChange:e=>C({...T,username:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Email",required:!0,type:"email",value:T.email,onChange:e=>C({...T,email:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Phone",value:T.phone,onChange:e=>C({...T,phone:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Joining Date",type:"date",InputLabelProps:{shrink:!0},value:T.joiningDate,onChange:e=>C({...T,joiningDate:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Zip/Code",value:T.zipcode,onChange:e=>C({...T,zipcode:e.target.value})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Address",multiline:!0,rows:2,value:T.address,onChange:e=>C({...T,address:e.target.value})})})]}),(0,s.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"User Type"}),(0,s.jsxs)(eC.FormControl,{fullWidth:!0,children:[(0,s.jsx)(ew.InputLabel,{children:"Select User Type"}),(0,s.jsx)(eS.Select,{value:T.userType,label:"Select User Type",onChange:e=>{var t;return t=e.target.value,void C({...T,userType:t})},children:rk.map(e=>(0,s.jsx)(ej.MenuItem,{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["admin"===T.userType&&"Full system control and user management","employee"===T.userType&&"Can be assigned clients and tasks","client"===T.userType&&"External client with limited access","subscriber"===T.userType&&"Basic subscriber access"]}),(0,s.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Account Status"}),(0,s.jsxs)(rI.RadioGroup,{row:!0,value:T.status,onChange:e=>C({...T,status:e.target.value}),children:[(0,s.jsx)(rS.FormControlLabel,{value:"active",control:(0,s.jsx)(rA.Radio,{}),label:"Active"}),(0,s.jsx)(rS.FormControlLabel,{value:"pending",control:(0,s.jsx)(rA.Radio,{}),label:"Pending"}),(0,s.jsx)(rS.FormControlLabel,{value:"reported",control:(0,s.jsx)(rA.Radio,{}),label:"Reported"}),(0,s.jsx)(rS.FormControlLabel,{value:"blocked",control:(0,s.jsx)(rA.Radio,{}),label:"Blocked"})]})]}),1===d&&(0,s.jsx)(o.Box,{children:b?(0,s.jsx)(o.Box,{display:"flex",justifyContent:"center",py:4,children:(0,s.jsx)(eP.CircularProgress,{})}):0===w.length?(0,s.jsx)(eI.Alert,{severity:"info",children:"No clients assigned yet"}):(0,s.jsx)(ek.Stack,{spacing:1,children:w.map(e=>(0,s.jsxs)(u.Paper,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center","&:hover":{bgcolor:"action.hover"}},children:[(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:e.name}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:[e.company," • ",e.email]}),(0,s.jsx)(o.Box,{mt:.5,children:(0,s.jsx)(ev.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"default",sx:{textTransform:"capitalize"}})})]}),(0,s.jsx)(em.IconButton,{size:"small",color:"error",onClick:()=>E(e.id),children:(0,s.jsx)(eM.default,{})})]},e.id))})}),2===d&&(0,s.jsx)(o.Box,{children:b?(0,s.jsx)(o.Box,{display:"flex",justifyContent:"center",py:4,children:(0,s.jsx)(eP.CircularProgress,{})}):0===A.length?(0,s.jsx)(eI.Alert,{severity:"info",children:"No tasks assigned"}):(0,s.jsx)($.TableContainer,{children:(0,s.jsxs)(N.Table,{size:"small",children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{children:"Task"}),(0,s.jsx)(G.TableCell,{children:"Client"}),(0,s.jsx)(G.TableCell,{children:"Status"}),(0,s.jsx)(G.TableCell,{children:"Priority"}),(0,s.jsx)(G.TableCell,{children:"Due Date"})]})}),(0,s.jsx)(M.TableBody,{children:A.map(e=>(0,s.jsxs)(W.TableRow,{hover:!0,children:[(0,s.jsxs)(G.TableCell,{children:[(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:e.title}),e.description&&(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:[e.description.substring(0,50),"..."]})]}),(0,s.jsx)(G.TableCell,{children:e.client_name||"N/A"}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.status,size:"small"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.priority,size:"small",color:"high"===e.priority?"error":"medium"===e.priority?"warning":"default"})}),(0,s.jsx)(G.TableCell,{children:e.due_date?new Date(e.due_date).toLocaleDateString():"N/A"})]},e.id))})]})})}),3===d&&(0,s.jsx)(o.Box,{children:b?(0,s.jsx)(o.Box,{display:"flex",justifyContent:"center",py:4,children:(0,s.jsx)(eP.CircularProgress,{})}):0===P.length?(0,s.jsx)(eI.Alert,{severity:"info",children:"No support requests"}):(0,s.jsx)($.TableContainer,{children:(0,s.jsxs)(N.Table,{size:"small",children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{children:"Subject"}),(0,s.jsx)(G.TableCell,{children:"Client"}),(0,s.jsx)(G.TableCell,{children:"Priority"}),(0,s.jsx)(G.TableCell,{children:"Status"}),(0,s.jsx)(G.TableCell,{children:"Created"})]})}),(0,s.jsx)(M.TableBody,{children:P.map(e=>(0,s.jsxs)(W.TableRow,{hover:!0,children:[(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:e.subject})}),(0,s.jsx)(G.TableCell,{children:e.client_name||"N/A"}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.priority,size:"small",color:"urgent"===e.priority?"error":"high"===e.priority?"warning":"default"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.status,size:"small"})}),(0,s.jsx)(G.TableCell,{children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})})]}),(0,s.jsxs)(rw.DialogActions,{sx:{p:2},children:[(0,s.jsx)(y.Button,{onClick:r,disabled:m,children:"Cancel"}),(0,s.jsx)(y.Button,{variant:"contained",onClick:L,disabled:m,children:m?(0,s.jsx)(eP.CircularProgress,{size:24}):"Update User"})]})]}):null}var rD=e.i(8195),rL=e.i(98807),rE=e.i(48349),rR=e.i(98793),rO=e.i(12214),rN=e.i(33918),rM=e.i(45680),rG=e.i(13109),r$=e.i(7294),rz=e.i(56068),rW=e.i(86386),rU=e.i(82205),rF=e.i(83066);function rV({title:e,value:t,icon:r,trend:a,trendLabel:i,color:n="#6366f1",loading:l=!1}){let d=a&&a>0;return(0,s.jsx)(g.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:e}),(0,s.jsx)(eT.Avatar,{sx:{bgcolor:`${n}15`,width:40,height:40,color:n},children:r})]}),l?(0,s.jsx)(o.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:48},children:(0,s.jsx)(eP.CircularProgress,{size:24})}):(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:t}),void 0!==a&&(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[d?(0,s.jsx)(e$.default,{sx:{fontSize:16,color:"success.main"}}):(0,s.jsx)(rF.default,{sx:{fontSize:16,color:"error.main"}}),(0,s.jsxs)(c.Typography,{variant:"caption",sx:{color:d?"success.main":"error.main",fontWeight:600},children:[Math.abs(a),"%"]}),i&&(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:i})]})]})})}function r_({title:e,subtitle:t,children:r,action:a}){return(0,s.jsx)(g.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,s.jsxs)(m.CardContent,{sx:{width:"100%",maxWidth:"100%"},children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:e}),t&&(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:t})]}),a&&(0,s.jsx)(o.Box,{children:a})]}),(0,s.jsx)(o.Box,{children:r})]})})}let rK=["#6366f1","#8b5cf6","#10b981","#f59e0b","#ef4444","#06b6d4"];function rH({data:e,theme:t,isDark:r}){var a;if(!e||0===e.length)return(0,s.jsx)(o.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"No platform data available"})});let i=e.reduce((e,t)=>e+t.totalUsers,0),n=[...e].sort((e,t)=>t.totalUsers-e.totalUsers).slice(0,3),l=Math.max(...n.map(e=>e.totalUsers),1),d=e=>80+e/l*70,x=1===(a=n.length)?[{cx:300,cy:300}]:2===a?[{cx:240,cy:300},{cx:360,cy:300}]:[{cx:300,cy:228},{cx:196.07999999999998,cy:336},{cx:403.92,cy:336}],h=(e,t)=>{let r=Math.sqrt(Math.pow(t.cx-e.cx,2)+Math.pow(t.cy-e.cy,2));if(r>=e.r+t.r)return null;let a=e.r,s=t.r,i=(a*a-s*s+r*r)/(2*r),n=Math.sqrt(a*a-i*i),l=e.cx+i*(t.cx-e.cx)/r,o=e.cy+i*(t.cy-e.cy)/r,d=t.cx-l,c=t.cy-o,x=l+n*c/r,h=o-n*d/r;return`M ${x} ${h} A ${a} ${a} 0 0 1 ${l-n*c/r} ${o+n*d/r} A ${s} ${s} 0 0 1 ${x} ${h} Z`};return(0,s.jsxs)(o.Box,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(o.Box,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,s.jsxs)("svg",{width:600,height:600,style:{overflow:"visible"},children:[(0,s.jsx)("defs",{children:n.map((e,t)=>(0,s.jsxs)("linearGradient",{id:`vennGradient-${t}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:rK[t%rK.length],stopOpacity:.6}),(0,s.jsx)("stop",{offset:"100%",stopColor:rK[t%rK.length],stopOpacity:.3})]},`gradient-${t}`))}),n.length>=2&&(0,s.jsxs)(s.Fragment,{children:[h({cx:x[0].cx,cy:x[0].cy,r:d(n[0].totalUsers)},{cx:x[1].cx,cy:x[1].cy,r:d(n[1].totalUsers)})&&(0,s.jsx)("path",{d:h({cx:x[0].cx,cy:x[0].cy,r:d(n[0].totalUsers)},{cx:x[1].cx,cy:x[1].cy,r:d(n[1].totalUsers)}),fill:r?"rgba(99, 102, 241, 0.4)":"rgba(99, 102, 241, 0.3)",stroke:t.palette.divider,strokeWidth:2}),3===n.length&&(0,s.jsxs)(s.Fragment,{children:[h({cx:x[0].cx,cy:x[0].cy,r:d(n[0].totalUsers)},{cx:x[2].cx,cy:x[2].cy,r:d(n[2].totalUsers)})&&(0,s.jsx)("path",{d:h({cx:x[0].cx,cy:x[0].cy,r:d(n[0].totalUsers)},{cx:x[2].cx,cy:x[2].cy,r:d(n[2].totalUsers)}),fill:r?"rgba(139, 92, 246, 0.4)":"rgba(139, 92, 246, 0.3)",stroke:t.palette.divider,strokeWidth:2}),h({cx:x[1].cx,cy:x[1].cy,r:d(n[1].totalUsers)},{cx:x[2].cx,cy:x[2].cy,r:d(n[2].totalUsers)})&&(0,s.jsx)("path",{d:h({cx:x[1].cx,cy:x[1].cy,r:d(n[1].totalUsers)},{cx:x[2].cx,cy:x[2].cy,r:d(n[2].totalUsers)}),fill:r?"rgba(16, 185, 129, 0.4)":"rgba(16, 185, 129, 0.3)",stroke:t.palette.divider,strokeWidth:2})]})]}),n.map((e,r)=>{let a=d(e.totalUsers),n=x[r],l=e.totalUsers,o=i>0?(l/i*100).toFixed(1):"0";return(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:n.cx,cy:n.cy,r:a,fill:`url(#vennGradient-${r})`,stroke:rK[r%rK.length],strokeWidth:3,opacity:.7}),(0,s.jsx)("text",{x:n.cx,y:n.cy-a-20,textAnchor:"middle",fill:t.palette.text.primary,fontSize:16,fontWeight:700,children:e.platform}),(0,s.jsx)("text",{x:n.cx,y:n.cy,textAnchor:"middle",fill:t.palette.text.primary,fontSize:24,fontWeight:700,children:l.toLocaleString()}),(0,s.jsxs)("text",{x:n.cx,y:n.cy+20,textAnchor:"middle",fill:t.palette.text.secondary,fontSize:14,children:[o,"%"]})]},e.platform)})]})}),(0,s.jsx)(o.Box,{sx:{mt:2,display:"flex",gap:3,flexWrap:"wrap",justifyContent:"center"},children:n.map((e,t)=>(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:16,height:16,bgcolor:rK[t%rK.length],borderRadius:"50%",opacity:.7}}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",children:[e.platform,": ",e.totalUsers.toLocaleString()," sessions"]})]},e.platform))})]})}function rq(){let e=(0,eD.useTheme)(),t=(0,rE.useDarkMode)(),[r,a]=(0,i.useState)("all"),[n,l]=(0,i.useState)([]),[d,x]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!0),[b,v]=(0,i.useState)("7d"),[T,C]=(0,i.useState)(null),[w,S]=(0,i.useState)(""),[A,I]=(0,i.useState)(null),[P,k]=(0,i.useState)(null),[B,D]=(0,i.useState)(null),[L,E]=(0,i.useState)(null);(0,i.useEffect)(()=>{{let e=localStorage.getItem("ga_property_id");e&&S(e)}},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=(0,rb.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();l(e.clients||[]),!localStorage.getItem("ga_property_id")&&e.clients&&e.clients.length>0&&e.clients[0].googleAnalyticsPropertyKey&&S(e.clients[0].googleAnalyticsPropertyKey)}}catch(e){console.error("Error fetching clients:",e)}finally{f(!1)}})()},[]);let R=async(e,t)=>{if(!e)return void I(null);x(!0),k(null);try{let r=(0,rb.getBackendUrl)(),a=await fetch(`${r}/api/analytics/data`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({propertyId:e,timeRange:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||"Failed to fetch analytics data")}let s=await a.json();s.error&&s.isMockData?(k(s.error),I({totalRevenue:s.totalRevenue||0,totalUsers:s.totalUsers||0,pageViews:s.pageViews||0,conversionRate:s.conversionRate||0,revenueTrend:s.revenueTrend||0,usersTrend:s.usersTrend||0,pageViewsTrend:s.pageViewsTrend||0,conversionTrend:s.conversionTrend||0,revenueData:s.revenueData||[],visitorData:s.visitorData||[],conversionData:s.conversionData||[],activeUsersByFirstUserSourceMedium:s.activeUsersByFirstUserSourceMedium||[],sessionsBySessionSourceMedium:s.sessionsBySessionSourceMedium||[],trafficAcquisitionUrls:s.trafficAcquisitionUrls||[],userAcquisitionByPlatform:s.userAcquisitionByPlatform||[]})):s.error?(k(s.error),I(null)):(I(s),k(null)),C(new Date)}catch(e){console.error("Error fetching analytics data:",e),k(e.message||"Failed to load analytics data"),I(null)}finally{x(!1)}},O=async()=>{w&&await R(w,b)},N=async()=>{w&&(localStorage.setItem("ga_property_id",w),await O())};(0,i.useEffect)(()=>{w&&b&&R(w,b)},[w,b]);let M=e=>{console.log(`Exporting analytics data as ${e}`),D(null)},G=e=>({today:"Today","24h":"Last 24 Hours","7d":"Last 7 Days","30d":"Last 30 Days","90d":"Last 90 Days"})[e]||e,$=A&&A.totalUsers>0?(A.totalRevenue/A.totalUsers).toFixed(2):"0",z=A&&A.totalUsers>0?(A.pageViews/A.totalUsers).toFixed(1):"0";return(0,s.jsxs)(o.Box,{sx:{width:"100%"},children:[(0,s.jsx)(u.Paper,{elevation:0,sx:{p:3,mb:3,background:t?"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)":"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)",border:`1px solid ${e.palette.divider}`,borderRadius:2},children:(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Our CRM GA"}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",children:["Track performance metrics and insights for your CRM clients",T&&(0,s.jsx)(ev.Chip,{label:`Last updated ${T.toLocaleTimeString()}`,size:"small",sx:{ml:1,height:20}})]})]}),(0,s.jsxs)(ek.Stack,{direction:"row",spacing:1,flexWrap:"wrap",children:[(0,s.jsx)(j.TextField,{size:"small",label:"GA Property ID",placeholder:"G-XXXXXXXXXX",value:w,onChange:e=>S(e.target.value),sx:{minWidth:200},InputProps:{startAdornment:(0,s.jsx)(r$.default,{sx:{fontSize:16,mr:1,color:"text.secondary"}})}}),(0,s.jsxs)(eC.FormControl,{size:"small",sx:{minWidth:150},children:[(0,s.jsx)(ew.InputLabel,{children:"Time Range"}),(0,s.jsxs)(eS.Select,{value:b,onChange:e=>v(e.target.value),label:"Time Range",children:[(0,s.jsx)(ej.MenuItem,{value:"today",children:"Today"}),(0,s.jsx)(ej.MenuItem,{value:"24h",children:"Last 24 Hours"}),(0,s.jsx)(ej.MenuItem,{value:"7d",children:"Last 7 Days"}),(0,s.jsx)(ej.MenuItem,{value:"30d",children:"Last 30 Days"}),(0,s.jsx)(ej.MenuItem,{value:"90d",children:"Last 90 Days"})]})]}),(0,s.jsx)(rL.Tooltip,{title:"Refresh data",children:(0,s.jsx)(em.IconButton,{onClick:O,disabled:d||!w,sx:{bgcolor:"transparent",border:"1px solid",borderColor:"divider","&:hover":{bgcolor:"action.hover"}},children:d?(0,s.jsx)(eP.CircularProgress,{size:20}):(0,s.jsx)(rN.default,{})})}),(0,s.jsx)(y.Button,{variant:"outlined",startIcon:(0,s.jsx)(rG.default,{}),onClick:e=>E(e.currentTarget),sx:{borderColor:"divider"},children:"Filters"}),(0,s.jsx)(y.Button,{variant:"outlined",startIcon:(0,s.jsx)(rM.default,{}),onClick:e=>D(e.currentTarget),sx:{borderColor:"divider"},children:"Export"}),(0,s.jsx)(y.Button,{variant:"contained",startIcon:(0,s.jsx)(rz.default,{}),onClick:N,disabled:d||!w,sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:"Save"})]})]})}),(0,s.jsxs)(ey.Menu,{anchorEl:B,open:!!B,onClose:()=>D(null),children:[(0,s.jsxs)(ej.MenuItem,{onClick:()=>M("csv"),children:[(0,s.jsx)(rM.default,{sx:{mr:1,fontSize:18}}),"Export as CSV"]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>M("pdf"),children:[(0,s.jsx)(rM.default,{sx:{mr:1,fontSize:18}}),"Export as PDF"]})]}),(0,s.jsx)(ey.Menu,{anchorEl:L,open:!!L,onClose:()=>E(null),children:(0,s.jsxs)(o.Box,{sx:{p:2,minWidth:250},children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Filter Options"}),(0,s.jsx)(eB.Divider,{sx:{my:1}}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Additional filters coming soon"})]})}),P&&(0,s.jsxs)(eI.Alert,{severity:P.includes("not configured")||P.includes("not installed")?"warning":"error",sx:{mb:3},onClose:()=>k(null),action:(0,s.jsx)(y.Button,{color:"inherit",size:"small",onClick:O,children:"Retry"}),children:[(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:600,gutterBottom:!0,children:P.includes("not configured")||P.includes("not installed")?"Google Analytics API Not Configured":"Error Loading Analytics Data"}),(0,s.jsx)(c.Typography,{variant:"body2",children:P}),P.includes("GOOGLE_APPLICATION_CREDENTIALS")&&(0,s.jsx)(o.Box,{sx:{mt:1},children:(0,s.jsxs)(c.Typography,{variant:"caption",component:"div",children:[(0,s.jsx)("strong",{children:"To fix this:"}),(0,s.jsxs)("ol",{style:{marginTop:8,paddingLeft:20},children:[(0,s.jsx)("li",{children:"Create a service account in Google Cloud Console"}),(0,s.jsx)("li",{children:"Enable Google Analytics Data API for your project"}),(0,s.jsx)("li",{children:"Download the JSON key file"}),(0,s.jsx)("li",{children:"Set GOOGLE_APPLICATION_CREDENTIALS environment variable to the JSON file path"})]}),(0,s.jsxs)(c.Typography,{variant:"caption",sx:{mt:1,display:"block"},children:["See ",(0,s.jsx)("a",{href:"https://developers.google.com/analytics/devguides/reporting/data/v1/rest/v1beta/properties/runReport",target:"_blank",rel:"noopener noreferrer",children:"Google Analytics API documentation"})," for detailed setup instructions."]})]})})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(rV,{title:"Total Revenue",value:A?`$${A.totalRevenue.toLocaleString()}`:"$0",icon:(0,s.jsx)(rR.default,{}),trend:A?.revenueTrend||0,trendLabel:"vs last period",color:"#10b981",loading:d&&!A})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(rV,{title:"Total Users",value:A?A.totalUsers.toLocaleString():"0",icon:(0,s.jsx)(eW.default,{}),trend:A?.usersTrend||0,trendLabel:"vs last period",color:"#6366f1",loading:d&&!A})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(rV,{title:"Page Views",value:A?`${(A.pageViews/1e3).toFixed(1)}K`:"0",icon:(0,s.jsx)(rO.default,{}),trend:A?.pageViewsTrend||0,trendLabel:"vs last period",color:"#f59e0b",loading:d&&!A})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(rV,{title:"Conversion Rate",value:A?`${A.conversionRate.toFixed(2)}%`:"0%",icon:(0,s.jsx)(ez.default,{}),trend:A?.conversionTrend||0,trendLabel:"vs last period",color:"#8b5cf6",loading:d&&!A})})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:4,children:(0,s.jsx)(g.Card,{sx:{boxShadow:2},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Pages per User"}),(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:z})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:4,children:(0,s.jsx)(g.Card,{sx:{boxShadow:2},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Conversion Rate"}),(0,s.jsxs)(c.Typography,{variant:"h5",fontWeight:700,children:[A?.conversionRate?.toFixed(1)||"0","%"]})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:4,children:(0,s.jsx)(g.Card,{sx:{boxShadow:2},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Revenue per User"}),(0,s.jsxs)(c.Typography,{variant:"h5",fontWeight:700,children:["$",$]})]})})})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:8,children:(0,s.jsx)(r_,{title:"Active Users by First User Source/Medium",subtitle:`${G(b)} - Active users breakdown by first user source/medium`,action:(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#6366f1",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Active Users"})]}),children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(rW.BarChart,{data:A?.activeUsersByFirstUserSourceMedium||[],margin:{top:20,right:30,left:20,bottom:60},children:[(0,s.jsx)(eQ.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,s.jsx)(eY.XAxis,{dataKey:"firstUserSourceMedium",stroke:e.palette.text.secondary,fontSize:11,tick:{fill:e.palette.text.secondary},angle:-45,textAnchor:"end",height:80}),(0,s.jsx)(eZ.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,s.jsx)(e1.Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"square"}),(0,s.jsx)(rU.Bar,{dataKey:"activeUsers",fill:"#6366f1",radius:[4,4,0,0],name:"Active Users"})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:4,children:(0,s.jsx)(r_,{title:"Sessions by Platform",subtitle:`${G(b)} - Platform distribution and overlap`,children:(0,s.jsx)(o.Box,{sx:{width:"100%",height:400,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(rH,{data:A?.userAcquisitionByPlatform||[],theme:e,isDark:t})})})})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:8,children:(0,s.jsx)(r_,{title:"Sessions by Session Source/Medium",subtitle:`${G(b)} - Sessions and page views breakdown by session source/medium`,action:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#10b981",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Sessions"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#f59e0b",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Page Views"})]})]}),children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(rW.BarChart,{data:A?.sessionsBySessionSourceMedium||[],margin:{top:20,right:30,left:20,bottom:60},children:[(0,s.jsx)(eQ.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,s.jsx)(eY.XAxis,{dataKey:"sessionSourceMedium",stroke:e.palette.text.secondary,fontSize:11,tick:{fill:e.palette.text.secondary},angle:-45,textAnchor:"end",height:80}),(0,s.jsx)(eZ.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,s.jsx)(e1.Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"square"}),(0,s.jsx)(rU.Bar,{dataKey:"sessions",fill:"#10b981",radius:[4,4,0,0],name:"Sessions"}),(0,s.jsx)(rU.Bar,{dataKey:"pageViews",fill:"#f59e0b",radius:[4,4,0,0],name:"Page Views"})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:4,children:(0,s.jsx)(r_,{title:"Session Source/Medium Distribution",subtitle:"Sessions share by session source/medium",children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(tx,{children:[(0,s.jsx)(rm,{data:A?.sessionsBySessionSourceMedium||[],cx:"50%",cy:"50%",labelLine:!1,label:e=>`${e.sessionSourceMedium||"Unknown"}: ${(100*(e.percent||0)).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"sessions",nameKey:"sessionSourceMedium",children:(A?.sessionsBySessionSourceMedium||[]).map((e,t)=>(0,s.jsx)(tV.Cell,{fill:rK[t%rK.length]},`cell-session-${t}`))}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary},formatter:(e,t)=>[e.toLocaleString(),"sessions"===t?"Sessions":t]})]})})})})]}),(0,s.jsx)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(r_,{title:"Traffic Acquisition URLs",subtitle:`${G(b)} - Top URLs driving traffic`,action:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#6366f1",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Active Users"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#10b981",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Sessions"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#f59e0b",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Page Views"})]})]}),children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(rW.BarChart,{data:A?.trafficAcquisitionUrls||[],margin:{top:20,right:30,left:20,bottom:100},children:[(0,s.jsx)(eQ.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,s.jsx)(eY.XAxis,{dataKey:"url",stroke:e.palette.text.secondary,fontSize:10,tick:{fill:e.palette.text.secondary},angle:-45,textAnchor:"end",height:120}),(0,s.jsx)(eZ.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,s.jsx)(e1.Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"square"}),(0,s.jsx)(rU.Bar,{dataKey:"activeUsers",fill:"#6366f1",radius:[4,4,0,0],name:"Active Users"}),(0,s.jsx)(rU.Bar,{dataKey:"sessions",fill:"#10b981",radius:[4,4,0,0],name:"Sessions"}),(0,s.jsx)(rU.Bar,{dataKey:"pageViews",fill:"#f59e0b",radius:[4,4,0,0],name:"Page Views"})]})})})})}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:8,children:(0,s.jsx)(r_,{title:"User Acquisition by Source Platform",subtitle:`${G(b)} - New vs Returning users by platform`,action:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#6366f1",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"New Users"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#8b5cf6",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Returning Users"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(o.Box,{sx:{width:12,height:12,bgcolor:"#10b981",borderRadius:"2px"}}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Total Users"})]})]}),children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(rW.BarChart,{data:A?.userAcquisitionByPlatform||[],margin:{top:20,right:30,left:20,bottom:60},children:[(0,s.jsx)(eQ.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,s.jsx)(eY.XAxis,{dataKey:"platform",stroke:e.palette.text.secondary,fontSize:11,tick:{fill:e.palette.text.secondary},angle:-45,textAnchor:"end",height:80}),(0,s.jsx)(eZ.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,s.jsx)(e1.Legend,{wrapperStyle:{paddingTop:"20px"},iconType:"square"}),(0,s.jsx)(rU.Bar,{dataKey:"newUsers",fill:"#6366f1",radius:[4,4,0,0],name:"New Users"}),(0,s.jsx)(rU.Bar,{dataKey:"returningUsers",fill:"#8b5cf6",radius:[4,4,0,0],name:"Returning Users"}),(0,s.jsx)(rU.Bar,{dataKey:"totalUsers",fill:"#10b981",radius:[4,4,0,0],name:"Total Users"})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,lg:4,children:(0,s.jsx)(r_,{title:"Platform Distribution",subtitle:"User acquisition share by platform",children:(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:400,children:(0,s.jsxs)(tx,{children:[(0,s.jsx)(rm,{data:A?.userAcquisitionByPlatform||[],cx:"50%",cy:"50%",labelLine:!1,label:e=>`${e.platform||"Unknown"}: ${(100*(e.percent||0)).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"totalUsers",nameKey:"platform",children:(A?.userAcquisitionByPlatform||[]).map((e,t)=>(0,s.jsx)(tV.Cell,{fill:rK[t%rK.length]},`cell-platform-${t}`))}),(0,s.jsx)(e0.Tooltip,{contentStyle:{backgroundColor:"dark"===e.palette.mode?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary},formatter:(e,t)=>[e.toLocaleString(),"totalUsers"===t?"Total Users":t]})]})})})})]})]})}var rX=e.i(46631),rJ=e.i(70385),rY=e.i(91252),rZ=e.i(7356),rQ=e.i(16203),r0=e.i(59617),r1=e.i(59096),r2=((t={}).PLANNING="planning",t.ACTIVE="active",t.ON_HOLD="on_hold",t.COMPLETED="completed",t.CANCELLED="cancelled",t);let r4=`${(0,rb.getBackendUrl)()}/api/ventures`,r5=()=>{let e=localStorage.getItem("token");return{"Content-Type":"application/json",...e&&{Authorization:`Bearer ${e}`}}},r3=new class{async getVentures(){let e=await fetch(r4,{headers:r5(),credentials:"include"});if(!e.ok){if(401===e.status)throw Error("Unauthorized - Please log in");throw Error("Failed to fetch ventures")}return e.json()}async getVentureById(e){let t=await fetch(`${r4}/${e}`,{headers:r5()});if(!t.ok){if(404===t.status)return;throw Error("Failed to fetch venture")}return t.json()}async getVenturesByStatus(e){return(await this.getVentures()).filter(t=>t.status===e)}async getMetrics(){let e=await fetch(`${r4}/metrics`,{headers:r5()});if(!e.ok)throw Error("Failed to fetch metrics");return e.json()}async createVenture(e){let t=await fetch(r4,{method:"POST",headers:r5(),body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create venture");return t.json()}async updateVenture(e,t){let r=await fetch(`${r4}/${e}`,{method:"PUT",headers:r5(),body:JSON.stringify(t)});if(!r.ok){if(404===r.status)return;throw Error("Failed to update venture")}return r.json()}async deleteVenture(e){return(await fetch(`${r4}/${e}`,{method:"DELETE",headers:r5()})).ok}async searchVentures(e){let t=await fetch(`${r4}/search?q=${encodeURIComponent(e)}`,{headers:r5()});if(!t.ok)throw Error("Failed to search ventures");return t.json()}};var r6=e.i(72992),r8=e.i(7498);let r9=({venture:e,onEdit:t,onDelete:r,onView:a})=>{let n=(0,eD.useTheme)(),[l,d]=i.default.useState(null),x=()=>{d(null)},h=e.spent/e.budget*100;return(0,s.jsxs)(g.Card,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:n.shadows[8]}},children:[(0,s.jsxs)(m.CardContent,{sx:{flexGrow:1},children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,s.jsxs)(o.Box,{sx:{flex:1},children:[(0,s.jsx)(c.Typography,{variant:"h6",component:"h3",gutterBottom:!0,children:e.name}),(0,s.jsx)(ev.Chip,{label:e.status.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),color:(e=>{switch(e){case r2.ACTIVE:return"primary";case r2.COMPLETED:return"success";case r2.ON_HOLD:return"warning";case r2.PLANNING:return"default";case r2.CANCELLED:return"error";default:return"default"}})(e.status),size:"small",sx:{mb:1}})]}),(0,s.jsx)(em.IconButton,{size:"small",onClick:e=>{d(e.currentTarget)},children:(0,s.jsx)(eO.default,{})})]}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2,minHeight:40},children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description}),e.clientName&&(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:["Client: ",e.clientName]}),(0,s.jsxs)(o.Box,{sx:{mb:2},children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Progress"}),(0,s.jsxs)(c.Typography,{variant:"caption",fontWeight:"bold",children:[e.progress,"%"]})]}),(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:e.progress,sx:{height:6,borderRadius:3,backgroundColor:(0,rZ.alpha)(n.palette.primary.main,.1)}})]}),(0,s.jsxs)(o.Box,{sx:{mb:2},children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,s.jsx)(rR.default,{sx:{fontSize:16,color:"text.secondary"}}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["Budget: $",e.budget.toLocaleString()]})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["Spent: $",e.spent.toLocaleString()]}),(0,s.jsxs)(c.Typography,{variant:"caption",color:h>100?"error":h>80?"warning.main":"success.main",children:[h.toFixed(1),"%"]})]}),(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:Math.min(h,100),color:h>100?"error":h>80?"warning":"success",sx:{height:4,borderRadius:2}})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,s.jsx)(r8.default,{sx:{fontSize:16,color:"text.secondary"}}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["Due: ",new Date(e.deadline).toLocaleDateString()]})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:[e.tags.slice(0,3).map((e,t)=>(0,s.jsx)(ev.Chip,{label:e,size:"small",variant:"outlined"},t)),e.tags.length>3&&(0,s.jsx)(ev.Chip,{label:`+${e.tags.length-3}`,size:"small",variant:"outlined"})]})]}),(0,s.jsxs)(r6.CardActions,{sx:{px:2,pb:2,justifyContent:"space-between"},children:[(0,s.jsx)(rY.AvatarGroup,{max:4,sx:{"& .MuiAvatar-root":{width:28,height:28,fontSize:"0.875rem"}},children:e.team.map(e=>(0,s.jsx)(eT.Avatar,{alt:e.name,src:e.avatar,sx:{bgcolor:n.palette.primary.main},children:e.name.charAt(0)},e.id))}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:[e.team.length," member",1!==e.team.length?"s":""]})]}),(0,s.jsxs)(ey.Menu,{anchorEl:l,open:!!l,onClose:x,children:[(0,s.jsxs)(ej.MenuItem,{onClick:()=>{a(e),x()},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(rO.default,{fontSize:"small"})}),(0,s.jsx)(eb.ListItemText,{children:"View Details"})]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>{t(e),x()},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eN.default,{fontSize:"small"})}),(0,s.jsx)(eb.ListItemText,{children:"Edit"})]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>{r(e.id),x()},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eM.default,{fontSize:"small",color:"error"})}),(0,s.jsx)(eb.ListItemText,{sx:{color:"error.main"},children:"Delete"})]})]})]})};var r7=e.i(63640);let ae=({open:e,onClose:t,onSave:r})=>{let[a,n]=(0,i.useState)({name:"",description:"",status:r2.PLANNING,budget:"",startDate:new Date().toISOString().split("T")[0],deadline:"",clientName:"",tags:[]}),[l,o]=(0,i.useState)(""),d=(e,t)=>{n(r=>({...r,[e]:t}))},c=()=>{n({name:"",description:"",status:r2.PLANNING,budget:"",startDate:new Date().toISOString().split("T")[0],deadline:"",clientName:"",tags:[]}),o("")};(0,i.useEffect)(()=>{if(e){let e=e=>{let t=e.target,r=t.closest('[class*="MuiBackdrop"]')||t.closest('[class*="MuiDialog"]');r&&t===r&&fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:30",message:"Backdrop click detected",data:{tagName:t.tagName,className:t.className,computedStyle:window.getComputedStyle(t).pointerEvents},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"E"})}).catch(()=>{}),(t.closest("button")||t.closest('[role="button"]'))&&fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:35",message:"Global button click detected",data:{tagName:t.tagName,buttonText:t.textContent?.slice(0,20),computedStyle:window.getComputedStyle(t).pointerEvents},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"C"})}).catch(()=>{})};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)}},[e]);let x=()=>{fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:86",message:"handleClose called",data:{open:e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),c(),fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:89",message:"calling onClose prop",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),t()};return(0,s.jsxs)(rv.Dialog,{open:e,onClose:(e,t)=>{fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:115",message:"Dialog onClose triggered",data:{reason:t,eventType:e&&"type"in e?e.type:"unknown",eventTarget:e&&"target"in e?e.target?.tagName:"unknown"},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"E"})}).catch(()=>{}),x()},maxWidth:"md",fullWidth:!0,children:[(0,s.jsx)(rT.DialogTitle,{children:"Add New Venture"}),(0,s.jsx)(rC.DialogContent,{children:(0,s.jsxs)(p.Grid,{container:!0,spacing:2,sx:{mt:.5},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Venture Name",required:!0,value:a.name,onChange:e=>d("name",e.target.value)})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Description",required:!0,multiline:!0,rows:3,value:a.description,onChange:e=>d("description",e.target.value)})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(eC.FormControl,{fullWidth:!0,children:[(0,s.jsx)(ew.InputLabel,{children:"Status"}),(0,s.jsxs)(eS.Select,{value:a.status,label:"Status",onChange:e=>d("status",e.target.value),children:[(0,s.jsx)(ej.MenuItem,{value:r2.PLANNING,children:"Planning"}),(0,s.jsx)(ej.MenuItem,{value:r2.ACTIVE,children:"Active"}),(0,s.jsx)(ej.MenuItem,{value:r2.ON_HOLD,children:"On Hold"}),(0,s.jsx)(ej.MenuItem,{value:r2.COMPLETED,children:"Completed"}),(0,s.jsx)(ej.MenuItem,{value:r2.CANCELLED,children:"Cancelled"})]})]})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Budget",required:!0,type:"number",value:a.budget,onChange:e=>d("budget",e.target.value),InputProps:{startAdornment:(0,s.jsx)(O,{position:"start",children:"$"})}})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Start Date",type:"date",value:a.startDate,onChange:e=>d("startDate",e.target.value),InputLabelProps:{shrink:!0}})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Deadline",required:!0,type:"date",value:a.deadline,onChange:e=>d("deadline",e.target.value),InputLabelProps:{shrink:!0}})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(j.TextField,{fullWidth:!0,label:"Client Name (Optional)",value:a.clientName,onChange:e=>d("clientName",e.target.value)})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(r7.Autocomplete,{multiple:!0,freeSolo:!0,options:[],value:a.tags,onChange:(e,t)=>d("tags",t),inputValue:l,onInputChange:(e,t)=>o(t),renderTags:(e,t)=>e.map((e,r)=>(0,s.jsx)(ev.Chip,{label:e,...t({index:r}),size:"small"},r)),renderInput:e=>(0,s.jsx)(j.TextField,{...e,label:"Tags",placeholder:"Type and press enter to add tags"})})})]})}),(0,s.jsxs)(rw.DialogActions,{children:[(0,s.jsx)(y.Button,{onClick:e=>{fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AddVentureDialog.tsx:210",message:"Cancel button clicked",data:{eventType:e.type,currentTarget:e.currentTarget?.tagName},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),x()},children:"Cancel"}),(0,s.jsx)(y.Button,{onClick:()=>{a.name&&a.description&&a.budget&&a.deadline?(r({name:a.name,description:a.description,status:a.status,progress:0,budget:parseFloat(a.budget),spent:0,startDate:a.startDate,deadline:a.deadline,team:[],tasks:[],tags:a.tags,clientName:a.clientName||void 0}),c()):alert("Please fill in all required fields")},variant:"contained",children:"Create Venture"})]})]})};var at=e.i(42281),ar=e.i(50333),aa=e.i(7200),as=e.i(94556),ai=e.i(78014),an=e.i(926),al=e.i(49876);function ao(e){let{children:t,value:r,index:a,...i}=e;return(0,s.jsx)("div",{role:"tabpanel",hidden:r!==a,id:`venture-tabpanel-${a}`,"aria-labelledby":`venture-tab-${a}`,...i,children:r===a&&(0,s.jsx)(o.Box,{sx:{py:3},children:t})})}let ad=({open:e,venture:t,onClose:r})=>{let a=(0,eD.useTheme)(),[n,l]=(0,i.useState)(0),[d,u]=(0,i.useState)([]),[j,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)([]),[T,C]=(0,i.useState)(!1),[w,S]=(0,i.useState)(null),A=(0,rb.getBackendUrl)(),I=(0,i.useCallback)(async()=>{if(t?.clientId||t?.id){f(!0);try{let e,r=t?.id?String(t.id):null,a=t?.clientId?String(t.clientId):null;if(r)e=await fetch(`${A}/api/tasks?linkedEntityType=venture&linkedEntityId=${r}`,{credentials:"include"});else if(a)e=await fetch(`${A}/api/tasks?client_id=${a}`,{credentials:"include"});else{u([]),f(!1);return}if(e.ok){let t=await e.json();u(t.tasks||[])}else u([])}catch(e){console.error("Error fetching client tasks:",e),u([])}finally{f(!1)}}},[t?.clientId,t?.id,A]),P=(0,i.useCallback)(async()=>{if(t?.clientId){C(!0);try{let e=String(t.clientId),r=await fetch(`${A}/api/creative/clients/${e}/employees`,{credentials:"include"});if(r.ok){let e=await r.json();v(e.employees||[])}else v([])}catch(e){console.error("Error fetching client employees:",e),v([])}finally{C(!1)}}},[t?.clientId,A]),k=(0,i.useCallback)(async()=>{if(t?.clientId)try{let e=String(t.clientId),r=await fetch(`${A}/api/creative/clients/${e}`,{credentials:"include"});if(r.ok){let e=await r.json();S({budget:e.budget||0,deadline:e.deadline||null})}}catch(e){console.error("Error fetching client data:",e)}},[t?.clientId,A]);if((0,i.useEffect)(()=>{e&&t?.clientId?(I(),P(),k()):(u([]),v([]),S(null))},[e,t?.clientId,I,P,k]),!t)return null;let B=new Map;d.forEach(e=>{var t,r;let a=e.id,s=parseInt(e.id)||e.id;B.set(a,{id:s,title:e.title,description:e.description,status:"completed"===(t=e.status)?"completed":"in-progress"===t?"in_progress":"todo",assignedTo:e.assignedTo?parseInt(e.assignedTo):void 0,priority:"high"===(r=e.priority)?"high":"medium"===r?"medium":"low",dueDate:e.updatedAt})}),(t.tasks||[]).forEach(e=>{let t=String(e.id);Array.from(B.keys()).some(r=>String(r)===t||String(e.id)===t)||B.set(t,{id:e.id,title:e.title,description:e.description,status:e.status,assignedTo:e.assignedTo,priority:e.priority,dueDate:e.dueDate})});let D=Array.from(B.values()),L=e=>{switch(e){case r2.ACTIVE:return a.palette.primary.main;case r2.COMPLETED:return a.palette.success.main;case r2.ON_HOLD:return a.palette.warning.main;case r2.PLANNING:return a.palette.info.main;case r2.CANCELLED:return a.palette.error.main;default:return a.palette.grey[500]}},E=w?.budget||t.budget,R=w?.deadline||t.deadline,O=E>0?t.spent/E*100:0,N=R?Math.ceil((new Date(R).getTime()-new Date().getTime())/864e5):t.deadline?Math.ceil((new Date(t.deadline).getTime()-new Date().getTime())/864e5):0;return(0,s.jsxs)(rv.Dialog,{open:e,onClose:r,maxWidth:"md",fullWidth:!0,children:[(0,s.jsx)(rT.DialogTitle,{children:(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h5",component:"div",gutterBottom:!0,children:t.name}),(0,s.jsx)(ev.Chip,{label:t.status.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),sx:{bgcolor:(0,rZ.alpha)(L(t.status),.1),color:L(t.status),fontWeight:600},size:"small"})]})}),(0,s.jsxs)(rC.DialogContent,{dividers:!0,children:[(0,s.jsxs)(x.Tabs,{value:n,onChange:(e,t)=>l(t),sx:{borderBottom:1,borderColor:"divider",mb:2},children:[(0,s.jsx)(h.Tab,{label:"Overview"}),(0,s.jsx)(h.Tab,{label:`Tasks (${D.length})`}),(0,s.jsx)(h.Tab,{label:`Team (${b.length>0?b.length:t?.team?.length||0})`}),(0,s.jsx)(h.Tab,{label:"Timeline & Analytics"}),t.supportRequest&&(0,s.jsx)(h.Tab,{label:"Support Request"})]}),(0,s.jsx)(ao,{value:n,index:0,children:(0,s.jsxs)(p.Grid,{container:!0,spacing:3,children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(c.Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:t.description})}),t.clientName&&(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Client"}),(0,s.jsx)(c.Typography,{variant:"h6",children:t.clientName})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,s.jsx)(r8.default,{color:"action"}),(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Timeline"})]}),(0,s.jsxs)(c.Typography,{variant:"body2",children:["Start: ",new Date(t.startDate).toLocaleDateString()]}),(0,s.jsxs)(c.Typography,{variant:"body2",children:["Deadline: ",R?new Date(R).toLocaleDateString():t.deadline?new Date(t.deadline).toLocaleDateString():"Not set"]}),R&&(0,s.jsx)(c.Typography,{variant:"body2",color:N<7?"error":N<30?"warning.main":"success.main",sx:{mt:1,fontWeight:600},children:N>0?`${N} days remaining`:"Overdue"})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,s.jsx)(rR.default,{color:"action"}),(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Budget"})]}),(0,s.jsxs)(c.Typography,{variant:"h6",children:["$",E.toLocaleString()]}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",children:["Spent: $",t.spent.toLocaleString()," (",O.toFixed(1),"%)"]}),(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:Math.min(O,100),color:O>100?"error":O>80?"warning":"success",sx:{mt:1,height:6,borderRadius:3}})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Progress"}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:t.progress,sx:{flex:1,height:8,borderRadius:4,backgroundColor:(0,rZ.alpha)(a.palette.primary.main,.1)}}),(0,s.jsxs)(c.Typography,{variant:"h6",sx:{minWidth:60,textAlign:"right"},children:[t.progress,"%"]})]})]})})}),(0,s.jsxs)(p.Grid,{item:!0,xs:12,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Tags"}),(0,s.jsx)(o.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:t.tags.map((e,t)=>(0,s.jsx)(ev.Chip,{label:e,size:"small"},t))})]})]})}),(0,s.jsx)(ao,{value:n,index:1,children:j?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,s.jsx)(eP.CircularProgress,{})}):0===D.length?(0,s.jsx)(c.Typography,{color:"text.secondary",align:"center",children:"No tasks yet"}):(0,s.jsx)(at.List,{children:D.map((e,r)=>{let a=e.assignedTo?(t?.team||[]).find(t=>t.id===e.assignedTo):null,n=d.find(t=>String(t.id)===String(e.id)||t.id===e.id),l=a?.name||n?.assignedToName||"Unassigned";return(0,s.jsxs)(i.default.Fragment,{children:[r>0&&(0,s.jsx)(eB.Divider,{}),(0,s.jsxs)(ar.ListItem,{alignItems:"flex-start",children:[(0,s.jsx)(aa.ListItemAvatar,{children:(e=>{switch(e){case"completed":return(0,s.jsx)(e_.default,{color:"success"});case"in_progress":return(0,s.jsx)(ai.default,{color:"primary"});default:return(0,s.jsx)(as.default,{color:"disabled"})}})(e.status)}),(0,s.jsx)(eb.ListItemText,{primary:(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,s.jsx)(c.Typography,{variant:"body1",children:e.title}),(0,s.jsx)(ev.Chip,{label:e.priority,size:"small",color:(e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}})(e.priority)}),(0,s.jsx)(ev.Chip,{label:"completed"===e.status?"Completed":"in_progress"===e.status?"In Progress":"To Do",size:"small",variant:"outlined"})]}),secondary:(0,s.jsxs)(s.Fragment,{children:[e.description&&(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:e.description}),(0,s.jsxs)(o.Box,{sx:{mt:.5,display:"flex",gap:1,flexWrap:"wrap"},children:[(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["Assigned to: ",l]}),e.dueDate&&(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["• Updated: ",new Date(e.dueDate).toLocaleDateString()]})]})]})})]})]},e.id)})})}),(0,s.jsx)(ao,{value:n,index:2,children:T?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,s.jsx)(eP.CircularProgress,{})}):(0,s.jsxs)(at.List,{children:[(b.length>0?b:t?.team||[]).map((e,t)=>{let r="assignedAt"in e&&e.assignedAt;return(0,s.jsxs)(i.default.Fragment,{children:[t>0&&(0,s.jsx)(eB.Divider,{}),(0,s.jsxs)(ar.ListItem,{children:[(0,s.jsx)(aa.ListItemAvatar,{children:(0,s.jsx)(eT.Avatar,{sx:{bgcolor:a.palette.primary.main},children:e.avatar?(0,s.jsx)("img",{src:e.avatar,alt:e.name}):e.name.charAt(0)})}),(0,s.jsx)(eb.ListItemText,{primary:e.name,secondary:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:e.role}),e.email&&(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:e.email}),r&&(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:["Assigned: ",new Date(e.assignedAt).toLocaleDateString()]})]})})]})]},e.id||t)}),0===b.length&&(!t?.team||0===t.team.length)&&(0,s.jsx)(c.Typography,{color:"text.secondary",align:"center",sx:{py:4},children:"No team members assigned"})]})}),(0,s.jsx)(ao,{value:n,index:3,children:(0,s.jsxs)(p.Grid,{container:!0,spacing:3,children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(c.Typography,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(an.default,{})," Progress Timeline"]}),(0,s.jsxs)(o.Box,{sx:{mt:2,mb:2},children:[(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:t.progress,sx:{height:12,borderRadius:6,backgroundColor:(0,rZ.alpha)(a.palette.primary.main,.1)}}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1,textAlign:"center"},children:[t.progress,"% Complete"]})]}),(0,s.jsxs)(o.Box,{sx:{mt:3},children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Project Timeline"}),(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[(0,s.jsxs)(o.Box,{sx:{flex:1},children:[(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Start Date"}),(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:new Date(t.startDate).toLocaleDateString()})]}),(0,s.jsxs)(o.Box,{sx:{flex:1,textAlign:"center"},children:[(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Current"}),(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:new Date().toLocaleDateString()})]}),(0,s.jsxs)(o.Box,{sx:{flex:1,textAlign:"right"},children:[(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Deadline"}),(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,color:N<7?"error":N<30?"warning.main":"success.main",children:R?new Date(R).toLocaleDateString():t.deadline?new Date(t.deadline).toLocaleDateString():"Not set"})]})]})]})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Task Completion"}),(0,s.jsxs)(c.Typography,{variant:"h4",fontWeight:700,children:[D.filter(e=>"completed"===e.status).length," / ",D.length]}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Tasks completed"})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Budget Usage"}),(0,s.jsxs)(c.Typography,{variant:"h4",fontWeight:700,children:[O.toFixed(1),"%"]}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",children:["$",t.spent.toLocaleString()," / $",E.toLocaleString()]})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Team Activity"}),(0,s.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",children:[t?.team?.length||0," team member",1!==(t?.team?.length||0)?"s":""," assigned"]}),(0,s.jsx)(o.Box,{sx:{display:"flex",gap:1,mt:2},children:(t?.team||[]).map(e=>(0,s.jsx)(ev.Chip,{label:e.name,size:"small",avatar:(0,s.jsx)(eT.Avatar,{children:e.name.charAt(0)})},e.id))})]})})})]})}),t.supportRequest&&(0,s.jsx)(ao,{value:n,index:4,children:(0,s.jsx)(g.Card,{variant:"outlined",children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(c.Typography,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(al.default,{})," Support Request Details"]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:2,sx:{mt:1},children:[(0,s.jsxs)(p.Grid,{item:!0,xs:12,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,s.jsx)(c.Typography,{variant:"body1",fontWeight:500,children:t.supportRequest.subject})]}),(0,s.jsxs)(p.Grid,{item:!0,xs:12,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,s.jsx)(c.Typography,{variant:"body2",children:t.supportRequest.description})]}),(0,s.jsxs)(p.Grid,{item:!0,xs:6,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,s.jsx)(ev.Chip,{label:t.supportRequest.status,size:"small",color:"resolved"===t.supportRequest.status?"success":"primary",sx:{textTransform:"capitalize"}})]}),(0,s.jsxs)(p.Grid,{item:!0,xs:6,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,s.jsx)(ev.Chip,{label:t.supportRequest.priority,size:"small",color:"high"===t.supportRequest.priority?"error":"medium"===t.supportRequest.priority?"warning":"default",sx:{textTransform:"capitalize"}})]}),(0,s.jsxs)(p.Grid,{item:!0,xs:6,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Created"}),(0,s.jsx)(c.Typography,{variant:"body2",children:new Date(t.supportRequest.createdAt).toLocaleDateString()})]}),(0,s.jsxs)(p.Grid,{item:!0,xs:6,children:[(0,s.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Last Updated"}),(0,s.jsx)(c.Typography,{variant:"body2",children:new Date(t.supportRequest.updatedAt).toLocaleDateString()})]})]})]})})})]}),(0,s.jsx)(rw.DialogActions,{children:(0,s.jsx)(y.Button,{onClick:r,children:"Close"})})]})},ac=()=>{let e=(0,eD.useTheme)(),[t,r]=(0,i.useState)([]),[a,n]=(0,i.useState)([]),[l,d]=(0,i.useState)(!0),[x,h]=(0,i.useState)(null),[f,b]=(0,i.useState)(""),[v,T]=(0,i.useState)("all"),[C,w]=(0,i.useState)("grid"),[S,A]=(0,i.useState)(0),[I,P]=(0,i.useState)(10),[k,B]=(0,i.useState)(!1),[D,L]=(0,i.useState)(!1),[E,R]=(0,i.useState)(null),[U,F]=(0,i.useState)({total:0,active:0,completed:0,totalRevenue:0}),[V,_]=(0,i.useState)({});(0,i.useEffect)(()=>{K(),H()},[]),(0,i.useEffect)(()=>{q()},[t,f,v]);let K=async()=>{try{d(!0);let e=await r3.getVentures();r(e),h(null)}catch(e){h("Failed to load ventures"),console.error(e)}finally{d(!1)}},H=async()=>{try{let e=await r3.getMetrics();F(e)}catch(e){console.error("Failed to load metrics:",e)}},q=()=>{let e=t;if("all"!==v&&(e=e.filter(e=>e.status===v)),f){let t=f.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.clientName?.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)))}n(e)},X=async e=>{try{await r3.createVenture(e),await K(),await H(),B(!1)}catch(e){console.error("Failed to add venture:",e),alert("Failed to add venture")}},J=async e=>{if(confirm("Are you sure you want to delete this venture?"))try{await r3.deleteVenture(e),await K(),await H()}catch(e){console.error("Failed to delete venture:",e),alert("Failed to delete venture")}},Y=e=>{R(e),L(!0)},Z=e=>{Y(e)},Q=e=>{_(t=>({...t,[e]:null}))},ee=({title:e,value:t,icon:r,color:a})=>(0,s.jsx)(g.Card,{sx:{height:"100%",background:`linear-gradient(135deg, ${(0,rZ.alpha)(a,.1)} 0%, ${(0,rZ.alpha)(a,.05)} 100%)`,border:`1px solid ${(0,rZ.alpha)(a,.2)}`},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(o.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:(0,s.jsx)(o.Box,{sx:{bgcolor:(0,rZ.alpha)(a,.15),color:a,p:1,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center"},children:r})}),(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:t}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:e})]})});return l&&0===t.length?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,s.jsx)(eP.CircularProgress,{})}):(0,s.jsxs)(o.Box,{children:[(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:4},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(ee,{title:"Total Ventures",value:U.total,icon:(0,s.jsx)(r1.default,{}),color:e.palette.primary.main})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(ee,{title:"Active Ventures",value:U.active,icon:(0,s.jsx)(e$.default,{}),color:e.palette.info.main})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(ee,{title:"Completed",value:U.completed,icon:(0,s.jsx)(e_.default,{}),color:e.palette.success.main})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(ee,{title:"Total Revenue",value:`$${(U.totalRevenue/1e3).toFixed(0)}K`,icon:(0,s.jsx)(rR.default,{}),color:e.palette.warning.main})})]}),x&&(0,s.jsx)(eI.Alert,{severity:"error",sx:{mb:3},onClose:()=>h(null),children:x}),(0,s.jsxs)(o.Box,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,s.jsx)(j.TextField,{placeholder:"Search ventures...",value:f,onChange:e=>b(e.target.value),InputProps:{startAdornment:(0,s.jsx)(O,{position:"start",children:(0,s.jsx)(eE.default,{})})},sx:{flex:"1 1 300px"}}),(0,s.jsxs)(o.Box,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,s.jsx)(ev.Chip,{label:"All",onClick:()=>T("all"),color:"all"===v?"primary":"default",variant:"all"===v?"filled":"outlined"}),(0,s.jsx)(ev.Chip,{label:"Planning",onClick:()=>T(r2.PLANNING),color:v===r2.PLANNING?"primary":"default",variant:v===r2.PLANNING?"filled":"outlined"}),(0,s.jsx)(ev.Chip,{label:"Active",onClick:()=>T(r2.ACTIVE),color:v===r2.ACTIVE?"primary":"default",variant:v===r2.ACTIVE?"filled":"outlined"}),(0,s.jsx)(ev.Chip,{label:"On Hold",onClick:()=>T(r2.ON_HOLD),color:v===r2.ON_HOLD?"primary":"default",variant:v===r2.ON_HOLD?"filled":"outlined"}),(0,s.jsx)(ev.Chip,{label:"Completed",onClick:()=>T(r2.COMPLETED),color:v===r2.COMPLETED?"primary":"default",variant:v===r2.COMPLETED?"filled":"outlined"})]}),(0,s.jsxs)(o.Box,{sx:{display:"flex",gap:1,ml:"auto"},children:[(0,s.jsxs)(rX.ToggleButtonGroup,{value:C,exclusive:!0,onChange:(e,t)=>t&&w(t),size:"small",children:[(0,s.jsx)(rJ.ToggleButton,{value:"grid",children:(0,s.jsx)(rQ.default,{})}),(0,s.jsx)(rJ.ToggleButton,{value:"table",children:(0,s.jsx)(r0.default,{})})]}),(0,s.jsx)(y.Button,{variant:"contained",startIcon:(0,s.jsx)(eR.default,{}),onClick:()=>B(!0),children:"Add Venture"})]})]}),"grid"===C&&(0,s.jsx)(p.Grid,{container:!0,spacing:3,children:0===a.length?(0,s.jsx)(p.Grid,{item:!0,xs:12,children:(0,s.jsx)(o.Box,{sx:{textAlign:"center",py:8},children:(0,s.jsx)(c.Typography,{variant:"h6",color:"text.secondary",children:"No ventures found"})})}):a.slice(S*I,(S+1)*I).map(e=>(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,s.jsx)(r9,{venture:e,onEdit:Z,onDelete:J,onView:Y})},e.id))}),"table"===C&&(0,s.jsxs)($.TableContainer,{component:u.Paper,children:[(0,s.jsxs)(N.Table,{children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{children:"Name"}),(0,s.jsx)(G.TableCell,{children:"Status"}),(0,s.jsx)(G.TableCell,{children:"Progress"}),(0,s.jsx)(G.TableCell,{children:"Budget"}),(0,s.jsx)(G.TableCell,{children:"Deadline"}),(0,s.jsx)(G.TableCell,{children:"Team"}),(0,s.jsx)(G.TableCell,{align:"right",children:"Actions"})]})}),(0,s.jsx)(M.TableBody,{children:0===a.length?(0,s.jsx)(W.TableRow,{children:(0,s.jsx)(G.TableCell,{colSpan:7,align:"center",children:(0,s.jsx)(c.Typography,{color:"text.secondary",py:4,children:"No ventures found"})})}):a.slice(S*I,(S+1)*I).map(e=>(0,s.jsxs)(W.TableRow,{hover:!0,sx:{cursor:"pointer"},onClick:()=>Y(e),children:[(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:"medium",children:e.name}),e.clientName&&(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:e.clientName})]})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.status.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),color:(e=>{switch(e){case r2.ACTIVE:return"primary";case r2.COMPLETED:return"success";case r2.ON_HOLD:return"warning";case r2.PLANNING:return"default";case r2.CANCELLED:return"error";default:return"default"}})(e.status),size:"small"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(eL.LinearProgress,{variant:"determinate",value:e.progress,sx:{flex:1,height:6,borderRadius:3}}),(0,s.jsxs)(c.Typography,{variant:"caption",children:[e.progress,"%"]})]})}),(0,s.jsxs)(G.TableCell,{children:[(0,s.jsxs)(c.Typography,{variant:"body2",children:["$",e.budget.toLocaleString()]}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["$",e.spent.toLocaleString()," spent"]})]}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:new Date(e.deadline).toLocaleDateString()})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(rY.AvatarGroup,{max:3,sx:{"& .MuiAvatar-root":{width:28,height:28}},children:e.team.map(e=>(0,s.jsx)(eT.Avatar,{alt:e.name,src:e.avatar,children:e.name.charAt(0)},e.id))})}),(0,s.jsxs)(G.TableCell,{align:"right",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(em.IconButton,{size:"small",onClick:t=>{var r;return r=e.id,void _(e=>({...e,[r]:t.currentTarget}))},children:(0,s.jsx)(eO.default,{})}),(0,s.jsxs)(ey.Menu,{anchorEl:V[e.id],open:!!V[e.id],onClose:()=>Q(e.id),children:[(0,s.jsxs)(ej.MenuItem,{onClick:()=>{Y(e),Q(e.id)},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(rO.default,{fontSize:"small"})}),(0,s.jsx)(eb.ListItemText,{children:"View Details"})]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>{Z(e),Q(e.id)},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eN.default,{fontSize:"small"})}),(0,s.jsx)(eb.ListItemText,{children:"Edit"})]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>{J(e.id),Q(e.id)},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eM.default,{fontSize:"small",color:"error"})}),(0,s.jsx)(eb.ListItemText,{sx:{color:"error.main"},children:"Delete"})]})]})]})]},e.id))})]}),(0,s.jsx)(eg,{component:"div",count:a.length,page:S,onPageChange:(e,t)=>A(t),rowsPerPage:I,onRowsPerPageChange:e=>{P(parseInt(e.target.value,10)),A(0)},rowsPerPageOptions:[5,10,25,50]})]}),"grid"===C&&a.length>0&&(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,s.jsx)(eg,{component:"div",count:a.length,page:S,onPageChange:(e,t)=>A(t),rowsPerPage:I,onRowsPerPageChange:e=>{P(parseInt(e.target.value,10)),A(0)},rowsPerPageOptions:[6,12,24]})}),(0,s.jsx)(ae,{open:k,onClose:()=>B(!1),onSave:X}),(0,s.jsx)(ad,{open:D,venture:E,onClose:()=>L(!1)})]})};var ax=e.i(62574);function ah(e){let{children:t,value:r,index:a,...i}=e;return(0,s.jsx)("div",{role:"tabpanel",hidden:r!==a,id:`crm-tabpanel-${a}`,"aria-labelledby":`crm-tab-${a}`,...i,children:r===a&&(0,s.jsx)(o.Box,{sx:{pt:3},children:t})})}function au(){let e;(0,eD.useTheme)();let{user:t}=(0,rf.useAuth)(),r=(0,l.useRouter)(),[a,f]=(0,i.useState)(0),b={users:0,clients:1,shopify:2,analytics:3,ventures:4,tasks:5};(0,i.useEffect)(()=>{let e=r.query.tab;e&&void 0!==b[e]&&f(b[e])},[r.query.tab]);let[v,T]=(0,i.useState)(!0),[C,w]=(0,i.useState)(null),[S,A]=(0,i.useState)(null),[I,P]=(0,i.useState)([]),[k,B]=(0,i.useState)([]),[D,L]=(0,i.useState)([]),[E,R]=(0,i.useState)(null),[U,F]=(0,i.useState)(!1),[V,_]=(0,i.useState)([]),[K,H]=(0,i.useState)(""),[q,X]=(0,i.useState)("all"),[J,Y]=(0,i.useState)("all"),[Z,Q]=(0,i.useState)("month"),ee=(0,i.useRef)("month"),[et,er]=(0,i.useState)(0),[ea,es]=(0,i.useState)(10),[ei,en]=(0,i.useState)(!1),[el,eo]=(0,i.useState)(!1),[ed,ec]=(0,i.useState)(null),[ex,eh]=(0,i.useState)(null),[eu,ep]=(0,i.useState)(null),[e4,e5]=(0,i.useState)(null),e3=(0,rb.getBackendUrl)();(0,i.useEffect)(()=>{ee.current=Z},[Z]);let e6=(0,i.useCallback)(async e=>{F(!0);try{let t=e||ee.current,r=await fetch(`${e3}/api/shopify/analytics?days=${"week"===t?7:"month"===t?30:365}`,{credentials:"include"});if(r.ok){let e=await r.json();R(e.analytics||null)}else R(null)}catch(e){console.error("Error fetching Shopify analytics:",e),R(null)}finally{F(!1)}},[e3]),e8=async()=>{try{let e=await fetch(`${e3}/api/tasks`,{credentials:"include"});if(e.ok){let t=await e.json();_(t.tasks||[])}}catch(e){console.error("Error fetching tasks:",e)}},e9=async()=>{try{let e=await fetch(`${e3}/api/admin/users`,{credentials:"include"});if(e.ok){let t=await e.json();P(t.users||[])}}catch(e){console.error("Error fetching users:",e)}},e7=async()=>{try{let e=await fetch(`${e3}/api/creative/clients`,{credentials:"include"});if(e.ok){let t=await e.json();B(t.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},te=async()=>{try{let e=await fetch(`${e3}/api/shopify/customers`,{credentials:"include"});if(e.ok){let t=await e.json();L(t.customers||[])}else L([])}catch(e){console.error("Error fetching Shopify customers:",e),L([])}},tt=async()=>{T(!0);try{await Promise.all([e9(),e7(),te(),e6(),e8()])}finally{T(!1)}};(0,i.useEffect)(()=>{tt()},[]),(0,i.useEffect)(()=>{2!==a||U||e6()},[a,U,e6]),(0,i.useEffect)(()=>{if(C||S){let e=setTimeout(()=>{w(null),A(null)},5e3);return()=>clearTimeout(e)}},[C,S]);let tr=I.length,ta=k.filter(e=>"active"===e.status||"pending"===e.status).length,ts=k.filter(e=>"prospect"===e.status).length,ti=D.length;I.filter(e=>e.is_employee&&"active"===e.status).length,k.filter(e=>"prospect"===e.status||"pending"===e.status).length,k.filter(e=>"active"===e.status).length;let tn=k.filter(e=>{if(!e.createdAt)return!1;let t=new Date(e.createdAt),r=(Date.now()-t.getTime())/864e5;return("prospect"===e.status||"pending"===e.status)&&r<=7}).length,tl=k.filter(e=>"prospect"===e.status||"pending"===e.status).length,to=k.filter(e=>"active"===e.status).length,td=k.filter(e=>"inactive"===e.status).length;(()=>{let e=["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],t=[],r=new Date;for(let a=6;a>=0;a--){let s=new Date(r);s.setDate(s.getDate()-a);let i=e[s.getDay()],n=k.filter(e=>!!e.createdAt&&new Date(e.createdAt).toDateString()===s.toDateString()&&("prospect"===e.status||"pending"===e.status)).length,l=k.filter(e=>!!e.createdAt&&new Date(e.createdAt).toDateString()===s.toDateString()&&"active"===e.status).length;t.push({day:i,leads:n,customers:l})}})();let tc=[{name:"In Progress",value:k.filter(e=>"active"===e.status).length,color:"#9c27b0"},{name:"On Hold",value:k.filter(e=>"pending"===e.status).length,color:"#ffc107"},{name:"Upcoming",value:k.filter(e=>"prospect"===e.status).length,color:"#9e9e9e"},{name:"Completed",value:Math.floor(.2*ta),color:"#4caf50"}].filter(e=>e.value>0);k.filter(e=>"active"===e.status).reduce((e,t)=>e+("enterprise"===t.tier?100:"professional"===t.tier?50:10),0),k.filter(e=>"active"===e.status).length,V.filter(e=>"completed"!==e.status).length;let th=(e=K.toLowerCase(),0===a?I.filter(t=>t.username?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.first_name?.toLowerCase().includes(e)||t.last_name?.toLowerCase().includes(e)):1===a?k.filter(t=>{let r=t.name?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.company?.toLowerCase().includes(e),a="all"===q||t.status===q,s="all"===J||"client"===J&&("active"===t.status||"pending"===t.status)||"prospect"===J&&"prospect"===t.status||"lead"===J&&("prospect"===t.status||"pending"===t.status);return r&&a&&s}):2===a?D.filter(t=>t.email?.toLowerCase().includes(e)||t.firstName?.toLowerCase().includes(e)||t.lastName?.toLowerCase().includes(e)):3===a?[]:[]),tu=th.slice(et*ea,et*ea+ea),tp=(e,t,r)=>{ep(e.currentTarget),e5(r),"user"===r?ec(t):eh(t)},tg=()=>{ep(null),e5(null)},tm=async()=>{if("user"===e4&&ed)try{let e=await fetch(`${e3}/api/admin/users/${ed.id}`,{method:"DELETE",credentials:"include"});if(e.ok)w("User deleted successfully"),e9();else{let t=await e.json();A(t.error||"Failed to delete user")}}catch(e){A("Failed to delete user")}else if("client"===e4&&ex)try{let e=await fetch(`${e3}/api/creative/clients/${ex.id}`,{method:"DELETE",credentials:"include"});if(e.ok)w("Client deleted successfully"),e7();else{let t=await e.json();A(t.error||"Failed to delete client")}}catch(e){A("Failed to delete client")}tg()},ty=async(e,t)=>{if("client"===e4&&ex)try{let e=await fetch(`${e3}/api/creative/clients/${ex.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(e.ok)w("Status updated successfully"),e7();else{let t=await e.json();A(t.error||"Failed to update status")}}catch(e){A("Failed to update status")}tg()},tj=e=>{switch(e){case"active":return"success";case"pending":return"warning";case"prospect":return"info";case"blocked":return"error";default:return"default"}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.default,{children:[(0,s.jsx)("title",{children:"CRM Dashboard - iShareHow Labs"}),(0,s.jsx)("link",{rel:"canonical",href:"https://ventures.isharehow.app/crm"}),(0,s.jsx)("meta",{name:"description",content:"Manage users, clients, prospects, and Shopify data"})]}),(0,s.jsx)(rj.default,{children:(0,s.jsx)(ry.default,{active:void 0,children:(0,s.jsxs)(d.Container,{maxWidth:"xl",sx:{py:4},children:[(0,s.jsxs)(o.Box,{sx:{mb:4},children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"CRM Dashboard"}),(0,s.jsx)(c.Typography,{variant:"body1",color:"text.secondary",children:"Manage users, clients, prospects, and Shopify data all in one place"})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:4},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"primary.main",width:56,height:56},children:(0,s.jsx)(eW.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:tr}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Total Users"})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"success.main",width:56,height:56},children:(0,s.jsx)(eG.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:ta}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Active Clients"})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"info.main",width:56,height:56},children:(0,s.jsx)(e$.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:ts}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Prospects/Leads"})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"warning.main",width:56,height:56},children:(0,s.jsx)(ez.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:ti}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Shopify Customers"})]})]})})})})]}),C&&(0,s.jsx)(eI.Alert,{severity:"success",sx:{mb:3},onClose:()=>w(null),children:C}),S&&(0,s.jsx)(eI.Alert,{severity:"error",sx:{mb:3},onClose:()=>A(null),children:S}),(0,s.jsxs)(u.Paper,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:[(0,s.jsx)(o.Box,{sx:{borderBottom:1,borderColor:"divider",px:2},children:(0,s.jsxs)(x.Tabs,{value:a,onChange:(e,t)=>{e.preventDefault(),f(t),er(0),H(""),X("all"),Y("all");let a=Object.keys(b).find(e=>b[e]===t);a&&r.push(`/crm?tab=${a}`,void 0,{shallow:!0})},variant:"scrollable",scrollButtons:"auto",children:[(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(eW.default,{}),iconPosition:"start",label:"Users & Employees",sx:{textTransform:"none",fontWeight:600}}),(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(eG.default,{}),iconPosition:"start",label:"Clients, Prospects & Leads",sx:{textTransform:"none",fontWeight:600}}),(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(ez.default,{}),iconPosition:"start",label:"Shopify & Analytics",sx:{textTransform:"none",fontWeight:600}}),(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(eV.default,{}),iconPosition:"start",label:"Our CRM GA",sx:{textTransform:"none",fontWeight:600}}),(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(eU.default,{}),iconPosition:"start",label:"Ventures",sx:{textTransform:"none",fontWeight:600}}),(0,s.jsx)(h.Tab,{icon:(0,s.jsx)(eq.default,{}),iconPosition:"start",label:"To-Do & Tasks",sx:{textTransform:"none",fontWeight:600}})]})}),(0,s.jsxs)(o.Box,{sx:{p:3},children:[(0,s.jsxs)(o.Box,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,s.jsx)(j.TextField,{placeholder:"Search...",value:K,onChange:e=>H(e.target.value),InputProps:{startAdornment:(0,s.jsx)(O,{position:"start",children:(0,s.jsx)(eE.default,{})})},sx:{flexGrow:1,maxWidth:400}}),1===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eC.FormControl,{size:"small",sx:{minWidth:150},children:[(0,s.jsx)(ew.InputLabel,{children:"Status"}),(0,s.jsxs)(eS.Select,{value:q,label:"Status",onChange:e=>X(e.target.value),children:[(0,s.jsx)(ej.MenuItem,{value:"all",children:"All Status"}),(0,s.jsx)(ej.MenuItem,{value:"active",children:"Active"}),(0,s.jsx)(ej.MenuItem,{value:"pending",children:"Pending"}),(0,s.jsx)(ej.MenuItem,{value:"prospect",children:"Prospect"}),(0,s.jsx)(ej.MenuItem,{value:"inactive",children:"Inactive"})]})]}),(0,s.jsxs)(eC.FormControl,{size:"small",sx:{minWidth:150},children:[(0,s.jsx)(ew.InputLabel,{children:"Type"}),(0,s.jsxs)(eS.Select,{value:J,label:"Type",onChange:e=>Y(e.target.value),children:[(0,s.jsx)(ej.MenuItem,{value:"all",children:"All Types"}),(0,s.jsx)(ej.MenuItem,{value:"client",children:"Client"}),(0,s.jsx)(ej.MenuItem,{value:"prospect",children:"Prospect"}),(0,s.jsx)(ej.MenuItem,{value:"lead",children:"Lead"})]})]})]}),(0,s.jsx)(y.Button,{variant:"outlined",startIcon:(0,s.jsx)(eF.default,{}),onClick:tt,sx:{textTransform:"none"},children:"Refresh"}),1===a&&(0,s.jsxs)(y.Button,{variant:"contained",startIcon:(0,s.jsx)(eR.default,{}),onClick:()=>en(!0),sx:{textTransform:"none"},children:["Add ","prospect"===J||"lead"===J?"Prospect/Lead":"Client"]})]}),(0,s.jsx)(ah,{value:a,index:0,children:v?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,s.jsx)(eP.CircularProgress,{})}):(0,s.jsxs)($.TableContainer,{children:[(0,s.jsxs)(N.Table,{children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{padding:"checkbox",children:(0,s.jsx)(eA.Checkbox,{})}),(0,s.jsx)(G.TableCell,{children:"Profile"}),(0,s.jsx)(G.TableCell,{children:"Email & Username"}),(0,s.jsx)(G.TableCell,{children:"Role"}),(0,s.jsx)(G.TableCell,{children:"Status"}),(0,s.jsx)(G.TableCell,{children:"Date"}),(0,s.jsx)(G.TableCell,{align:"right",children:"Actions"})]})}),(0,s.jsx)(M.TableBody,{children:tu.map(e=>(0,s.jsxs)(W.TableRow,{hover:!0,children:[(0,s.jsx)(G.TableCell,{padding:"checkbox",children:(0,s.jsx)(eA.Checkbox,{})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(o.Box,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,s.jsx)(eT.Avatar,{src:e.profile_image,sx:{width:40,height:40},children:e.first_name?.[0]||e.username?.[0]}),(0,s.jsxs)(o.Box,{children:[(0,s.jsxs)(c.Typography,{variant:"body2",fontWeight:500,children:[e.first_name," ",e.last_name]}),(0,s.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:["#",e.id]})]})]})}),(0,s.jsxs)(G.TableCell,{children:[(0,s.jsx)(c.Typography,{variant:"body2",children:e.email}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:e.username})]}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.is_admin?"Admin":e.is_employee?"Employee":e.is_client?"Client":"User",size:"small",color:"primary",variant:"outlined"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.status||"Active",size:"small",color:tj(e.status),sx:{textTransform:"capitalize"}})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})}),(0,s.jsx)(G.TableCell,{align:"right",children:(0,s.jsx)(em.IconButton,{size:"small",onClick:t=>tp(t,e,"user"),children:(0,s.jsx)(eO.default,{})})})]},e.id))})]}),(0,s.jsx)(eg,{rowsPerPageOptions:[5,10,25],component:"div",count:th.length,rowsPerPage:ea,page:et,onPageChange:(e,t)=>er(t),onRowsPerPageChange:e=>{es(parseInt(e.target.value,10)),er(0)}})]})}),(0,s.jsx)(ah,{value:a,index:1,children:v?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,s.jsx)(eP.CircularProgress,{})}):(0,s.jsxs)($.TableContainer,{children:[(0,s.jsxs)(N.Table,{children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{padding:"checkbox",children:(0,s.jsx)(eA.Checkbox,{})}),(0,s.jsx)(G.TableCell,{children:"Company & Contact"}),(0,s.jsx)(G.TableCell,{children:"Email & Phone"}),(0,s.jsx)(G.TableCell,{children:"Type"}),(0,s.jsx)(G.TableCell,{children:"Status"}),(0,s.jsx)(G.TableCell,{children:"Tier"}),(0,s.jsx)(G.TableCell,{children:"Assigned To"}),(0,s.jsx)(G.TableCell,{children:"Date"}),(0,s.jsx)(G.TableCell,{align:"right",children:"Actions"})]})}),(0,s.jsx)(M.TableBody,{children:tu.map(e=>{let t="prospect"===e.status,r="pending"===e.status||"prospect"===e.status;return(0,s.jsxs)(W.TableRow,{hover:!0,children:[(0,s.jsx)(G.TableCell,{padding:"checkbox",children:(0,s.jsx)(eA.Checkbox,{})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",fontWeight:500,children:e.company||e.name}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:e.name})]})}),(0,s.jsxs)(G.TableCell,{children:[(0,s.jsx)(c.Typography,{variant:"body2",children:e.email}),(0,s.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:e.phone||"No phone"})]}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:t?"Prospect":r?"Lead":"Client",size:"small",color:t?"warning":r?"info":"primary",variant:"outlined"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.status,size:"small",color:tj(e.status),sx:{textTransform:"capitalize"}})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.tier||"N/A",size:"small",variant:"outlined"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:e.assignedEmployee||"Unassigned"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})}),(0,s.jsx)(G.TableCell,{align:"right",children:(0,s.jsx)(em.IconButton,{size:"small",onClick:t=>tp(t,e,"client"),children:(0,s.jsx)(eO.default,{})})})]},e.id)})})]}),(0,s.jsx)(eg,{rowsPerPageOptions:[5,10,25],component:"div",count:th.length,rowsPerPage:ea,page:et,onPageChange:(e,t)=>er(t),onRowsPerPageChange:e=>{es(parseInt(e.target.value,10)),er(0)}})]})}),(0,s.jsx)(ah,{value:a,index:2,children:(0,s.jsxs)(o.Box,{children:[(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2,height:"100%"},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"warning.main",width:40,height:40},children:(0,s.jsx)(ez.default,{})}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Shopify Revenue"})]}),(0,s.jsxs)(c.Typography,{variant:"h4",fontWeight:700,children:["$",E?.totalRevenue?.toFixed(2)||"0.00"]}),U&&(0,s.jsx)(eL.LinearProgress,{sx:{mt:1}})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2,height:"100%"},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"success.main",width:40,height:40},children:(0,s.jsx)(ez.default,{})}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Shopify Orders"})]}),(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:E?.totalOrders||0}),U&&(0,s.jsx)(eL.LinearProgress,{sx:{mt:1}})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2,height:"100%"},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"info.main",width:40,height:40},children:(0,s.jsx)(e$.default,{})}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Avg Order Value"})]}),(0,s.jsxs)(c.Typography,{variant:"h4",fontWeight:700,children:["$",E?.averageOrderValue?.toFixed(2)||"0.00"]}),U&&(0,s.jsx)(eL.LinearProgress,{sx:{mt:1}})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2,height:"100%"},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"primary.main",width:40,height:40},children:(0,s.jsx)(eW.default,{})}),(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Shopify Customers"})]}),(0,s.jsx)(c.Typography,{variant:"h4",fontWeight:700,children:ti})]})})})]}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,md:8,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,s.jsx)(c.Typography,{variant:"h6",fontWeight:600,children:"Revenue & Orders Over Time"}),(0,s.jsx)(eC.FormControl,{size:"small",sx:{minWidth:120},children:(0,s.jsxs)(eS.Select,{value:Z,onChange:e=>{let t=e.target.value;Q(t),e6(t)},sx:{textTransform:"none"},children:[(0,s.jsx)(ej.MenuItem,{value:"week",children:"Week"}),(0,s.jsx)(ej.MenuItem,{value:"month",children:"Month"}),(0,s.jsx)(ej.MenuItem,{value:"year",children:"Year"})]})})]}),(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:300,children:(0,s.jsxs)(eX.LineChart,{data:E?.revenueByDay?.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:e.revenue,orders:E?.ordersByDay?.find(t=>t.date===e.date)?.count||0}))||[],children:[(0,s.jsx)(eQ.CartesianGrid,{strokeDasharray:"3 3"}),(0,s.jsx)(eY.XAxis,{dataKey:"date"}),(0,s.jsx)(eZ.YAxis,{yAxisId:"left"}),(0,s.jsx)(eZ.YAxis,{yAxisId:"right",orientation:"right"}),(0,s.jsx)(e0.Tooltip,{}),(0,s.jsx)(e1.Legend,{}),(0,s.jsx)(eJ.Line,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"#9c27b0",strokeWidth:2,name:"Revenue ($)"}),(0,s.jsx)(eJ.Line,{yAxisId:"right",type:"monotone",dataKey:"orders",stroke:"#ffc107",strokeWidth:2,name:"Orders"})]})})]})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,md:4,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsx)(c.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"CRM Project Status"}),(0,s.jsx)(e2.ResponsiveContainer,{width:"100%",height:300,children:(0,s.jsxs)(tx,{children:[(0,s.jsx)(rm,{data:tc,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:tc.map((e,t)=>(0,s.jsx)(tV.Cell,{fill:e.color},`cell-${t}`))}),(0,s.jsx)(e0.Tooltip,{}),(0,s.jsx)(e1.Legend,{verticalAlign:"bottom",height:36,formatter:e=>(0,s.jsx)("span",{style:{fontSize:"12px"},children:e})})]})})]})})})]}),(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2,mb:3},children:(0,s.jsxs)(m.CardContent,{children:[(0,s.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,s.jsx)(c.Typography,{variant:"h6",fontWeight:600,children:"Shopify Customers"}),(0,s.jsx)(y.Button,{variant:"outlined",size:"small",startIcon:(0,s.jsx)(eF.default,{}),onClick:()=>{te(),e6()},sx:{textTransform:"none"},children:"Refresh"})]}),v?(0,s.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,s.jsx)(eP.CircularProgress,{})}):0===D.length?(0,s.jsxs)(o.Box,{sx:{textAlign:"center",py:4},children:[(0,s.jsx)(ez.default,{sx:{fontSize:48,color:"text.secondary",mb:2,opacity:.5}}),(0,s.jsx)(c.Typography,{variant:"body1",color:"text.secondary",children:"No Shopify customers found"})]}):(0,s.jsx)($.TableContainer,{children:(0,s.jsxs)(N.Table,{size:"small",children:[(0,s.jsx)(z.TableHead,{children:(0,s.jsxs)(W.TableRow,{children:[(0,s.jsx)(G.TableCell,{children:"Customer"}),(0,s.jsx)(G.TableCell,{children:"Email"}),(0,s.jsx)(G.TableCell,{children:"Total Spent"}),(0,s.jsx)(G.TableCell,{children:"Orders"}),(0,s.jsx)(G.TableCell,{children:"Created"})]})}),(0,s.jsx)(M.TableBody,{children:D.slice(0,10).map(e=>(0,s.jsxs)(W.TableRow,{hover:!0,children:[(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(c.Typography,{variant:"body2",fontWeight:500,children:[e.firstName," ",e.lastName]})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:e.email})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsxs)(c.Typography,{variant:"body2",fontWeight:600,children:["$",e.totalSpent.toFixed(2)]})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(ev.Chip,{label:e.ordersCount,size:"small"})}),(0,s.jsx)(G.TableCell,{children:(0,s.jsx)(c.Typography,{variant:"body2",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})})]},e.id))})]})})]})}),(0,s.jsxs)(p.Grid,{container:!0,spacing:3,children:[(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"primary.main",width:48,height:48},children:(0,s.jsx)(eH.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"New Leads"}),(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:tn})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"warning.main",width:48,height:48},children:(0,s.jsx)(eW.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Open Leads"}),(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:tl})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"success.main",width:48,height:48},children:(0,s.jsx)(e_.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Won Leads"}),(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:to})]})]})})})}),(0,s.jsx)(p.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,s.jsx)(g.Card,{elevation:2,sx:{borderRadius:2},children:(0,s.jsx)(m.CardContent,{children:(0,s.jsxs)(ek.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsx)(eT.Avatar,{sx:{bgcolor:"error.main",width:48,height:48},children:(0,s.jsx)(eK.default,{})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Lost Leads"}),(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:td})]})]})})})})]})]})}),(0,s.jsx)(ah,{value:a,index:3,children:(0,s.jsx)(rq,{})}),(0,s.jsx)(ah,{value:a,index:4,children:(0,s.jsx)(ac,{})}),(0,s.jsx)(ah,{value:a,index:5,children:(0,s.jsx)(g.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,s.jsxs)(m.CardContent,{sx:{p:3},children:[(0,s.jsxs)(o.Box,{sx:{mb:3},children:[(0,s.jsx)(c.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"To-Do & Tasks"}),(0,s.jsx)(c.Typography,{variant:"body1",color:"text.secondary",children:"Manage your tasks and track your progress"})]}),(0,s.jsx)(o.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,s.jsx)(o.Box,{sx:{width:"100%"},children:(0,s.jsx)(o.Box,{sx:{mb:3},children:(0,s.jsx)(ax.default,{height:1131})})})})]})})})]})]}),(0,s.jsxs)(ey.Menu,{anchorEl:eu,open:!!eu,onClose:tg,children:[(0,s.jsxs)(ej.MenuItem,{onClick:()=>{"user"===e4&&ed?eo(!0):"client"===e4&&ex&&en(!0),tg()},children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eN.default,{fontSize:"small"})}),(0,s.jsx)(eb.ListItemText,{children:"Edit"})]}),"client"===e4&&ex&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ej.MenuItem,{onClick:()=>ty(ex,"active"),children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eA.Checkbox,{checked:"active"===ex.status})}),(0,s.jsx)(eb.ListItemText,{children:"Mark as Active"})]}),(0,s.jsxs)(ej.MenuItem,{onClick:()=>ty(ex,"prospect"),children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eA.Checkbox,{checked:"prospect"===ex.status})}),(0,s.jsx)(eb.ListItemText,{children:"Mark as Prospect"})]}),(0,s.jsx)(eB.Divider,{})]}),(0,s.jsxs)(ej.MenuItem,{onClick:tm,children:[(0,s.jsx)(ef.ListItemIcon,{children:(0,s.jsx)(eM.default,{fontSize:"small",color:"error"})}),(0,s.jsx)(eb.ListItemText,{children:"Delete"})]})]}),(0,s.jsx)(rD.default,{open:ei,onClose:()=>{en(!1),e7()}}),(0,s.jsx)(rB,{open:el,user:ed,onClose:()=>{eo(!1),ec(null),e9()},onSuccess:w,onError:A,availableClients:k})]})})})]})}e.s(["default",()=>au],57664)},47607,(e,t,r)=>{let a="/crm";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(57664)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);