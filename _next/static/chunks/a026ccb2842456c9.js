(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18394,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(e.r(64800)),s=e.r(44855);a.default=(0,l.default)((0,s.jsx)("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard")},94367,87225,33932,7656,50723,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),l=e.i(81706),s=e.i(15127);let i=r.createContext();var o=e.i(96861),n=e.i(95262),d=e.i(51480),c=e.i(13740);function u(e){return(0,c.default)("MuiTable",e)}(0,d.default)("MuiTable",["root","stickyHeader"]);var h=e.i(44855);let p=["className","component","padding","size","stickyHeader"],g=(0,n.default)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,a.default)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,a.default)({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),f="table",m=r.forwardRef(function(e,n){let d=(0,o.useDefaultProps)({props:e,name:"MuiTable"}),{className:c,component:m=f,padding:x="normal",size:y="medium",stickyHeader:b=!1}=d,v=(0,t.default)(d,p),j=(0,a.default)({},d,{component:m,padding:x,size:y,stickyHeader:b}),w=(e=>{let{classes:t,stickyHeader:a}=e;return(0,s.default)({root:["root",a&&"stickyHeader"]},u,t)})(j),T=r.useMemo(()=>({padding:x,size:y,stickyHeader:b}),[x,y,b]);return(0,h.jsx)(i.Provider,{value:T,children:(0,h.jsx)(g,(0,a.default)({as:m,role:m===f?null:"table",ref:n,className:(0,l.default)(w.root,c),ownerState:j},v))})});e.s(["Table",0,m],94367);let x=r.createContext();function y(e){return(0,c.default)("MuiTableBody",e)}(0,d.default)("MuiTableBody",["root"]);let b=["className","component"],v=(0,n.default)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),j={variant:"body"},w="tbody",T=r.forwardRef(function(e,r){let i=(0,o.useDefaultProps)({props:e,name:"MuiTableBody"}),{className:n,component:d=w}=i,c=(0,t.default)(i,b),u=(0,a.default)({},i,{component:d}),p=(e=>{let{classes:t}=e;return(0,s.default)({root:["root"]},y,t)})(u);return(0,h.jsx)(x.Provider,{value:j,children:(0,h.jsx)(v,(0,a.default)({className:(0,l.default)(p.root,n),as:d,ref:r,role:d===w?null:"rowgroup",ownerState:u},c))})});e.s(["TableBody",0,T],87225);var S=e.i(96163),C=e.i(18420);function k(e){return(0,c.default)("MuiTableCell",e)}let P=(0,d.default)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),M=["align","className","component","padding","scope","size","sortDirection","variant"],I=(0,n.default)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,C.default)(a.size)}`],"normal"!==a.padding&&t[`padding${(0,C.default)(a.padding)}`],"inherit"!==a.align&&t[`align${(0,C.default)(a.align)}`],a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>(0,a.default)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?(0,S.lighten)((0,S.alpha)(e.palette.divider,1),.88):(0,S.darken)((0,S.alpha)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${P.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),R=r.forwardRef(function(e,n){let d,c=(0,o.useDefaultProps)({props:e,name:"MuiTableCell"}),{align:u="inherit",className:p,component:g,padding:f,scope:m,size:y,sortDirection:b,variant:v}=c,j=(0,t.default)(c,M),w=r.useContext(i),T=r.useContext(x),S=T&&"head"===T.variant,P=m;"td"===(d=g||(S?"th":"td"))?P=void 0:!P&&S&&(P="col");let R=v||T&&T.variant,E=(0,a.default)({},c,{align:u,component:d,padding:f||(w&&w.padding?w.padding:"normal"),size:y||(w&&w.size?w.size:"medium"),sortDirection:b,stickyHeader:"head"===R&&w&&w.stickyHeader,variant:R}),$=(e=>{let{classes:t,variant:a,align:r,padding:l,size:i,stickyHeader:o}=e,n={root:["root",a,o&&"stickyHeader","inherit"!==r&&`align${(0,C.default)(r)}`,"normal"!==l&&`padding${(0,C.default)(l)}`,`size${(0,C.default)(i)}`]};return(0,s.default)(n,k,t)})(E),_=null;return b&&(_="asc"===b?"ascending":"descending"),(0,h.jsx)(I,(0,a.default)({as:d,ref:n,className:(0,l.default)($.root,p),"aria-sort":_,scope:P,ownerState:E},j))});function E(e){return(0,c.default)("MuiTableHead",e)}e.s(["TableCell",0,R],33932),(0,d.default)("MuiTableHead",["root"]);let $=["className","component"],_=(0,n.default)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),B={variant:"head"},N="thead",A=r.forwardRef(function(e,r){let i=(0,o.useDefaultProps)({props:e,name:"MuiTableHead"}),{className:n,component:d=N}=i,c=(0,t.default)(i,$),u=(0,a.default)({},i,{component:d}),p=(e=>{let{classes:t}=e;return(0,s.default)({root:["root"]},E,t)})(u);return(0,h.jsx)(x.Provider,{value:B,children:(0,h.jsx)(_,(0,a.default)({as:d,className:(0,l.default)(p.root,n),ref:r,role:d===N?null:"rowgroup",ownerState:u},c))})});function D(e){return(0,c.default)("MuiTableRow",e)}e.s(["TableHead",0,A],7656);let O=(0,d.default)("MuiTableRow",["root","selected","hover","head","footer"]),F=["className","component","hover","selected"],z=(0,n.default)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${O.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${O.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,S.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,S.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),H=r.forwardRef(function(e,i){let n=(0,o.useDefaultProps)({props:e,name:"MuiTableRow"}),{className:d,component:c="tr",hover:u=!1,selected:p=!1}=n,g=(0,t.default)(n,F),f=r.useContext(x),m=(0,a.default)({},n,{component:c,hover:u,selected:p,head:f&&"head"===f.variant,footer:f&&"footer"===f.variant}),y=(e=>{let{classes:t,selected:a,hover:r,head:l,footer:i}=e;return(0,s.default)({root:["root",a&&"selected",r&&"hover",l&&"head",i&&"footer"]},D,t)})(m);return(0,h.jsx)(z,(0,a.default)({as:c,ref:i,className:(0,l.default)(y.root,d),role:"tr"===c?null:"row",ownerState:m},g))});e.s(["TableRow",0,H],50723)},47379,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),l=e.i(81706),s=e.i(15127),i=e.i(95262),o=e.i(96861),n=e.i(51480),d=e.i(13740);function c(e){return(0,d.default)("MuiDialogActions",e)}(0,n.default)("MuiDialogActions",["root","spacing"]);var u=e.i(44855);let h=["className","disableSpacing"],p=(0,i.default)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,a.default)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),g=r.forwardRef(function(e,r){let i=(0,o.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:d=!1}=i,g=(0,t.default)(i,h),f=(0,a.default)({},i,{disableSpacing:d}),m=(e=>{let{classes:t,disableSpacing:a}=e;return(0,s.default)({root:["root",!a&&"spacing"]},c,t)})(f);return(0,u.jsx)(p,(0,a.default)({className:(0,l.default)(m.root,n),ownerState:f,ref:r},g))});e.s(["DialogActions",0,g],47379)},35134,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(e.r(64800)),s=e.r(44855);a.default=(0,l.default)([(0,s.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),(0,s.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings")},31862,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(e.r(64800)),s=e.r(44855);a.default=(0,l.default)((0,s.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},60472,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(e.r(64800)),s=e.r(44855);a.default=(0,l.default)((0,s.jsx)("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey")},5385,68914,e=>{"use strict";var t=e.i(58891);let a={defaultTab:0,layout:"grid",showTaskList:!0,showLiveUpdates:!0,autoRefresh:!0,refreshInterval:300},r={workspace:{visible:!0,order:0},focus:{visible:!0,order:3}},l="user_dashboard_settings";function s(){let[e,s]=(0,t.useState)(()=>{try{let e=localStorage.getItem(l);if(e){let t=JSON.parse(e);return{dashboard:{...a,...t.dashboard},panels:{...r,...t.panels},apiKeys:t.apiKeys||{}}}}catch(e){console.error("Error loading settings:",e)}return{dashboard:a,panels:r,apiKeys:{}}}),i=(0,t.useCallback)(e=>{s(t=>{let a={...t,dashboard:{...t.dashboard,...e}};try{localStorage.setItem(l,JSON.stringify(a))}catch(e){console.error("Error saving settings:",e)}return a})},[]),o=(0,t.useCallback)((e,t)=>{s(a=>{let r={...a,panels:{...a.panels,[e]:{...a.panels[e],...t}}};try{localStorage.setItem(l,JSON.stringify(r))}catch(e){console.error("Error saving settings:",e)}return r})},[]),n=(0,t.useCallback)(e=>{s(t=>{let a={...t,apiKeys:{...t.apiKeys,...e}};try{localStorage.setItem(l,JSON.stringify(a))}catch(e){console.error("Error saving settings:",e)}return a})},[]),d=(0,t.useCallback)(()=>{let e={dashboard:a,panels:r,apiKeys:{}};s(e);try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Error saving settings:",e)}},[]),c=(0,t.useCallback)(()=>Object.entries(e.panels).filter(([e,t])=>"web3"!==e&&"figma"!==e&&"docs"!==e&&"opportunities"!==e&&"streaming"!==e&&t.visible).sort(([e,t],[a,r])=>t.order-r.order).map(([e])=>e),[e.panels]);return{settings:e,updateDashboardSettings:i,updatePanelSettings:o,updateApiKeys:n,resetSettings:d,getVisiblePanels:c}}e.s(["useSettings",()=>s],5385);var i=e.i(44855),o=e.i(33948),n=e.i(18295),d=e.i(92279),c=e.i(47379),u=e.i(75557),h=e.i(94367),p=e.i(87225),g=e.i(33932),f=e.i(7656),m=e.i(50723),x=e.i(83161),y=e.i(39972),b=e.i(20161),v=e.i(37025),j=e.i(9109),w=e.i(74614),T=e.i(15915),S=e.i(13654);function C({open:e,onClose:a,currentUser:r,isAdminView:l}){let[s,C]=(0,t.useState)([]),[k,P]=(0,t.useState)([]),[M,I]=(0,t.useState)({}),[R,E]=(0,t.useState)(!0),[$,_]=(0,t.useState)(null);(0,t.useEffect)(()=>{e&&B()},[e]);let B=async()=>{E(!0),_(null);try{let e=(0,S.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok){let e=await t.json().catch(()=>({error:`HTTP ${t.status}`}));throw Error(e.error||`Failed to fetch employees (${t.status})`)}let a=await t.json();C(a.employees||[]);let r=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(!r.ok){let e=await r.json().catch(()=>({error:`HTTP ${r.status}`}));throw Error(e.error||`Failed to fetch clients (${r.status})`)}let l=await r.json();P(l.clients||[])}catch(e){console.error("Error fetching data:",e),_(e.message||"Failed to load data")}finally{E(!1)}},N=(0,t.useCallback)(e=>{if(!e)return"(unassigned)";let t=s.find(t=>t.id===Number(e));return t?t.name:"(unassigned)"},[s]),A=async(e,t)=>{I(t=>({...t,[e]:!0})),_(null);try{let a=(0,S.getBackendUrl)(),r=null;if(t){let e=s.find(e=>e.id===t);r=e?e.name:null}let l=await fetch(`${a}/api/creative/clients/${e}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:t,employee_name:r})});if(!l.ok){let e=await l.json().catch(()=>({error:"Failed to assign employee"}));throw Error(e.error||"Failed to assign employee")}P(a=>a.map(a=>a.id===e?{...a,assignedEmployee:r||void 0,assignedEmployeeId:t||void 0}:a))}catch(e){console.error("Error assigning employee:",e),_(e.message||"Failed to assign employee")}finally{I(t=>({...t,[e]:!1}))}},D=l?k:k.filter(e=>!!r?.id&&(e.assignedEmployeeId===r.id||e.assignedEmployee===r.name||e.assignedEmployee===r.username));return(0,i.jsxs)(o.Dialog,{open:e,onClose:a,maxWidth:"md",fullWidth:!0,children:[(0,i.jsx)(n.DialogTitle,{children:l?"Admin Client Assignment":"Your Clients"}),(0,i.jsxs)(d.DialogContent,{children:[$&&(0,i.jsx)(j.Alert,{severity:"error",onClose:()=>_(null),sx:{mb:2},children:$}),R?(0,i.jsx)(w.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,i.jsx)(v.CircularProgress,{})}):(0,i.jsxs)(h.Table,{children:[(0,i.jsx)(f.TableHead,{children:(0,i.jsxs)(m.TableRow,{children:[(0,i.jsx)(g.TableCell,{children:"Client Name"}),(0,i.jsx)(g.TableCell,{children:"Company"}),(0,i.jsx)(g.TableCell,{children:"Email"}),(0,i.jsx)(g.TableCell,{children:"Assigned Employee"}),l&&(0,i.jsx)(g.TableCell,{children:"Change Assignment"})]})}),(0,i.jsxs)(p.TableBody,{children:[D.map(e=>(0,i.jsxs)(m.TableRow,{children:[(0,i.jsx)(g.TableCell,{children:e.name}),(0,i.jsx)(g.TableCell,{children:e.company}),(0,i.jsx)(g.TableCell,{children:e.email}),(0,i.jsx)(g.TableCell,{children:N(e.assignedEmployeeId)}),l&&(0,i.jsxs)(g.TableCell,{children:[(0,i.jsx)(x.FormControl,{variant:"standard",size:"small",fullWidth:!0,children:(0,i.jsxs)(y.Select,{value:e.assignedEmployeeId||"",onChange:t=>A(e.id,t.target.value?Number(t.target.value):null),disabled:!!M[e.id],children:[(0,i.jsx)(b.MenuItem,{value:"",children:(0,i.jsx)("em",{children:"Unassign"})}),s.map(e=>(0,i.jsxs)(b.MenuItem,{value:e.id,children:[e.name," ",e.is_admin?"(Admin)":""]},e.id))]})}),M[e.id]&&(0,i.jsx)(v.CircularProgress,{size:16,sx:{ml:1}})]})]},e.id)),0===D.length&&(0,i.jsx)(m.TableRow,{children:(0,i.jsx)(g.TableCell,{colSpan:l?5:4,align:"center",sx:{py:4},children:(0,i.jsx)(T.Typography,{variant:"body2",color:"text.secondary",children:"No client records found."})})})]})]})]}),(0,i.jsxs)(c.DialogActions,{children:[(0,i.jsx)(u.Button,{onClick:B,disabled:R,children:"Refresh"}),(0,i.jsx)(u.Button,{onClick:a,children:"Close"})]})]})}e.s(["default",()=>C],68914)},35303,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=r(e.r(64800)),s=e.r(44855);a.default=(0,l.default)((0,s.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt")},7693,e=>{"use strict";var t=e.i(96335),a=e.i(44855),r=e.i(58891),l=e.i(74614),s=e.i(15915),i=e.i(65790),o=e.i(15708),n=e.i(10251),d=e.i(75557),c=e.i(39972),u=e.i(20161),h=e.i(83161),p=e.i(47617),g=e.i(9109),f=e.i(86012),m=e.i(92378),x=e.i(32327),y=e.i(54385),b=e.i(33948),v=e.i(18295),j=e.i(92279),w=e.i(47379),T=e.i(37025),S=e.i(5456),C=e.i(18394),k=e.i(24918),P=e.i(35303),M=e.i(35134),I=e.i(88522),R=e.i(31862),E=e.i(60472),$=e.i(10600),_=e.i(54959),B=e.i(20887),N=e.i(21504),A=e.i(5385),D=e.i(13654),O=e.i(68914),F=e.i(83344);function z(){(0,F.useRouter)();let{settings:e,updateDashboardSettings:N,updateApiKeys:z,resetSettings:H}=(0,A.useSettings)(),[L,W]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{let e=(0,D.getBackendUrl)();console.log("[Settings] Fetching profile from:",`${e}/api/profile`);let t=await fetch(`${e}/api/profile`,{credentials:"include"});if(console.log("[Settings] Profile response status:",t.status),t.ok){let e=await t.json();console.log("[Settings] Profile data received:",e),W(e)}else{let e=`HTTP ${t.status}`;try{let a=await t.json();e=a.error||a.message||e}catch(a){let e=await t.text();console.error("[Settings] Failed to fetch profile (non-JSON):",t.status,e.substring(0,200))}console.error("[Settings] Failed to fetch user profile:",e)}}catch(e){console.error("[Settings] Error fetching user profile:",e)}})()},[]);let[U,J]=(0,r.useState)(!1),[V,K]=(0,r.useState)(!1),[X,q]=(0,r.useState)(null),[G,Y]=(0,r.useState)(null),[Q,Z]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null),[ea,er]=(0,r.useState)(null),el=async()=>{Z(!0),er(null),et(null);try{let e=(0,D.getBackendUrl)(),t=await fetch(`${e}/api/admin/tasks/link-to-user`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"isharehow"})});if(!t.ok){let e=await t.json().catch(()=>({error:"Failed to link tasks"}));throw Error(e.error||e.message||"Failed to link tasks")}let a=await t.json();et(a.message||`Successfully linked ${a.linkedCount||0} tasks to isharehow user!`),setTimeout(()=>et(null),5e3)}catch(e){console.error("Error linking tasks:",e),er(e.message||"Failed to link tasks"),setTimeout(()=>er(null),5e3)}finally{Z(!1)}},es=async()=>{K(!0),Y(null),q(null);try{let e=t.default.env.NEXT_PUBLIC_WORDPRESS_URL||"https://blog.isharehow.app",a=`${e}/wp-json/wp/v2`,r=await fetch(`${a}/posts?_embed&per_page=100&status=publish&orderby=date&order=desc`);if(!r.ok)throw Error(`WordPress API error: ${r.status} ${r.statusText}`);let l=(await r.json()).map(e=>{let t=null;if(e.featured_media&&e.featured_media>0){let a=e._embedded?.["wp:featuredmedia"]?.[0];a&&(t=a.source_url||a.media_details?.sizes?.full?.source_url||null)}let a=[];e._embedded?.["wp:term"]?.[0]&&e._embedded["wp:term"][0].forEach(e=>{"category"===e.taxonomy&&e.name&&a.push(e.name)}),e._embedded?.["wp:term"]?.[1]&&e._embedded["wp:term"][1].forEach(e=>{"post_tag"===e.taxonomy&&e.name&&a.push(e.name)});let r=[];if(e._embedded?.author?.[0]){let t=e._embedded.author[0];r.push(t.slug||`author-${t.id}`)}let l="";e.excerpt?.rendered&&(l=e.excerpt.rendered.replace(/<[^>]*>/g,"").trim()).length>200&&(l=l.substring(0,200).trim()+"...");let s={slug:e.slug,title:e.title?.rendered||e.title||"",description:l,date:e.date||e.modified,tags:a,authors:r.length>0?r:["isharehow"],content:e.content?.rendered||e.content};return t&&(s.image=t),s}),s={};l.forEach(e=>{e.tags.forEach(e=>{s[e]=(s[e]||0)+1})}),localStorage.setItem("blogPosts",JSON.stringify(l)),localStorage.setItem("blogTagInfo",JSON.stringify(s)),localStorage.setItem("blogPostsLastRefresh",new Date().toISOString()),window.dispatchEvent(new Event("blogPostsRefreshed")),q(`Successfully refreshed ${l.length} blog posts!`),setTimeout(()=>q(null),5e3)}catch(e){console.error("Error refreshing blog posts:",e),Y(e.message||"Failed to refresh blog posts"),setTimeout(()=>Y(null),5e3)}finally{K(!1)}},ei=async()=>{if(!eh.trim()||!eg.trim())return void eT("Title and message are required");eb(!0),eT(null),ej(null);try{let e=(0,D.getBackendUrl)();if("all"===em){let t=await fetch(`${e}/api/notifications/broadcast`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:ec,title:eh,message:eg,metadata:{admin:!0,sentBy:L?.username||"admin"}})});if(!t.ok){let e=await t.json().catch(()=>({error:"Failed to send notification"}));throw Error(e.error||"Failed to send notification")}ej("Notification sent to all users successfully!")}else{let t=await fetch(`${e}/api/notifications`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:ec,title:eh,message:eg,metadata:{admin:!0,sentBy:L?.username||"admin"}})});if(!t.ok){let e=await t.json().catch(()=>({error:"Failed to send notification"}));throw Error(e.error||"Failed to send notification")}ej("Notification sent successfully!")}ep(""),ef("")}catch(e){eT(e.message||"Failed to send notification")}finally{eb(!1)}},eo=L?.isAdmin||L?.patreonId===0x36255b0||L?.username==="isharehow"||L?.id==="isharehow"||L?.id==="admin"||L?.username==="admin"||L?.email==="jeliyah@isharehowlabs.com"||L?.username&&"isharehow"===L.username.toLowerCase()||L?.id&&"isharehow"===String(L.id).toLowerCase()||L?.id&&"admin"===String(L.id).toLowerCase(),[en,ed]=(0,r.useState)(0),[ec,eu]=(0,r.useState)("admin"),[eh,ep]=(0,r.useState)(""),[eg,ef]=(0,r.useState)(""),[em,ex]=(0,r.useState)("self"),[ey,eb]=(0,r.useState)(!1),[ev,ej]=(0,r.useState)(null),[ew,eT]=(0,r.useState)(null),[eS,eC]=(0,r.useState)([]),[ek,eP]=(0,r.useState)(!1),[eM,eI]=(0,r.useState)(null),[eR,eE]=(0,r.useState)(!1),[e$,e_]=(0,r.useState)(!1),[eB,eN]=(0,r.useState)(null),[eA,eD]=(0,r.useState)(""),[eO,eF]=(0,r.useState)(""),[ez,eH]=(0,r.useState)(!1),[eL,eW]=(0,r.useState)(null);(0,r.useEffect)(()=>{eo&&2===en&&eU()},[eo,en]);let eU=async()=>{eP(!0),eI(null);try{let e=(0,D.getBackendUrl)(),t=await fetch(`${e}/api/admin/users`,{credentials:"include"});if(t.ok){let e=await t.json();eC(e.users||[])}else{let e=await t.json().catch(()=>({error:`HTTP ${t.status}`}));eI(e.error||`Failed to load users (${t.status})`)}}catch(e){console.error("Error fetching employees:",e),eI(e.message||"Failed to load users")}finally{eP(!1)}},eJ=()=>{e_(!1),eN(null),eD(""),eF(""),eW(null)},eV=async()=>{if(eB){if(!eA||eA.length<6)return void eW("Password must be at least 6 characters");if(eA!==eO)return void eW("Passwords do not match");eH(!0),eW(null);try{let e=(0,D.getBackendUrl)(),t=eB.id||eB.username||eB.user_id,a=encodeURIComponent(t),r=await fetch(`${e}/api/admin/users/${a}/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:eA})});if(r.ok)alert(`Password changed successfully for ${eB.name||eB.username||eB.email}`),eJ();else{let e=await r.json();eW(e.error||"Failed to change password")}}catch(e){eW(e.message||"Failed to change password")}finally{eH(!1)}}};return(0,a.jsxs)(B.default,{active:"settings",children:[(0,a.jsxs)(l.Box,{sx:{maxWidth:1e3,mx:"auto"},children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:4},children:[(0,a.jsx)(S.default,{sx:{fontSize:40,color:"primary.main"}}),(0,a.jsx)(s.Typography,{variant:"h4",sx:{fontWeight:700,background:"linear-gradient(45deg, #9146FF, #ff6b6b, #4ecdc4)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Settings"})]}),U&&(0,a.jsx)(g.Alert,{severity:"success",sx:{mb:3},onClose:()=>J(!1),children:"Settings have been reset to default values."}),(0,a.jsx)(i.Paper,{elevation:2,sx:{mb:3},children:(0,a.jsxs)(x.Tabs,{value:en,onChange:(e,t)=>ed(t),children:[(0,a.jsx)(y.Tab,{label:"General",icon:(0,a.jsx)(S.default,{}),iconPosition:"start"}),eo&&(0,a.jsx)(y.Tab,{label:"Admin",icon:(0,a.jsx)(M.default,{}),iconPosition:"start"})]})}),0===en&&(0,a.jsxs)(l.Box,{children:[(0,a.jsxs)(i.Paper,{elevation:2,sx:{p:4,mb:3},children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,a.jsx)(C.default,{color:"primary"}),(0,a.jsx)(s.Typography,{variant:"h6",sx:{fontWeight:600},children:"Dashboard Settings"})]}),(0,a.jsx)(n.Divider,{sx:{mb:3}}),(0,a.jsxs)(o.Stack,{spacing:3,children:[(0,a.jsxs)(h.FormControl,{fullWidth:!0,children:[(0,a.jsx)(p.InputLabel,{children:"Default Tab"}),(0,a.jsxs)(c.Select,{value:e.dashboard.defaultTab,label:"Default Tab",onChange:e=>N({defaultTab:Number(e.target.value)}),children:[(0,a.jsx)(u.MenuItem,{value:0,children:"Streaming"}),(0,a.jsx)(u.MenuItem,{value:1,children:"Designs & Code"}),(0,a.jsx)(u.MenuItem,{value:2,children:"Documents"}),(0,a.jsx)(u.MenuItem,{value:3,children:"Learning Hub"})]})]}),(0,a.jsxs)(h.FormControl,{fullWidth:!0,children:[(0,a.jsx)(p.InputLabel,{children:"Layout Style"}),(0,a.jsxs)(c.Select,{value:e.dashboard.layout,label:"Layout Style",onChange:e=>N({layout:e.target.value}),children:[(0,a.jsx)(u.MenuItem,{value:"grid",children:"Grid"}),(0,a.jsx)(u.MenuItem,{value:"list",children:"List"})]})]})]})]}),(0,a.jsxs)(i.Paper,{elevation:2,sx:{p:3,mb:3},children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,a.jsx)(_.default,{color:"primary"}),(0,a.jsx)(s.Typography,{variant:"h6",sx:{fontWeight:600},children:"Blog Management"})]}),(0,a.jsx)(n.Divider,{sx:{mb:2}}),X&&(0,a.jsx)(g.Alert,{severity:"success",sx:{mb:2},onClose:()=>q(null),children:X}),G&&(0,a.jsx)(g.Alert,{severity:"error",sx:{mb:2},onClose:()=>Y(null),children:G}),(0,a.jsxs)(o.Stack,{spacing:2,children:[(0,a.jsxs)(l.Box,{children:[(0,a.jsx)(s.Typography,{variant:"body1",sx:{fontWeight:600,mb:1},children:"Refresh Blog Posts"}),(0,a.jsx)(s.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manually fetch the latest blog posts from WordPress without rebuilding the site. The refreshed posts will be available immediately on the blog page."}),(0,a.jsx)(d.Button,{variant:"contained",color:"primary",startIcon:V?(0,a.jsx)(T.CircularProgress,{size:20}):(0,a.jsx)(k.default,{}),onClick:es,disabled:V,children:V?"Refreshing...":"Refresh Blog Posts"})]}),localStorage.getItem("blogPostsLastRefresh")&&(0,a.jsxs)(s.Typography,{variant:"caption",color:"text.secondary",children:["Last refreshed: ",new Date(localStorage.getItem("blogPostsLastRefresh")||"").toLocaleString()]})]})]}),(0,a.jsx)(i.Paper,{elevation:2,sx:{p:3,mb:3},children:(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,a.jsxs)(l.Box,{children:[(0,a.jsx)(s.Typography,{variant:"h6",sx:{fontWeight:600,mb:1},children:"Reset Settings"}),(0,a.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:"Restore all settings to their default values"})]}),(0,a.jsx)(d.Button,{variant:"outlined",color:"error",startIcon:(0,a.jsx)(P.default,{}),onClick:()=>{H(),J(!0),setTimeout(()=>J(!1),3e3)},children:"Reset to Defaults"})]})})]}),1===en&&eo&&(0,a.jsxs)(l.Box,{children:[(0,a.jsxs)(i.Paper,{elevation:3,sx:{p:4,mb:3,border:"2px solid gold"},children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,a.jsx)(I.default,{sx:{color:"gold",fontSize:32}}),(0,a.jsx)(s.Typography,{variant:"h6",sx:{fontWeight:700,color:"gold"},children:"Send Notification"})]}),(0,a.jsx)(n.Divider,{sx:{mb:3,borderColor:"gold"}}),ev&&(0,a.jsx)(g.Alert,{severity:"success",sx:{mb:3},onClose:()=>ej(null),children:ev}),ew&&(0,a.jsx)(g.Alert,{severity:"error",sx:{mb:3},onClose:()=>eT(null),children:ew}),(0,a.jsxs)(o.Stack,{spacing:3,children:[(0,a.jsxs)(h.FormControl,{fullWidth:!0,children:[(0,a.jsx)(p.InputLabel,{children:"Notification Type"}),(0,a.jsxs)(c.Select,{value:ec,label:"Notification Type",onChange:e=>eu(e.target.value),children:[(0,a.jsx)(u.MenuItem,{value:"admin",children:"Admin"}),(0,a.jsx)(u.MenuItem,{value:"system",children:"System"}),(0,a.jsx)(u.MenuItem,{value:"live-update",children:"Live Update"}),(0,a.jsx)(u.MenuItem,{value:"board",children:"Board"}),(0,a.jsx)(u.MenuItem,{value:"timer",children:"Timer"}),(0,a.jsx)(u.MenuItem,{value:"twitch",children:"Twitch"})]})]}),(0,a.jsxs)(h.FormControl,{fullWidth:!0,children:[(0,a.jsx)(p.InputLabel,{children:"Target"}),(0,a.jsxs)(c.Select,{value:em,label:"Target",onChange:e=>ex(e.target.value),children:[(0,a.jsx)(u.MenuItem,{value:"self",children:"Send to Myself (Test)"}),(0,a.jsx)(u.MenuItem,{value:"all",children:"Send to All Users"})]})]}),(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Title",value:eh,onChange:e=>ep(e.target.value),placeholder:"Enter notification title",required:!0}),(0,a.jsx)(m.TextField,{fullWidth:!0,label:"Message",value:eg,onChange:e=>ef(e.target.value),placeholder:"Enter notification message",multiline:!0,rows:4,required:!0}),(0,a.jsx)(d.Button,{variant:"contained",color:"primary",size:"large",startIcon:(0,a.jsx)(I.default,{}),onClick:ei,disabled:ey||!eh.trim()||!eg.trim(),sx:{alignSelf:"flex-start"},children:ey?"Sending...":"Send Notification"})]})]}),(0,a.jsxs)(i.Paper,{elevation:3,sx:{p:4,mb:3,border:"2px solid gold"},children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,a.jsx)(R.default,{sx:{color:"gold",fontSize:32}}),(0,a.jsx)(s.Typography,{variant:"h6",sx:{fontWeight:700,color:"gold"},children:"Task Management"})]}),(0,a.jsx)(n.Divider,{sx:{mb:3,borderColor:"gold"}}),ee&&(0,a.jsx)(g.Alert,{severity:"success",sx:{mb:3},onClose:()=>et(null),children:ee}),ea&&(0,a.jsx)(g.Alert,{severity:"error",sx:{mb:3},onClose:()=>er(null),children:ea}),(0,a.jsx)(o.Stack,{spacing:3,children:(0,a.jsxs)(l.Box,{children:[(0,a.jsx)(s.Typography,{variant:"body1",sx:{fontWeight:600,mb:1},children:"Link Old Tasks to isharehow User"}),(0,a.jsx)(s.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Link all old tasks in the database that don't have a creator assigned to the isharehow user account. This will make them visible again in your task lists."}),(0,a.jsx)(d.Button,{variant:"contained",color:"primary",startIcon:Q?(0,a.jsx)(T.CircularProgress,{size:20}):(0,a.jsx)(R.default,{}),onClick:el,disabled:Q,children:Q?"Linking Tasks...":"Link Old Tasks to isharehow"})]})})]})]})]}),(0,a.jsx)(O.default,{open:eR,onClose:()=>eE(!1),currentUser:L,isAdminView:eo}),(0,a.jsxs)(b.Dialog,{open:e$,onClose:eJ,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(v.DialogTitle,{children:(0,a.jsxs)(o.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,a.jsxs)(o.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,a.jsx)(E.default,{}),(0,a.jsx)(s.Typography,{variant:"h6",children:"Change Password"})]}),(0,a.jsx)(f.IconButton,{onClick:eJ,size:"small",children:(0,a.jsx)($.default,{})})]})}),(0,a.jsxs)(j.DialogContent,{children:[eB&&(0,a.jsxs)(l.Box,{sx:{mb:3},children:[(0,a.jsx)(s.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Changing password for:"}),(0,a.jsx)(s.Typography,{variant:"body1",fontWeight:600,children:eB.name||eB.username||eB.email}),eB.email&&(0,a.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:eB.email})]}),eL&&(0,a.jsx)(g.Alert,{severity:"error",sx:{mb:2},onClose:()=>eW(null),children:eL}),(0,a.jsxs)(o.Stack,{spacing:2,sx:{mt:1},children:[(0,a.jsx)(m.TextField,{fullWidth:!0,type:"password",label:"New Password",value:eA,onChange:e=>eD(e.target.value),placeholder:"Enter new password (min 6 characters)",disabled:ez,helperText:"Password must be at least 6 characters long"}),(0,a.jsx)(m.TextField,{fullWidth:!0,type:"password",label:"Confirm Password",value:eO,onChange:e=>eF(e.target.value),placeholder:"Confirm new password",disabled:ez,error:""!==eO&&eA!==eO,helperText:""!==eO&&eA!==eO?"Passwords do not match":""})]})]}),(0,a.jsxs)(w.DialogActions,{children:[(0,a.jsx)(d.Button,{onClick:eJ,disabled:ez,children:"Cancel"}),(0,a.jsx)(d.Button,{onClick:eV,variant:"contained",disabled:ez||!eA||!eO||eA!==eO||eA.length<6,startIcon:ez?(0,a.jsx)(T.CircularProgress,{size:20}):(0,a.jsx)(E.default,{}),children:ez?"Changing...":"Change Password"})]})]})]})}e.s(["default",0,function(){return(0,a.jsx)(N.default,{children:(0,a.jsx)(z,{})})}])},89419,(e,t,a)=>{let r="/settings";(window.__NEXT_P=window.__NEXT_P||[]).push([r,()=>e.r(7693)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([r])})},9781,e=>{e.v(t=>Promise.all(["static/chunks/d62b89fe821ade37.js"].map(t=>e.l(t))).then(()=>t(94246)))},90413,e=>{e.v(t=>Promise.all(["static/chunks/1b9991f459e98f67.js"].map(t=>e.l(t))).then(()=>t(18636)))}]);