(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58176,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart")},49876,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)([(0,i.jsx)("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62"},"0"),(0,i.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,i.jsx)("circle",{cx:"15",cy:"13",r:"1"},"2"),(0,i.jsx)("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47"},"3")],"SupportAgent")},28018,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)([(0,i.jsx)("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),(0,i.jsx)("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),(0,i.jsx)("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")],"PeopleAlt")},59096,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline")},20534,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language")},13516,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart")},12214,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},33918,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined")},7294,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment")},926,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline")},26712,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},19391,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},25449,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},94556,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},27325,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline")},61637,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm-3.06 16L7.4 14.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41zM13 9V3.5L18.5 9z"}),"Task")},76497,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)([(0,i.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,i.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},16875,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},25303,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48"}),"Gesture")},26482,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[l,d]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[p,h]=(0,t.useState)([]),[f,x]=(0,t.useState)({}),[m,g]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null);return{files:e,components:a,tokens:o,likedComponents:l,savedComponents:c,draftedComponents:p,componentStatuses:f,isLoading:m,error:y,fetchFiles:async()=>{try{g(!0),b(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),a=await t.json();n(a.projects||[])}catch(e){b(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw b(e.message),e}let t=e.trim();try{g(!0),b(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await n.json()).file}catch(e){throw b(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw b(e.message),e}let t=e.trim();try{g(!0),b(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),a=await n.json();return i(a.components||[]),a.components}catch(e){throw b(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw b(e.message),e}let t=e.trim();try{g(!0),b(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),a=await n.json();return s(a.tokens||[]),a.tokens}catch(e){throw b(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,n)=>{try{g(!0),b(null);let a=(0,r.getBackendUrl)(),i=await (0,r.fetchWithErrorHandling)(`${a}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:n})}),o=await i.json();return o.success&&(x(r=>({...r,[e]:{...r[e],liked:t}})),t?d(t=>t.includes(e)?t:[...t,e]):d(t=>t.filter(t=>t!==e))),o}catch(e){throw b(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,n)=>{try{g(!0),b(null);let a=(0,r.getBackendUrl)(),i=await (0,r.fetchWithErrorHandling)(`${a}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:n})}),o=await i.json();return o.success&&(x(r=>({...r,[e]:{...r[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),o}catch(e){throw b(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,n)=>{try{g(!0),b(null);let a=(0,r.getBackendUrl)(),i=await (0,r.fetchWithErrorHandling)(`${a}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:n})}),o=await i.json();return o.success&&(x(r=>({...r,[e]:{...r[e],drafted:t}})),t?h(t=>t.includes(e)?t:[...t,e]):h(t=>t.filter(t=>t!==e))),o}catch(e){throw b(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),b(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),n=await t.json();return d(n.componentIds||[]),n.componentIds||[]}catch(e){throw b(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),b(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),n=await t.json();return u(n.componentIds||[]),n.componentIds||[]}catch(e){throw b(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),b(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),n=await t.json();return h(n.componentIds||[]),n.componentIds||[]}catch(e){throw b(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),a=await n.json();return x(t=>({...t,[e]:{liked:a.liked||!1,saved:a.saved||!1,drafted:a.drafted||!1}})),a}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),b(null);let t=(0,r.getBackendUrl)(),n=e?JSON.stringify({componentIds:e}):void 0,a=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:n}),i=await a.json();if(i.preferences){x(e=>{let t={...e};return Object.entries(i.preferences).forEach(([e,r])=>{t[e]={liked:r.liked||!1,saved:r.saved||!1,drafted:r.drafted||!1}}),t});let e=Object.entries(i.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(i.preferences).filter(([e,t])=>t.saved).map(([e])=>e),r=Object.entries(i.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);d(e),u(t),h(r)}return i}catch(e){throw b(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>n])},38568,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,s]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),c=async e=>{try{s(!0),d(null);let t=(0,r.getBackendUrl)(),a=new URL(`${t}/api/mcp/code-links`);e&&a.searchParams.append("figmaFileId",e);let i=await fetch(a.toString(),{credentials:"include"});if(!i.ok)throw Error("Failed to fetch code links");let o=await i.json();n(o.links||[])}catch(e){d(e.message)}finally{s(!1)}},u=async()=>{try{s(!0),d(null);let e=(0,r.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let n=await t.json();i(n.tokens||[])}catch(e){d(e.message)}finally{s(!1)}};return{links:e,tokens:a,isLoading:o,error:l,linkComponentToCode:async(e,t,n,a)=>{try{s(!0),d(null);let i=(0,r.getBackendUrl)(),o=await fetch(`${i}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:n,figmaFileId:a})});if(!o.ok)throw Error("Failed to link component");let l=await o.json();return await c(),l}catch(e){throw d(e.message),e}finally{s(!1)}},fetchCodeLinks:c,syncTokens:async e=>{try{s(!0),d(null);let t=(0,r.getBackendUrl)(),n=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!n.ok)throw Error("Failed to sync tokens");let a=await n.json();return await u(),a}catch(e){throw d(e.message),e}finally{s(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{s(!0),d(null);let n=(0,r.getBackendUrl)(),a=await fetch(`${n}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!a.ok)throw Error("Failed to generate code");return await a.json()}catch(e){throw d(e.message),e}finally{s(!1)}}}}e.s(["useMCP",()=>n])},27796,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e.r(64800)),i=e.r(44855);r.default=(0,a.default)((0,i.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},11500,e=>{"use strict";let t,r,n,a;var i,o,s,l,d,c,u,p,h,f=e.i(44855),x=e.i(20887),m=e.i(21504),g=e.i(58891),y=e.i(83344),b=e.i(74614),j=e.i(72204),v=e.i(15915),w=e.i(32327),S=e.i(54385),C=e.i(65790),T=e.i(83378),k=e.i(70095),P=e.i(45162),E=e.i(3430),I=e.i(37025),A=e.i(9109),R=e.i(58176),B=e.i(49876),O=e.i(28018),L=e.i(59096),$=e.i(20534),D=e.i(31255),M=e.i(67812),F=e.i(33948),N=e.i(18295),z=e.i(92279),W=e.i(47379),_=e.i(75557),U=e.i(92378),q=e.i(15708),H=e.i(83161),G=e.i(47617),V=e.i(39972),J=e.i(20161),K=e.i(13654);function X({open:e,onClose:t}){let r=(0,y.useRouter)(),[n,a]=(0,g.useState)({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),[i,o]=(0,g.useState)(null),[s,l]=(0,g.useState)(!1),d=e=>t=>{a(r=>({...r,[e]:t.target.value})),o(null)},c=async()=>{if(!n.name||!n.email||!n.phone)return void o("Please fill in all required fields (Name, Email, Phone)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return void o("Please enter a valid email address");l(!0),o(null);try{let e=(0,K.getBackendUrl)(),i=await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:n.name,email:n.email,company:n.company,phone:n.phone||void 0,tier:n.tier||void 0,notes:n.notes||void 0,marketingBudget:n.marketingBudget||void 0,status:"pending"})});if(!i.ok){let e=await i.json().catch(()=>({error:"Failed to create client"}));throw Error(e.error||"Failed to create client")}if(t(),n.tier){let e=new URLSearchParams({name:n.name,email:n.email,company:n.company,tier:n.tier});r.push(`/demo?${e.toString()}`)}else window.location.reload();a({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""})}catch(e){o(e.message||"Failed to add client. Please try again.")}finally{l(!1)}},u=()=>{a({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),o(null),t()};return(0,f.jsxs)(F.Dialog,{open:e,onClose:u,maxWidth:"sm",fullWidth:!0,children:[(0,f.jsxs)(N.DialogTitle,{children:[(0,f.jsx)(v.Typography,{variant:"h6",fontWeight:700,children:"Add New Client"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Add a client lead and send them to the sign-up page"})]}),(0,f.jsx)(z.DialogContent,{children:(0,f.jsxs)(q.Stack,{spacing:3,sx:{mt:1},children:[i&&(0,f.jsx)(A.Alert,{severity:"error",onClose:()=>o(null),children:i}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Client Name",required:!0,value:n.name,onChange:d("name"),placeholder:"John Doe"}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Email Address",type:"email",required:!0,value:n.email,onChange:d("email"),placeholder:"john@company.com"}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Company Name (Optional)",value:n.company,onChange:d("company"),placeholder:"Company Inc."}),(0,f.jsx)(U.TextField,{fullWidth:!0,required:!0,label:"Phone Number",type:"tel",value:n.phone,onChange:d("phone"),placeholder:"+1 (555) 123-4567"}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Recommended Tier"}),(0,f.jsxs)(V.Select,{value:n.tier,label:"Recommended Tier",onChange:e=>{a(t=>({...t,tier:e.target.value}))},children:[(0,f.jsx)(J.MenuItem,{value:"",children:"None"}),(0,f.jsx)(J.MenuItem,{value:"starter",children:"Starter"}),(0,f.jsx)(J.MenuItem,{value:"professional",children:"Professional"}),(0,f.jsx)(J.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:n.notes,onChange:d("notes"),placeholder:"Any additional information about this client..."}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Marketing Budget",value:n.marketingBudget,onChange:d("marketingBudget"),placeholder:"Do you have a marketing budget available or willing to get one?",helperText:"Do you have a marketing budget available or willing to get one?"})]})}),(0,f.jsxs)(W.DialogActions,{sx:{p:2},children:[(0,f.jsx)(_.Button,{onClick:u,children:"Cancel"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:c,disabled:s,children:s?"Sending...":"Send to Sign-Up"})]})]})}var Y=e.i(54704),Q=e.i(86012),Z=e.i(98807),ee=e.i(1051),et=e.i(92297),er=e.i(10251),en=e.i(62438),ea=e.i(13516),ei=e.i(98793),eo=e.i(12214),es=e.i(33918),el=e.i(45680),ed=e.i(13109),ec=e.i(7294),eu=e.i(926),ep=e.i(79539),eh=e.i(33675),ef=["axis"],ex=(0,g.forwardRef)((e,t)=>g.createElement(eh.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ef,tooltipPayloadSearcher:ep.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),em=e.i(5526),eg=e.i(86386),ey=e.i(82205),eb=e.i(25411),ej=e.i(25806),ev=e.i(19148),ew=e.i(40382),eS=e.i(21310),eC=e.i(79507),eT=e.i(71088),ek=e.i(62992),eP=e.i(98721),eE=e.i(83066);function eI({title:e,value:t,icon:r,trend:n,trendLabel:a,color:i="#6366f1",loading:o=!1}){let s=n&&n>0;return(0,f.jsx)(P.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsxs)(b.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:e}),(0,f.jsx)(ek.Avatar,{sx:{bgcolor:`${i}15`,width:40,height:40,color:i},children:r})]}),o?(0,f.jsx)(b.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:48},children:(0,f.jsx)(I.CircularProgress,{size:24})}):(0,f.jsx)(v.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:t}),void 0!==n&&(0,f.jsxs)(b.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[s?(0,f.jsx)(eP.default,{sx:{fontSize:16,color:"success.main"}}):(0,f.jsx)(eE.default,{sx:{fontSize:16,color:"error.main"}}),(0,f.jsxs)(v.Typography,{variant:"caption",sx:{color:s?"success.main":"error.main",fontWeight:600},children:[Math.abs(n),"%"]}),a&&(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:a})]})]})})}function eA({title:e,subtitle:t,children:r,action:n}){return(0,f.jsx)(P.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsxs)(b.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:e}),t&&(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:t})]}),n&&(0,f.jsx)(b.Box,{children:n})]}),(0,f.jsx)(b.Box,{children:r})]})})}function eR(){let e=(0,T.useTheme)(),[t,r]=(0,g.useState)("all"),[n,a]=(0,g.useState)([]),[i,o]=(0,g.useState)(!1),[s,l]=(0,g.useState)(!0),[d,c]=(0,g.useState)("7d"),[u,p]=(0,g.useState)(null),[h,x]=(0,g.useState)(""),[m,y]=(0,g.useState)(null),[j,w]=(0,g.useState)(null),[S,k]=(0,g.useState)(null),[R,B]=(0,g.useState)(null);(0,g.useEffect)(()=>{(async()=>{try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();a(e.clients||[]),e.clients&&e.clients.length>0&&e.clients[0].googleAnalyticsPropertyKey&&x(e.clients[0].googleAnalyticsPropertyKey)}}catch(e){console.error("Error fetching clients:",e)}finally{l(!1)}})()},[]);let O=async(e,t)=>{if(!e)return void y(null);o(!0),w(null);try{let r=(0,K.getBackendUrl)(),n=await fetch(`${r}/api/analytics/data`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({propertyId:e,timeRange:t})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||"Failed to fetch analytics data")}let a=await n.json();a.error&&a.isMockData?(w(a.error),y({totalRevenue:a.totalRevenue||0,totalUsers:a.totalUsers||0,pageViews:a.pageViews||0,conversionRate:a.conversionRate||0,revenueTrend:a.revenueTrend||0,usersTrend:a.usersTrend||0,pageViewsTrend:a.pageViewsTrend||0,conversionTrend:a.conversionTrend||0,revenueData:a.revenueData||[],visitorData:a.visitorData||[],conversionData:a.conversionData||[]})):a.error?(w(a.error),y(null)):(y(a),w(null)),p(new Date)}catch(e){console.error("Error fetching analytics data:",e),w(e.message||"Failed to load analytics data"),y(null)}finally{o(!1)}},L=async()=>{h&&await O(h,d)};(0,g.useEffect)(()=>{h&&d&&O(h,d)},[h,d]);let $=e=>{console.log(`Exporting analytics data as ${e}`),k(null)},D=e=>({"24h":"Last 24 Hours","7d":"Last 7 Days","30d":"Last 30 Days","90d":"Last 90 Days"})[e]||e,M=m?(m.pageViews/m.totalUsers/60).toFixed(1):"0",F=m?(100-2*m.conversionRate).toFixed(1):"0",N=m&&m.totalUsers>0?(m.totalRevenue/m.totalUsers).toFixed(2):"0";return(0,f.jsxs)(b.Box,{sx:{width:"100%"},children:[(0,f.jsx)(C.Paper,{elevation:0,sx:{p:3,mb:3,background:"dark"===e.palette.mode?"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)":"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)",border:`1px solid ${e.palette.divider}`,borderRadius:2},children:(0,f.jsxs)(b.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Analytics Dashboard"}),(0,f.jsxs)(v.Typography,{variant:"body2",color:"text.secondary",children:["Track performance metrics and insights",u&&(0,f.jsx)(ee.Chip,{label:`Last updated ${u.toLocaleTimeString()}`,size:"small",sx:{ml:1,height:20}})]})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,flexWrap:"wrap",children:[(0,f.jsx)(U.TextField,{size:"small",label:"GA Property ID",placeholder:"G-XXXXXXXXXX",value:h,onChange:e=>x(e.target.value),sx:{minWidth:200},InputProps:{startAdornment:(0,f.jsx)(ec.default,{sx:{fontSize:16,mr:1,color:"text.secondary"}})}}),(0,f.jsxs)(H.FormControl,{size:"small",sx:{minWidth:150},children:[(0,f.jsx)(G.InputLabel,{children:"Time Range"}),(0,f.jsxs)(V.Select,{value:d,onChange:e=>c(e.target.value),label:"Time Range",children:[(0,f.jsx)(J.MenuItem,{value:"24h",children:"Last 24 Hours"}),(0,f.jsx)(J.MenuItem,{value:"7d",children:"Last 7 Days"}),(0,f.jsx)(J.MenuItem,{value:"30d",children:"Last 30 Days"}),(0,f.jsx)(J.MenuItem,{value:"90d",children:"Last 90 Days"})]})]}),(0,f.jsxs)(H.FormControl,{size:"small",sx:{minWidth:150},children:[(0,f.jsx)(G.InputLabel,{children:"Client"}),(0,f.jsxs)(V.Select,{value:t,onChange:e=>r(e.target.value),label:"Client",disabled:s,children:[(0,f.jsx)(J.MenuItem,{value:"all",children:"All Clients"}),n.map(e=>(0,f.jsx)(J.MenuItem,{value:e.id,children:e.name},e.id))]})]}),(0,f.jsx)(Z.Tooltip,{title:"Refresh data",children:(0,f.jsx)(Q.IconButton,{onClick:L,disabled:i||!h,sx:{bgcolor:"background.paper",border:"1px solid",borderColor:"divider","&:hover":{bgcolor:"action.hover"}},children:i?(0,f.jsx)(I.CircularProgress,{size:20}):(0,f.jsx)(es.default,{})})}),(0,f.jsx)(_.Button,{variant:"outlined",startIcon:(0,f.jsx)(ed.default,{}),onClick:e=>B(e.currentTarget),sx:{borderColor:"divider"},children:"Filters"}),(0,f.jsx)(_.Button,{variant:"outlined",startIcon:(0,f.jsx)(el.default,{}),onClick:e=>k(e.currentTarget),sx:{borderColor:"divider"},children:"Export"})]})]})}),(0,f.jsxs)(et.Menu,{anchorEl:S,open:!!S,onClose:()=>k(null),children:[(0,f.jsxs)(J.MenuItem,{onClick:()=>$("csv"),children:[(0,f.jsx)(el.default,{sx:{mr:1,fontSize:18}}),"Export as CSV"]}),(0,f.jsxs)(J.MenuItem,{onClick:()=>$("pdf"),children:[(0,f.jsx)(el.default,{sx:{mr:1,fontSize:18}}),"Export as PDF"]})]}),(0,f.jsx)(et.Menu,{anchorEl:R,open:!!R,onClose:()=>B(null),children:(0,f.jsxs)(b.Box,{sx:{p:2,minWidth:250},children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Filter Options"}),(0,f.jsx)(er.Divider,{sx:{my:1}}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Additional filters coming soon"})]})}),j&&(0,f.jsxs)(A.Alert,{severity:j.includes("not configured")||j.includes("not installed")?"warning":"error",sx:{mb:3},onClose:()=>w(null),action:(0,f.jsx)(_.Button,{color:"inherit",size:"small",onClick:L,children:"Retry"}),children:[(0,f.jsx)(v.Typography,{variant:"body2",fontWeight:600,gutterBottom:!0,children:j.includes("not configured")||j.includes("not installed")?"Google Analytics API Not Configured":"Error Loading Analytics Data"}),(0,f.jsx)(v.Typography,{variant:"body2",children:j}),j.includes("GOOGLE_APPLICATION_CREDENTIALS")&&(0,f.jsx)(b.Box,{sx:{mt:1},children:(0,f.jsxs)(v.Typography,{variant:"caption",component:"div",children:[(0,f.jsx)("strong",{children:"To fix this:"}),(0,f.jsxs)("ol",{style:{marginTop:8,paddingLeft:20},children:[(0,f.jsx)("li",{children:"Create a service account in Google Cloud Console"}),(0,f.jsx)("li",{children:"Enable Google Analytics Data API for your project"}),(0,f.jsx)("li",{children:"Download the JSON key file"}),(0,f.jsx)("li",{children:"Set GOOGLE_APPLICATION_CREDENTIALS environment variable to the JSON file path"})]})]})})]}),(0,f.jsxs)(Y.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,f.jsx)(eI,{title:"Total Revenue",value:m?`$${m.totalRevenue.toLocaleString()}`:"$0",icon:(0,f.jsx)(ei.default,{}),trend:m?.revenueTrend||0,trendLabel:"vs last period",color:"#10b981",loading:i&&!m})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,f.jsx)(eI,{title:"Total Users",value:m?m.totalUsers.toLocaleString():"0",icon:(0,f.jsx)(en.default,{}),trend:m?.usersTrend||0,trendLabel:"vs last period",color:"#6366f1",loading:i&&!m})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,f.jsx)(eI,{title:"Page Views",value:m?`${(m.pageViews/1e3).toFixed(1)}K`:"0",icon:(0,f.jsx)(eo.default,{}),trend:m?.pageViewsTrend||0,trendLabel:"vs last period",color:"#f59e0b",loading:i&&!m})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,f.jsx)(eI,{title:"Conversion Rate",value:m?`${m.conversionRate.toFixed(2)}%`:"0%",icon:(0,f.jsx)(ea.default,{}),trend:m?.conversionTrend||0,trendLabel:"vs last period",color:"#8b5cf6",loading:i&&!m})})]}),(0,f.jsxs)(Y.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:4,children:(0,f.jsx)(P.Card,{sx:{boxShadow:2},children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Avg. Session Duration"}),(0,f.jsxs)(v.Typography,{variant:"h5",fontWeight:700,children:[M," min"]})]})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:4,children:(0,f.jsx)(P.Card,{sx:{boxShadow:2},children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Bounce Rate"}),(0,f.jsxs)(v.Typography,{variant:"h5",fontWeight:700,children:[F,"%"]})]})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:4,children:(0,f.jsx)(P.Card,{sx:{boxShadow:2},children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Revenue per User"}),(0,f.jsxs)(v.Typography,{variant:"h5",fontWeight:700,children:["$",N]})]})})})]}),(0,f.jsxs)(Y.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,f.jsx)(Y.Grid,{item:!0,xs:12,lg:8,children:(0,f.jsx)(eA,{title:"Revenue Overview",subtitle:`${D(d)} - Current vs Previous Period`,action:(0,f.jsx)(_.Button,{size:"small",variant:"outlined",startIcon:(0,f.jsx)(eu.default,{}),children:"View Details"}),children:(0,f.jsx)(eS.ResponsiveContainer,{width:"100%",height:350,children:(0,f.jsxs)(ex,{data:m?.revenueData||[],children:[(0,f.jsxs)("defs",{children:[(0,f.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,f.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.4}),(0,f.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),(0,f.jsxs)("linearGradient",{id:"colorPrevious",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,f.jsx)("stop",{offset:"5%",stopColor:"#cbd5e1",stopOpacity:.2}),(0,f.jsx)("stop",{offset:"95%",stopColor:"#cbd5e1",stopOpacity:0})]})]}),(0,f.jsx)(ev.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,f.jsx)(eb.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ej.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ew.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,f.jsx)(em.Area,{type:"monotone",dataKey:"value",stroke:"#6366f1",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)",name:"Current Period"}),(0,f.jsx)(em.Area,{type:"monotone",dataKey:"previous",stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5 5",fill:"url(#colorPrevious)",fillOpacity:.3,name:"Previous Period"})]})})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,lg:4,children:(0,f.jsx)(eA,{title:"Conversion Rate",subtitle:"Weekly trend analysis",children:(0,f.jsx)(eS.ResponsiveContainer,{width:"100%",height:350,children:(0,f.jsxs)(eC.LineChart,{data:m?.conversionData||[],children:[(0,f.jsx)(ev.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,f.jsx)(eb.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ej.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ew.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,f.jsx)(eT.Line,{type:"monotone",dataKey:"rate",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:5},activeDot:{r:7},name:"Conversion Rate (%)"})]})})})})]}),(0,f.jsx)(Y.Grid,{container:!0,spacing:3,children:(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(eA,{title:"Visitor Activity",subtitle:`${D(d)} - Daily visitors and page views`,action:(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,f.jsxs)(b.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,f.jsx)(b.Box,{sx:{width:12,height:12,bgcolor:"#6366f1",borderRadius:"2px"}}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Visitors"})]}),(0,f.jsxs)(b.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,f.jsx)(b.Box,{sx:{width:12,height:12,bgcolor:"#8b5cf6",borderRadius:"2px"}}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Page Views"})]})]}),children:(0,f.jsx)(eS.ResponsiveContainer,{width:"100%",height:350,children:(0,f.jsxs)(eg.BarChart,{data:m?.visitorData||[],children:[(0,f.jsx)(ev.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,f.jsx)(eb.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ej.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,f.jsx)(ew.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,f.jsx)(ey.Bar,{dataKey:"visitors",fill:"#6366f1",radius:[8,8,0,0],name:"Visitors"}),(0,f.jsx)(ey.Bar,{dataKey:"pageViews",fill:"#8b5cf6",radius:[8,8,0,0],name:"Page Views"})]})})})})})]})}var eB=e.i(94367),eO=e.i(87225),eL=e.i(33932),e$=e.i(63104),eD=e.i(7656),eM=e.i(50723),eF=e.i(96335),eN=e.i(80622),ez=e.i(84933),eW=e.i(81706),e_=e.i(15127),eU=e.i(96163),eq=e.i(52569),eH=e.i(91947),eG=e.i(30401),eV=e.i(40762),eV=eV,eJ=e.i(19575);function eK(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function eX(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return -1}let eY=function(e={}){let{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:a="any",stringify:i,trim:o=!1}=e;return(e,{inputValue:s,getOptionLabel:l})=>{let d=o?s.trim():s;r&&(d=d.toLowerCase()),t&&(d=eK(d));let c=d?e.filter(e=>{let n=(i||l)(e);return r&&(n=n.toLowerCase()),t&&(n=eK(n)),"start"===a?0===n.indexOf(d):n.indexOf(d)>-1}):e;return"number"==typeof n?c.slice(0,n):c}}(),eQ=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))},eZ=[],e0=function(e){let{unstable_isActiveElementInListbox:t=eQ,unstable_classNamePrefix:r="Mui",autoComplete:n=!1,autoHighlight:a=!1,autoSelect:i=!1,blurOnSelect:o=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:l=!1,componentName:d="useAutocomplete",defaultValue:c=e.multiple?eZ:null,disableClearable:u=!1,disableCloseOnSelect:p=!1,disabled:h,disabledItemsFocusable:f=!1,disableListWrap:x=!1,filterOptions:m=eY,filterSelectedOptions:y=!1,freeSolo:b=!1,getOptionDisabled:j,getOptionKey:v,getOptionLabel:w=e=>{var t;return null!=(t=e.label)?t:e},groupBy:S,handleHomeEndKeys:C=!e.freeSolo,id:T,includeInputInList:k=!1,inputValue:P,isOptionEqualToValue:E=(e,t)=>e===t,multiple:I=!1,onChange:A,onClose:R,onHighlightChange:B,onInputChange:O,onOpen:L,open:$,openOnFocus:D=!1,options:M,readOnly:F=!1,selectOnFocus:N=!e.freeSolo,value:z}=e,W=(0,eV.default)(T),_=w;_=e=>{let t=w(e);return"string"!=typeof t?String(t):t};let U=g.useRef(!1),q=g.useRef(!0),H=g.useRef(null),G=g.useRef(null),[V,J]=g.useState(null),[K,X]=g.useState(-1),Y=a?0:-1,Q=g.useRef(Y),[Z,ee]=(0,eG.unstable_useControlled)({controlled:z,default:c,name:d}),[et,er]=(0,eG.unstable_useControlled)({controlled:P,default:"",name:d,state:"inputValue"}),[en,ea]=g.useState(!1),ei=g.useCallback((e,t)=>{let r;if((I?Z.length<t.length:null!==t)||s){if(I)r="";else if(null==t)r="";else{let e=_(t);r="string"==typeof e?e:""}et!==r&&(er(r),O&&O(e,r,"reset"))}},[_,et,I,O,er,s,Z]),[eo,es]=(0,eG.unstable_useControlled)({controlled:$,default:!1,name:d,state:"open"}),[el,ed]=g.useState(!0),ec=!I&&null!=Z&&et===_(Z),eu=eo&&!F,ep=eu?m(M.filter(e=>!(y&&(I?Z:[Z]).some(t=>null!==t&&E(e,t)))),{inputValue:ec&&el?"":et,getOptionLabel:_}):[],eh=(0,eJ.usePreviousProps)({filteredOptions:ep,value:Z,inputValue:et});g.useEffect(()=>{let e=Z!==eh.value;en&&!e||(!b||e)&&ei(null,Z)},[Z,ei,en,eh.value,b]);let ef=eo&&ep.length>0&&!F,ex=(0,eH.unstable_useEventCallback)(e=>{-1===e?H.current.focus():V.querySelector(`[data-tag-index="${e}"]`).focus()});g.useEffect(()=>{I&&K>Z.length-1&&(X(-1),ex(-1))},[Z,I,K,ex]);let em=(0,eH.unstable_useEventCallback)(({event:e,index:t,reason:n="auto"})=>{if(Q.current=t,-1===t?H.current.removeAttribute("aria-activedescendant"):H.current.setAttribute("aria-activedescendant",`${W}-option-${t}`),B&&B(e,-1===t?null:ep[t],n),!G.current)return;let a=G.current.querySelector(`[role="option"].${r}-focused`);a&&(a.classList.remove(`${r}-focused`),a.classList.remove(`${r}-focusVisible`));let i=G.current;if("listbox"!==G.current.getAttribute("role")&&(i=G.current.parentElement.querySelector('[role="listbox"]')),!i)return;if(-1===t){i.scrollTop=0;return}let o=G.current.querySelector(`[data-option-index="${t}"]`);if(o&&(o.classList.add(`${r}-focused`),"keyboard"===n&&o.classList.add(`${r}-focusVisible`),i.scrollHeight>i.clientHeight&&"mouse"!==n&&"touch"!==n)){let e=i.clientHeight+i.scrollTop,t=o.offsetTop+o.offsetHeight;t>e?i.scrollTop=t-i.clientHeight:o.offsetTop-o.offsetHeight*(1.3*!!S)<i.scrollTop&&(i.scrollTop=o.offsetTop-o.offsetHeight*(1.3*!!S))}}),eg=(0,eH.unstable_useEventCallback)(({event:e,diff:t,direction:r="next",reason:a="auto"})=>{if(!eu)return;let i=function(e,t){if(!G.current||e<0||e>=ep.length)return -1;let r=e;for(;;){let n=G.current.querySelector(`[data-option-index="${r}"]`),a=!f&&(!n||n.disabled||"true"===n.getAttribute("aria-disabled"));if(n&&n.hasAttribute("tabindex")&&!a)return r;if((r="next"===t?(r+1)%ep.length:(r-1+ep.length)%ep.length)===e)return -1}}((()=>{let e=ep.length-1;if("reset"===t)return Y;if("start"===t)return 0;if("end"===t)return e;let r=Q.current+t;return r<0?-1===r&&k?-1:x&&-1!==Q.current||Math.abs(t)>1?0:e:r>e?r===e+1&&k?-1:x||Math.abs(t)>1?e:0:r})(),r);if(em({index:i,reason:a,event:e}),n&&"reset"!==t)if(-1===i)H.current.value=et;else{let e=_(ep[i]);H.current.value=e,0===e.toLowerCase().indexOf(et.toLowerCase())&&et.length>0&&H.current.setSelectionRange(et.length,e.length)}}),ey=g.useCallback(()=>{if(!eu)return;let e=(()=>{var e;if(-1!==Q.current&&eh.filteredOptions&&eh.filteredOptions.length!==ep.length&&eh.inputValue===et&&(I?Z.length===eh.value.length&&eh.value.every((e,t)=>_(Z[t])===_(e)):(e=eh.value,(e?_(e):"")===(Z?_(Z):"")))){let e=eh.filteredOptions[Q.current];if(e)return eX(ep,t=>_(t)===_(e))}return -1})();if(-1!==e){Q.current=e;return}let t=I?Z[0]:Z;if(0===ep.length||null==t)return void eg({diff:"reset"});if(G.current){if(null!=t){let e=ep[Q.current];if(I&&e&&-1!==eX(Z,t=>E(e,t)))return;let r=eX(ep,e=>E(e,t));-1===r?eg({diff:"reset"}):em({index:r});return}if(Q.current>=ep.length-1)return void em({index:ep.length-1});em({index:Q.current})}},[ep.length,!I&&Z,y,eg,em,eu,et,I]),eb=(0,eH.unstable_useEventCallback)(e=>{(0,eq.unstable_setRef)(G,e),e&&ey()});g.useEffect(()=>{ey()},[ey]);let ej=e=>{!eo&&(es(!0),ed(!0),L&&L(e))},ev=(e,t)=>{eo&&(es(!1),R&&R(e,t))},ew=(e,t,r,n)=>{if(I){if(Z.length===t.length&&Z.every((e,r)=>e===t[r]))return}else if(Z===t)return;A&&A(e,t,r,n),ee(t)},eS=g.useRef(!1),eC=(e,t,r="selectOption",n="options")=>{let a=r,i=t;if(I){let e=eX(i=Array.isArray(Z)?Z.slice():[],e=>E(t,e));-1===e?i.push(t):"freeSolo"!==n&&(i.splice(e,1),a="removeOption")}ei(e,i),ew(e,i,a,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||ev(e,a),(!0===o||"touch"===o&&eS.current||"mouse"===o&&!eS.current)&&H.current.blur()},eT=(e,t)=>{if(!I)return;""===et&&ev(e,"toggleInput");let r=K;-1===K?""===et&&"previous"===t&&(r=Z.length-1):((r+="next"===t?1:-1)<0&&(r=0),r===Z.length&&(r=-1)),X(r=function(e,t){if(-1===e)return -1;let r=e;for(;;){if("next"===t&&r===Z.length||"previous"===t&&-1===r)return -1;let e=V.querySelector(`[data-tag-index="${r}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return r;r+="next"===t?1:-1}}(r,t)),ex(r)},ek=e=>{U.current=!0,er(""),O&&O(e,"","clear"),ew(e,I?[]:null,"clear")},eP=e=>{ea(!0),D&&!U.current&&ej(e)},eE=e=>{t(G)?H.current.focus():(ea(!1),q.current=!0,U.current=!1,i&&-1!==Q.current&&eu?eC(e,ep[Q.current],"blur"):i&&b&&""!==et?eC(e,et,"blur","freeSolo"):s&&ei(e,Z),ev(e,"blur"))},eI=e=>{let t=e.target.value;et!==t&&(er(t),ed(!1),O&&O(e,t,"input")),""===t?u||I||ew(e,null,"clear"):ej(e)},eA=e=>{let t=Number(e.currentTarget.getAttribute("data-option-index"));Q.current!==t&&em({event:e,index:t,reason:"mouse"})},eR=e=>{em({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),eS.current=!0},eB=e=>{let t=Number(e.currentTarget.getAttribute("data-option-index"));eC(e,ep[t],"selectOption"),eS.current=!1},eO=e=>{eo?ev(e,"toggleInput"):ej(e)},eL=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==W&&e.preventDefault()},e$=e=>{e.currentTarget.contains(e.target)&&(H.current.focus(),N&&q.current&&H.current.selectionEnd-H.current.selectionStart==0&&H.current.select(),q.current=!1)},eD=e=>{h||""!==et&&eo||eO(e)},eM=b&&et.length>0;eM=eM||(I?Z.length>0:null!==Z);let eF=ep;return S&&(eF=ep.reduce((e,t,r)=>{let n=S(t);return e.length>0&&e[e.length-1].group===n?e[e.length-1].options.push(t):e.push({key:r,index:r,group:n,options:[t]}),e},[])),h&&en&&eE(),{getRootProps:(e={})=>(0,ez.default)({"aria-owns":ef?`${W}-listbox`:null},e,{onKeyDown:t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==K&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(X(-1),ex(-1)),229!==t.which))switch(t.key){case"Home":eu&&C&&(t.preventDefault(),eg({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":eu&&C&&(t.preventDefault(),eg({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),eg({diff:-5,direction:"previous",reason:"keyboard",event:t}),ej(t);break;case"PageDown":t.preventDefault(),eg({diff:5,direction:"next",reason:"keyboard",event:t}),ej(t);break;case"ArrowDown":t.preventDefault(),eg({diff:1,direction:"next",reason:"keyboard",event:t}),ej(t);break;case"ArrowUp":t.preventDefault(),eg({diff:-1,direction:"previous",reason:"keyboard",event:t}),ej(t);break;case"ArrowLeft":eT(t,"previous");break;case"ArrowRight":eT(t,"next");break;case"Enter":if(-1!==Q.current&&eu){let e=ep[Q.current],r=!!j&&j(e);if(t.preventDefault(),r)return;eC(t,e,"selectOption"),n&&H.current.setSelectionRange(H.current.value.length,H.current.value.length)}else b&&""!==et&&!1===ec&&(I&&t.preventDefault(),eC(t,et,"createOption","freeSolo"));break;case"Escape":eu?(t.preventDefault(),t.stopPropagation(),ev(t,"escape")):l&&(""!==et||I&&Z.length>0)&&(t.preventDefault(),t.stopPropagation(),ek(t));break;case"Backspace":if(I&&!F&&""===et&&Z.length>0){let e=-1===K?Z.length-1:K,r=Z.slice();r.splice(e,1),ew(t,r,"removeOption",{option:Z[e]})}break;case"Delete":if(I&&!F&&""===et&&Z.length>0&&-1!==K){let e=Z.slice();e.splice(K,1),ew(t,e,"removeOption",{option:Z[K]})}}},onMouseDown:eL,onClick:e$}),getInputLabelProps:()=>({id:`${W}-label`,htmlFor:W}),getInputProps:()=>({id:W,value:et,onBlur:eE,onFocus:eP,onChange:eI,onMouseDown:eD,"aria-activedescendant":eu?"":null,"aria-autocomplete":n?"both":"list","aria-controls":ef?`${W}-listbox`:void 0,"aria-expanded":ef,autoComplete:"off",ref:H,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:h}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:ek}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:eO}),getTagProps:({index:e})=>(0,ez.default)({key:e,"data-tag-index":e,tabIndex:-1},!F&&{onDelete:t=>{let r=Z.slice();r.splice(e,1),ew(t,r,"removeOption",{option:Z[e]})}}),getListboxProps:()=>({role:"listbox",id:`${W}-listbox`,"aria-labelledby":`${W}-label`,ref:eb,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:t})=>{var r;let n=(I?Z:[Z]).some(e=>null!=e&&E(t,e)),a=!!j&&j(t);return{key:null!=(r=null==v?void 0:v(t))?r:_(t),tabIndex:-1,role:"option",id:`${W}-option-${e}`,onMouseMove:eA,onClick:eB,onTouchStart:eR,"data-option-index":e,"aria-disabled":a,"aria-selected":n}},id:W,inputValue:et,value:Z,dirty:eM,expanded:eu&&V,popupOpen:eu,focused:en||-1!==K,anchorEl:V,setAnchorEl:J,focusedTag:K,groupedOptions:eF}};var e1=e.i(73598),e2=e.i(95262),e5=e.i(96861),e4=e.i(18420),e3=e.i(51480),e6=e.i(13740);function e9(e){return(0,e6.default)("MuiListSubheader",e)}(0,e3.default)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);let e8=["className","color","component","disableGutters","disableSticky","inset"],e7=(0,e2.default)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,e4.default)(r.color)}`],!r.disableGutters&&t.gutters,r.inset&&t.inset,!r.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>(0,ez.default)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===t.color&&{color:(e.vars||e).palette.primary.main},"inherit"===t.color&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),te=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiListSubheader"}),{className:n,color:a="default",component:i="li",disableGutters:o=!1,disableSticky:s=!1,inset:l=!1}=r,d=(0,eN.default)(r,e8),c=(0,ez.default)({},r,{color:a,component:i,disableGutters:o,disableSticky:s,inset:l}),u=(e=>{let{classes:t,color:r,disableGutters:n,inset:a,disableSticky:i}=e,o={root:["root","default"!==r&&`color${(0,e4.default)(r)}`,!n&&"gutters",a&&"inset",!i&&"sticky"]};return(0,e_.default)(o,e9,t)})(c);return(0,f.jsx)(e7,(0,ez.default)({as:i,className:(0,eW.default)(u.root,n),ref:t,ownerState:c},d))});te.muiSkipListHighlight=!0;var tt=e.i(79413),tr=e.i(795),tn=e.i(36887),ta=e.i(54581),ti=e.i(99918),to=e.i(11740),ts=e.i(71462),tl=e.i(15168),td=e.i(12447),tc=e.i(9254);function tu(e){return(0,e6.default)("MuiAutocomplete",e)}let tp=(0,e3.default)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var th=e.i(11488);let tf=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],tx=["ref"],tm=["key"],tg=["key"],ty=(0,tc.styled)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e,{fullWidth:n,hasClearIcon:a,hasPopupIcon:i,inputFocused:o,size:s}=r;return[{[`& .${tp.tag}`]:t.tag},{[`& .${tp.tag}`]:t[`tagSize${(0,e4.default)(s)}`]},{[`& .${tp.inputRoot}`]:t.inputRoot},{[`& .${tp.input}`]:t.input},{[`& .${tp.input}`]:o&&t.inputFocused},t.root,n&&t.fullWidth,i&&t.hasPopupIcon,a&&t.hasClearIcon]}})({[`&.${tp.focused} .${tp.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${tp.clearIndicator}`]:{visibility:"visible"}},[`& .${tp.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${tp.inputRoot}`]:{[`.${tp.hasPopupIcon}&, .${tp.hasClearIcon}&`]:{paddingRight:30},[`.${tp.hasPopupIcon}.${tp.hasClearIcon}&`]:{paddingRight:56},[`& .${tp.input}`]:{width:0,minWidth:30}},[`& .${ta.default.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${ta.default.root}.${ti.default.sizeSmall}`]:{[`& .${ta.default.input}`]:{padding:"2px 4px 3px 0"}},[`& .${to.default.root}`]:{padding:9,[`.${tp.hasPopupIcon}&, .${tp.hasClearIcon}&`]:{paddingRight:39},[`.${tp.hasPopupIcon}.${tp.hasClearIcon}&`]:{paddingRight:65},[`& .${tp.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${tp.endAdornment}`]:{right:9}},[`& .${to.default.root}.${ti.default.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${tp.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${ts.default.root}`]:{paddingTop:19,paddingLeft:8,[`.${tp.hasPopupIcon}&, .${tp.hasClearIcon}&`]:{paddingRight:39},[`.${tp.hasPopupIcon}.${tp.hasClearIcon}&`]:{paddingRight:65},[`& .${ts.default.input}`]:{padding:"7px 4px"},[`& .${tp.endAdornment}`]:{right:9}},[`& .${ts.default.root}.${ti.default.sizeSmall}`]:{paddingBottom:1,[`& .${ts.default.input}`]:{padding:"2.5px 4px"}},[`& .${ti.default.hiddenLabel}`]:{paddingTop:8},[`& .${ts.default.root}.${ti.default.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${tp.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ts.default.root}.${ti.default.hiddenLabel}.${ti.default.sizeSmall}`]:{[`& .${tp.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${tp.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${tp.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${tp.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${tp.inputRoot}`]:{flexWrap:"wrap"}}}]}),tb=(0,tc.styled)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),tj=(0,tc.styled)(tr.default,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),tv=(0,tc.styled)(tr.default,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>(0,ez.default)({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),tw=(0,tc.styled)(e1.default,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${tp.option}`]:t.option},t.popper,r.disablePortal&&t.popperDisablePortal]}})(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),tS=(0,tc.styled)(tt.default,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>(0,ez.default)({},e.typography.body1,{overflow:"auto"})),tC=(0,tc.styled)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),tT=(0,tc.styled)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),tk=(0,tc.styled)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${tp.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${tp.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${tp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,eU.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${tp.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,eU.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${tp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,eU.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),tP=(0,tc.styled)(te,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),tE=(0,tc.styled)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${tp.option}`]:{paddingLeft:24}}),tI=g.forwardRef(function(e,t){var r,n,a,i;let o,s=(0,e5.useDefaultProps)({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:u=!1,autoSelect:p=!1,blurOnSelect:h=!1,ChipProps:x,className:m,clearIcon:y=d||(d=(0,f.jsx)(tl.default,{fontSize:"small"})),clearOnBlur:b=!s.freeSolo,clearOnEscape:j=!1,clearText:v="Clear",closeText:w="Close",componentsProps:S={},defaultValue:C=s.multiple?[]:null,disableClearable:T=!1,disableCloseOnSelect:k=!1,disabled:P=!1,disabledItemsFocusable:E=!1,disableListWrap:I=!1,disablePortal:A=!1,filterSelectedOptions:R=!1,forcePopupIcon:B="auto",freeSolo:O=!1,fullWidth:L=!1,getLimitTagsText:$=e=>`+${e}`,getOptionLabel:D,groupBy:M,handleHomeEndKeys:F=!s.freeSolo,includeInputInList:N=!1,limitTags:z=-1,ListboxComponent:W="ul",ListboxProps:_,loading:U=!1,loadingText:q="Loading",multiple:H=!1,noOptionsText:G="No options",openOnFocus:V=!1,openText:J="Open",PaperComponent:K=tt.default,PopperComponent:X=e1.default,popupIcon:Y=c||(c=(0,f.jsx)(td.default,{})),readOnly:Q=!1,renderGroup:Z,renderInput:ee,renderOption:et,renderTags:er,selectOnFocus:en=!s.freeSolo,size:ea="medium",slotProps:ei={}}=s,eo=(0,eN.default)(s,tf),{getRootProps:es,getInputProps:el,getInputLabelProps:ed,getPopupIndicatorProps:ec,getClearProps:eu,getTagProps:ep,getListboxProps:eh,getOptionProps:ef,value:ex,dirty:em,expanded:eg,id:ey,popupOpen:eb,focused:ej,focusedTag:ev,anchorEl:ew,setAnchorEl:eS,inputValue:eC,groupedOptions:eT}=e0((0,ez.default)({},s,{componentName:"Autocomplete"})),ek=!T&&!P&&em&&!Q,eP=(!O||!0===B)&&!1!==B,{onMouseDown:eE}=el(),{ref:eI}=null!=_?_:{},eA=eh(),{ref:eR}=eA,eB=(0,eN.default)(eA,tx),eO=(0,th.default)(eR,eI),eL=D||(e=>{var t;return null!=(t=e.label)?t:e}),e$=(0,ez.default)({},s,{disablePortal:A,expanded:eg,focused:ej,fullWidth:L,getOptionLabel:eL,hasClearIcon:ek,hasPopupIcon:eP,inputFocused:-1===ev,popupOpen:eb,size:ea}),eD=(e=>{let{classes:t,disablePortal:r,expanded:n,focused:a,fullWidth:i,hasClearIcon:o,hasPopupIcon:s,inputFocused:l,popupOpen:d,size:c}=e,u={root:["root",n&&"expanded",a&&"focused",i&&"fullWidth",o&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${(0,e4.default)(c)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen"],popper:["popper",r&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,e_.default)(u,tu,t)})(e$);if(H&&ex.length>0){let e=e=>(0,ez.default)({className:eD.tag,disabled:P},ep(e));o=er?er(ex,e,e$):ex.map((t,r)=>{let n=e({index:r}),{key:a}=n,i=(0,eN.default)(n,tm);return(0,f.jsx)(tn.default,(0,ez.default)({label:eL(t),size:ea},i,x),a)})}if(z>-1&&Array.isArray(o)){let e=o.length-z;!ej&&e>0&&(o=o.splice(0,z)).push((0,f.jsx)("span",{className:eD.tag,children:$(e)},o.length))}let eM=Z||(e=>(0,f.jsxs)("li",{children:[(0,f.jsx)(tP,{className:eD.groupLabel,ownerState:e$,component:"div",children:e.group}),(0,f.jsx)(tE,{className:eD.groupUl,ownerState:e$,children:e.children})]},e.key)),eF=et||((e,t)=>{let{key:r}=e,n=(0,eN.default)(e,tg);return(0,f.jsx)("li",(0,ez.default)({},n,{children:eL(t)}),r)}),eU=(e,t)=>{let r=ef({option:e,index:t});return eF((0,ez.default)({},r,{className:eD.option}),e,{selected:r["aria-selected"],index:t,inputValue:eC},e$)},eq=null!=(r=ei.clearIndicator)?r:S.clearIndicator,eH=null!=(n=ei.paper)?n:S.paper,eG=null!=(a=ei.popper)?a:S.popper,eV=null!=(i=ei.popupIndicator)?i:S.popupIndicator;return(0,f.jsxs)(g.Fragment,{children:[(0,f.jsx)(ty,(0,ez.default)({ref:t,className:(0,eW.default)(eD.root,m),ownerState:e$},es(eo),{children:ee({id:ey,disabled:P,fullWidth:!0,size:"small"===ea?"small":void 0,InputLabelProps:ed(),InputProps:(0,ez.default)({ref:eS,className:eD.inputRoot,startAdornment:o,onClick:e=>{e.target===e.currentTarget&&eE(e)}},(ek||eP)&&{endAdornment:(0,f.jsxs)(tb,{className:eD.endAdornment,ownerState:e$,children:[ek?(0,f.jsx)(tj,(0,ez.default)({},eu(),{"aria-label":v,title:v,ownerState:e$},eq,{className:(0,eW.default)(eD.clearIndicator,null==eq?void 0:eq.className),children:y})):null,eP?(0,f.jsx)(tv,(0,ez.default)({},ec(),{disabled:P,"aria-label":eb?w:J,title:eb?w:J,ownerState:e$},eV,{className:(0,eW.default)(eD.popupIndicator,null==eV?void 0:eV.className),children:Y})):null]})}),inputProps:(0,ez.default)({className:eD.input,disabled:P,readOnly:Q},el())})})),ew?(0,f.jsx)(tw,(0,ez.default)({as:X,disablePortal:A,style:{width:ew?ew.clientWidth:null},ownerState:e$,role:"presentation",anchorEl:ew,open:eb},eG,{className:(0,eW.default)(eD.popper,null==eG?void 0:eG.className),children:(0,f.jsxs)(tS,(0,ez.default)({ownerState:e$,as:K},eH,{className:(0,eW.default)(eD.paper,null==eH?void 0:eH.className),children:[U&&0===eT.length?(0,f.jsx)(tC,{className:eD.loading,ownerState:e$,children:q}):null,0!==eT.length||O||U?null:(0,f.jsx)(tT,{className:eD.noOptions,ownerState:e$,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:G}),eT.length>0?(0,f.jsx)(tk,(0,ez.default)({as:W,className:eD.listbox,ownerState:e$},eB,_,{ref:eO,children:eT.map((e,t)=>M?eM({key:e.key,group:e.group,children:e.options.map((t,r)=>eU(t,e.index+r))}):eU(e,t))})):null]}))})):null]})});var tA=e.i(34699),tR=e.i(95532),tB=e.i(26712);function tO(){let[e,t]=(0,g.useState)([]),[r,n]=(0,g.useState)([]),[a,i]=(0,g.useState)([]),[o,s]=(0,g.useState)([]),[l,d]=(0,g.useState)(!0),[c,u]=(0,g.useState)(null),[p,h]=(0,g.useState)(null),[x,m]=(0,g.useState)(!1),[y,j]=(0,g.useState)(null),[w,S]=(0,g.useState)(null),[T,k]=(0,g.useState)(null),[P,E]=(0,g.useState)(null),[I,R]=(0,g.useState)(null),[B,O]=(0,g.useState)(null),[L,$]=(0,g.useState)(null),[D,M]=(0,g.useState)({client:"",subject:"",description:"",priority:"medium"}),[X,Y]=(0,g.useState)({subject:"",description:"",priority:"medium",status:"open",assignedTo:""});(0,g.useEffect)(()=>{ea(),Z(),er(),en()},[]);let Z=async()=>{try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();n(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},er=async()=>{try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();i(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}},en=async()=>{try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/tasks`,{credentials:"include"});if(t.ok){let e=await t.json();s(e.tasks||[])}}catch(e){console.error("Error fetching tasks:",e)}},ea=async()=>{d(!0),u(null);try{let e=(0,K.getBackendUrl)(),r=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to fetch support requests"}));throw Error(e.error||e.details||"Failed to fetch support requests")}let n=await r.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),u(e.message||"Failed to load support requests"),t([])}finally{d(!1)}},ei=async()=>{if(!w||!w.id||!X.subject||!X.description)return void u("Subject and description are required");let r=w.id;d(!0),u(null);try{let n=(0,K.getBackendUrl)(),a=await fetch(`${n}/api/creative/support-requests/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:X.subject,description:X.description,priority:X.priority,status:X.status,assignedTo:P?P.name||P.email:X.assignedTo||null})});if(!a.ok){let e=await a.json().catch(()=>({error:"Failed to update support request"})),t=e.error||e.message||`Failed to update support request (${a.status})`;throw Error(t)}let i=await a.json();if(I&&I.id&&r)try{await fetch(`${n}/api/tasks/${I.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:r})})}catch(e){console.error("Error linking task:",e)}t(e.map(e=>e.id===r?i:e)),S(null),E(null),R(null),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""}),m(!1),ea(),en()}catch(e){console.error("Error updating support request:",e),u(e.message||"Failed to update support request")}finally{d(!1)}},es=async()=>{if(!D.subject||!D.description)return void u("Subject and description are required");d(!0),u(null);try{let r=(0,K.getBackendUrl)(),n=await fetch(`${r}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:T?T.company||T.name:D.client,clientId:T?.id,subject:D.subject,description:D.description,priority:D.priority,assignedTo:P?P.name||P.email:null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let a=await n.json();if(I&&I.id&&a&&a.id)try{await fetch(`${r}/api/tasks/${I.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:a.id})})}catch(e){console.error("Error linking task:",e)}t([a,...e]),h("Support request created successfully"),M({client:"",subject:"",description:"",priority:"medium"}),k(null),E(null),R(null),m(!1),setTimeout(()=>h(null),3e3),ea(),en()}catch(e){console.error("Error creating support request:",e),u(e.message||"Failed to create support request")}finally{d(!1)}},el=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ed=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,f.jsxs)(b.Box,{children:[p&&(0,f.jsx)(A.Alert,{severity:"success",onClose:()=>h(null),sx:{mb:2},children:p}),c&&(0,f.jsx)(A.Alert,{severity:"error",onClose:()=>u(null),sx:{mb:2},children:c}),(0,f.jsxs)(q.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,f.jsx)(_.Button,{variant:"contained",startIcon:(0,f.jsx)(tA.default,{}),onClick:()=>{j(null),m(!0)},children:"New Request"})]}),(0,f.jsx)(e$.TableContainer,{component:C.Paper,children:(0,f.jsxs)(eB.Table,{children:[(0,f.jsx)(eD.TableHead,{children:(0,f.jsxs)(eM.TableRow,{children:[(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,f.jsx)(eL.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,f.jsx)(eO.TableBody,{children:0===e.length?(0,f.jsx)(eM.TableRow,{children:(0,f.jsx)(eL.TableCell,{colSpan:7,align:"center",sx:{py:4},children:(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,f.jsxs)(eM.TableRow,{hover:!0,children:[(0,f.jsx)(eL.TableCell,{children:e.client}),(0,f.jsx)(eL.TableCell,{children:e.subject}),(0,f.jsx)(eL.TableCell,{children:e.assignedTo?(0,f.jsx)(ee.Chip,{label:e.assignedTo,size:"small",variant:"outlined"}):(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Unassigned"})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.status,size:"small",color:el(e.status)})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.priority,size:"small",color:ed(e.priority)})}),(0,f.jsx)(eL.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,f.jsx)(eL.TableCell,{align:"right",children:(0,f.jsx)(Q.IconButton,{size:"small",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),O(t.currentTarget),$(r))},children:(0,f.jsx)(tB.default,{})})})]},e.id))})]})}),(0,f.jsxs)(et.Menu,{anchorEl:B,open:!!B,onClose:()=>{O(null),$(null)},children:[(0,f.jsxs)(J.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===L);t&&(j(t),S(null),m(!0))},children:[(0,f.jsx)(eo.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,f.jsxs)(J.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===L);t&&(S(t),j(null),E((t.assignedTo?a.find(e=>e.name===t.assignedTo||e.email===t.assignedTo):null)||null),R((t.linkedTasks&&t.linkedTasks.length>0&&t.linkedTasks[0]?.id?o.find(e=>e.id===t.linkedTasks[0].id):null)||null),Y({subject:t.subject,description:t.description,priority:t.priority,status:t.status,assignedTo:t.assignedTo||""}),m(!0),O(null),$(null))},children:[(0,f.jsx)(tR.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,f.jsxs)(F.Dialog,{open:x,onClose:()=>{m(!1),j(null),S(null),k(null),M({client:"",subject:"",description:"",priority:"medium"}),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},maxWidth:"md",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:y?"Support Request Details":w?"Edit Support Request":"Create Support Request"}),(0,f.jsx)(z.DialogContent,{children:w?(0,f.jsxs)(q.Stack,{spacing:3,sx:{mt:1},children:[(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Subject",value:X.subject,onChange:e=>Y({...X,subject:e.target.value})}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:X.description,onChange:e=>Y({...X,description:e.target.value})}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Assigned Employee"}),(0,f.jsxs)(V.Select,{value:P?.id||"",label:"Assigned Employee",onChange:e=>{let t=a.find(t=>t.id===Number(e.target.value));E(t||null),Y({...X,assignedTo:t?t.name||t.email:""})},children:[(0,f.jsx)(J.MenuItem,{value:"",children:"Unassigned"}),a.map(e=>(0,f.jsxs)(J.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,f.jsx)(tI,{fullWidth:!0,options:o.filter(e=>!e.supportRequestId||e.supportRequestId===w?.id),getOptionLabel:e=>{let t=e.supportRequestId?" (Linked)":"";return`${e.title||""}${t}`},value:I,onChange:(e,t)=>{R(t)},renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,f.jsx)(b.Box,{component:"li",...e,children:(0,f.jsxs)(q.Stack,{children:[(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,f.jsx)(v.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&t.supportRequestId!==w?.id&&(0,f.jsx)(ee.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,f.jsxs)(v.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,sx:{mt:.5},children:[(0,f.jsx)(ee.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.createdAt&&(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Priority"}),(0,f.jsxs)(V.Select,{value:X.priority,label:"Priority",onChange:e=>Y({...X,priority:e.target.value}),children:[(0,f.jsx)(J.MenuItem,{value:"low",children:"Low"}),(0,f.jsx)(J.MenuItem,{value:"medium",children:"Medium"}),(0,f.jsx)(J.MenuItem,{value:"high",children:"High"})]})]}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Status"}),(0,f.jsxs)(V.Select,{value:X.status,label:"Status",onChange:e=>Y({...X,status:e.target.value}),children:[(0,f.jsx)(J.MenuItem,{value:"open",children:"Open"}),(0,f.jsx)(J.MenuItem,{value:"in-progress",children:"In Progress"}),(0,f.jsx)(J.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):y?(0,f.jsx)(b.Box,{children:(0,f.jsxs)(q.Stack,{spacing:2,sx:{mt:1},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,f.jsx)(v.Typography,{variant:"body1",children:y.client})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Assigned To"}),(0,f.jsx)(v.Typography,{variant:"body1",children:y.assignedTo||"Unassigned"})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,f.jsx)(v.Typography,{variant:"body1",children:y.subject})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,f.jsx)(v.Typography,{variant:"body1",children:y.description})]}),y.linkedTasks&&y.linkedTasks.length>0&&(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Linked Tasks"}),(0,f.jsx)(q.Stack,{spacing:1,children:y.linkedTasks.map(e=>(0,f.jsx)(ee.Chip,{label:e.title,size:"small",variant:"outlined",sx:{mr:1,mb:1}},e.id))})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,f.jsx)(ee.Chip,{label:y.status,color:el(y.status)})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,f.jsx)(ee.Chip,{label:y.priority,color:ed(y.priority)})]})]})]})}):(0,f.jsxs)(q.Stack,{spacing:3,sx:{mt:1},children:[(0,f.jsx)(tI,{fullWidth:!0,options:r,getOptionLabel:e=>e.company||e.name||"",value:T,onChange:(e,t)=>{k(t),M({...D,client:t?t.company||t.name:""})},renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,f.jsx)(b.Box,{component:"li",...e,children:(0,f.jsxs)(q.Stack,{children:[(0,f.jsx)(v.Typography,{variant:"body1",children:t.company||t.name}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Subject",value:D.subject,onChange:e=>M({...D,subject:e.target.value})}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:D.description,onChange:e=>M({...D,description:e.target.value})}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Assigned Employee"}),(0,f.jsxs)(V.Select,{value:P?.id||"",label:"Assigned Employee",onChange:e=>{E(a.find(t=>t.id===Number(e.target.value))||null)},children:[(0,f.jsx)(J.MenuItem,{value:"",children:"Unassigned"}),a.map(e=>(0,f.jsxs)(J.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,f.jsx)(tI,{fullWidth:!0,options:o,getOptionLabel:e=>{let t=e.supportRequestId?" (Already Linked)":"";return`${e.title||""}${t}`},value:I,onChange:(e,t)=>{t&&!t.supportRequestId?R(t):t&&t.supportRequestId?(u("This task is already linked to another support request"),setTimeout(()=>u(null),3e3)):R(null)},renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,f.jsx)(b.Box,{component:"li",...e,children:(0,f.jsxs)(q.Stack,{children:[(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,f.jsx)(v.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&(0,f.jsx)(ee.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,f.jsxs)(v.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,sx:{mt:.5},flexWrap:"wrap",children:[(0,f.jsx)(ee.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.assignedToName&&(0,f.jsx)(ee.Chip,{label:`Assigned: ${t.assignedToName}`,size:"small",variant:"outlined"}),t.createdAt&&(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Priority"}),(0,f.jsxs)(V.Select,{value:D.priority,label:"Priority",onChange:e=>M({...D,priority:e.target.value}),children:[(0,f.jsx)(J.MenuItem,{value:"low",children:"Low"}),(0,f.jsx)(J.MenuItem,{value:"medium",children:"Medium"}),(0,f.jsx)(J.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>{m(!1),j(null),S(null),k(null),E(null),R(null),M({client:"",subject:"",description:"",priority:"medium"}),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},children:y?"Close":"Cancel"}),w?(0,f.jsx)(_.Button,{variant:"contained",onClick:ei,children:"Update Request"}):!y&&(0,f.jsx)(_.Button,{variant:"contained",onClick:es,children:"Create Request"})]})]})]})}var tL=e.i(19391),t$=e.i(94544),tD=e.i(1911),tM=e.i(25449),tF=e.i(5385),tN=e.i(46631),tz=e.i(70385),tW=e.i(37451),t_=e.i(27121),tU=e.i(7356),tq=e.i(62555),tH=e.i(72695),tG=e.i(94556),tV=e.i(20012),tJ=e.i(99700),tK=e.i(28810),tX=e.i(27325),tY=e.i(61637),tQ=e.i(75016);function tZ(e,t){return function(){return e.apply(t,arguments)}}let{toString:t0}=Object.prototype,{getPrototypeOf:t1}=Object,{iterator:t2,toStringTag:t5}=Symbol,t4=(t=Object.create(null),e=>{let r=t0.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}),t3=e=>(e=e.toLowerCase(),t=>t4(t)===e),t6=e=>t=>typeof t===e,{isArray:t9}=Array,t8=t6("undefined");function t7(e){return null!==e&&!t8(e)&&null!==e.constructor&&!t8(e.constructor)&&rr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let re=t3("ArrayBuffer"),rt=t6("string"),rr=t6("function"),rn=t6("number"),ra=e=>null!==e&&"object"==typeof e,ri=e=>{if("object"!==t4(e))return!1;let t=t1(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(t5 in e)&&!(t2 in e)},ro=t3("Date"),rs=t3("File"),rl=t3("Blob"),rd=t3("FileList"),rc=t3("URLSearchParams"),[ru,rp,rh,rf]=["ReadableStream","Request","Response","Headers"].map(t3);function rx(e,t,{allOwnKeys:r=!1}={}){let n,a;if(null!=e)if("object"!=typeof e&&(e=[e]),t9(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{let a;if(t7(e))return;let i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function rm(e,t){let r;if(t7(e))return null;t=t.toLowerCase();let n=Object.keys(e),a=n.length;for(;a-- >0;)if(t===(r=n[a]).toLowerCase())return r;return null}let rg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,ry=e=>!t8(e)&&e!==rg,rb=(r="undefined"!=typeof Uint8Array&&t1(Uint8Array),e=>r&&e instanceof r),rj=t3("HTMLFormElement"),rv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),rw=t3("RegExp"),rS=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};rx(r,(r,a)=>{let i;!1!==(i=t(r,a,e))&&(n[a]=i||r)}),Object.defineProperties(e,n)},rC=t3("AsyncFunction"),rT=(i="function"==typeof setImmediate,o=rr(rg.postMessage),i?setImmediate:o?(s=`axios@${Math.random()}`,l=[],rg.addEventListener("message",({source:e,data:t})=>{e===rg&&t===s&&l.length&&l.shift()()},!1),e=>{l.push(e),rg.postMessage(s,"*")}):e=>setTimeout(e)),rk="undefined"!=typeof queueMicrotask?queueMicrotask.bind(rg):void 0!==eF.default&&eF.default.nextTick||rT,rP={isArray:t9,isArrayBuffer:re,isBuffer:t7,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||rr(e.append)&&("formdata"===(t=t4(e))||"object"===t&&rr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&re(e.buffer)},isString:rt,isNumber:rn,isBoolean:e=>!0===e||!1===e,isObject:ra,isPlainObject:ri,isEmptyObject:e=>{if(!ra(e)||t7(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:ru,isRequest:rp,isResponse:rh,isHeaders:rf,isUndefined:t8,isDate:ro,isFile:rs,isBlob:rl,isRegExp:rw,isFunction:rr,isStream:e=>ra(e)&&rr(e.pipe),isURLSearchParams:rc,isTypedArray:rb,isFileList:rd,forEach:rx,merge:function e(){let{caseless:t,skipUndefined:r}=ry(this)&&this||{},n={},a=(a,i)=>{let o=t&&rm(n,i)||i;ri(n[o])&&ri(a)?n[o]=e(n[o],a):ri(a)?n[o]=e({},a):t9(a)?n[o]=a.slice():r&&t8(a)||(n[o]=a)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&rx(arguments[e],a);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(rx(t,(t,n)=>{r&&rr(t)?e[n]=tZ(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,i,o,s={};if(t=t||{},null==e)return t;do{for(i=(a=Object.getOwnPropertyNames(e)).length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=!1!==r&&t1(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype)return t},kindOf:t4,kindOfTest:t3,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(t9(e))return e;let t=e.length;if(!rn(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r,n=(e&&e[t2]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:rj,hasOwnProperty:rv,hasOwnProp:rv,reduceDescriptors:rS,freezeMethods:e=>{rS(e,(t,r)=>{if(rr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(rr(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(t9(e)?e:String(e).split(t)).forEach(e=>{r[e]=!0}),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:rm,global:rg,isContextDefined:ry,isSpecCompliantForm:function(e){return!!(e&&rr(e.append)&&"FormData"===e[t5]&&e[t2])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(ra(e)){if(t.indexOf(e)>=0)return;if(t7(e))return e;if(!("toJSON"in e)){t[n]=e;let a=t9(e)?[]:{};return rx(e,(e,t)=>{let i=r(e,n+1);t8(i)||(a[t]=i)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:rC,isThenable:e=>e&&(ra(e)||rr(e))&&rr(e.then)&&rr(e.catch),setImmediate:rT,asap:rk,isIterable:e=>null!=e&&rr(e[t2])};var rE=e.i(85889);function rI(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}rP.inherits(rI,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rP.toJSONObject(this.config),code:this.code,status:this.status}}});let rA=rI.prototype,rR={};function rB(e){return rP.isPlainObject(e)||rP.isArray(e)}function rO(e){return rP.endsWith(e,"[]")?e.slice(0,-2):e}function rL(e,t,r){return e?e.concat(t).map(function(e,t){return e=rO(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rR[e]={value:e}}),Object.defineProperties(rI,rR),Object.defineProperty(rA,"isAxiosError",{value:!0}),rI.from=(e,t,r,n,a,i)=>{let o=Object.create(rA);rP.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return rI.call(o,s,l,r,n,a),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};let r$=rP.toFlatObject(rP,{},null,function(e){return/^is[A-Z]/.test(e)}),rD=function(e,t,r){if(!rP.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=rP.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!rP.isUndefined(t[e])})).metaTokens,a=r.visitor||d,i=r.dots,o=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&rP.isSpecCompliantForm(t);if(!rP.isFunction(a))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(rP.isDate(e))return e.toISOString();if(rP.isBoolean(e))return e.toString();if(!s&&rP.isBlob(e))throw new rI("Blob is not supported. Use a Buffer instead.");return rP.isArrayBuffer(e)||rP.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):rE.Buffer.from(e):e}function d(e,r,a){let s=e;if(e&&!a&&"object"==typeof e)if(rP.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var d;if(rP.isArray(e)&&(d=e,rP.isArray(d)&&!d.some(rB))||(rP.isFileList(e)||rP.endsWith(r,"[]"))&&(s=rP.toArray(e)))return r=rO(r),s.forEach(function(e,n){rP.isUndefined(e)||null===e||t.append(!0===o?rL([r],n,i):null===o?r:r+"[]",l(e))}),!1}return!!rB(e)||(t.append(rL(a,r,i),l(e)),!1)}let c=[],u=Object.assign(r$,{defaultVisitor:d,convertValue:l,isVisitable:rB});if(!rP.isObject(e))throw TypeError("data must be an object");return!function e(r,n){if(!rP.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),rP.forEach(r,function(r,i){!0===(!(rP.isUndefined(r)||null===r)&&a.call(t,r,rP.isString(i)?i.trim():i,n,u))&&e(r,n?n.concat(i):[i])}),c.pop()}}(e),t};function rM(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rF(e,t){this._pairs=[],e&&rD(e,this,t)}let rN=rF.prototype;function rz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rW(e,t,r){let n;if(!t)return e;let a=r&&r.encode||rz;rP.isFunction(r)&&(r={serialize:r});let i=r&&r.serialize;if(n=i?i(t,r):rP.isURLSearchParams(t)?t.toString():new rF(t,r).toString(a)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}rN.append=function(e,t){this._pairs.push([e,t])},rN.toString=function(e){let t=e?function(t){return e.call(this,t,rM)}:rM;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let r_=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){rP.forEach(this.handlers,function(t){null!==t&&e(t)})}},rU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rq="undefined"!=typeof URLSearchParams?URLSearchParams:rF,rH="undefined"!=typeof FormData?FormData:null,rG="undefined"!=typeof Blob?Blob:null,rV="undefined"!=typeof window&&"undefined"!=typeof document,rJ="object"==typeof navigator&&navigator||void 0,rK=rV&&(!rJ||0>["ReactNative","NativeScript","NS"].indexOf(rJ.product)),rX="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,rY=rV&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>rV,"hasStandardBrowserEnv",()=>rK,"hasStandardBrowserWebWorkerEnv",()=>rX,"navigator",()=>rJ,"origin",()=>rY],21724);let rQ={...e.i(21724),isBrowser:!0,classes:{URLSearchParams:rq,FormData:rH,Blob:rG},protocols:["http","https","file","blob","url","data"]},rZ=function(e){if(rP.isFormData(e)&&rP.isFunction(e.entries)){let t={};return rP.forEachEntry(e,(e,r)=>{!function e(t,r,n,a){let i=t[a++];if("__proto__"===i)return!0;let o=Number.isFinite(+i),s=a>=t.length;return(i=!i&&rP.isArray(n)?n.length:i,s)?rP.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r:(n[i]&&rP.isObject(n[i])||(n[i]=[]),e(t,r,n[i],a)&&rP.isArray(n[i])&&(n[i]=function(e){let t,r,n={},a=Object.keys(e),i=a.length;for(t=0;t<i;t++)n[r=a[t]]=e[r];return n}(n[i]))),!o}(rP.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null},r0={transitional:rU,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",a=n.indexOf("application/json")>-1,i=rP.isObject(e);if(i&&rP.isHTMLForm(e)&&(e=new FormData(e)),rP.isFormData(e))return a?JSON.stringify(rZ(e)):e;if(rP.isArrayBuffer(e)||rP.isBuffer(e)||rP.isStream(e)||rP.isFile(e)||rP.isBlob(e)||rP.isReadableStream(e))return e;if(rP.isArrayBufferView(e))return e.buffer;if(rP.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1){var o,s;return(o=e,s=this.formSerializer,rD(o,new rQ.classes.URLSearchParams,{visitor:function(e,t,r,n){return rQ.isNode&&rP.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...s})).toString()}if((r=rP.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return rD(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(i||a){t.setContentType("application/json",!1);var l=e;if(rP.isString(l))try{return(0,JSON.parse)(l),rP.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||r0.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(rP.isResponse(e)||rP.isReadableStream(e))return e;if(e&&rP.isString(e)&&(r&&!this.responseType||n)){let r=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!r&&n){if("SyntaxError"===e.name)throw rI.from(e,rI.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rQ.classes.FormData,Blob:rQ.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rP.forEach(["delete","get","head","post","put","patch"],e=>{r0.headers[e]={}});let r1=rP.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),r2=Symbol("internals");function r5(e){return e&&String(e).trim().toLowerCase()}function r4(e){return!1===e||null==e?e:rP.isArray(e)?e.map(r4):String(e)}function r3(e,t,r,n,a){if(rP.isFunction(n))return n.call(this,t,r);if(a&&(t=r),rP.isString(t)){if(rP.isString(n))return -1!==t.indexOf(n);if(rP.isRegExp(n))return n.test(t)}}class r6{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function a(e,t,r){let a=r5(t);if(!a)throw Error("header name must be a non-empty string");let i=rP.findKey(n,a);i&&void 0!==n[i]&&!0!==r&&(void 0!==r||!1===n[i])||(n[i||t]=r4(e))}let i=(e,t)=>rP.forEach(e,(e,r)=>a(e,r,t));if(rP.isPlainObject(e)||e instanceof this.constructor)i(e,t);else{let n;if(rP.isString(e)&&(e=e.trim())&&(n=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim()))){var o;let r,n,a,s;i((s={},(o=e)&&o.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||s[r]&&r1[r]||("set-cookie"===r?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s),t)}else if(rP.isObject(e)&&rP.isIterable(e)){let r={},n,a;for(let t of e){if(!rP.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(n=r[a])?rP.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(r,t)}else null!=e&&a(t,e,r)}return this}get(e,t){if(e=r5(e)){let r=rP.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}if(rP.isFunction(t))return t.call(this,e,r);if(rP.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=r5(e)){let r=rP.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||r3(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function a(e){if(e=r5(e)){let a=rP.findKey(r,e);a&&(!t||r3(r,r[a],a,t))&&(delete r[a],n=!0)}}return rP.isArray(e)?e.forEach(a):a(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let a=t[r];(!e||r3(this,this[a],a,e,!0))&&(delete this[a],n=!0)}return n}normalize(e){let t=this,r={};return rP.forEach(this,(n,a)=>{let i=rP.findKey(r,a);if(i){t[i]=r4(n),delete t[a];return}let o=e?a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(a).trim();o!==a&&delete t[a],t[o]=r4(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return rP.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&rP.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[r2]=this[r2]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=r5(e);if(!t[n]){let a;a=rP.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(r,t+a,{value:function(r,n,a){return this[t].call(this,e,r,n,a)},configurable:!0})}),t[n]=!0}}return rP.isArray(e)?e.forEach(n):n(e),this}}function r9(e,t){let r=this||r0,n=t||r,a=r6.from(n.headers),i=n.data;return rP.forEach(e,function(e){i=e.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function r8(e){return!!(e&&e.__CANCEL__)}function r7(e,t,r){rI.call(this,null==e?"canceled":e,rI.ERR_CANCELED,t,r),this.name="CanceledError"}function ne(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new rI("Request failed with status code "+r.status,[rI.ERR_BAD_REQUEST,rI.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}r6.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),rP.reduceDescriptors(r6.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),rP.freezeMethods(r6),rP.inherits(r7,rI,{__CANCEL__:!0});let nt=function(e,t){let r,n=Array(e=e||10),a=Array(e),i=0,o=0;return t=void 0!==t?t:1e3,function(s){let l=Date.now(),d=a[o];r||(r=l),n[i]=s,a[i]=l;let c=o,u=0;for(;c!==i;)u+=n[c++],c%=e;if((i=(i+1)%e)===o&&(o=(o+1)%e),l-r<t)return;let p=d&&l-d;return p?Math.round(1e3*u/p):void 0}},nr=function(e,t){let r,n,a=0,i=1e3/t,o=(t,i=Date.now())=>{a=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),s=t-a;s>=i?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},i-s)))},()=>r&&o(r)]},nn=(e,t,r=3)=>{let n=0,a=nt(50,250);return nr(r=>{let i=r.loaded,o=r.lengthComputable?r.total:void 0,s=i-n,l=a(s);n=i,e({loaded:i,total:o,progress:o?i/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},na=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ni=e=>(...t)=>rP.asap(()=>e(...t)),no=rQ.hasStandardBrowserEnv?(n=new URL(rQ.origin),a=rQ.navigator&&/(msie|trident)/i.test(rQ.navigator.userAgent),e=>(e=new URL(e,rQ.origin),n.protocol===e.protocol&&n.host===e.host&&(a||n.port===e.port))):()=>!0,ns=rQ.hasStandardBrowserEnv?{write(e,t,r,n,a,i,o){if("undefined"==typeof document)return;let s=[`${e}=${encodeURIComponent(t)}`];rP.isNumber(r)&&s.push(`expires=${new Date(r).toUTCString()}`),rP.isString(n)&&s.push(`path=${n}`),rP.isString(a)&&s.push(`domain=${a}`),!0===i&&s.push("secure"),rP.isString(o)&&s.push(`SameSite=${o}`),document.cookie=s.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function nl(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||!1==r)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let nd=e=>e instanceof r6?{...e}:e;function nc(e,t){t=t||{};let r={};function n(e,t,r,n){return rP.isPlainObject(e)&&rP.isPlainObject(t)?rP.merge.call({caseless:n},e,t):rP.isPlainObject(t)?rP.merge({},t):rP.isArray(t)?t.slice():t}function a(e,t,r,a){return rP.isUndefined(t)?rP.isUndefined(e)?void 0:n(void 0,e,r,a):n(e,t,r,a)}function i(e,t){if(!rP.isUndefined(t))return n(void 0,t)}function o(e,t){return rP.isUndefined(t)?rP.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,a,i){return i in t?n(r,a):i in e?n(void 0,r):void 0}let l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,r)=>a(nd(e),nd(t),r,!0)};return rP.forEach(Object.keys({...e,...t}),function(n){let i=l[n]||a,o=i(e[n],t[n],n);rP.isUndefined(o)&&i!==s||(r[n]=o)}),r}let nu=e=>{let t=nc({},e),{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:s}=t;if(t.headers=o=r6.from(o),t.url=rW(nl(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),rP.isFormData(r)){if(rQ.hasStandardBrowserEnv||rQ.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(rP.isFunction(r.getHeaders)){let e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}}if(rQ.hasStandardBrowserEnv&&(n&&rP.isFunction(n)&&(n=n(t)),n||!1!==n&&no(t.url))){let e=a&&i&&ns.read(i);e&&o.set(a,e)}return t},np="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){var n;let a,i,o,s,l,d,c=nu(e),u=c.data,p=r6.from(c.headers).normalize(),{responseType:h,onUploadProgress:f,onDownloadProgress:x}=c;function m(){s&&s(),l&&l(),c.cancelToken&&c.cancelToken.unsubscribe(a),c.signal&&c.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function y(){if(!g)return;let n=r6.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());ne(function(e){t(e),m()},function(e){r(e),m()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(c.method.toUpperCase(),c.url,!0),g.timeout=c.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||4!==g.readyState||(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(r(new rI("Request aborted",rI.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){let n=new rI(t&&t.message?t.message:"Network Error",rI.ERR_NETWORK,e,g);n.event=t||null,r(n),g=null},g.ontimeout=function(){let t=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",n=c.transitional||rU;c.timeoutErrorMessage&&(t=c.timeoutErrorMessage),r(new rI(t,n.clarifyTimeoutError?rI.ETIMEDOUT:rI.ECONNABORTED,e,g)),g=null},void 0===u&&p.setContentType(null),"setRequestHeader"in g&&rP.forEach(p.toJSON(),function(e,t){g.setRequestHeader(t,e)}),rP.isUndefined(c.withCredentials)||(g.withCredentials=!!c.withCredentials),h&&"json"!==h&&(g.responseType=c.responseType),x&&([o,l]=nn(x,!0),g.addEventListener("progress",o)),f&&g.upload&&([i,s]=nn(f),g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",s)),(c.cancelToken||c.signal)&&(a=t=>{g&&(r(!t||t.type?new r7(null,e,g):t),g.abort(),g=null)},c.cancelToken&&c.cancelToken.subscribe(a),c.signal&&(c.signal.aborted?a():c.signal.addEventListener("abort",a)));let b=(n=c.url,(d=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n))&&d[1]||"");b&&-1===rQ.protocols.indexOf(b)?r(new rI("Unsupported protocol "+b+":",rI.ERR_BAD_REQUEST,e)):g.send(u||null)})},nh=function*(e,t){let r,n=e.byteLength;if(!t||n<t)return void(yield e);let a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},nf=async function*(e,t){for await(let r of nx(e))yield*nh(r,t)},nx=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},nm=(e,t,r,n)=>{let a,i=nf(e,t),o=0,s=e=>{!a&&(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await i.next();if(t){s(),e.close();return}let a=n.byteLength;if(r){let e=o+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw s(e),e}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},{isFunction:ng}=rP,ny=(({Request:e,Response:t})=>({Request:e,Response:t}))(rP.global),{ReadableStream:nb,TextEncoder:nj}=rP.global,nv=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},nw=e=>{let t,{fetch:r,Request:n,Response:a}=e=rP.merge.call({skipUndefined:!0},ny,e),i=r?ng(r):"function"==typeof fetch,o=ng(n),s=ng(a);if(!i)return!1;let l=i&&ng(nb),d=i&&("function"==typeof nj?(t=new nj,e=>t.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=o&&l&&nv(()=>{let e=!1,t=new n(rQ.origin,{body:new nb,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=s&&l&&nv(()=>rP.isReadableStream(new a("").body)),p={stream:u&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{p[e]||(p[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new rI(`Response type '${e}' is not supported`,rI.ERR_NOT_SUPPORT,r)})});let h=async e=>{if(null==e)return 0;if(rP.isBlob(e))return e.size;if(rP.isSpecCompliantForm(e)){let t=new n(rQ.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return rP.isArrayBufferView(e)||rP.isArrayBuffer(e)?e.byteLength:(rP.isURLSearchParams(e)&&(e+=""),rP.isString(e))?(await d(e)).byteLength:void 0},f=async(e,t)=>{let r=rP.toFiniteNumber(e.getContentLength());return null==r?h(t):r};return async e=>{let t,{url:i,method:s,data:l,signal:d,cancelToken:h,timeout:x,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:b,withCredentials:j="same-origin",fetchOptions:v}=nu(e),w=r||fetch;y=y?(y+"").toLowerCase():"text";let S=((e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,a=function(e){if(!r){r=!0,o();let t=e instanceof Error?e:this.reason;n.abort(t instanceof rI?t:new r7(t instanceof Error?t.message:t))}},i=t&&setTimeout(()=>{i=null,a(new rI(`timeout ${t} of ms exceeded`,rI.ETIMEDOUT))},t),o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));let{signal:s}=n;return s.unsubscribe=()=>rP.asap(o),s}})([d,h&&h.toAbortSignal()],x),C=null,T=S&&S.unsubscribe&&(()=>{S.unsubscribe()});try{if(g&&c&&"get"!==s&&"head"!==s&&0!==(t=await f(b,l))){let e,r=new n(i,{method:"POST",body:l,duplex:"half"});if(rP.isFormData(l)&&(e=r.headers.get("content-type"))&&b.setContentType(e),r.body){let[e,n]=na(t,nn(ni(g)));l=nm(r.body,65536,e,n)}}rP.isString(j)||(j=j?"include":"omit");let r=o&&"credentials"in n.prototype,d={...v,signal:S,method:s.toUpperCase(),headers:b.normalize().toJSON(),body:l,duplex:"half",credentials:r?j:void 0};C=o&&new n(i,d);let h=await (o?w(C,v):w(i,d)),x=u&&("stream"===y||"response"===y);if(u&&(m||x&&T)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});let t=rP.toFiniteNumber(h.headers.get("content-length")),[r,n]=m&&na(t,nn(ni(m),!0))||[];h=new a(nm(h.body,65536,r,()=>{n&&n(),T&&T()}),e)}y=y||"text";let k=await p[rP.findKey(p,y)||"text"](h,e);return!x&&T&&T(),await new Promise((t,r)=>{ne(t,r,{data:k,headers:r6.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:C})})}catch(t){if(T&&T(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new rI("Network Error",rI.ERR_NETWORK,e,C),{cause:t.cause||t});throw rI.from(t,t&&t.code,e,C)}}},nS=new Map,nC=e=>{let t=e&&e.env||{},{fetch:r,Request:n,Response:a}=t,i=[n,a,r],o=i.length,s,l,d=nS;for(;o--;)s=i[o],void 0===(l=d.get(s))&&d.set(s,l=o?new Map:nw(t)),d=l;return l};nC();let nT={http:null,xhr:np,fetch:{get:nC}};rP.forEach(nT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let nk=e=>`- ${e}`,nP=e=>rP.isFunction(e)||null===e||!1===e,nE=function(e,t){let r,n,{length:a}=e=rP.isArray(e)?e:[e],i={};for(let o=0;o<a;o++){let a;if(n=r=e[o],!nP(r)&&void 0===(n=nT[(a=String(r)).toLowerCase()]))throw new rI(`Unknown adapter '${a}'`);if(n&&(rP.isFunction(n)||(n=n.get(t))))break;i[a||"#"+o]=n}if(!n){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new rI("There is no suitable adapter to dispatch the request "+(a?e.length>1?"since :\n"+e.map(nk).join("\n"):" "+nk(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function nI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new r7(null,e)}function nA(e){return nI(e),e.headers=r6.from(e.headers),e.data=r9.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nE(e.adapter||r0.adapter,e)(e).then(function(t){return nI(e),t.data=r9.call(e,e.transformResponse,t),t.headers=r6.from(t.headers),t},function(t){return!r8(t)&&(nI(e),t&&t.response&&(t.response.data=r9.call(e,e.transformResponse,t.response),t.response.headers=r6.from(t.response.headers))),Promise.reject(t)})}let nR="1.13.2",nB={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nB[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let nO={};nB.transitional=function(e,t,r){function n(e,t){return"[Axios v"+nR+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,i)=>{if(!1===e)throw new rI(n(a," has been removed"+(t?" in "+t:"")),rI.ERR_DEPRECATED);return t&&!nO[a]&&(nO[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,i)}},nB.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let nL=function(e,t,r){if("object"!=typeof e)throw new rI("options must be an object",rI.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),a=n.length;for(;a-- >0;){let i=n[a],o=t[i];if(o){let t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new rI("option "+i+" must be "+r,rI.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new rI("Unknown option "+i,rI.ERR_BAD_OPTION)}};class n${constructor(e){this.defaults=e||{},this.interceptors={request:new r_,response:new r_}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:a,paramsSerializer:i,headers:o}=t=nc(this.defaults,t);void 0!==a&&nL(a,{silentJSONParsing:nB.transitional(nB.boolean),forcedJSONParsing:nB.transitional(nB.boolean),clarifyTimeoutError:nB.transitional(nB.boolean)},!1),null!=i&&(rP.isFunction(i)?t.paramsSerializer={serialize:i}:nL(i,{encode:nB.function,serialize:nB.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),nL(t,{baseUrl:nB.spelling("baseURL"),withXsrfToken:nB.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&rP.merge(o.common,o[t.method]);o&&rP.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=r6.concat(s,o);let l=[],d=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(d=d&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u=0;if(!d){let e=[nA.bind(this),void 0];for(e.unshift(...l),e.push(...c),n=e.length,r=Promise.resolve(t);u<n;)r=r.then(e[u++],e[u++]);return r}n=l.length;let p=t;for(;u<n;){let e=l[u++],t=l[u++];try{p=e(p)}catch(e){t.call(this,e);break}}try{r=nA.call(this,p)}catch(e){return Promise.reject(e)}for(u=0,n=c.length;u<n;)r=r.then(c[u++],c[u++]);return r}getUri(e){return rW(nl((e=nc(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}rP.forEach(["delete","get","head","options"],function(e){n$.prototype[e]=function(t,r){return this.request(nc(r||{},{method:e,url:t,data:(r||{}).data}))}}),rP.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(nc(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}n$.prototype[e]=t(),n$.prototype[e+"Form"]=t(!0)});class nD{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new r7(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new nD(function(t){e=t}),cancel:e}}}let nM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nM).forEach(([e,t])=>{nM[t]=e});let nF=function e(t){let r=new n$(t),n=tZ(n$.prototype.request,r);return rP.extend(n,n$.prototype,r,{allOwnKeys:!0}),rP.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(nc(t,r))},n}(r0);nF.Axios=n$,nF.CanceledError=r7,nF.CancelToken=nD,nF.isCancel=r8,nF.VERSION=nR,nF.toFormData=rD,nF.AxiosError=rI,nF.Cancel=nF.CanceledError,nF.all=function(e){return Promise.all(e)},nF.spread=function(e){return function(t){return e.apply(null,t)}},nF.isAxiosError=function(e){return rP.isObject(e)&&!0===e.isAxiosError},nF.mergeConfig=nc,nF.AxiosHeaders=r6,nF.formToJSON=e=>rZ(rP.isHTMLForm(e)?new FormData(e):e),nF.getAdapter=nE,nF.HttpStatusCode=nM,nF.default=nF;var nN=e.i(9929),nz=e.i(15254);function nW({height:e=500}){let t=(0,T.useTheme)(),{user:r}=(0,nz.useAuth)(),{users:n}=(()=>{let[e,t]=(0,g.useState)([]),[r,n]=(0,g.useState)(!0),[a,i]=(0,g.useState)(null);return(0,g.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){i("Not authenticated"),n(!1);return}let r=eF.default.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",a=await nF.get(`${r}/api/users/workspace`,{headers:{Authorization:`Bearer ${e}`}});t(a.data),i(null)}catch(e){console.error("Error fetching workspace users:",e),i(e.response?.data?.message||"Failed to fetch users")}finally{n(!1)}})()},[]),{users:e,loading:r,error:a}})(),{tasks:a,createTask:i,updateTask:o,deleteTask:s,updateTaskNotes:l,isLoading:d,error:c,authRequired:u,refresh:p,isStale:h}=function(e){let[t,r]=(0,g.useState)([]),[n,a]=(0,g.useState)(!1),[i,o]=(0,g.useState)(null),[s,l]=(0,g.useState)(!1),d=(0,g.useRef)(void 0),[c,u]=(0,g.useState)(!1),[p,h]=(0,g.useState)(null),[f,x]=(0,g.useState)(null),m=(0,g.useRef)(null),y=(0,g.useCallback)(async()=>{try{a(!0),o(null),l(!1);let e=(0,K.getTasksBackendUrl)(),t=await (0,K.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===t.status){l(!0),o("Authentication required"),r([]);return}let n=await t.json(),i=new Date;r(n.tasks||[]),h(i),m.current=i,u(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(l(!0),o("Authentication required"),r([])):(o(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{a(!1)}},[]),b=(0,g.useCallback)(()=>y(),[y]),j=async(e,t,i,s,d,c,u)=>{if(n)return void console.warn("Task creation already in progress, ignoring duplicate call");try{a(!0),o(null),l(!1);let n=(0,K.getTasksBackendUrl)();console.log("Creating task at:",`${n}/api/tasks`,{title:e,description:t,hyperlinks:i,status:s,notes:u});let p=await (0,K.fetchWithErrorHandling)(`${n}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:t,hyperlinks:i,status:s,assignedTo:d,assignedToName:c,notes:u||""})});if(401===p.status)throw l(!0),Error("Authentication required");if(!p.ok){let e=await p.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||e.message||`Server error: ${p.status}`)}let f=(await p.json()).task;if(!f)throw Error("Server did not return a task");console.log("Task created, adding to state:",f);let x=new Date;return r(e=>e.some(e=>e.id===f.id)?e.map(e=>e.id===f.id?f:e):[...e,f]),h(x),m.current=x,f}catch(e){throw console.error("Error in createTask:",e),(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{a(!1)}},v=async(e,t)=>{try{a(!0),o(null),l(!1);let n=(0,K.getTasksBackendUrl)(),i=await (0,K.fetchWithErrorHandling)(`${n}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)});if(401===i.status)throw l(!0),Error("Authentication required");let s=(await i.json()).task,d=new Date;return r(e=>e.map(e=>e.id===s.id?s:e)),h(d),m.current=d,s}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{a(!1)}},w=async e=>{try{a(!0),o(null),l(!1);let t=(0,K.getTasksBackendUrl)(),r=await (0,K.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===r.status)throw l(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{a(!1)}};return(0,g.useEffect)(()=>{let e=!0;y();let t=(0,tQ.getTasksSocket)();x(t);let n=()=>{console.log("Socket.io connected for tasks")},a=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},i=e=>{console.log("Socket.io disconnected (tasks):",e)};t.on("connect",n),t.on("connect_error",a),t.on("disconnect",i),t.on("task_created",t=>{if(!e)return;let n=new Date;r(e=>e.some(e=>e.id===t.id)?e.map(e=>e.id===t.id?t:e):[...e,t]),h(n),m.current=n}),t.on("task_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.id?t:e)),h(n),m.current=n}),t.on("task_deleted",t=>{if(!e)return;let n=new Date;r(e=>e.filter(e=>e.id!==t.id)),h(n),m.current=n}),t.on("task_notes_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.task_id?{...e,notes:t.notes}:e)),h(n),m.current=n}),t.on("task_assigned",t=>{if(!e)return;console.log("Task assigned notification:",t);let n=new Date;r(e=>e.map(e=>e.id===t.task.id?t.task:e)),h(n),m.current=n,d.current&&d.current(t.task,t.assignedTo)}),t.on("auth_restored_ack",()=>{e&&(l(!1),y())});let o=setInterval(()=>{if(!e)return;let t=m.current;t&&Date.now()-t.getTime()>3e5&&u(!0)},6e4);return()=>{e=!1,t.off("connect",n),t.off("connect_error",a),t.off("disconnect",i),t.off("task_created"),t.off("task_updated"),t.off("task_deleted"),t.off("task_assigned"),t.off("task_notes_updated"),t.off("auth_restored_ack"),clearInterval(o)}},[y]),(0,g.useEffect)(()=>{d.current=void 0},[void 0]),{tasks:t,isLoading:n,error:i,authRequired:s,isStale:c,lastUpdated:p,refresh:b,fetchTasks:y,createTask:j,updateTask:v,deleteTask:w,updateTaskNotes:(e,t)=>{r(r=>r.map(r=>r.id===e?{...r,notes:t}:r)),f&&f.emit("task_notes_update",{task_id:e,notes:t,user_id:null})}}}(),[x,m]=(0,g.useState)(!1),[y,j]=(0,g.useState)("create"),[w,S]=(0,g.useState)(null),[k,R]=(0,g.useState)(""),[B,O]=(0,g.useState)(""),[L,$]=(0,g.useState)(""),[D,M]=(0,g.useState)(null),[X,et]=(0,g.useState)(!1),[er,en]=(0,g.useState)(""),[ea,ei]=(0,g.useState)("info"),[eo,es]=(0,g.useState)(!1),el=g.default.useRef(null),[ed,ec]=(0,g.useState)(""),[eu,ep]=(0,g.useState)("pending"),[eh,ef]=(0,g.useState)(""),[ex,em]=(0,g.useState)(localStorage.getItem("taskFilter")||"all"),[eg,ey]=(0,g.useState)([]),[eb,ej]=(0,g.useState)(!1),[ev,ew]=(0,g.useState)([]),eS=g.default.useMemo(()=>[...n.map(e=>({id:String(e.id),name:e.name||e.email||"Unknown"})),...ev.map(e=>({id:String(e.id),name:`${e.name} (${e.email})`}))].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id)),[n,ev]);g.default.useEffect(()=>{(async()=>{try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();ew(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}})()},[]),g.default.useEffect(()=>{(async()=>{if(r&&(r.isEmployee||r.isAdmin)){ej(!0);try{let e=(0,K.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();ey(e.requests||[])}else{let e=await t.json().catch(()=>({error:"Failed to fetch support requests"}));console.error("Error fetching support requests:",e)}}catch(e){console.error("Error fetching support requests:",e)}finally{ej(!1)}}})()},[r]);let eC=a.filter(e=>"my-tasks"===ex?e.assignedTo===r?.id:"created-by-me"!==ex||e.createdBy===r?.id),eT=a.length,eP=a.filter(e=>"completed"===e.status).length,eE=a.filter(e=>"in-progress"===e.status).length,eI=a.filter(e=>"pending"===e.status).length,eA=a.filter(e=>e.assignedTo===r?.id).length,eR=a.filter(e=>e.createdBy===r?.id).length,eB=eT>0?Math.round(eP/eT*100):0,eO=async e=>{let t=a.find(t=>t.id===e);if(!t)return;let n="completed"===t.status?"pending":"completed";try{await o(e,{status:n}),"completed"===n&&(0,nN.trackTaskCompleted)(e,r?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},eL=()=>{j("create"),S(null),R(""),O(""),ec(""),ep("pending"),ef(""),M(null),$(""),m(!0)},e$=async()=>{if(k.trim())try{let e=ed.split(",").map(e=>e.trim()).filter(e=>e);if("create"===y){let t=await i(k.trim(),B.trim(),e,eu,D?.id,D?.name,L.trim());eh&&t?.id&&await o(t.id,{supportRequestId:eh})}else w&&(await o(w,{title:k.trim(),description:B.trim(),hyperlinks:e,status:eu,supportRequestId:eh||void 0,assignedTo:D?.id||void 0,assignedToName:D?.name||void 0}),"completed"===eu&&(0,nN.trackTaskCompleted)(w,r?.userRole||"user","cowork"));m(!1)}catch(e){console.error("Error saving task:",e)}},eD=async e=>{try{await s(e)}catch(e){console.error("Error deleting task:",e)}},eM=()=>{et(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(b.Box,{sx:{height:e,display:"flex",flexDirection:"column",gap:3},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsxs)(q.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"Todo List"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Manage your tasks and track progress"})]}),(0,f.jsx)(_.Button,{variant:"contained",startIcon:(0,f.jsx)(tA.default,{}),onClick:eL,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:"Add Task"})]}),(0,f.jsxs)(Y.Grid,{container:!0,spacing:2,sx:{mb:3},children:[(0,f.jsx)(Y.Grid,{item:!0,xs:6,sm:3,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,tU.alpha)(t.palette.primary.main,.1)} 0%, ${(0,tU.alpha)(t.palette.primary.main,.05)} 100%)`,border:`1px solid ${(0,tU.alpha)(t.palette.primary.main,.2)}`},children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,f.jsx)(ek.Avatar,{sx:{bgcolor:"primary.main",width:40,height:40},children:(0,f.jsx)(tY.default,{})}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,children:eT}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Total"})]})]})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,sm:3,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,tU.alpha)(t.palette.success.main,.1)} 0%, ${(0,tU.alpha)(t.palette.success.main,.05)} 100%)`,border:`1px solid ${(0,tU.alpha)(t.palette.success.main,.2)}`},children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,f.jsx)(ek.Avatar,{sx:{bgcolor:"success.main",width:40,height:40},children:(0,f.jsx)(tH.default,{})}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,children:eP}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Completed"})]})]})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,sm:3,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,tU.alpha)(t.palette.warning.main,.1)} 0%, ${(0,tU.alpha)(t.palette.warning.main,.05)} 100%)`,border:`1px solid ${(0,tU.alpha)(t.palette.warning.main,.2)}`},children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,f.jsx)(ek.Avatar,{sx:{bgcolor:"warning.main",width:40,height:40},children:(0,f.jsx)(tV.default,{})}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,children:eE}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"In Progress"})]})]})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,sm:3,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,tU.alpha)(t.palette.info.main,.1)} 0%, ${(0,tU.alpha)(t.palette.info.main,.05)} 100%)`,border:`1px solid ${(0,tU.alpha)(t.palette.info.main,.2)}`},children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,f.jsx)(ek.Avatar,{sx:{bgcolor:"info.main",width:40,height:40},children:(0,f.jsx)(tG.default,{})}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,children:eI}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:"Pending"})]})]})})})]}),(0,f.jsxs)(C.Paper,{elevation:2,sx:{p:2.5,borderRadius:2,mb:3,background:`linear-gradient(135deg, ${(0,tU.alpha)(t.palette.primary.main,.05)} 0%, ${(0,tU.alpha)(t.palette.secondary.main,.05)} 100%)`},children:[(0,f.jsxs)(q.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[(0,f.jsx)(v.Typography,{variant:"body2",fontWeight:600,color:"text.secondary",children:"Completion Rate"}),(0,f.jsxs)(v.Typography,{variant:"body2",fontWeight:700,color:"primary.main",children:[eB,"%"]})]}),(0,f.jsx)(tq.LinearProgress,{variant:"determinate",value:eB,sx:{height:8,borderRadius:4,bgcolor:(0,tU.alpha)(t.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(90deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`}}})]})]}),c&&(0,f.jsx)(A.Alert,{severity:"error",sx:{mb:2},children:c}),h&&(0,f.jsx)(A.Alert,{severity:"info",sx:{mb:2},action:(0,f.jsx)(_.Button,{size:"small",onClick:p,children:"Refresh"}),children:"Tasks may be out of date"}),(0,f.jsx)(C.Paper,{elevation:2,sx:{borderRadius:2,p:1},children:(0,f.jsxs)(tN.ToggleButtonGroup,{value:ex,exclusive:!0,onChange:(e,t)=>{null!==t&&(em(t),localStorage.setItem("taskFilter",t))},fullWidth:!0,size:"small","aria-label":"task filter",sx:{"& .MuiToggleButton-root":{textTransform:"none",fontWeight:600,borderRadius:1.5,py:1}},children:[(0,f.jsxs)(tz.ToggleButton,{value:"all","aria-label":"all tasks",children:["All (",eT,")"]}),(0,f.jsxs)(tz.ToggleButton,{value:"my-tasks","aria-label":"my tasks",children:["My Tasks (",eA,")"]}),(0,f.jsxs)(tz.ToggleButton,{value:"created-by-me","aria-label":"created by me",children:["Created by Me (",eR,")"]})]})}),(0,f.jsx)(b.Box,{sx:{flexGrow:1,overflow:"auto"},children:d?(0,f.jsx)(b.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,f.jsx)(I.CircularProgress,{})}):0===eC.length?(0,f.jsxs)(C.Paper,{elevation:0,sx:{p:6,textAlign:"center",borderRadius:2,border:`2px dashed ${(0,tU.alpha)(t.palette.divider,.5)}`},children:[(0,f.jsx)(tY.default,{sx:{fontSize:64,color:"text.secondary",mb:2,opacity:.5}}),(0,f.jsx)(v.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No tasks found"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"all"===ex?"Get started by adding your first task!":`No tasks match the "${ex}" filter.`}),(0,f.jsx)(_.Button,{variant:"outlined",startIcon:(0,f.jsx)(tA.default,{}),onClick:eL,sx:{textTransform:"none"},children:"Add Task"})]}):(0,f.jsx)(q.Stack,{spacing:2,children:eC.map(e=>(0,f.jsx)(P.Card,{elevation:2,sx:{borderRadius:2,transition:"all 0.2s",border:`1px solid ${(0,tU.alpha)(t.palette.divider,.5)}`,"&:hover":{boxShadow:4,transform:"translateY(-2px)"}},children:(0,f.jsx)(E.CardContent,{sx:{p:2.5,"&:last-child":{pb:2.5}},children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,f.jsx)(tW.Checkbox,{checked:"completed"===e.status,onChange:()=>eO(e.id),disabled:d,sx:{mt:.5}}),(0,f.jsxs)(b.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,f.jsx)(v.Typography,{variant:"subtitle1",fontWeight:600,sx:{textDecoration:"completed"===e.status?"line-through":"none",color:"completed"===e.status?"text.secondary":"text.primary",mb:.5},children:e.title}),e.description&&(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1.5,textDecoration:"completed"===e.status?"line-through":"none"},children:e.description}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,flexWrap:"wrap",sx:{mb:1},children:[(0,f.jsx)(ee.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status),icon:(e=>{switch(e){case"completed":return(0,f.jsx)(tH.default,{color:"success"});case"in-progress":return(0,f.jsx)(tV.default,{color:"warning"});default:return(0,f.jsx)(tG.default,{color:"disabled"})}})(e.status),sx:{fontWeight:600}}),e.hyperlinks&&e.hyperlinks.length>0&&(0,f.jsx)(ee.Chip,{icon:(0,f.jsx)(tJ.default,{}),label:`${e.hyperlinks.length} link${e.hyperlinks.length>1?"s":""}`,size:"small",variant:"outlined"})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.createdByName&&(0,f.jsx)(ee.Chip,{icon:(0,f.jsx)(tX.default,{}),label:e.createdByName,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}}),e.assignedToName?(0,f.jsx)(ee.Chip,{icon:(0,f.jsx)(tK.default,{}),label:e.assignedToName,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem"}}):void 0===e.assignedTo&&(0,f.jsx)(ee.Chip,{label:"Unassigned",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",opacity:.6}}),e.createdAt&&(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:.5,children:[(0,f.jsx)(Z.Tooltip,{title:"Edit",children:(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>{j("edit"),S(e.id),R(e.title),O(e.description||""),ec(e.hyperlinks.join(", ")),ep(e.status),ef(e.supportRequestId||""),$(e.notes||""),e.assignedTo&&e.assignedToName?M({id:e.assignedTo,name:e.assignedToName}):M(null),m(!0)},sx:{color:"primary.main"},children:(0,f.jsx)(tR.default,{fontSize:"small"})})}),(0,f.jsx)(Z.Tooltip,{title:"Delete",children:(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>eD(e.id),sx:{color:"error.main"},children:(0,f.jsx)(t$.default,{fontSize:"small"})})})]})]})})},e.id))})})]}),(0,f.jsxs)(F.Dialog,{open:x,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[(0,f.jsx)(N.DialogTitle,{sx:{pb:1},children:(0,f.jsx)(v.Typography,{variant:"h6",fontWeight:700,children:"create"===y?"Add New Task":"Edit Task"})}),(0,f.jsx)(z.DialogContent,{children:(0,f.jsxs)(q.Stack,{spacing:2,sx:{mt:1},children:[(0,f.jsx)(U.TextField,{autoFocus:!0,label:"Title",fullWidth:!0,variant:"outlined",value:k,onChange:e=>R(e.target.value),required:!0}),(0,f.jsx)(U.TextField,{label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:B,onChange:e=>O(e.target.value)}),(0,f.jsx)(tI,{options:eS,getOptionLabel:e=>e.name,value:D,onChange:(e,t)=>M(t),renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Assign To (Optional)",variant:"outlined",helperText:"Select from active workspace users or all employees"})}),(0,f.jsx)(U.TextField,{label:"Notes (Shared Workspace)",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,value:L,onChange:e=>{var t;$(t=e.target.value),es(!0),el.current&&clearTimeout(el.current),el.current=setTimeout(()=>{w&&(l(w,t),es(!1))},500)},placeholder:"Start typing to collaborate with your team...",helperText:"edit"===y?"Changes auto-save. Shared with assigned user in real-time.":"Add notes that will be shared with your team."}),(0,f.jsx)(U.TextField,{label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:ed,onChange:e=>ec(e.target.value),placeholder:"https://example.com, https://another.com"}),eb?(0,f.jsx)(I.CircularProgress,{size:24}):eg.length>0&&(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Link to Support Request (Optional)"}),(0,f.jsxs)(V.Select,{value:eh,label:"Link to Support Request (Optional)",onChange:e=>ef(e.target.value),children:[(0,f.jsx)(J.MenuItem,{value:"",children:"None"}),eg.map(e=>(0,f.jsxs)(J.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,f.jsxs)(H.FormControl,{fullWidth:!0,children:[(0,f.jsx)(G.InputLabel,{children:"Status"}),(0,f.jsxs)(V.Select,{value:eu,label:"Status",onChange:e=>ep(e.target.value),children:[(0,f.jsx)(J.MenuItem,{value:"pending",children:"Pending"}),(0,f.jsx)(J.MenuItem,{value:"in-progress",children:"In Progress"}),(0,f.jsx)(J.MenuItem,{value:"completed",children:"Completed"})]})]})]})}),(0,f.jsxs)(W.DialogActions,{sx:{p:2.5,pt:1},children:[(0,f.jsx)(_.Button,{onClick:()=>m(!1),sx:{textTransform:"none"},children:"Cancel"}),(0,f.jsx)(_.Button,{onClick:e$,variant:"contained",disabled:!k.trim()||d||u,sx:{textTransform:"none",fontWeight:600},children:"create"===y?"Add Task":"Save Changes"})]})]}),(0,f.jsx)(t_.Snackbar,{open:X,autoHideDuration:6e3,onClose:eM,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,f.jsx)(A.Alert,{onClose:eM,severity:ea,sx:{width:"100%"},children:er})})]})}function n_(e){return(0,e6.default)("MuiStepper",e)}(0,e3.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);let nU=g.createContext({}),nq=g.createContext({});function nH(e){return(0,e6.default)("MuiStepConnector",e)}(0,e3.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let nG=["className"],nV=(0,e2.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ez.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),nJ=(0,e2.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.line,t[`line${(0,e4.default)(r.orientation)}`]]}})(({ownerState:e,theme:t})=>{let r="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,ez.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:r},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),nK=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:n}=r,a=(0,eN.default)(r,nG),{alternativeLabel:i,orientation:o="horizontal"}=g.useContext(nU),{active:s,disabled:l,completed:d}=g.useContext(nq),c=(0,ez.default)({},r,{alternativeLabel:i,orientation:o,active:s,completed:d,disabled:l}),u=(e=>{let{classes:t,orientation:r,alternativeLabel:n,active:a,completed:i,disabled:o}=e,s={root:["root",r,n&&"alternativeLabel",a&&"active",i&&"completed",o&&"disabled"],line:["line",`line${(0,e4.default)(r)}`]};return(0,e_.default)(s,nH,t)})(c);return(0,f.jsx)(nV,(0,ez.default)({className:(0,eW.default)(u.root,n),ref:t,ownerState:c},a,{children:(0,f.jsx)(nJ,{className:u.line,ownerState:c})}))}),nX=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],nY=(0,e2.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,ez.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),nQ=(0,f.jsx)(nK,{}),nZ=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:n=0,alternativeLabel:a=!1,children:i,className:o,component:s="div",connector:l=nQ,nonLinear:d=!1,orientation:c="horizontal"}=r,u=(0,eN.default)(r,nX),p=(0,ez.default)({},r,{nonLinear:d,alternativeLabel:a,orientation:c,component:s}),h=(e=>{let{orientation:t,nonLinear:r,alternativeLabel:n,classes:a}=e;return(0,e_.default)({root:["root",t,r&&"nonLinear",n&&"alternativeLabel"]},n_,a)})(p),x=g.Children.toArray(i).filter(Boolean),m=x.map((e,t)=>g.cloneElement(e,(0,ez.default)({index:t,last:t+1===x.length},e.props))),y=g.useMemo(()=>({activeStep:n,alternativeLabel:a,connector:l,nonLinear:d,orientation:c}),[n,a,l,d,c]);return(0,f.jsx)(nU.Provider,{value:y,children:(0,f.jsx)(nY,(0,ez.default)({as:s,ownerState:p,className:(0,eW.default)(h.root,o),ref:t},u,{children:m}))})});function n0(e){return(0,e6.default)("MuiStep",e)}(0,e3.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let n1=["active","children","className","component","completed","disabled","expanded","index","last"],n2=(0,e2.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ez.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),n5=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiStep"}),{active:n,children:a,className:i,component:o="div",completed:s,disabled:l,expanded:d=!1,index:c,last:u}=r,p=(0,eN.default)(r,n1),{activeStep:h,connector:x,alternativeLabel:m,orientation:y,nonLinear:b}=g.useContext(nU),[j=!1,v=!1,w=!1]=[n,s,l];h===c?j=void 0===n||n:!b&&h>c?v=void 0===s||s:!b&&h<c&&(w=void 0===l||l);let S=g.useMemo(()=>({index:c,last:u,expanded:d,icon:c+1,active:j,completed:v,disabled:w}),[c,u,d,j,v,w]),C=(0,ez.default)({},r,{active:j,orientation:y,alternativeLabel:m,completed:v,disabled:w,expanded:d,component:o}),T=(e=>{let{classes:t,orientation:r,alternativeLabel:n,completed:a}=e;return(0,e_.default)({root:["root",r,n&&"alternativeLabel",a&&"completed"]},n0,t)})(C),k=(0,f.jsxs)(n2,(0,ez.default)({as:o,className:(0,eW.default)(T.root,i),ref:t,ownerState:C},p,{children:[x&&m&&0!==c?x:null,a]}));return(0,f.jsx)(nq.Provider,{value:S,children:x&&!m&&0!==c?(0,f.jsxs)(g.Fragment,{children:[x,k]}):k})});var n4=e.i(62731);let n3=(0,n4.default)((0,f.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),n6=(0,n4.default)((0,f.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var n9=e.i(48040);function n8(e){return(0,e6.default)("MuiStepIcon",e)}let n7=(0,e3.default)("MuiStepIcon",["root","active","completed","error","text"]),ae=["active","className","completed","error","icon"],at=(0,e2.default)(n9.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${n7.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${n7.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${n7.error}`]:{color:(e.vars||e).palette.error.main}})),ar=(0,e2.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),an=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:n=!1,className:a,completed:i=!1,error:o=!1,icon:s}=r,l=(0,eN.default)(r,ae),d=(0,ez.default)({},r,{active:n,completed:i,error:o}),c=(e=>{let{classes:t,active:r,completed:n,error:a}=e;return(0,e_.default)({root:["root",r&&"active",n&&"completed",a&&"error"],text:["text"]},n8,t)})(d);if("number"==typeof s||"string"==typeof s){let e=(0,eW.default)(a,c.root);return o?(0,f.jsx)(at,(0,ez.default)({as:n6,className:e,ref:t,ownerState:d},l)):i?(0,f.jsx)(at,(0,ez.default)({as:n3,className:e,ref:t,ownerState:d},l)):(0,f.jsxs)(at,(0,ez.default)({className:e,ref:t,ownerState:d},l,{children:[u||(u=(0,f.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,f.jsx)(ar,{className:c.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:s})]}))}return s});function aa(e){return(0,e6.default)("MuiStepLabel",e)}let ai=(0,e3.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),ao=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],as=(0,e2.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation]]}})(({ownerState:e})=>(0,ez.default)({display:"flex",alignItems:"center",[`&.${ai.alternativeLabel}`]:{flexDirection:"column"},[`&.${ai.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),al=(0,e2.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,ez.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${ai.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ai.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ai.alternativeLabel}`]:{marginTop:16},[`&.${ai.error}`]:{color:(e.vars||e).palette.error.main}})),ad=(0,e2.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${ai.alternativeLabel}`]:{paddingRight:0}})),ac=(0,e2.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${ai.alternativeLabel}`]:{textAlign:"center"}})),au=g.forwardRef(function(e,t){var r;let n=(0,e5.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:a,className:i,componentsProps:o={},error:s=!1,icon:l,optional:d,slotProps:c={},StepIconComponent:u,StepIconProps:p}=n,h=(0,eN.default)(n,ao),{alternativeLabel:x,orientation:m}=g.useContext(nU),{active:y,disabled:b,completed:j,icon:v}=g.useContext(nq),w=l||v,S=u;w&&!S&&(S=an);let C=(0,ez.default)({},n,{active:y,alternativeLabel:x,completed:j,disabled:b,error:s,orientation:m}),T=(e=>{let{classes:t,orientation:r,active:n,completed:a,error:i,disabled:o,alternativeLabel:s}=e;return(0,e_.default)({root:["root",r,i&&"error",o&&"disabled",s&&"alternativeLabel"],label:["label",n&&"active",a&&"completed",i&&"error",o&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",a&&"completed",i&&"error",o&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},aa,t)})(C),k=null!=(r=c.label)?r:o.label;return(0,f.jsxs)(as,(0,ez.default)({className:(0,eW.default)(T.root,i),ref:t,ownerState:C},h,{children:[w||S?(0,f.jsx)(ad,{className:T.iconContainer,ownerState:C,children:(0,f.jsx)(S,(0,ez.default)({completed:j,active:y,error:s,icon:w},p))}):null,(0,f.jsxs)(ac,{className:T.labelContainer,ownerState:C,children:[a?(0,f.jsx)(al,(0,ez.default)({ownerState:C},k,{className:(0,eW.default)(T.label,null==k?void 0:k.className),children:a})):null,d]})]}))});au.muiName="StepLabel";var ap=e.i(35153);function ah(e){return(0,e6.default)("MuiStepContent",e)}(0,e3.default)("MuiStepContent",["root","last","transition"]);let af=["children","className","TransitionComponent","transitionDuration","TransitionProps"],ax=(0,e2.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.last&&t.last]}})(({ownerState:e,theme:t})=>(0,ez.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),am=(0,e2.default)(ap.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),ag=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:n,className:a,TransitionComponent:i=ap.default,transitionDuration:o="auto",TransitionProps:s}=r,l=(0,eN.default)(r,af),{orientation:d}=g.useContext(nU),{active:c,last:u,expanded:p}=g.useContext(nq),h=(0,ez.default)({},r,{last:u}),x=(e=>{let{classes:t,last:r}=e;return(0,e_.default)({root:["root",r&&"last"],transition:["transition"]},ah,t)})(h),m=o;return"auto"!==o||i.muiSupportAuto||(m=void 0),(0,f.jsx)(ax,(0,ez.default)({className:(0,eW.default)(x.root,a),ref:t,ownerState:h},l,{children:(0,f.jsx)(am,(0,ez.default)({as:i,in:c||p,className:x.transition,ownerState:h,timeout:m,unmountOnExit:!0},s,{children:n}))}))});var ay=e.i(92487),ab=e.i(94660),aj=e.i(43884),av=e.i(29360),aw=e.i(56553),aS=e.i(52377),aC=e.i(53251),aT=e.i(11425);function ak(){let[e,t]=(0,g.useState)(0),[r,n]=(0,g.useState)([]),[a,i]=(0,g.useState)(""),[o,s]=(0,g.useState)(""),[l,d]=(0,g.useState)(""),[c,u]=(0,g.useState)(""),[p,h]=(0,g.useState)(!1),[x,m]=(0,g.useState)(null),[y,j]=(0,g.useState)(!1),[w,S]=(0,g.useState)(!1),T=["Guide","Quiz","SEO Audit","Generate Script"],k={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with valuelike a free SEO audit or actionable insightsyou immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:` Personalization is non-negotiable
 Focus on their problems, not your solutions
 Use data and insights, not flattery
 Make it easy for them to say yes
 Follow up with more value, not pressure`}]},I=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],R=()=>{1!==e||I.every(e=>r.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||a.trim()?t(e=>Math.min(e+1,T.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},B=()=>{t(e=>Math.max(e-1,0))},O=async()=>{h(!0),u(""),m(null);try{let e=(0,K.getBackendUrl)(),t=r.map(e=>{let t=I.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),n=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${o||"Not provided"}
- Website: ${a}
- Industry: ${l||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,i=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:n}]})});if(!i.ok)throw Error("Failed to generate script");let s=await i.json();u(s.text);try{let e=s.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let r=JSON.parse(e);m({script:r.script||s.text,seoAudit:r.seoAudit||"SEO audit details will be generated.",valueProposition:r.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(r.nextSteps)?r.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){m({script:s.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}j(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{h(!1)}};return(0,f.jsx)(b.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,f.jsxs)(q.Stack,{spacing:3,children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(ee.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,f.jsx)(av.default,{}),sx:{fontWeight:700,mb:2}}),(0,f.jsx)(v.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,f.jsx)(v.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,f.jsx)(A.Alert,{severity:"info",sx:{mb:2},children:(0,f.jsxs)(v.Typography,{variant:"body2",children:[(0,f.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,f.jsx)(_.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,f.jsx)(aC.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,f.jsx)(C.Paper,{sx:{p:3},children:(0,f.jsxs)(nZ,{activeStep:e,orientation:"vertical",children:[(0,f.jsxs)(n5,{children:[(0,f.jsx)(au,{children:(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,f.jsxs)(ag,{children:[(0,f.jsxs)(b.Box,{sx:{mb:3},children:[(0,f.jsx)(v.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:k.title}),(0,f.jsx)(q.Stack,{spacing:3,children:k.sections.map((e,t)=>(0,f.jsxs)(ay.Accordion,{defaultExpanded:0===t,children:[(0,f.jsx)(ab.AccordionSummary,{expandIcon:(0,f.jsx)(aT.default,{}),children:(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,f.jsx)(aj.AccordionDetails,{children:(0,f.jsx)(v.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,f.jsx)(_.Button,{variant:"contained",onClick:R,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,f.jsxs)(n5,{children:[(0,f.jsx)(au,{children:(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,f.jsxs)(ag,{children:[(0,f.jsxs)(q.Stack,{spacing:3,sx:{mb:3},children:[(0,f.jsx)(A.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),I.map(e=>{let t=r.find(t=>t.questionId===e.id);return(0,f.jsx)(P.Card,{variant:"outlined",children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,f.jsx)(U.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var r,a;return r=e.id,a=t.target.value,void n(e=>e.find(e=>e.questionId===r)?e.map(e=>e.questionId===r?{...e,answer:a}:e):[...e,{questionId:r,answer:a}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,children:[(0,f.jsx)(_.Button,{onClick:B,children:"Back"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:R,children:"Continue to SEO Audit"})]})]})]}),(0,f.jsxs)(n5,{children:[(0,f.jsx)(au,{children:(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,f.jsxs)(ag,{children:[(0,f.jsxs)(q.Stack,{spacing:3,sx:{mb:3},children:[(0,f.jsx)(A.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Client Name",value:o,onChange:e=>s(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Client Website URL",value:a,onChange:e=>i(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Industry",value:l,onChange:e=>d(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,children:[(0,f.jsx)(_.Button,{onClick:B,children:"Back"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:R,children:"Generate Script"})]})]})]}),(0,f.jsxs)(n5,{children:[(0,f.jsx)(au,{children:(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,f.jsxs)(ag,{children:[(0,f.jsxs)(q.Stack,{spacing:3,sx:{mb:3},children:[(0,f.jsx)(A.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,f.jsx)(P.Card,{variant:"outlined",children:(0,f.jsxs)(E.CardContent,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,f.jsxs)(q.Stack,{spacing:1,children:[(0,f.jsxs)(v.Typography,{children:[(0,f.jsx)("strong",{children:"Client:"})," ",o||"Not provided"]}),(0,f.jsxs)(v.Typography,{children:[(0,f.jsx)("strong",{children:"Website:"})," ",a||"Not provided"]}),(0,f.jsxs)(v.Typography,{children:[(0,f.jsx)("strong",{children:"Industry:"})," ",l||"Not provided"]}),(0,f.jsxs)(v.Typography,{children:[(0,f.jsx)("strong",{children:"Quiz Answers:"})," ",r.length," / ",I.length]})]})]})})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,children:[(0,f.jsx)(_.Button,{onClick:B,children:"Back"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:O,disabled:p,startIcon:(0,f.jsx)(aw.default,{}),size:"large",children:p?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,f.jsxs)(F.Dialog,{open:y,onClose:()=>j(!1),maxWidth:"md",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:(0,f.jsxs)(q.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(v.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,children:[(0,f.jsx)(Q.IconButton,{onClick:()=>{x&&(navigator.clipboard.writeText(x.script),S(!0),setTimeout(()=>S(!1),2e3))},title:"Copy Script",children:(0,f.jsx)(aS.default,{})}),(0,f.jsx)(Q.IconButton,{onClick:()=>{if(x){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${o||"N/A"}
Website: ${a}

SCRIPT:
${x.script}

SEO AUDIT SUMMARY:
${x.seoAudit}

VALUE PROPOSITION:
${x.valueProposition}

NEXT STEPS:
${x.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`seo-prospecting-script-${o||"client"}-${Date.now()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,f.jsx)(el.default,{})})]})]})}),(0,f.jsx)(z.DialogContent,{dividers:!0,children:x&&(0,f.jsxs)(q.Stack,{spacing:3,children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,f.jsx)(C.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,f.jsx)(v.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:x.script})})]}),(0,f.jsx)(er.Divider,{}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,f.jsx)(C.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,f.jsx)(v.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:x.seoAudit})})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,f.jsx)(C.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,f.jsx)(v.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:x.valueProposition})})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,f.jsx)(q.Stack,{spacing:1,children:x.nextSteps.map((e,t)=>(0,f.jsx)(ee.Chip,{label:`${t+1}. ${e}`,icon:(0,f.jsx)(tH.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>j(!1),children:"Close"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:()=>{j(!1),t(0),m(null),n([]),i(""),s(""),d("")},children:"Create Another Script"})]})]}),w&&(0,f.jsx)(A.Alert,{severity:"success",onClose:()=>S(!1),children:"Script copied to clipboard!"})]})})}function aP(){let{settings:e,updateApiKeys:t}=(0,tF.useSettings)(),[r,n]=(0,g.useState)([]),[a,i]=(0,g.useState)(null),[o,s]=(0,g.useState)(!1),[l,d]=(0,g.useState)(""),[c,u]=(0,g.useState)(""),[p,h]=(0,g.useState)(null),[x,m]=(0,g.useState)(null),[y,j]=(0,g.useState)("");(0,g.useEffect)(()=>{j(e.apiKeys?.revidApiKey||"")},[e.apiKeys]),(0,g.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{n(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]);let w=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),n(e)},S=()=>{i(null),d(""),u(""),s(!0),h(null)},T=async e=>{if(!y)return void h("Revid.ai API key is required. Please add your API key above.");h(null),m("Generating video... This may take a few minutes.");try{let t=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({script:e.content,title:e.title})});if(!t.ok)throw Error("Failed to generate video");await t.json();let n=r.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);w(n),m("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>m(null),5e3)}catch(e){h(e.message||"Failed to generate video. Please check your API key and try again."),m(null)}};return(0,f.jsx)(b.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,f.jsxs)(Y.Grid,{container:!0,spacing:3,children:[(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:3,minHeight:600},children:(0,f.jsx)(nW,{height:600})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsxs)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,f.jsx)(tL.default,{sx:{fontSize:32,color:"primary.main"}}),(0,f.jsx)(v.Typography,{variant:"h5",sx:{fontWeight:700},children:"Ai Content Agent"})]}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily."}),(0,f.jsx)(b.Box,{sx:{mb:3},children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Revid.ai API Key",type:"password",value:y,onChange:e=>{let r=e.target.value;j(r),t({revidApiKey:r})},placeholder:"Enter your Revid.ai API key",helperText:"Required for AI Agent panel to generate and auto-post videos",size:"small"})}),x&&(0,f.jsx)(A.Alert,{severity:"success",sx:{mb:2},onClose:()=>m(null),children:x}),p&&(0,f.jsx)(A.Alert,{severity:"error",sx:{mb:2},onClose:()=>h(null),children:p}),(0,f.jsx)(b.Box,{sx:{flexGrow:1,overflow:"auto"},children:o?(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{mb:2},children:a?"Edit Content":"Add New Content"}),(0,f.jsxs)(q.Stack,{spacing:2,children:[(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Title",value:l,onChange:e=>d(e.target.value),placeholder:"Enter content title",required:!0,size:"small"}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Content",value:c,onChange:e=>u(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:6,required:!0,size:"small"}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:2,children:[(0,f.jsx)(_.Button,{variant:"contained",onClick:()=>{if(!l.trim()||!c.trim())return void h("Title and content are required");if(!y)return void h("Revid.ai API key is required. Please add your API key above.");let e=a?{...a,title:l,content:c}:{id:Date.now().toString(),title:l,content:c,createdAt:new Date().toISOString(),status:"active"};w(a?r.map(t=>t.id===a.id?e:t):[...r,e]),s(!1),d(""),u(""),i(null),m(a?"Content updated successfully":"Content added successfully"),setTimeout(()=>m(null),3e3)},size:"small",children:a?"Update":"Save"}),(0,f.jsx)(_.Button,{variant:"outlined",onClick:()=>{s(!1),d(""),u(""),i(null),h(null)},size:"small",children:"Cancel"})]})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(b.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)(v.Typography,{variant:"h6",children:"Content Library"}),(0,f.jsx)(_.Button,{variant:"contained",startIcon:(0,f.jsx)(tA.default,{}),onClick:S,disabled:!y,size:"small",children:"Add Content"})]}),0===r.length?(0,f.jsxs)(b.Box,{sx:{textAlign:"center",py:4},children:[(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,f.jsx)(_.Button,{variant:"outlined",startIcon:(0,f.jsx)(tA.default,{}),onClick:S,disabled:!y,size:"small",children:"Add Your First Content"})]}):(0,f.jsx)(q.Stack,{spacing:2,children:r.filter(e=>"active"===e.status).map(e=>(0,f.jsx)(P.Card,{elevation:1,children:(0,f.jsx)(E.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,f.jsxs)(q.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",children:[(0,f.jsxs)(b.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,f.jsx)(v.Typography,{variant:"subtitle1",fontWeight:500,sx:{mb:.5},children:e.title}),(0,f.jsxs)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,f.jsx)(ee.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,f.jsx)(ee.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,f.jsxs)(q.Stack,{direction:"row",spacing:.5,children:[(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>T(e),title:"Generate Video",disabled:!y,children:(0,f.jsx)(tD.default,{fontSize:"small"})}),(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>{m("Scheduling feature coming soon!"),setTimeout(()=>m(null),3e3)},title:"Schedule",disabled:!y,children:(0,f.jsx)(tM.default,{fontSize:"small"})}),(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>{i(e),d(e.title),u(e.content),s(!0),h(null)},title:"Edit",children:(0,f.jsx)(tR.default,{fontSize:"small"})}),(0,f.jsx)(Q.IconButton,{size:"small",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this content?")&&(w(r.filter(e=>e.id!==t)),m("Content deleted successfully"),setTimeout(()=>m(null),3e3)))},title:"Delete",color:"error",children:(0,f.jsx)(t$.default,{fontSize:"small"})})]})]})})},e.id))})]})})]})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsxs)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,mb:2},children:"How to Format Video Scripts"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Format this into a video script that follows these tips:"}),(0,f.jsxs)(q.Stack,{spacing:2,children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"1. Use short and punctuated sentences"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Correct punctuation helps the generated voice to be much better."})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"2. Use brackets for media guidance"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"When generating voice, [text between brackets] will be ignored but can be used to guide the AI with the media generation."})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"3. Add pauses with break tags"}),(0,f.jsxs)(v.Typography,{variant:"body2",color:"text.secondary",component:"div",children:["Use ",(0,f.jsx)("code",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px",borderRadius:"3px"},children:'<break time="1.0s" />'})," to mark a pause in the generated voice."]})]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"4. Use line breaks for slide separation"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Use breaking lines to force slide separation and media change."})]}),(0,f.jsx)(er.Divider,{sx:{my:2}}),(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2},children:"Script Example:"}),(0,f.jsx)(C.Paper,{elevation:0,sx:{p:2,bgcolor:"#f9f9f9",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:300},children:`[close-up of a cat]
Did you know how to make viral videos?

[cat playing with a ball]
First, you need to grab the viewer's attention.

<break time="1.0s" />

[cat chasing a laser pointer]
Then, you need to keep them engaged.

[cat sleeping]
Finally, you need to make them share it.`})]})]})]})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:(0,f.jsx)(ak,{})})})]})})}var aE=e.i(84579),aI=e.i(4591),aA=e.i(6909),aR=e.i(64321),aB=e.i(76497);let aO=["CRM","Analytics","Email Marketing","Project Management","Support Desk","Billing"];function aL({open:e,user:t,onClose:r,onSuccess:n,onError:a,availableClients:i}){let[o,s]=(0,g.useState)(0),[l,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[p,h]=(0,g.useState)({firstName:"",lastName:"",username:"",email:"",phone:"",zipcode:"",address:"",joiningDate:"",status:"active",isEmployee:!1,isAdmin:!1,isClient:!1,systemsConnected:[]}),[x,m]=(0,g.useState)([]),[y,j]=(0,g.useState)([]),[T,k]=(0,g.useState)([]),P=(0,K.getBackendUrl)();(0,g.useEffect)(()=>{t&&e&&(h({firstName:t.first_name||"",lastName:t.last_name||"",username:t.username||"",email:t.email||"",phone:t.phone||"",zipcode:t.zipcode||"",address:t.address||"",joiningDate:t.joining_date||new Date().toISOString().split("T")[0],status:t.status||"active",isEmployee:t.is_employee||!1,isAdmin:t.is_admin||!1,isClient:t.is_client||!1,systemsConnected:[]}),s(0),E(t.id))},[t,e]);let E=async e=>{u(!0);try{let[t,r,n]=await Promise.all([fetch(`${P}/api/admin/users/${e}/clients`,{credentials:"include"}),fetch(`${P}/api/admin/users/${e}/tasks`,{credentials:"include"}),fetch(`${P}/api/admin/users/${e}/support-requests`,{credentials:"include"})]);if(t.ok){let e=await t.json();m(e.clients||[])}if(r.ok){let e=await r.json();j(e.tasks||[])}if(n.ok){let e=await n.json();k(e.requests||[])}}catch(e){console.error("Error fetching user data:",e)}finally{u(!1)}},R=async()=>{if(t){d(!0);try{let e=await fetch(`${P}/api/admin/users/${t.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:p.firstName,last_name:p.lastName,username:p.username,email:p.email,phone:p.phone,zipcode:p.zipcode,address:p.address,joining_date:p.joiningDate,status:p.status,is_admin:p.isAdmin,is_employee:p.isEmployee,is_client:p.isClient})});if(e.ok)n("User updated successfully"),r();else{let t=await e.json();a(t.error||"Failed to update user")}}catch(e){a("Failed to update user")}finally{d(!1)}}},B=async e=>{if(t)try{let r=await fetch(`${P}/api/admin/users/${t.id}/unassign-client/${e}`,{method:"DELETE",credentials:"include"});if(r.ok)n("Client unassigned successfully"),E(t.id);else{let e=await r.json();a(e.error||"Failed to unassign client")}}catch(e){a("Failed to unassign client")}};return t?(0,f.jsxs)(F.Dialog,{open:e,onClose:r,maxWidth:"md",fullWidth:!0,children:[(0,f.jsxs)(N.DialogTitle,{children:[(0,f.jsx)(v.Typography,{variant:"h6",fontWeight:600,children:"Edit User"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Manage user settings, permissions, and assignments"})]}),(0,f.jsxs)(z.DialogContent,{dividers:!0,children:[(0,f.jsx)(b.Box,{display:"flex",justifyContent:"center",mb:3,children:(0,f.jsxs)(b.Box,{position:"relative",children:[(0,f.jsx)(ek.Avatar,{src:t.profile_image,sx:{width:80,height:80},children:p.firstName?.[0]||t.username?.[0]}),(0,f.jsx)(Q.IconButton,{size:"small",sx:{position:"absolute",bottom:0,right:0,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:(0,f.jsx)(aB.default,{fontSize:"small"})})]})}),(0,f.jsxs)(w.Tabs,{value:o,onChange:(e,t)=>s(t),sx:{borderBottom:1,borderColor:"divider",mb:3},children:[(0,f.jsx)(S.Tab,{label:"Personal Details"}),(0,f.jsx)(S.Tab,{label:`Assigned Clients (${x.length})`}),(0,f.jsx)(S.Tab,{label:`Tasks (${y.length})`}),(0,f.jsx)(S.Tab,{label:`Support (${T.length})`})]}),0===o&&(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,mb:2,children:"Personal Information"}),(0,f.jsxs)(Y.Grid,{container:!0,spacing:2,children:[(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"First Name",required:!0,value:p.firstName,onChange:e=>h({...p,firstName:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Last Name",required:!0,value:p.lastName,onChange:e=>h({...p,lastName:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Username",required:!0,value:p.username,onChange:e=>h({...p,username:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Email",required:!0,type:"email",value:p.email,onChange:e=>h({...p,email:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Phone",value:p.phone,onChange:e=>h({...p,phone:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:6,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Joining Date",type:"date",InputLabelProps:{shrink:!0},value:p.joiningDate,onChange:e=>h({...p,joiningDate:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Zip/Code",value:p.zipcode,onChange:e=>h({...p,zipcode:e.target.value})})}),(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Address",multiline:!0,rows:2,value:p.address,onChange:e=>h({...p,address:e.target.value})})})]}),(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Permissions"}),(0,f.jsxs)(q.Stack,{spacing:2,children:[(0,f.jsx)(aE.FormControlLabel,{control:(0,f.jsx)(aI.Switch,{checked:p.isAdmin,onChange:e=>h({...p,isAdmin:e.target.checked})}),label:"Admin Access - Full system control and user management"}),(0,f.jsx)(aE.FormControlLabel,{control:(0,f.jsx)(aI.Switch,{checked:p.isEmployee,onChange:e=>h({...p,isEmployee:e.target.checked})}),label:"Employee Status - Can be assigned clients and tasks"}),(0,f.jsx)(aE.FormControlLabel,{control:(0,f.jsx)(aI.Switch,{checked:p.isClient,onChange:e=>h({...p,isClient:e.target.checked})}),label:"Client Status - External client with limited access"})]}),(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Account Status"}),(0,f.jsxs)(aR.RadioGroup,{row:!0,value:p.status,onChange:e=>h({...p,status:e.target.value}),children:[(0,f.jsx)(aE.FormControlLabel,{value:"active",control:(0,f.jsx)(aA.Radio,{}),label:"Active"}),(0,f.jsx)(aE.FormControlLabel,{value:"pending",control:(0,f.jsx)(aA.Radio,{}),label:"Pending"}),(0,f.jsx)(aE.FormControlLabel,{value:"reported",control:(0,f.jsx)(aA.Radio,{}),label:"Reported"}),(0,f.jsx)(aE.FormControlLabel,{value:"blocked",control:(0,f.jsx)(aA.Radio,{}),label:"Blocked"})]}),p.isClient&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",fontWeight:600,mt:3,mb:2,children:"Systems Connected"}),(0,f.jsx)(tI,{multiple:!0,options:aO,value:p.systemsConnected,onChange:(e,t)=>h({...p,systemsConnected:t}),renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Select Systems"})})]})]}),1===o&&(0,f.jsx)(b.Box,{children:c?(0,f.jsx)(b.Box,{display:"flex",justifyContent:"center",py:4,children:(0,f.jsx)(I.CircularProgress,{})}):0===x.length?(0,f.jsx)(A.Alert,{severity:"info",children:"No clients assigned yet"}):(0,f.jsx)(q.Stack,{spacing:1,children:x.map(e=>(0,f.jsxs)(C.Paper,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center","&:hover":{bgcolor:"action.hover"}},children:[(0,f.jsxs)(b.Box,{children:[(0,f.jsx)(v.Typography,{variant:"body2",fontWeight:500,children:e.name}),(0,f.jsxs)(v.Typography,{variant:"caption",color:"text.secondary",children:[e.company,"  ",e.email]}),(0,f.jsx)(b.Box,{mt:.5,children:(0,f.jsx)(ee.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"default",sx:{textTransform:"capitalize"}})})]}),(0,f.jsx)(Q.IconButton,{size:"small",color:"error",onClick:()=>B(e.id),children:(0,f.jsx)(t$.default,{})})]},e.id))})}),2===o&&(0,f.jsx)(b.Box,{children:c?(0,f.jsx)(b.Box,{display:"flex",justifyContent:"center",py:4,children:(0,f.jsx)(I.CircularProgress,{})}):0===y.length?(0,f.jsx)(A.Alert,{severity:"info",children:"No tasks assigned"}):(0,f.jsx)(e$.TableContainer,{children:(0,f.jsxs)(eB.Table,{size:"small",children:[(0,f.jsx)(eD.TableHead,{children:(0,f.jsxs)(eM.TableRow,{children:[(0,f.jsx)(eL.TableCell,{children:"Task"}),(0,f.jsx)(eL.TableCell,{children:"Client"}),(0,f.jsx)(eL.TableCell,{children:"Status"}),(0,f.jsx)(eL.TableCell,{children:"Priority"}),(0,f.jsx)(eL.TableCell,{children:"Due Date"})]})}),(0,f.jsx)(eO.TableBody,{children:y.map(e=>(0,f.jsxs)(eM.TableRow,{hover:!0,children:[(0,f.jsxs)(eL.TableCell,{children:[(0,f.jsx)(v.Typography,{variant:"body2",fontWeight:500,children:e.title}),e.description&&(0,f.jsxs)(v.Typography,{variant:"caption",color:"text.secondary",children:[e.description.substring(0,50),"..."]})]}),(0,f.jsx)(eL.TableCell,{children:e.client_name||"N/A"}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.status,size:"small"})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.priority,size:"small",color:"high"===e.priority?"error":"medium"===e.priority?"warning":"default"})}),(0,f.jsx)(eL.TableCell,{children:e.due_date?new Date(e.due_date).toLocaleDateString():"N/A"})]},e.id))})]})})}),3===o&&(0,f.jsx)(b.Box,{children:c?(0,f.jsx)(b.Box,{display:"flex",justifyContent:"center",py:4,children:(0,f.jsx)(I.CircularProgress,{})}):0===T.length?(0,f.jsx)(A.Alert,{severity:"info",children:"No support requests"}):(0,f.jsx)(e$.TableContainer,{children:(0,f.jsxs)(eB.Table,{size:"small",children:[(0,f.jsx)(eD.TableHead,{children:(0,f.jsxs)(eM.TableRow,{children:[(0,f.jsx)(eL.TableCell,{children:"Subject"}),(0,f.jsx)(eL.TableCell,{children:"Client"}),(0,f.jsx)(eL.TableCell,{children:"Priority"}),(0,f.jsx)(eL.TableCell,{children:"Status"}),(0,f.jsx)(eL.TableCell,{children:"Created"})]})}),(0,f.jsx)(eO.TableBody,{children:T.map(e=>(0,f.jsxs)(eM.TableRow,{hover:!0,children:[(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(v.Typography,{variant:"body2",fontWeight:500,children:e.subject})}),(0,f.jsx)(eL.TableCell,{children:e.client_name||"N/A"}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.priority,size:"small",color:"urgent"===e.priority?"error":"high"===e.priority?"warning":"default"})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.status,size:"small"})}),(0,f.jsx)(eL.TableCell,{children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})})]}),(0,f.jsxs)(W.DialogActions,{sx:{p:2},children:[(0,f.jsx)(_.Button,{onClick:r,disabled:l,children:"Cancel"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:R,disabled:l,children:l?(0,f.jsx)(I.CircularProgress,{size:24}):"Update User"})]})]}):null}var a$=e.i(88795),aD=e.i(68418),aM=e.i(85760);function aF(e){return(0,e6.default)("MuiInputAdornment",e)}let aN=(0,e3.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),az=["children","className","component","disablePointerEvents","disableTypography","position","variant"],aW=(0,e2.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`position${(0,e4.default)(r.position)}`],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(({theme:e,ownerState:t})=>(0,ez.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${aN.positionStart}&:not(.${aN.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),a_=g.forwardRef(function(e,t){let r=(0,e5.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:n,className:a,component:i="div",disablePointerEvents:o=!1,disableTypography:s=!1,position:l,variant:d}=r,c=(0,eN.default)(r,az),u=(0,aM.default)()||{},h=d;d&&u.variant,u&&!h&&(h=u.variant);let x=(0,ez.default)({},r,{hiddenLabel:u.hiddenLabel,size:u.size,disablePointerEvents:o,position:l,variant:h}),m=(e=>{let{classes:t,disablePointerEvents:r,hiddenLabel:n,position:a,size:i,variant:o}=e,s={root:["root",r&&"disablePointerEvents",a&&`position${(0,e4.default)(a)}`,o,n&&"hiddenLabel",i&&`size${(0,e4.default)(i)}`]};return(0,e_.default)(s,aF,t)})(x);return(0,f.jsx)(aD.default.Provider,{value:null,children:(0,f.jsx)(aW,(0,ez.default)({as:i,ownerState:x,className:(0,eW.default)(m.root,a),ref:t},c,{children:"string"!=typeof n||s?(0,f.jsxs)(g.Fragment,{children:["start"===l?p||(p=(0,f.jsx)("span",{className:"notranslate",children:""})):null,n]}):(0,f.jsx)(a$.default,{color:"text.secondary",children:n})}))})});var aU=e.i(77072),aq=e.i(48246),aH=e.i(93703),aG=e.i(95996),aV=e.i(23913),aJ=e.i(15226),aK=e.i(71880),aX=e.i(76710),aY=e.i(13216),aQ=e.i(7997),aZ=e.i(35017);let a0=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],a1=g.forwardRef(function(e,t){var r,n,a,i,o,s,l,d;let{backIconButtonProps:c,count:u,disabled:p=!1,getItemAriaLabel:h,nextIconButtonProps:x,onPageChange:m,page:g,rowsPerPage:y,showFirstButton:b,showLastButton:j,slots:v={},slotProps:w={}}=e,S=(0,eN.default)(e,a0),C=(0,aK.useRtl)(),T=null!=(r=v.firstButton)?r:tr.default,k=null!=(n=v.lastButton)?n:tr.default,P=null!=(a=v.nextButton)?a:tr.default,E=null!=(i=v.previousButton)?i:tr.default,I=null!=(o=v.firstButtonIcon)?o:aZ.default,A=null!=(s=v.lastButtonIcon)?s:aQ.default,R=null!=(l=v.nextButtonIcon)?l:aY.default,B=null!=(d=v.previousButtonIcon)?d:aX.default,O=C?k:T,L=C?P:E,$=C?E:P,D=C?T:k,M=C?w.lastButton:w.firstButton,F=C?w.nextButton:w.previousButton,N=C?w.previousButton:w.nextButton,z=C?w.firstButton:w.lastButton;return(0,f.jsxs)("div",(0,ez.default)({ref:t},S,{children:[b&&(0,f.jsx)(O,(0,ez.default)({onClick:e=>{m(e,0)},disabled:p||0===g,"aria-label":h("first",g),title:h("first",g)},M,{children:C?(0,f.jsx)(A,(0,ez.default)({},w.lastButtonIcon)):(0,f.jsx)(I,(0,ez.default)({},w.firstButtonIcon))})),(0,f.jsx)(L,(0,ez.default)({onClick:e=>{m(e,g-1)},disabled:p||0===g,color:"inherit","aria-label":h("previous",g),title:h("previous",g)},null!=F?F:c,{children:C?(0,f.jsx)(R,(0,ez.default)({},w.nextButtonIcon)):(0,f.jsx)(B,(0,ez.default)({},w.previousButtonIcon))})),(0,f.jsx)($,(0,ez.default)({onClick:e=>{m(e,g+1)},disabled:p||-1!==u&&g>=Math.ceil(u/y)-1,color:"inherit","aria-label":h("next",g),title:h("next",g)},null!=N?N:x,{children:C?(0,f.jsx)(B,(0,ez.default)({},w.previousButtonIcon)):(0,f.jsx)(R,(0,ez.default)({},w.nextButtonIcon))})),j&&(0,f.jsx)(D,(0,ez.default)({onClick:e=>{m(e,Math.max(0,Math.ceil(u/y)-1))},disabled:p||g>=Math.ceil(u/y)-1,"aria-label":h("last",g),title:h("last",g)},z,{children:C?(0,f.jsx)(I,(0,ez.default)({},w.firstButtonIcon)):(0,f.jsx)(A,(0,ez.default)({},w.lastButtonIcon))}))]}))});var a2=e.i(18104);function a5(e){return(0,e6.default)("MuiTablePagination",e)}let a4=(0,e3.default)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),a3=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],a6=(0,e2.default)(aV.default,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),a9=(0,e2.default)(aJ.default,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>(0,ez.default)({[`& .${a4.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${a4.actions}`]:{flexShrink:0,marginLeft:20}})),a8=(0,e2.default)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),a7=(0,e2.default)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>(0,ez.default)({},e.typography.body2,{flexShrink:0})),ie=(0,e2.default)(aG.default,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>(0,ez.default)({[`& .${a4.selectIcon}`]:t.selectIcon,[`& .${a4.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${a4.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),it=(0,e2.default)(aH.default,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),ir=(0,e2.default)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>(0,ez.default)({},e.typography.body2,{flexShrink:0}));function ia({from:e,to:t,count:r}){return`${e}${t} of ${-1!==r?r:`more than ${t}`}`}function ii(e){return`Go to ${e} page`}let io=g.forwardRef(function(e,t){var r;let n,a=(0,e5.useDefaultProps)({props:e,name:"MuiTablePagination"}),{ActionsComponent:i=a1,backIconButtonProps:o,className:s,colSpan:l,component:d=aV.default,count:c,disabled:u=!1,getItemAriaLabel:p=ii,labelDisplayedRows:x=ia,labelRowsPerPage:m="Rows per page:",nextIconButtonProps:y,onPageChange:b,onRowsPerPageChange:j,page:v,rowsPerPage:w,rowsPerPageOptions:S=[10,25,50,100],SelectProps:C={},showFirstButton:T=!1,showLastButton:k=!1,slotProps:P={},slots:E={}}=a,I=(0,eN.default)(a,a3),A=(e=>{let{classes:t}=e;return(0,e_.default)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},a5,t)})(a),R=null!=(r=null==P?void 0:P.select)?r:C,B=R.native?"option":it;(d===aV.default||"td"===d)&&(n=l||1e3);let O=(0,a2.default)(R.id),L=(0,a2.default)(R.labelId);return(0,f.jsx)(a6,(0,ez.default)({colSpan:n,ref:t,as:d,ownerState:a,className:(0,eW.default)(A.root,s)},I,{children:(0,f.jsxs)(a9,{className:A.toolbar,children:[(0,f.jsx)(a8,{className:A.spacer}),S.length>1&&(0,f.jsx)(a7,{className:A.selectLabel,id:L,children:m}),S.length>1&&(0,f.jsx)(ie,(0,ez.default)({variant:"standard"},!R.variant&&{input:h||(h=(0,f.jsx)(aq.default,{}))},{value:w,onChange:j,id:O,labelId:L},R,{classes:(0,ez.default)({},R.classes,{root:(0,eW.default)(A.input,A.selectRoot,(R.classes||{}).root),select:(0,eW.default)(A.select,(R.classes||{}).select),icon:(0,eW.default)(A.selectIcon,(R.classes||{}).icon)}),disabled:u,children:S.map(e=>(0,g.createElement)(B,(0,ez.default)({},!(0,aU.default)(B)&&{ownerState:a},{className:A.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e))})),(0,f.jsx)(ir,{className:A.displayedRows,children:x({from:0===c?0:v*w+1,to:-1===c?(v+1)*w:-1===w?c:Math.min(c,(v+1)*w),count:-1===c?-1:c,page:v})}),(0,f.jsx)(i,{className:A.actions,backIconButtonProps:o,count:c,nextIconButtonProps:y,onPageChange:b,page:v,rowsPerPage:w,showFirstButton:T,showLastButton:k,slotProps:P.actions,slots:E.actions,getItemAriaLabel:p,disabled:u})]})}))});var is=e.i(21089),il=e.i(52059),id=e.i(11266);let ic=(0,n4.default)((0,f.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var iu=e.i(12396);let ip=["slots","slotProps"],ih=(0,e2.default)(iu.default,{name:"MuiBreadcrumbCollapsed"})(({theme:e})=>(0,ez.default)({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,ez.default)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,ez.default)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,eU.emphasize)(e.palette.grey[200],.12)}:{backgroundColor:(0,eU.emphasize)(e.palette.grey[600],.12)})})),ix=(0,e2.default)(ic)({width:24,height:16}),im=function(e){let{slots:t={},slotProps:r={}}=e,n=(0,eN.default)(e,ip);return(0,f.jsx)("li",{children:(0,f.jsx)(ih,(0,ez.default)({focusRipple:!0},n,{ownerState:e,children:(0,f.jsx)(ix,(0,ez.default)({as:t.CollapsedIcon,ownerState:e},r.collapsedIcon))}))})};function ig(e){return(0,e6.default)("MuiBreadcrumbs",e)}let iy=(0,e3.default)("MuiBreadcrumbs",["root","ol","li","separator"]),ib=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],ij=(0,e2.default)(a$.default,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${iy.li}`]:t.li},t.root]})({}),iv=(0,e2.default)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),iw=(0,e2.default)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8}),iS=g.forwardRef(function(e,t){var r,n;let a=(0,e5.useDefaultProps)({props:e,name:"MuiBreadcrumbs"}),{children:i,className:o,component:s="nav",slots:l={},slotProps:d={},expandText:c="Show path",itemsAfterCollapse:u=1,itemsBeforeCollapse:p=1,maxItems:h=8,separator:x="/"}=a,m=(0,eN.default)(a,ib),[y,b]=g.useState(!1),j=(0,ez.default)({},a,{component:s,expanded:y,expandText:c,itemsAfterCollapse:u,itemsBeforeCollapse:p,maxItems:h,separator:x}),v=(e=>{let{classes:t}=e;return(0,e_.default)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},ig,t)})(j),w=(0,id.default)({elementType:l.CollapsedIcon,externalSlotProps:d.collapsedIcon,ownerState:j}),S=g.useRef(null),C=g.Children.toArray(i).filter(e=>g.isValidElement(e)).map((e,t)=>(0,f.jsx)("li",{className:v.li,children:e},`child-${t}`));return(0,f.jsx)(ij,(0,ez.default)({ref:t,component:s,color:"text.secondary",className:(0,eW.default)(v.root,o),ownerState:j},m,{children:(0,f.jsx)(iv,{className:v.ol,ref:S,ownerState:j,children:(r=y||h&&C.length<=h||p+u>=C.length?C:[...C.slice(0,p),(0,f.jsx)(im,{"aria-label":c,slots:{CollapsedIcon:l.CollapsedIcon},slotProps:{collapsedIcon:w},onClick:()=>{b(!0);let e=S.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...C.slice(C.length-u,C.length)],n=v.separator,r.reduce((e,t,a)=>(a<r.length-1?e=e.concat(t,(0,f.jsx)(iw,{"aria-hidden":!0,className:n,ownerState:j,children:x},`separator-${a}`)):e.push(t),e),[]))})}))});var iC=e.i(90598),iT=e.i(44915),ik=e.i(60472),iP=e.i(31862);function iE(){let{user:e}=(0,nz.useAuth)();e?.isAdmin;let[t,r]=(0,g.useState)([]),[n,a]=(0,g.useState)([]),[i,o]=(0,g.useState)(!0),[s,l]=(0,g.useState)(""),[d,c]=(0,g.useState)(0),[u,p]=(0,g.useState)(10),[h,x]=(0,g.useState)(null),[m,y]=(0,g.useState)(null),[j,w]=(0,g.useState)(!1),[S,T]=(0,g.useState)(!1),[k,P]=(0,g.useState)(!1),[E,R]=(0,g.useState)(!1),[B,O]=(0,g.useState)(null),[L,$]=(0,g.useState)(null),[D,M]=(0,g.useState)({firstName:"",lastName:"",username:"",email:"",phone:"",zipcode:"",address:"",joiningDate:"",status:"active",role:"employee",isEmployee:!1,isAdmin:!1,isClient:!1,systemsConnected:[]}),[H,G]=(0,g.useState)({newPassword:"",confirmPassword:""}),[V,X]=(0,g.useState)([]),[Y,Z]=(0,g.useState)(0),[en,ea]=(0,g.useState)([]),[ei,eo]=(0,g.useState)([]),[es,el]=(0,g.useState)([]),[ed,ec]=(0,g.useState)(!1),eu=(0,K.getBackendUrl)();(0,g.useEffect)(()=>{ep(),eh()},[]),(0,g.useEffect)(()=>{if(B||L){let e=setTimeout(()=>{O(null),$(null)},5e3);return()=>clearTimeout(e)}},[B,L]);let ep=async()=>{try{o(!0);let e=await fetch(`${eu}/api/admin/users`,{credentials:"include"});if(e.ok){let t=await e.json();r(t.users||[])}}catch(e){console.error("Error fetching users:",e),$("Failed to load users")}finally{o(!1)}},eh=async()=>{try{let e=await fetch(`${eu}/api/creative/clients`,{credentials:"include"});if(e.ok){let t=await e.json();a(t.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},ef=()=>{x(null)},ex=async e=>{ec(!0);try{let[t,r,n]=await Promise.all([fetch(`${eu}/api/admin/users/${e}/clients`,{credentials:"include"}),fetch(`${eu}/api/admin/users/${e}/tasks`,{credentials:"include"}),fetch(`${eu}/api/admin/users/${e}/support-requests`,{credentials:"include"})]);if(t.ok){let e=await t.json();ea(e.clients||[])}if(r.ok){let e=await r.json();eo(e.tasks||[])}if(n.ok){let e=await n.json();el(e.requests||[])}}catch(e){console.error("Error fetching user data:",e)}finally{ec(!1)}},em=async()=>{if(m)try{let e=await fetch(`${eu}/api/admin/users/${m.id}`,{method:"DELETE",credentials:"include"});if(e.ok)O("User deleted successfully"),ep(),T(!1);else{let t=await e.json();$(t.error||"Failed to delete user")}}catch(e){$("Failed to delete user")}},eg=async()=>{if(m){if(H.newPassword!==H.confirmPassword)return void $("Passwords do not match");if(H.newPassword.length<6)return void $("Password must be at least 6 characters");try{let e=await fetch(`${eu}/api/admin/users/${m.id}/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:H.newPassword})});if(e.ok)O("Password changed successfully"),P(!1),G({newPassword:"",confirmPassword:""});else{let t=await e.json();$(t.error||"Failed to change password")}}catch(e){$("Failed to change password")}}},ey=async()=>{if(m&&0!==V.length)try{let e=await fetch(`${eu}/api/admin/users/${m.id}/assign-clients`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientIds:V})});if(e.ok)O(`Assigned ${V.length} client(s) successfully`),R(!1),X([]);else{let t=await e.json();$(t.error||"Failed to assign clients")}}catch(e){$("Failed to assign clients")}},eb=t.filter(e=>{let t=s.toLowerCase();return e.username?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.first_name?.toLowerCase().includes(t)||e.last_name?.toLowerCase().includes(t)}),ej=eb.slice(d*u,d*u+u);return i?(0,f.jsx)(b.Box,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,f.jsx)(I.CircularProgress,{})}):(0,f.jsxs)(b.Box,{children:[B&&(0,f.jsx)(A.Alert,{severity:"success",sx:{mb:2},onClose:()=>O(null),children:B}),L&&(0,f.jsx)(A.Alert,{severity:"error",sx:{mb:2},onClose:()=>$(null),children:L}),(0,f.jsxs)(iS,{sx:{mb:2},children:[(0,f.jsxs)(iC.Link,{href:"/",color:"inherit",sx:{display:"flex",alignItems:"center",textDecoration:"none"},children:[(0,f.jsx)(iT.default,{sx:{mr:.5,fontSize:20}}),"Home"]}),(0,f.jsxs)(v.Typography,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[(0,f.jsx)(tK.default,{sx:{mr:.5,fontSize:20}}),"User Management"]})]}),(0,f.jsxs)(b.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:600,children:"User Management"}),(0,f.jsx)(_.Button,{variant:"contained",startIcon:(0,f.jsx)(tA.default,{}),children:"Add New User"})]}),(0,f.jsxs)(C.Paper,{sx:{width:"100%",mb:2},children:[(0,f.jsx)(b.Box,{p:2,children:(0,f.jsx)(U.TextField,{fullWidth:!0,placeholder:"Search by name, email, or username...",value:s,onChange:e=>l(e.target.value),InputProps:{startAdornment:(0,f.jsx)(a_,{position:"start",children:(0,f.jsx)(av.default,{})})}})}),(0,f.jsx)(e$.TableContainer,{children:(0,f.jsxs)(eB.Table,{children:[(0,f.jsx)(eD.TableHead,{children:(0,f.jsxs)(eM.TableRow,{children:[(0,f.jsx)(eL.TableCell,{padding:"checkbox",children:(0,f.jsx)(tW.Checkbox,{})}),(0,f.jsx)(eL.TableCell,{children:"Profile"}),(0,f.jsx)(eL.TableCell,{children:"Email & Username"}),(0,f.jsx)(eL.TableCell,{children:"Role"}),(0,f.jsx)(eL.TableCell,{children:"Address"}),(0,f.jsx)(eL.TableCell,{children:"Date"}),(0,f.jsx)(eL.TableCell,{children:"Status"}),(0,f.jsx)(eL.TableCell,{align:"right",children:"Actions"})]})}),(0,f.jsx)(eO.TableBody,{children:ej.map(e=>(0,f.jsxs)(eM.TableRow,{hover:!0,children:[(0,f.jsx)(eL.TableCell,{padding:"checkbox",children:(0,f.jsx)(tW.Checkbox,{})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsxs)(b.Box,{display:"flex",alignItems:"center",gap:1.5,children:[(0,f.jsx)(ek.Avatar,{src:e.profile_image,sx:{width:40,height:40},children:e.first_name?.[0]||e.username?.[0]}),(0,f.jsxs)(b.Box,{children:[(0,f.jsxs)(v.Typography,{variant:"body2",fontWeight:500,children:[e.first_name," ",e.last_name]}),(0,f.jsxs)(v.Typography,{variant:"caption",color:"text.secondary",children:["#",e.id]})]})]})}),(0,f.jsxs)(eL.TableCell,{children:[(0,f.jsx)(v.Typography,{variant:"body2",children:e.email}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:e.username})]}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.is_admin?"Super Admin":e.is_employee?"Employee":e.is_client?"Client":"User",size:"small",color:"primary",variant:"outlined"})}),(0,f.jsxs)(eL.TableCell,{children:[(0,f.jsx)(v.Typography,{variant:"body2",children:e.address||"N/A"}),(0,f.jsx)(v.Typography,{variant:"caption",color:"text.secondary",children:e.zipcode||""})]}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(v.Typography,{variant:"body2",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})}),(0,f.jsx)(eL.TableCell,{children:(0,f.jsx)(ee.Chip,{label:e.status||"Active",size:"small",color:(e=>{switch(e){case"active":return"success";case"pending":return"warning";case"blocked":return"error";case"reported":return"info";default:return"default"}})(e.status),sx:{textTransform:"capitalize"}})}),(0,f.jsx)(eL.TableCell,{align:"right",children:(0,f.jsx)(Q.IconButton,{size:"small",onClick:t=>{x(t.currentTarget),y(e)},children:(0,f.jsx)(tB.default,{})})})]},e.id))})]})}),(0,f.jsx)(io,{rowsPerPageOptions:[5,10,25],component:"div",count:eb.length,rowsPerPage:u,page:d,onPageChange:(e,t)=>c(t),onRowsPerPageChange:e=>{p(parseInt(e.target.value,10)),c(0)}})]}),(0,f.jsxs)(et.Menu,{anchorEl:h,open:!!h,onClose:ef,children:[(0,f.jsxs)(J.MenuItem,{onClick:()=>{m&&(M({firstName:m.first_name||"",lastName:m.last_name||"",username:m.username||"",email:m.email||"",phone:m.phone||"",zipcode:m.zipcode||"",address:m.address||"",joiningDate:m.joining_date||new Date().toISOString().split("T")[0],status:m.status||"active",role:m.is_admin?"super_admin":m.is_employee?"employee":m.is_client?"client":"employee",isEmployee:m.is_employee||!1,isAdmin:m.is_admin||!1,isClient:m.is_client||!1,systemsConnected:[]}),Z(0),m&&ex(m.id),w(!0)),ef()},children:[(0,f.jsx)(is.ListItemIcon,{children:(0,f.jsx)(tR.default,{fontSize:"small"})}),(0,f.jsx)(il.ListItemText,{children:"Edit User"})]}),(0,f.jsxs)(J.MenuItem,{onClick:()=>{G({newPassword:"",confirmPassword:""}),P(!0),ef()},children:[(0,f.jsx)(is.ListItemIcon,{children:(0,f.jsx)(ik.default,{fontSize:"small"})}),(0,f.jsx)(il.ListItemText,{children:"Change Password"})]}),m?.is_employee&&(0,f.jsxs)(J.MenuItem,{onClick:()=>{X([]),R(!0),ef()},children:[(0,f.jsx)(is.ListItemIcon,{children:(0,f.jsx)(iP.default,{fontSize:"small"})}),(0,f.jsx)(il.ListItemText,{children:"Assign Clients"})]}),(0,f.jsx)(er.Divider,{}),(0,f.jsxs)(J.MenuItem,{onClick:()=>{T(!0),ef()},children:[(0,f.jsx)(is.ListItemIcon,{children:(0,f.jsx)(t$.default,{fontSize:"small",color:"error"})}),(0,f.jsx)(il.ListItemText,{children:"Delete User"})]})]}),(0,f.jsx)(aL,{open:j,user:m,onClose:()=>w(!1),onSuccess:O,onError:$,availableClients:n}),(0,f.jsxs)(F.Dialog,{open:k,onClose:()=>P(!1),maxWidth:"xs",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:"Change Password"}),(0,f.jsxs)(z.DialogContent,{children:[(0,f.jsxs)(v.Typography,{variant:"body2",color:"text.secondary",mb:2,children:["Set a new password for ",m?.username]}),(0,f.jsxs)(q.Stack,{spacing:2,children:[(0,f.jsx)(U.TextField,{fullWidth:!0,label:"New Password",type:"password",value:H.newPassword,onChange:e=>G({...H,newPassword:e.target.value})}),(0,f.jsx)(U.TextField,{fullWidth:!0,label:"Confirm Password",type:"password",value:H.confirmPassword,onChange:e=>G({...H,confirmPassword:e.target.value})})]})]}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>P(!1),children:"Cancel"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:eg,children:"Change Password"})]})]}),(0,f.jsxs)(F.Dialog,{open:E,onClose:()=>R(!1),maxWidth:"sm",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:"Assign Clients"}),(0,f.jsxs)(z.DialogContent,{children:[(0,f.jsxs)(v.Typography,{variant:"body2",color:"text.secondary",mb:2,children:["Select clients to assign to ",m?.username]}),(0,f.jsx)(tI,{multiple:!0,options:n,getOptionLabel:e=>`${e.name} (${e.company})`,value:n.filter(e=>V.includes(e.id)),onChange:(e,t)=>X(t.map(e=>e.id)),renderInput:e=>(0,f.jsx)(U.TextField,{...e,label:"Select Clients"})})]}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>R(!1),children:"Cancel"}),(0,f.jsx)(_.Button,{variant:"contained",onClick:ey,children:"Assign Clients"})]})]}),(0,f.jsxs)(F.Dialog,{open:S,onClose:()=>T(!1),maxWidth:"xs",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:"Delete User"}),(0,f.jsxs)(z.DialogContent,{children:[(0,f.jsx)(A.Alert,{severity:"warning",sx:{mb:2},children:"Are you sure you want to delete this user? This action cannot be undone."}),(0,f.jsxs)(v.Typography,{variant:"body2",children:["User: ",(0,f.jsx)("strong",{children:m?.username})]})]}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>T(!1),children:"Cancel"}),(0,f.jsx)(_.Button,{variant:"contained",color:"error",onClick:em,children:"Delete"})]})]})]})}var iI=e.i(24918),iA=e.i(27367),iR=e.i(16875),iB=e.i(25303),iO=e.i(27282);let iL=null,i$=null;try{let t=e.r(26482);iL=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);i$=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function iD(){let{user:e}=(0,nz.useAuth)(),[t,r]=(0,g.useState)(0),n=`design_${e?.id||"shared"}`,a=null,i=null;try{iL&&(a=iL())}catch(e){console.warn("Figma hook not available:",e)}try{i$&&(i=i$())}catch(e){console.warn("MCP hook not available:",e)}let o=a?.files||[],s=a?.components||[],l=a?.componentStatuses||{};a?.isLoading;let d=a?.error||null,c=a?.fetchFiles||(()=>Promise.resolve()),u=a?.fetchComponents||(()=>Promise.resolve()),p=a?.likeComponent||(()=>Promise.resolve()),h=a?.saveComponent||(()=>Promise.resolve());a?.fetchComponentStatus||(()=>Promise.resolve());let x=i?.linkComponentToCode||(()=>Promise.resolve()),m=i?.fetchCodeLinks||(()=>Promise.resolve()),[y,j]=(0,g.useState)(null),[T,k]=(0,g.useState)(!1),[R,B]=(0,g.useState)(""),[O,L]=(0,g.useState)(""),[$,D]=(0,g.useState)(""),[q,K]=(0,g.useState)(!1);(0,g.useEffect)(()=>{if(!iL||!i$)return;let e=!0;return(async()=>{try{await Promise.all([c(),m()])}catch(t){e&&console.error("Error loading Figma data:",t)}})(),()=>{e=!1}},[c,m]),(0,g.useEffect)(()=>{if(!y||!iL)return;let e=!0;return K(!0),u(y).then(()=>{if(!e)return}).catch(t=>{e&&console.error("Error fetching components:",t)}).finally(()=>{e&&K(!1)}),()=>{e=!1}},[y,u]);let X=async(e,t)=>{t.stopPropagation();let r=l[e]?.liked||!1;try{await p(e,!r,y||void 0)}catch(e){console.error("Error liking component:",e)}},ee=async(e,t)=>{t.stopPropagation();let r=l[e]?.saved||!1;try{await h(e,!r,y||void 0)}catch(e){console.error("Error saving component:",e)}},et=async()=>{if(R&&O)try{await x(R,O,$,y||""),k(!1),m()}catch(e){console.error("Error linking component:",e)}};return(0,f.jsxs)(b.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,f.jsxs)(C.Paper,{elevation:2,sx:{p:3,flexGrow:1,display:"flex",flexDirection:"column",minHeight:0},children:[(0,f.jsx)(b.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"})}),(0,f.jsx)(b.Box,{sx:{borderBottom:1,borderColor:"divider",mb:3,flexShrink:0},children:(0,f.jsxs)(w.Tabs,{value:t,onChange:(e,t)=>r(t),children:[(0,f.jsx)(S.Tab,{icon:(0,f.jsx)(M.default,{}),iconPosition:"start",label:"Figma Components"}),(0,f.jsx)(S.Tab,{icon:(0,f.jsx)(iB.default,{}),iconPosition:"start",label:"Collaboration Board"})]})}),0===t&&(0,f.jsxs)(b.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,f.jsxs)(b.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,f.jsx)(v.Typography,{variant:"h6",children:"Figma Integration"}),(0,f.jsxs)(b.Box,{sx:{display:"flex",gap:1},children:[(0,f.jsx)(Z.Tooltip,{title:"Refresh",children:(0,f.jsx)(Q.IconButton,{onClick:()=>{y?u(y):c()},size:"small",children:(0,f.jsx)(iI.default,{})})}),(0,f.jsx)(_.Button,{variant:"outlined",size:"small",onClick:()=>k(!0),disabled:!y||0===s.length,children:"Link to Code"})]})]}),iL&&i$?(0,f.jsxs)(b.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[d&&(0,f.jsx)(A.Alert,{severity:"error",sx:{mb:2},children:d}),(0,f.jsx)(b.Box,{sx:{mb:2},children:(0,f.jsxs)(H.FormControl,{fullWidth:!0,size:"small",children:[(0,f.jsx)(G.InputLabel,{children:"Select Figma File"}),(0,f.jsxs)(V.Select,{value:y||"",label:"Select Figma File",onChange:e=>j(e.target.value),children:[(0,f.jsx)(J.MenuItem,{value:"",children:"-- Select a file --"}),o.map(e=>(0,f.jsx)(J.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),y&&(0,f.jsx)(b.Box,{sx:{flexGrow:1,overflow:"auto"},children:q?(0,f.jsxs)(b.Box,{sx:{textAlign:"center",py:4},children:[(0,f.jsx)(I.CircularProgress,{size:24}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,f.jsxs)(Y.Grid,{container:!0,spacing:2,children:[s.map(e=>(0,f.jsx)(Y.Grid,{item:!0,xs:12,sm:6,children:(0,f.jsx)(P.Card,{elevation:1,children:(0,f.jsxs)(E.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,f.jsx)(v.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,f.jsxs)(b.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,f.jsx)(Q.IconButton,{size:"small",onClick:t=>X(e.key,t),color:l[e.key]?.liked?"error":"default",children:(0,f.jsx)(iA.default,{fontSize:"small"})}),(0,f.jsx)(Q.IconButton,{size:"small",onClick:t=>ee(e.key,t),color:l[e.key]?.saved?"primary":"default",children:(0,f.jsx)(iR.default,{fontSize:"small"})})]})]})})},e.key)),0===s.length&&(0,f.jsx)(Y.Grid,{item:!0,xs:12,children:(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!y&&(0,f.jsx)(b.Box,{sx:{textAlign:"center",py:4},children:(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,f.jsx)(A.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]}),1===t&&(0,f.jsxs)(b.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,f.jsxs)(b.Box,{sx:{mb:2,flexShrink:0},children:[(0,f.jsxs)(v.Typography,{variant:"h6",gutterBottom:!0,children:["Collaboration Board - ",n]}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Collaborate, design, and create together with your team in real-time"})]}),(0,f.jsx)(b.Box,{sx:{flexGrow:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",bgcolor:"background.default",borderRadius:1},children:(0,f.jsx)(b.Box,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column","& > div":{height:"100% !important",minHeight:"100% !important"}},children:(0,f.jsx)(iO.default,{boardId:n,userId:e?.id?.toString()||"anonymous",userName:e?.name||e?.email||"Anonymous User"})})})]})]}),(0,f.jsxs)(F.Dialog,{open:T,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,children:[(0,f.jsx)(N.DialogTitle,{children:"Link Figma Component to Code"}),(0,f.jsxs)(z.DialogContent,{children:[(0,f.jsxs)(H.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,f.jsx)(G.InputLabel,{children:"Figma Component"}),(0,f.jsx)(V.Select,{value:R,label:"Figma Component",onChange:e=>B(e.target.value),children:s.map(e=>(0,f.jsx)(J.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,f.jsx)(U.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:O,onChange:e=>L(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,f.jsx)(U.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:$,onChange:e=>D(e.target.value),placeholder:"Button"})]}),(0,f.jsxs)(W.DialogActions,{children:[(0,f.jsx)(_.Button,{onClick:()=>k(!1),children:"Cancel"}),(0,f.jsx)(_.Button,{onClick:et,variant:"contained",disabled:!R||!O,children:"Link"})]})]})]})}var iM=e.i(43892),iF=e.i(24676),iN=e.i(10600),iz=e.i(27796);function iW(){let[e,t]=(0,g.useState)(!1),[r,n]=(0,g.useState)([]),[a,i]=(0,g.useState)(""),[o,s]=(0,g.useState)(!1),[l,d]=(0,g.useState)(null),[c,u]=(0,g.useState)("gemini-3-pro-preview"),p=(0,g.useRef)(null);(0,g.useEffect)(()=>{p.current&&e&&(p.current.scrollTop=p.current.scrollHeight)},[r,e]);let h=async e=>{if(e.preventDefault(),!a.trim()||o)return;let t={role:"user",text:a};n(e=>[...e,t]),i(""),s(!0),d(null);try{let e=(0,K.getBackendUrl)(),a=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[...r,t],model:c})});if(!a.ok){let e=a.headers.get("content-type");if(e&&e.includes("application/json")){let e=await a.json(),t=e.text||e.error||e.message||`Server error: ${a.status}`,r=e.details?` (${e.details})`:"";throw Error(`${t}${r}`)}{let e=await a.text();throw Error(`Server error: ${a.status} ${a.statusText}${e?` - ${e.substring(0,100)}`:""}`)}}let i=await a.json();if(!i.text||"string"!=typeof i.text)throw Error("Invalid response format from server");let o={role:"model",text:i.text};n(e=>[...e,o])}catch(a){let e=a?.message||"An unexpected error occurred",t=e.toLowerCase().includes("not configured")||e.toLowerCase().includes("api key")||e.toLowerCase().includes("configuration");t||console.error("Error sending message:",a),d(e);let r=t?"The AI chat feature is not yet configured. Please contact an administrator to set up the Gemini API key.":`Sorry, I encountered an error: ${e}`;n(e=>[...e,{role:"model",text:r}])}finally{s(!1)}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(iM.Fab,{color:"primary","aria-label":"AI Chat",onClick:()=>t(!e),sx:{position:"fixed",bottom:24,right:24,zIndex:1300,boxShadow:3},children:e?(0,f.jsx)(iN.default,{}):(0,f.jsx)(iz.default,{})}),(0,f.jsx)(ap.default,{in:e,orientation:"vertical",children:(0,f.jsxs)(C.Paper,{elevation:8,sx:{position:"fixed",bottom:100,right:24,width:{xs:"calc(100vw - 48px)",sm:400,md:450},height:{xs:"calc(100vh - 150px)",sm:600},maxHeight:{sm:600},zIndex:1300,display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",border:1,borderColor:"divider"},children:[(0,f.jsxs)(b.Box,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"primary.main",color:"primary.contrastText",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{flex:1},children:[(0,f.jsx)(D.default,{}),(0,f.jsxs)(b.Box,{sx:{flex:1,minWidth:0},children:[(0,f.jsx)(v.Typography,{variant:"h6",sx:{fontWeight:700,fontSize:"1rem"},children:"AI Journal"}),(0,f.jsx)(v.Typography,{variant:"caption",sx:{opacity:.9,fontSize:"0.7rem"},children:"Gemini-powered digital consciousness"})]}),(0,f.jsxs)(H.FormControl,{size:"small",sx:{minWidth:140,"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.2)",color:"inherit","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSvgIcon-root":{color:"rgba(255, 255, 255, 0.9)"}},children:[(0,f.jsx)(G.InputLabel,{id:"model-select-label",sx:{fontSize:"0.7rem"},children:"Model"}),(0,f.jsxs)(V.Select,{labelId:"model-select-label",value:c,label:"Model",onChange:e=>u(e.target.value),disabled:o,sx:{fontSize:"0.75rem","& .MuiSelect-select":{py:.5}},children:[(0,f.jsx)(J.MenuItem,{value:"gemini-3-pro-preview",sx:{fontSize:"0.75rem"},children:"Gemini 3 Pro Preview"}),(0,f.jsx)(J.MenuItem,{value:"gemini-2.5-pro",sx:{fontSize:"0.75rem"},children:"Gemini 2.5 Pro"})]})]})]}),(0,f.jsxs)(b.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,f.jsx)(Z.Tooltip,{title:"Refresh chat",children:(0,f.jsx)(Q.IconButton,{onClick:()=>{n([]),d(null),i(""),s(!1)},disabled:o,size:"small",sx:{color:"inherit"},children:(0,f.jsx)(iI.default,{fontSize:"small"})})}),(0,f.jsx)(Z.Tooltip,{title:"Close",children:(0,f.jsx)(Q.IconButton,{onClick:()=>t(!1),size:"small",sx:{color:"inherit"},children:(0,f.jsx)(iN.default,{fontSize:"small"})})})]})]}),(0,f.jsxs)(b.Box,{ref:p,sx:{flexGrow:1,p:2,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,minHeight:0,bgcolor:"background.default"},children:[0===r.length&&(0,f.jsxs)(b.Box,{sx:{textAlign:"center",py:4},children:[(0,f.jsx)(D.default,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,f.jsx)(v.Typography,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Welcome to your AI Journal"}),(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",children:"Start a conversation with your digital consciousness. Ask questions, explore thoughts, or simply reflect."})]}),r.map((e,t)=>(0,f.jsx)(b.Box,{sx:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",mb:1},children:(0,f.jsx)(C.Paper,{elevation:1,sx:{p:1.5,maxWidth:"80%",bgcolor:"user"===e.role?"primary.main":"background.paper",color:"user"===e.role?"white":"text.primary",borderRadius:"user"===e.role?"18px 18px 4px 18px":"18px 18px 18px 4px"},children:(0,f.jsx)(v.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap",fontSize:"0.875rem"},children:e.text})})},t)),o&&(0,f.jsx)(b.Box,{sx:{display:"flex",justifyContent:"flex-start",mb:1},children:(0,f.jsx)(C.Paper,{elevation:1,sx:{p:1.5,bgcolor:"background.paper",borderRadius:"18px 18px 18px 4px"},children:(0,f.jsx)(v.Typography,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Thinking..."})})})]}),(0,f.jsxs)(b.Box,{sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:[(0,f.jsx)("form",{onSubmit:h,children:(0,f.jsxs)(q.Stack,{direction:"row",spacing:1,alignItems:"flex-end",children:[(0,f.jsx)(U.TextField,{fullWidth:!0,multiline:!0,maxRows:3,value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),!o&&a.trim())){let t=e.currentTarget.closest("form");t&&t.requestSubmit()}},placeholder:"Share your thoughts...",variant:"outlined",disabled:o,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,f.jsx)(iM.Fab,{type:"submit",color:"primary",disabled:o||!a.trim(),size:"small",sx:{minWidth:40,height:40},children:(0,f.jsx)(iF.default,{sx:{fontSize:18}})})]})}),l&&(0,f.jsx)(v.Typography,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:l})]})]})})]})}function i_(e){let{children:t,value:r,index:n,...a}=e;return(0,f.jsx)("div",{role:"tabpanel",hidden:r!==n,id:`creative-tabpanel-${n}`,"aria-labelledby":`creative-tab-${n}`,...a,children:r===n&&(0,f.jsx)(b.Box,{sx:{py:3},children:t})})}function iU(){let e=(0,T.useTheme)(),t=(0,k.useMediaQuery)(e.breakpoints.down("md")),r=(0,y.useRouter)(),[n,a]=(0,g.useState)(0),[i,o]=(0,g.useState)(!1),{user:s}=(0,nz.useAuth)();s?.isAdmin;let l={analytics:0,support:1,match:2,tasks:3,browser:4,design:5,ai:6},d=[{key:"analytics",label:"Analytics",icon:(0,f.jsx)(R.default,{})},{key:"support",label:"Support",icon:(0,f.jsx)(B.default,{})},{key:"match",label:"Matching",icon:(0,f.jsx)(O.default,{})},{key:"tasks",label:"To-Do & Tasks",icon:(0,f.jsx)(L.default,{})},{key:"browser",label:"Browser",icon:(0,f.jsx)($.default,{})},{key:"design",label:"Design & Figma",icon:(0,f.jsx)(M.default,{})},{key:"ai",label:"AI Agent",icon:(0,f.jsx)(D.default,{})}];return(0,g.useEffect)(()=>{let e=r.query.tab;e&&void 0!==l[e]&&a(l[e])},[r.query.tab]),(0,f.jsxs)(b.Box,{sx:{bgcolor:"background.default",minHeight:"100vh",pb:4},children:[(0,f.jsx)(b.Box,{sx:{bgcolor:"white",borderBottom:"1px solid",borderColor:"divider",mb:3},children:(0,f.jsxs)(j.Container,{maxWidth:"xl",sx:{py:3},children:[(0,f.jsx)(v.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Creative Dashboard"}),(0,f.jsx)(v.Typography,{variant:"body1",color:"text.secondary",children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,f.jsxs)(j.Container,{maxWidth:"xl",children:[(0,f.jsx)(C.Paper,{sx:{mb:3,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},children:(0,f.jsx)(w.Tabs,{value:n,onChange:(e,t)=>{a(t);let n=Object.keys(l).find(e=>l[e]===t);n&&r.push(`/creative?tab=${n}`,void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:!!t&&"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.95rem",fontWeight:500,"&.Mui-selected":{color:"primary.main",fontWeight:600}},"& .MuiTabs-indicator":{bgcolor:"primary.main",height:3}},children:d.map((e,t)=>(0,f.jsx)(S.Tab,{label:e.label,icon:e.icon,iconPosition:"start",id:`creative-tab-${t}`,"aria-controls":`creative-tabpanel-${t}`},e.key))})}),(0,f.jsx)(i_,{value:n,index:0,children:(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsx)(E.CardContent,{sx:{p:3},children:(0,f.jsx)(eR,{})})})}),(0,f.jsx)(i_,{value:n,index:1,children:(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsx)(E.CardContent,{sx:{p:3},children:(0,f.jsx)(tO,{})})})}),(0,f.jsx)(i_,{value:n,index:2,children:(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsx)(E.CardContent,{sx:{p:3},children:(0,f.jsx)(iE,{})})})}),(0,f.jsx)(i_,{value:n,index:3,children:(0,f.jsx)(iq,{})}),(0,f.jsx)(i_,{value:n,index:4,children:(0,f.jsx)(iH,{})}),(0,f.jsx)(i_,{value:n,index:5,children:(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsx)(E.CardContent,{sx:{p:3},children:(0,f.jsx)(iD,{})})})}),(0,f.jsx)(i_,{value:n,index:6,children:(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsx)(E.CardContent,{sx:{p:3},children:(0,f.jsx)(aP,{})})})})]}),(0,f.jsx)(X,{open:i,onClose:()=>o(!1)}),3===n&&(0,f.jsx)(iW,{})]})}function iq(){return(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsxs)(E.CardContent,{sx:{p:3},children:[(0,f.jsxs)(b.Box,{sx:{mb:3},children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"To-Do & Tasks"}),(0,f.jsx)(v.Typography,{variant:"body1",color:"text.secondary",children:"Manage your tasks and track your progress"})]}),(0,f.jsx)(b.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,f.jsx)(b.Box,{sx:{width:"100%"},children:(0,f.jsx)(b.Box,{sx:{mb:3},children:(0,f.jsx)(nW,{height:600})})})})]})})}function iH(){let[e,t]=(0,g.useState)(null),[r,n]=(0,g.useState)(!0),[a,i]=(0,g.useState)(null),[o,s]=(0,g.useState)(!0);return(0,g.useEffect)(()=>{(async()=>{try{s(!0);let e=(0,K.getBackendUrl)(),r=window.location.hostname,n=await fetch(`${e}/api/hyperbeam/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({parent:r})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||`HTTP ${n.status}`)}let a=await n.json();if(a.success&&a.embedUrl)i(a.embedUrl),t(null);else throw Error(a.error||"Failed to get Hyperbeam session URL")}catch(e){console.error("Error creating Hyperbeam session:",e),t(e.message||"Failed to create Hyperbeam session. Please try refreshing the page.")}finally{s(!1)}})()},[]),(0,f.jsx)(P.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,f.jsxs)(E.CardContent,{sx:{p:3},children:[(0,f.jsxs)(b.Box,{sx:{mb:3},children:[(0,f.jsx)(v.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Browser Session"}),(0,f.jsx)(v.Typography,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Shared browser powered by Hyperbeam"})]}),o&&(0,f.jsx)(b.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,f.jsx)(I.CircularProgress,{})}),e&&(0,f.jsx)(A.Alert,{severity:"error",sx:{mb:2},children:e}),!o&&a&&(0,f.jsxs)(b.Box,{sx:{position:"relative",width:"100%",height:"70vh",bgcolor:"#000",borderRadius:1,overflow:"hidden"},children:[r&&(0,f.jsx)(b.Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)"},children:(0,f.jsx)(I.CircularProgress,{})}),(0,f.jsx)("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",display:"block"},allow:"clipboard-read; clipboard-write; microphone; camera; display-capture",onLoad:()=>n(!1),onError:()=>{n(!1),t("Failed to load Hyperbeam session")}})]})]})})}e.s(["default",0,function(){return(0,f.jsx)(m.default,{children:(0,f.jsx)(x.default,{active:"creative",children:(0,f.jsx)(iU,{})})})}],11500)},24144,(e,t,r)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(11500)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);