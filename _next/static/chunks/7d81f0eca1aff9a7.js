(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,707795,(e,t,r)=>{"use strict";var s=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e.r(764800)),a=e.r(444855);r.default=(0,o.default)((0,a.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp")},695356,(e,t,r)=>{"use strict";var s=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e.r(764800)),a=e.r(444855);r.default=(0,o.default)((0,a.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp")},507950,(e,t,r)=>{"use strict";var s=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e.r(764800)),a=e.r(444855);r.default=(0,o.default)((0,a.jsx)("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11"}),"Extension")},19250,e=>{"use strict";var t=e.i(444855),r=e.i(820887),s=e.i(958891),o=e.i(574614),a=e.i(672204),n=e.i(65790),i=e.i(715915),l=e.i(192378),d=e.i(975557),c=e.i(354704),u=e.i(1051),h=e.i(809109),x=e.i(45162),m=e.i(803430);e.i(896335);var g=e.i(680622),p=e.i(884933),y=e.i(381706),j=e.i(715127),f=e.i(595262),v=e.i(196861),b=e.i(651480),C=e.i(985741);function T(e){return(0,C.default)("MuiCardActions",e)}(0,b.default)("MuiCardActions",["root","spacing"]);let w=["disableSpacing","className"],B=(0,f.default)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,p.default)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),W=s.forwardRef(function(e,r){let s=(0,v.useDefaultProps)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:a}=s,n=(0,g.default)(s,w),i=(0,p.default)({},s,{disableSpacing:o}),l=(e=>{let{classes:t,disableSpacing:r}=e;return(0,j.default)({root:["root",!r&&"spacing"]},T,t)})(i);return(0,t.jsx)(B,(0,p.default)({className:(0,y.default)(l.root,a),ownerState:i,ref:r},n))});var A=e.i(910251),P=e.i(337025),S=e.i(134699),k=e.i(591554),I=e.i(975016);let R=()=>{let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),d=(0,s.useRef)(null);(0,s.useEffect)(()=>{let r=(0,I.getSocket)();d.current=r;let s=()=>{n(!0),l(null)},a=()=>{n(!1)},i=e=>{l("Connection failed. Please check your internet connection."),console.error("Socket connection error:",e)},c=e=>{t(e.room),o(e.room.players),l(null)},u=e=>{t(e.room),o(e.room.players),l(null)},h=e=>{o(e.room.players),t(e.room)},x=e=>{o(e.room.players),t(e.room)},m=e=>{t(e.room)},g=e=>{t(e.room)},p=e=>{t(e.room)},y=e=>{t(e.room)},j=e=>{t(e.room),e.result.scores&&o(t=>t.map(t=>{let r=e.result.scores.find(e=>e.playerId===t.id);return r?{...t,score:r.totalScore}:t}))},f=e=>{},v=e=>{t(e.room)},b=r=>{e&&t({...e,guesses:r})},C=r=>{e&&t({...e,roundPhase:r.roundPhase,guesses:r.guesses})},T=r=>{e&&t({...e,votes:r})},w=r=>{e&&(t({...e,roundPhase:"results",players:r.updatedPlayers}),o(r.updatedPlayers))},B=e=>{t(e.room)},W=e=>{l(e.message)};return r.on("connect",s),r.on("disconnect",a),r.on("connect_error",i),r.on("game:room-created",c),r.on("game:room-joined",u),r.on("game:player-joined",h),r.on("game:player-left",x),r.on("game:started",m),r.on("game:state-update",g),r.on("game:round-start",p),r.on("game:type-set",y),r.on("game:round-end",j),r.on("game:drawing-update",f),r.on("game:error",W),r.on("guessing:words-set",v),r.on("guessing:guess-submitted",b),r.on("guessing:phase-changed",C),r.on("guessing:vote-received",T),r.on("guessing:voting-complete",w),r.on("guessing:round-started",B),r.on("game:finished",r=>{t(r.room||{...e,state:"gameEnd"})}),n(r.connected),()=>{r.off("connect",s),r.off("disconnect",a),r.off("connect_error",i),r.off("game:room-created",c),r.off("game:room-joined",u),r.off("game:player-joined",h),r.off("game:player-left",x),r.off("game:started",m),r.off("game:state-update",g),r.off("game:round-start",p),r.off("game:type-set",y),r.off("game:round-end",j),r.off("game:drawing-update",f),r.off("game:error",W),r.off("guessing:words-set",v),r.off("guessing:guess-submitted",b),r.off("guessing:phase-changed",C),r.off("guessing:vote-received",T),r.off("guessing:voting-complete",w),r.off("guessing:round-started",B),r.off("game:finished")}},[e]);let c=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:create-room",e)},[]),u=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:join-room",e)},[]),h=(0,s.useCallback)(()=>{d.current&&e&&(d.current.emit("game:leave-room",{roomCode:e.roomCode}),t(null),o([]))},[e]),x=(0,s.useCallback)((e,t)=>{d.current&&d.current.emit("game:set-type",{roomCode:e,gameType:t})},[]),m=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:start-game",e)},[]),g=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:submit-answer",e)},[]),p=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:draw",e)},[]),y=(0,s.useCallback)(e=>{d.current&&d.current.emit("game:clear-canvas",{roomCode:e})},[]),j=(0,s.useCallback)((e,t)=>{d.current&&d.current.emit("guessing:set-words",{roomCode:e,words:t})},[]),f=(0,s.useCallback)((e,t)=>{d.current&&d.current.emit("guessing:submit-guess",{roomCode:e,guess:t})},[]),v=(0,s.useCallback)((e,t)=>{d.current&&d.current.emit("guessing:vote",{roomCode:e,votedForPlayerId:t})},[]),b=(0,s.useCallback)(e=>{d.current&&d.current.emit("guessing:next-round",{roomCode:e})},[]);return{gameRoom:e,players:r,isConnected:a,error:i,socketId:d.current?.id||"",createRoom:c,joinRoom:u,leaveRoom:h,setGameType:x,startGame:m,submitAnswer:g,sendDrawing:p,clearCanvas:y,setSecretWords:j,submitGuess:f,voteForGuess:v,nextGuessingRound:b}};var G=e.i(815254),z=e.i(242281),L=e.i(750333),F=e.i(107200),E=e.i(352059),$=e.i(262992),D=e.i(86012),N=e.i(707795),U=e.i(852377),M=e.i(501911),V=e.i(187816);function H({gameRoom:e,players:t,socketId:r,isConnected:s}){return null}var Y=e.i(262555),_=e.i(606909),O=e.i(564321),J=e.i(984579),K=e.i(415708),q=e.i(443892),X=e.i(598807),Z=e.i(424676),Q=e.i(107065),ee=e.i(695356),et=e.i(372695),er=e.i(424918);function es(){let{gameRoom:e,players:r,socketId:g,setSecretWords:p,submitGuess:y,voteForGuess:j,nextGuessingRound:f,leaveRoom:v}=R(),[b,C]=(0,s.useState)(["","","","",""]),[T,w]=(0,s.useState)([]),[B,W]=(0,s.useState)(""),[P,S]=(0,s.useState)(!1),[k,I]=(0,s.useState)(60),[G,D]=(0,s.useState)(""),[U,M]=(0,s.useState)(!1),[es,eo]=(0,s.useState)(null),[ea,en]=(0,s.useState)({total:0,submitted:0}),[ei,el]=(0,s.useState)({total:0,submitted:0});if((0,s.useEffect)(()=>{let t=e?.roundPhase;if("guessing"===t&&k>0||"voting"===t&&k>0){let e=setInterval(()=>{I(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(e)}},[e?.roundPhase,k]),(0,s.useEffect)(()=>{let t=e?.roundPhase;if("guessing"===t)W(""),S(!1),M(!1),D(""),I(60),eo(null),en({submitted:0,total:r.filter(e=>e.isActive).length});else if("voting"===t){I(30);let t=e?.guesses||{};el({submitted:0,total:(Array.isArray(t)?t:Object.values(t)).length||r.filter(e=>e.isActive).length})}},[e?.roundPhase,e?.currentRound,r]),(0,s.useEffect)(()=>{let e=window.socket;if(e){let t=e=>{eo(e),void 0!==e.totalVotes&&void 0!==e.totalPlayers&&el({submitted:e.totalVotes,total:e.totalPlayers})},s=e=>{console.log("Guess submitted confirmation:",e),void 0!==e.totalGuesses&&void 0!==e.totalPlayers&&en({submitted:e.totalGuesses,total:e.totalPlayers}),(e.playerId===g||e.id===g)&&(S(!0),e.guess&&W(e.guess))},o=e=>{if(console.log("Phase changed:",e),e.guesses&&Array.isArray(e.guesses)){let t=e.guesses.find(e=>e.playerId===g||e.id===g);t&&(S(!0),W(t.guess||""))}void 0!==e.totalGuesses&&void 0!==e.totalPlayers&&en({submitted:e.totalGuesses,total:e.totalPlayers}),void 0!==e.totalVotes&&void 0!==e.totalPlayers&&el({submitted:e.totalVotes,total:e.totalPlayers})};e.on("guessing:voting-complete",t),e.on("guessing:guess-submitted",s);let a=e=>{console.log("Vote received:",e),void 0!==e.totalVotes&&void 0!==e.totalPlayers&&el({submitted:e.totalVotes,total:e.totalPlayers})},n=e=>{console.log("Round started:",e),e.room&&(W(""),S(!1),M(!1),D(""),I(60),eo(null),en({submitted:0,total:r.filter(e=>e.isActive).length}))};return e.on("guessing:vote-received",a),e.on("guessing:phase-changed",o),e.on("guessing:round-started",n),()=>{e.off("guessing:voting-complete",t),e.off("guessing:guess-submitted",s),e.off("guessing:phase-changed",o),e.off("guessing:vote-received",a),e.off("guessing:round-started",n)}}},[g]),!e)return null;let ed=()=>(0,t.jsx)(o.Box,{sx:{position:"fixed",bottom:24,right:24,zIndex:1e3},children:(0,t.jsxs)(o.Box,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,t.jsx)(X.Tooltip,{title:"Refresh Game",placement:"left",children:(0,t.jsx)(q.Fab,{color:"primary",size:"medium",onClick:()=>window.location.reload(),children:(0,t.jsx)(er.default,{})})}),(0,t.jsx)(X.Tooltip,{title:"Leave Game",placement:"left",children:(0,t.jsx)(q.Fab,{color:"error",size:"medium",onClick:()=>{window.confirm("Are you sure you want to leave the game?")&&v()},children:(0,t.jsx)(N.default,{})})})]})}),ec=r.find(e=>e.id===g)?.isHost||!1;r.find(e=>e.id===g);let eu=e?.roundPhase;if((0,s.useEffect)(()=>{console.log("[GuessingGame] State:",{phase:eu,state:e?.state,hasGuessed:P,timeLeft:k,isHost:ec,round:e?.currentRound})},[eu,e?.state,P,k,ec,e?.currentRound]),!eu||"lobby"===e.state)return ec?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsx)(i.Typography,{variant:"h4",gutterBottom:!0,textAlign:"center",children:"ðŸ¤” Set Up Your Guessing Game"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",textAlign:"center",mb:2,children:"Enter 5 words that players will try to guess. Each word will be used for one round."}),(0,t.jsxs)(h.Alert,{severity:"info",sx:{mb:3,maxWidth:600,mx:"auto"},children:[(0,t.jsx)("strong",{children:"How it works:"})," Players will try to guess your secret word. After everyone guesses, they vote on which guess is closest. The player with the most votes wins points!"]}),T.length>0&&(0,t.jsx)(h.Alert,{severity:"error",sx:{mb:3},children:T.map((e,r)=>(0,t.jsx)("div",{children:e},r))}),(0,t.jsx)(K.Stack,{spacing:2,mb:4,children:b.map((e,r)=>(0,t.jsx)(l.TextField,{label:`Word ${r+1}`,value:e,onChange:e=>{var t;let s;return t=e.target.value,void((s=[...b])[r]=t,C(s),w([]))},fullWidth:!0,variant:"outlined",placeholder:`Enter word ${r+1}`},r))}),(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>{let t=[],r=b.map(e=>e.trim().toLowerCase()).filter(e=>e);(5!==r.length&&t.push("Please enter all 5 words"),new Set(r).size!==r.length&&t.push("All words must be unique"),t.length>0)?w(t):p(e.roomCode,r)},disabled:5!==b.filter(e=>e.trim()).length,children:"Start Game"})]})}),ed()]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4,textAlign:"center"},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,children:"Waiting for host to set up the words..."}),(0,t.jsx)(i.Typography,{color:"text.secondary",children:"The host is choosing 5 secret words for the game."})]})}),ed()]});if("guessing"===eu){let s=()=>{B.trim()&&!P&&(console.log("Submitting guess:",B.trim()),y(e.roomCode,B.trim()),S(!0))},x=k/60*100,m=[...r].sort((e,t)=>t.score-e.score),p=e.guesses||{},j=[],f=0,v=r.filter(e=>e.isActive).length;Array.isArray(p)?(j=p,f=p.length):"object"==typeof p&&(void 0!==p.totalGuesses?(f=p.totalGuesses||0,v=p.totalPlayers||v):f=(j=Object.values(p)).length);let b=j.find(e=>e.playerId===g||e.id===g);return void 0!==b&&!P&&(S(!0),b.guess&&W(b.guess)),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Container,{maxWidth:"lg",sx:{py:4},children:(0,t.jsxs)(c.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(c.Grid,{item:!0,xs:12,md:8,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsxs)(o.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,t.jsxs)(i.Typography,{variant:"h5",fontWeight:"bold",children:["Round ",e.currentRound," of ",e.maxRounds]}),(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(Q.default,{}),label:`${k}s`,color:k<10?"error":"primary",sx:{fontSize:"1.2rem",px:1}})]}),(0,t.jsx)(Y.LinearProgress,{variant:"determinate",value:x,color:k<10?"error":"primary",sx:{height:8,borderRadius:1,mb:3}}),(0,t.jsxs)(n.Paper,{variant:"outlined",sx:{p:4,mb:3,textAlign:"center",bgcolor:"background.default"},children:[(0,t.jsx)(i.Typography,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"ðŸ¤” Guess the Secret Word!"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"The host has chosen a secret word. Think of what word they might have picked!"}),e?.secretWords&&Array.isArray(e.secretWords)&&e.secretWords.length>0&&(0,t.jsxs)(o.Box,{sx:{mb:3},children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",color:"primary",children:"Words for this game:"}),(0,t.jsx)(K.Stack,{direction:"row",spacing:1,justifyContent:"center",flexWrap:"wrap",sx:{mt:2},children:e.secretWords.map((r,s)=>(0,t.jsx)(u.Chip,{label:`${s+1}. ${r}`,color:s===e.currentRound-1?"primary":"default",variant:s===e.currentRound-1?"filled":"outlined",sx:{fontWeight:s===e.currentRound-1?"bold":"normal",fontSize:"0.9rem",mb:1}},s))}),(0,t.jsxs)(i.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Round ",e.currentRound," word is highlighted"]})]}),(0,t.jsx)(u.Chip,{label:`${f} / ${v} players have guessed`,sx:{mt:2},color:f===v?"success":"default"})]}),(0,t.jsx)(o.Box,{sx:{mb:3},children:!P&&k>0?(0,t.jsxs)(o.Box,{children:[(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Enter your guess below. Once submitted, you cannot change it."}),(0,t.jsxs)(o.Box,{display:"flex",gap:2,children:[(0,t.jsx)(l.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Type your guess...",value:B,onChange:e=>W(e.target.value),onKeyPress:e=>{"Enter"===e.key&&!P&&B.trim()&&s()},autoFocus:!0,disabled:P,sx:{"& .MuiOutlinedInput-root":{fontSize:"1.1rem"}}}),(0,t.jsx)(d.Button,{variant:"contained",size:"large",endIcon:(0,t.jsx)(Z.default,{}),onClick:s,disabled:!B.trim()||P,sx:{minWidth:140},children:"Submit Guess"})]})]}):P?(0,t.jsxs)(h.Alert,{severity:"success",icon:(0,t.jsx)(et.default,{}),sx:{mb:2},children:[(0,t.jsx)(i.Typography,{variant:"body1",fontWeight:"bold",children:"Your guess has been submitted!"}),(0,t.jsxs)(i.Typography,{variant:"body2",children:["Your guess: ",(0,t.jsxs)("strong",{children:['"',b?.guess||B,'"']})]}),(0,t.jsx)(i.Typography,{variant:"body2",sx:{mt:1},children:"Waiting for other players to submit their guesses..."})]}):(0,t.jsx)(h.Alert,{severity:"info",children:"Time's up! Waiting for all players to finish..."})}),j.length>0&&(0,t.jsxs)(o.Box,{sx:{mt:3},children:[(0,t.jsxs)(i.Typography,{variant:"h6",gutterBottom:!0,children:["Submitted Guesses (",j.length," / ",v,")"]}),(0,t.jsx)(z.List,{dense:!0,children:j.map((e,s)=>{let a=e.playerId===g||e.id===g,n=e.playerName||r.find(t=>t.id===(e.playerId||e.id))?.name||"Unknown";return(0,t.jsxs)(L.ListItem,{sx:{bgcolor:a?"action.selected":"transparent",borderRadius:1,mb:.5},children:[(0,t.jsx)(F.ListItemAvatar,{children:(0,t.jsx)($.Avatar,{sx:{width:32,height:32},children:n.charAt(0).toUpperCase()})}),(0,t.jsx)(E.ListItemText,{primary:(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",gap:1,children:[(0,t.jsx)(i.Typography,{variant:"body1",fontWeight:a?"bold":"normal",children:a?"You":n}),a&&(0,t.jsx)(u.Chip,{label:"Your guess",size:"small",color:"primary"})]}),secondary:(0,t.jsxs)(i.Typography,{variant:"body2",sx:{fontStyle:"italic",mt:.5},children:['"',e.guess,'"']})})]},e.playerId||e.id||s)})})]})]})}),(0,t.jsx)(c.Grid,{item:!0,xs:12,md:4,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Scoreboard"}),(0,t.jsx)(z.List,{children:m.map((e,r)=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsxs)(F.ListItemAvatar,{children:[(0,t.jsx)(u.Chip,{label:r+1,size:"small",color:0===r?"primary":"default",sx:{mr:1}}),(0,t.jsx)($.Avatar,{src:e.avatar,children:e.name.charAt(0).toUpperCase()})]}),(0,t.jsx)(E.ListItemText,{primary:e.name,secondary:`${e.score} pts`})]},e.id))})]})})]})}),ed()]})}if("voting"===eu){let s=e.guesses||{},l=[];Array.isArray(s)?l=s:"object"==typeof s&&(l=void 0===s.totalGuesses?Object.values(s):e.guessList||[]);let c=e.votes||{},p="object"==typeof c&&c.totalVotes?c.totalVotes:0,y="object"==typeof c&&c.totalPlayers?c.totalPlayers:l.length;return(c[g]||Array.isArray(c)&&c.find(e=>e.playerId===g))&&!U&&M(!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsx)(i.Typography,{variant:"h4",gutterBottom:!0,textAlign:"center",children:"ðŸ‘ Vote for the Best Guess!"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",textAlign:"center",mb:2,children:"Vote for the guess you think is CLOSEST to what the host chose. You cannot vote for your own guess."}),(0,t.jsxs)(h.Alert,{severity:"warning",sx:{mb:3,maxWidth:600,mx:"auto"},children:[(0,t.jsx)("strong",{children:"Remember:"})," You're voting for the guess that is most similar or related to the host's word, NOT necessarily the \"best\" word. The player with the most votes wins this round!"]}),(0,t.jsx)(u.Chip,{label:`${p} / ${y} players have voted`,sx:{mb:3},color:p===y?"success":"default"}),0===l.length?(0,t.jsx)(h.Alert,{severity:"warning",children:"No guesses available to vote on. Waiting for guesses to be processed..."}):U?(0,t.jsxs)(h.Alert,{severity:"success",icon:(0,t.jsx)(et.default,{}),sx:{mb:2},children:[(0,t.jsx)(i.Typography,{variant:"body1",fontWeight:"bold",children:"Your vote has been recorded!"}),(0,t.jsx)(i.Typography,{variant:"body2",sx:{mt:1},children:"Waiting for other players to vote..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select the guess you think is closest to the host's secret word. You cannot vote for your own guess."}),(0,t.jsx)(O.RadioGroup,{value:G,onChange:e=>D(e.target.value),children:(0,t.jsx)(K.Stack,{spacing:2,mb:3,children:l.map((e,s)=>{let a=e.id||e.playerId||`guess-${s}`,n=e.playerId||e.id,l=n!==g,d=e.playerName||r.find(e=>e.id===n)?.name||"Unknown Player";return(0,t.jsx)(x.Card,{variant:"outlined",sx:{opacity:l?1:.6,bgcolor:l?"background.paper":"action.disabledBackground","&:hover":l?{bgcolor:"action.hover"}:{}},children:(0,t.jsx)(m.CardContent,{children:(0,t.jsx)(J.FormControlLabel,{value:a,control:(0,t.jsx)(_.Radio,{disabled:!l}),label:(0,t.jsxs)(o.Box,{children:[(0,t.jsxs)(i.Typography,{variant:"h6",component:"span",children:['"',e.guess,'"']}),(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",gap:1,mt:.5,children:[(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:["by ",d]}),!l&&(0,t.jsx)(u.Chip,{label:"Your guess",size:"small",color:"primary"})]})]}),disabled:!l,sx:{width:"100%"}})})},a)})})}),(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,endIcon:(0,t.jsx)(ee.default,{}),onClick:()=>{G&&!U&&(console.log("Submitting vote for:",G),j(e.roomCode,G),M(!0))},disabled:!G||U,sx:{py:1.5},children:"Submit Vote"})]}),l.length>0&&(0,t.jsxs)(o.Box,{sx:{mt:3},children:[(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Voting Progress: ",ei.submitted," / ",ei.total," players have voted"]}),(0,t.jsx)(Y.LinearProgress,{variant:"determinate",value:p/y*100,sx:{mt:1,height:8,borderRadius:1},color:p===y?"success":"primary"})]})]})}),ed()]})}if("results"===eu&&es){let s=[...r].sort((e,t)=>t.score-e.score);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsxs)(o.Box,{textAlign:"center",mb:4,children:[(0,t.jsx)(V.default,{sx:{fontSize:64,color:"gold",mb:2}}),(0,t.jsxs)(i.Typography,{variant:"h3",gutterBottom:!0,fontWeight:"bold",children:["Round ",e.currentRound," Results"]}),(0,t.jsxs)(i.Typography,{variant:"h5",color:"primary",gutterBottom:!0,children:["Winner: ",es.winnerName]}),(0,t.jsxs)(i.Typography,{variant:"h6",color:"text.secondary",children:['Guess: "',es.winnerGuess,'" (',es.voteCount," votes)"]}),(0,t.jsx)(A.Divider,{sx:{my:3}}),(0,t.jsxs)(i.Typography,{variant:"body1",children:["The secret word was: ",(0,t.jsxs)("strong",{children:['"',es.secretWord,'"']})]})]}),(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,children:"All Guesses:"}),(0,t.jsx)(z.List,{children:es.allGuesses?.map(e=>(0,t.jsx)(L.ListItem,{children:(0,t.jsx)(E.ListItemText,{primary:`${e.playerName}: "${e.guess}"`,secondary:`${e.votes} vote${1!==e.votes?"s":""}`})},e.playerId))}),(0,t.jsx)(A.Divider,{sx:{my:3}}),(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,children:"Current Standings:"}),(0,t.jsx)(z.List,{children:s.map((e,r)=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsx)(F.ListItemAvatar,{children:(0,t.jsx)(u.Chip,{label:r+1,size:"small",color:0===r?"primary":"default"})}),(0,t.jsx)(E.ListItemText,{primary:e.name,secondary:`${e.score} points`})]},e.id))}),ec&&(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,sx:{mt:3},onClick:()=>f(e.roomCode),children:e.currentRound>=e.maxRounds?"End Game":"Next Round"})]})}),ed()]})}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H,{gameRoom:e,players:r,socketId:g||"",isConnected:!0}),ed()]})}var eo=e.i(346631),ea=e.i(270385),en=e.i(334203),ei=e.i(955047);let el=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500"];function ed(){let{gameRoom:e,players:r,submitAnswer:x,sendDrawing:m,clearCanvas:g}=R(),[p,y]=(0,s.useState)(""),[j,f]=(0,s.useState)(90),[v,b]=(0,s.useState)(!1),[C,T]=(0,s.useState)("#000000"),[w,B]=(0,s.useState)(!1),W=(0,s.useRef)(null),A=(0,s.useRef)(null),P=A.current?.id||"",S=e?.currentDrawerId===P;(0,s.useEffect)(()=>{A.current=(0,I.getSocket)()},[]),(0,s.useEffect)(()=>{let e=A.current;if(!e)return;let t=e=>{if(!W.current||e.playerId===P)return;let t=W.current.getContext("2d");if(!t)return;let{stroke:r}=e;t.strokeStyle=r.color,t.lineWidth=r.width,t.lineCap="round",t.lineJoin="round",t.beginPath();for(let e=0;e<r.points.length-2;e+=2)t.moveTo(r.points[e],r.points[e+1]),e+2<r.points.length&&t.lineTo(r.points[e+2],r.points[e+3]);t.stroke()},r=()=>{if(!W.current)return;let e=W.current.getContext("2d");e&&e.clearRect(0,0,W.current.width,W.current.height)};return e.on("game:drawing-update",t),e.on("game:canvas-cleared",r),()=>{e.off("game:drawing-update",t),e.off("game:canvas-cleared",r)}},[P]),(0,s.useEffect)(()=>{if(e?.state==="playing"&&j>0){let e=setInterval(()=>{f(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(e)}},[e?.state,j]),(0,s.useEffect)(()=>{if(e?.state==="playing"&&(f(90),b(!1),y(""),W.current)){let e=W.current.getContext("2d");e&&e.clearRect(0,0,W.current.width,W.current.height)}},[e?.currentRound]);let k=()=>{if(!W.current)return;let e=W.current.getContext("2d");e&&e.beginPath(),B(!1)},G=()=>{p.trim()&&e&&(x({roomCode:e.roomCode,answer:p.trim()}),b(!0),y(""))};if(!e)return null;let N=[...r].sort((e,t)=>t.score-e.score);return(0,t.jsx)(a.Container,{maxWidth:"lg",sx:{py:4},children:(0,t.jsxs)(c.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(c.Grid,{item:!0,xs:12,md:8,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsxs)(o.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,t.jsxs)(i.Typography,{variant:"h5",fontWeight:"bold",children:["Round ",e.currentRound," of ",e.maxRounds]}),(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(Q.default,{}),label:`${j}s`,color:j<10?"error":"primary",sx:{fontSize:"1.2rem",px:1}})]}),(0,t.jsx)(Y.LinearProgress,{variant:"determinate",value:j/90*100,color:j<10?"error":"primary",sx:{height:8,borderRadius:1,mb:3}}),S?(0,t.jsxs)(h.Alert,{severity:"info",sx:{mb:2},children:[(0,t.jsx)("strong",{children:"You're drawing!"})," Word: ",e.currentWord||"..."]}):(0,t.jsx)(h.Alert,{severity:"success",sx:{mb:2},children:"Watch the drawing and guess the word!"}),(0,t.jsx)(o.Box,{sx:{mb:2,border:"2px solid",borderColor:"divider",borderRadius:1,bgcolor:"white"},children:(0,t.jsx)("canvas",{ref:W,width:600,height:400,onMouseDown:e=>{S&&B(!0)},onMouseMove:t=>{if(!w||!S||!W.current)return;let r=W.current,s=r.getContext("2d");if(!s)return;let o=r.getBoundingClientRect(),a=t.clientX-o.left,n=t.clientY-o.top;s.strokeStyle=C,s.lineWidth=3,s.lineCap="round",s.lineJoin="round",s.lineTo(a,n),s.stroke(),s.beginPath(),s.moveTo(a,n),e&&m({roomCode:e.roomCode,stroke:{points:[a,n],color:C,width:3},playerId:P})},onMouseUp:k,onMouseLeave:k,style:{display:"block",width:"100%",cursor:S?"crosshair":"default"}})}),S&&(0,t.jsxs)(o.Box,{display:"flex",gap:2,alignItems:"center",mb:2,children:[(0,t.jsx)(ei.default,{}),(0,t.jsx)(eo.ToggleButtonGroup,{value:C,exclusive:!0,onChange:(e,t)=>t&&T(t),size:"small",children:el.map(e=>(0,t.jsx)(ea.ToggleButton,{value:e,children:(0,t.jsx)(o.Box,{sx:{width:24,height:24,bgcolor:e,border:"1px solid #ccc"}})},e))}),(0,t.jsx)(D.IconButton,{onClick:()=>{if(!W.current||!e)return;let t=W.current.getContext("2d");t&&t.clearRect(0,0,W.current.width,W.current.height),g(e.roomCode)},color:"error",children:(0,t.jsx)(en.default,{})})]}),!S&&(0,t.jsx)(t.Fragment,{children:!v&&j>0?(0,t.jsxs)(o.Box,{display:"flex",gap:2,children:[(0,t.jsx)(l.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Type your guess...",value:p,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"!==e.key||v||G()},autoFocus:!0}),(0,t.jsx)(d.Button,{variant:"contained",endIcon:(0,t.jsx)(Z.default,{}),onClick:G,disabled:!p.trim(),sx:{minWidth:120},children:"Guess"})]}):v?(0,t.jsx)(h.Alert,{severity:"success",children:"Your guess has been submitted!"}):(0,t.jsx)(h.Alert,{severity:"info",children:"Time's up!"})})]})}),(0,t.jsx)(c.Grid,{item:!0,xs:12,md:4,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Scoreboard"}),(0,t.jsx)(z.List,{children:N.map((r,s)=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsxs)(F.ListItemAvatar,{children:[(0,t.jsx)(u.Chip,{label:s+1,size:"small",color:0===s?"primary":"default",sx:{mr:1}}),(0,t.jsx)($.Avatar,{src:r.avatar,children:r.name.charAt(0).toUpperCase()})]}),(0,t.jsx)(E.ListItemText,{primary:r.name,secondary:`${r.score} pts`}),r.id===e.currentDrawerId&&(0,t.jsx)(u.Chip,{label:"Drawing",size:"small",color:"primary"})]},r.id))})]})})]})})}function ec(){let{gameRoom:e,players:r,submitAnswer:g}=R(),[p,y]=(0,s.useState)(""),[j,f]=(0,s.useState)(120),[v,b]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{if(e?.state==="playing"&&j>0){let e=setInterval(()=>{f(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(e)}},[e?.state,j]),(0,s.useEffect)(()=>{e?.state==="playing"&&(f(120),b(!1),y(""))},[e?.currentRound]),!e)return null;let C=()=>{p.trim()&&(g({roomCode:e.roomCode,answer:p.trim()}),b(!0))},T=[...r].sort((e,t)=>t.score-e.score),w=[{question:"I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?",hint:"Think about sound..."},{question:"What has keys, but no locks; space, but no room; and you can enter, but can't go inside?",hint:"You use it every day..."},{question:"The more you take, the more you leave behind. What am I?",hint:"Think about walking..."}],B=w[(e.currentRound-1)%w.length];return(0,t.jsx)(a.Container,{maxWidth:"lg",sx:{py:4},children:(0,t.jsxs)(c.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(c.Grid,{item:!0,xs:12,md:8,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsxs)(o.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,t.jsxs)(i.Typography,{variant:"h5",fontWeight:"bold",children:["Puzzle ",e.currentRound," of ",e.maxRounds]}),(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(Q.default,{}),label:`${Math.floor(j/60)}:${(j%60).toString().padStart(2,"0")}`,color:j<30?"error":"primary",sx:{fontSize:"1.2rem",px:1}})]}),(0,t.jsx)(Y.LinearProgress,{variant:"determinate",value:j/120*100,color:j<30?"error":"primary",sx:{height:8,borderRadius:1,mb:3}}),(0,t.jsx)(x.Card,{sx:{mb:3,bgcolor:"primary.main",color:"primary.contrastText"},children:(0,t.jsxs)(m.CardContent,{children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,children:"ðŸ§© Riddle Time!"}),(0,t.jsx)(i.Typography,{variant:"h5",sx:{my:3},children:B.question}),(0,t.jsxs)(h.Alert,{severity:"info",sx:{mt:2},children:[(0,t.jsx)("strong",{children:"Hint:"})," ",B.hint]})]})}),(0,t.jsxs)(n.Paper,{variant:"outlined",sx:{p:2,mb:3,bgcolor:"background.default"},children:[(0,t.jsx)(i.Typography,{variant:"subtitle2",gutterBottom:!0,color:"text.secondary",children:"ðŸ’¡ Team Discussion Area"}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",children:"Work together with your team to solve the puzzle!"})]}),!v&&j>0?(0,t.jsxs)(o.Box,{children:[(0,t.jsx)(l.TextField,{fullWidth:!0,variant:"outlined",placeholder:"Type your answer...",value:p,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"!==e.key||v||C()},multiline:!0,rows:2,sx:{mb:2}}),(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,endIcon:(0,t.jsx)(Z.default,{}),onClick:C,disabled:!p.trim(),children:"Submit Answer"})]}):v?(0,t.jsxs)(h.Alert,{severity:"success",icon:(0,t.jsx)(et.default,{}),children:[(0,t.jsx)("strong",{children:"Answer submitted!"})," Waiting for other players..."]}):(0,t.jsx)(h.Alert,{severity:"info",children:"Time's up! Revealing answer..."})]})}),(0,t.jsxs)(c.Grid,{item:!0,xs:12,md:4,children:[(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3,mb:3},children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Team Scores"}),(0,t.jsx)(z.List,{children:T.map((e,s)=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsxs)(F.ListItemAvatar,{children:[(0,t.jsx)(u.Chip,{label:s+1,size:"small",color:0===s?"primary":"default",sx:{mr:1}}),(0,t.jsx)($.Avatar,{src:e.avatar,children:e.name.charAt(0).toUpperCase()})]}),(0,t.jsx)(E.ListItemText,{primary:e.name,secondary:`${e.score} pts`}),v&&e.id===r[0]?.id&&(0,t.jsx)(et.default,{color:"success"})]},e.id))})]}),(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsx)(i.Typography,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"How to Play"}),(0,t.jsx)(i.Typography,{variant:"body2",paragraph:!0,children:"ðŸ¤” Read the puzzle carefully"}),(0,t.jsx)(i.Typography,{variant:"body2",paragraph:!0,children:"ðŸ’¬ Discuss with your team"}),(0,t.jsx)(i.Typography,{variant:"body2",paragraph:!0,children:"ðŸ’¡ Use the hint if you're stuck"}),(0,t.jsx)(i.Typography,{variant:"body2",children:"âœ… Submit your answer before time runs out!"})]})]})]})})}var eu=e.i(46153),eh=e.i(507950);function ex({roomCode:e,onSelectGame:r}){let[l,u]=(0,s.useState)(!1),g=[{type:"guessing",icon:(0,t.jsx)(eu.default,{sx:{fontSize:80,color:"primary.main"}}),title:"Guessing Game",description:"Give clues and guess words",duration:"60 seconds per round",players:"2-16 players",color:"#4B5DBD"},{type:"drawing",icon:(0,t.jsx)(ei.default,{sx:{fontSize:80,color:"secondary.main"}}),title:"Drawing Game",description:"Draw and guess in real-time",duration:"90 seconds per round",players:"2-16 players",color:"#6c757d"},{type:"puzzle",icon:(0,t.jsx)(eh.default,{sx:{fontSize:80,color:"success.main"}}),title:"Puzzle Game",description:"Solve riddles together as a team",duration:"120 seconds per round",players:"2-16 players",color:"#28a745"}];return(0,t.jsxs)(a.Container,{maxWidth:"lg",sx:{py:4},children:[(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3,mb:4,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,children:"Your Room Code"}),(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",justifyContent:"center",gap:2,children:[(0,t.jsx)(i.Typography,{variant:"h3",fontWeight:"bold",sx:{letterSpacing:4,fontFamily:"monospace"},children:e}),(0,t.jsx)(D.IconButton,{onClick:()=>{navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),2e3)},sx:{color:"white",bgcolor:"rgba(255,255,255,0.2)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:(0,t.jsx)(U.default,{})})]}),l&&(0,t.jsx)(i.Typography,{variant:"body2",sx:{mt:1},children:"âœ“ Code copied to clipboard!"}),(0,t.jsx)(i.Typography,{variant:"body1",sx:{mt:2,opacity:.9},children:"Share this code with your friends to join"})]}),(0,t.jsxs)(o.Box,{textAlign:"center",mb:4,children:[(0,t.jsx)(i.Typography,{variant:"h3",gutterBottom:!0,fontWeight:"bold",children:"What game are you going to play?"}),(0,t.jsx)(i.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Choose a game type for your room"})]}),(0,t.jsx)(c.Grid,{container:!0,spacing:3,justifyContent:"center",children:g.map(e=>(0,t.jsx)(c.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(x.Card,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-8px)",boxShadow:6}},children:[(0,t.jsxs)(m.CardContent,{sx:{flexGrow:1,textAlign:"center",p:3},children:[(0,t.jsx)(o.Box,{mb:2,children:e.icon}),(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:e.title}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:e.description}),(0,t.jsxs)(o.Box,{mt:2,children:[(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:["â±ï¸ ",e.duration]}),(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:["ðŸ‘¥ ",e.players]})]})]}),(0,t.jsx)(W,{sx:{p:2,pt:0},children:(0,t.jsxs)(d.Button,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>r(e.type),sx:{bgcolor:e.color,"&:hover":{bgcolor:e.color,filter:"brightness(0.9)"}},children:["Select ",e.title]})})]})},e.type))}),(0,t.jsxs)(h.Alert,{severity:"info",sx:{mt:4},children:[(0,t.jsx)("strong",{children:"Note:"})," Once you select a game type, all players joining with your room code will enter that game. You can start the game once at least 2 players have joined."]})]})}function em({roomCode:e,playerName:r}){let[a,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),h=(0,s.useRef)(null),x=(0,s.useRef)((0,I.getSocket)());(0,s.useEffect)(()=>{let e=x.current,t=e=>{d(t=>[...t,e])};return e.on("game:chat-message",t),()=>{e.off("game:chat-message",t)}},[]),(0,s.useEffect)(()=>{h.current?.scrollIntoView({behavior:"smooth"})},[a]);let m=()=>{c.trim()&&(x.current.emit("game:chat",{roomCode:e,message:c.trim(),playerName:r}),u(""))};return(0,t.jsxs)(n.Paper,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,t.jsx)(o.Box,{sx:{p:2,bgcolor:"primary.main",color:"white"},children:(0,t.jsx)(i.Typography,{variant:"h6",fontWeight:"bold",children:"Chat"})}),(0,t.jsx)(A.Divider,{}),(0,t.jsx)(o.Box,{sx:{flex:1,overflow:"auto",p:2},children:(0,t.jsxs)(z.List,{dense:!0,children:[a.map((e,r)=>(0,t.jsx)(L.ListItem,{alignItems:"flex-start",sx:{py:.5},children:(0,t.jsx)(E.ListItemText,{primary:(0,t.jsx)(i.Typography,{variant:"body2",component:"span",fontWeight:"bold",children:e.playerName}),secondary:(0,t.jsx)(i.Typography,{variant:"body2",component:"span",children:e.message})})},r)),(0,t.jsx)("div",{ref:h})]})}),(0,t.jsx)(A.Divider,{}),(0,t.jsxs)(o.Box,{sx:{p:2,display:"flex",gap:1},children:[(0,t.jsx)(l.TextField,{fullWidth:!0,size:"small",placeholder:"Type a message...",value:c,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},variant:"outlined"}),(0,t.jsx)(D.IconButton,{color:"primary",onClick:m,disabled:!c.trim(),children:(0,t.jsx)(Z.default,{})})]})]})}function eg(){let{gameRoom:e,players:r,socketId:s,leaveRoom:l,setGameType:x,startGame:m}=R();if(!e)return null;let g=r.find(e=>e.id===s),p=g?.isHost||!1,y="lobby"===e.state,j="playing"===e.state,f="gameEnd"===e.state,v=()=>{confirm("Are you sure you want to leave the room?")&&l()};if(j)switch(e.gameType){case"guessing":return(0,t.jsx)(es,{});case"drawing":return(0,t.jsx)(ed,{});case"puzzle":return(0,t.jsx)(ec,{});default:return null}if(f){let e=[...r].sort((e,t)=>t.score-e.score);return(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4,textAlign:"center"},children:[(0,t.jsx)(V.default,{sx:{fontSize:80,color:"gold",mb:2}}),(0,t.jsx)(i.Typography,{variant:"h3",gutterBottom:!0,fontWeight:"bold",children:"Game Over!"}),(0,t.jsxs)(o.Box,{my:4,children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,children:"Final Scores"}),(0,t.jsx)(z.List,{children:e.map((e,r)=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsxs)(F.ListItemAvatar,{children:[(0,t.jsx)(u.Chip,{label:r+1,color:0===r?"primary":"default",sx:{mr:1}}),(0,t.jsx)($.Avatar,{src:e.avatar,children:e.name.charAt(0).toUpperCase()})]}),(0,t.jsx)(E.ListItemText,{primary:e.name,secondary:`${e.score} points`})]},e.id))})]}),(0,t.jsx)(d.Button,{variant:"contained",size:"large",onClick:v,sx:{mt:2},children:"Back to Lobby"})]})})}return y&&!e.gameType&&p?(0,t.jsx)(ex,{roomCode:e.roomCode,onSelectGame:t=>{e&&x(e.roomCode,t)}}):!y||e.gameType||p?(0,t.jsx)(a.Container,{maxWidth:"lg",sx:{py:4},children:(0,t.jsxs)(c.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(c.Grid,{item:!0,xs:12,md:8,children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3,mb:3},children:[(0,t.jsxs)(o.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,t.jsxs)(o.Box,{children:[(0,t.jsxs)(i.Typography,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:["Room: ",e.roomCode]}),(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:[r.length," / 16 players"]})]}),(0,t.jsxs)(o.Box,{children:[(0,t.jsx)(D.IconButton,{onClick:()=>{navigator.clipboard.writeText(e.roomCode)},color:"primary",children:(0,t.jsx)(U.default,{})}),(0,t.jsx)(d.Button,{variant:"outlined",startIcon:(0,t.jsx)(N.default,{}),onClick:v,color:"error",children:"Leave"})]})]}),(0,t.jsx)(A.Divider,{sx:{my:2}}),(0,t.jsxs)(h.Alert,{severity:"success",sx:{mb:3},children:[(0,t.jsx)("strong",{children:"Game Type:"})," ","guessing"===e.gameType?"Guessing Game":"drawing"===e.gameType?"Drawing Game":"Puzzle Game"]}),p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,startIcon:(0,t.jsx)(M.default,{}),onClick:()=>{p&&e.gameType&&m({roomCode:e.roomCode,gameType:e.gameType,maxRounds:5})},disabled:r.length<2,children:"Start Game"}),r.length<2&&(0,t.jsx)(h.Alert,{severity:"info",sx:{mt:2},children:"Need at least 2 players to start"})]}):(0,t.jsx)(h.Alert,{severity:"info",children:"Waiting for host to start the game..."})]})}),(0,t.jsxs)(c.Grid,{item:!0,xs:12,md:4,children:[(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:3},children:[(0,t.jsxs)(i.Typography,{variant:"h6",gutterBottom:!0,children:["Players (",r.length,"/16)"]}),(0,t.jsx)(z.List,{children:r.map(e=>(0,t.jsxs)(L.ListItem,{children:[(0,t.jsx)(F.ListItemAvatar,{children:(0,t.jsx)($.Avatar,{src:e.avatar,children:e.name.charAt(0).toUpperCase()})}),(0,t.jsx)(E.ListItemText,{primary:e.name,secondary:e.isHost?"Host":"Player"}),e.isHost&&(0,t.jsx)(u.Chip,{label:"Host",size:"small",color:"primary"})]},e.id))})]}),(0,t.jsx)(n.Paper,{elevation:3,sx:{p:0,mt:2,height:300},children:(0,t.jsx)(em,{roomCode:e.roomCode,playerName:g?.name||"Guest"})})]})]})}):(0,t.jsx)(a.Container,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsx)(i.Typography,{variant:"h4",gutterBottom:!0,children:"Waiting for Host"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",paragraph:!0,children:"The host is selecting the game type..."}),(0,t.jsxs)(i.Typography,{variant:"h6",fontWeight:"bold",sx:{mt:3},children:["Room Code: ",e.roomCode]}),(0,t.jsx)(d.Button,{variant:"outlined",onClick:v,sx:{mt:2},children:"Leave Room"})]})})}function ep(){let{user:e,isAuthenticated:r,isLoading:g}=(0,G.useAuth)(),{gameRoom:p,players:y,isConnected:j,error:f,createRoom:v,joinRoom:b}=R(),[C,T]=(0,s.useState)(""),[w,B]=(0,s.useState)(""),[I,z]=(0,s.useState)(""),[L,F]=(0,s.useState)("menu"),[E,$]=(0,s.useState)(!1),[D,N]=(0,s.useState)([]),[U,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(r&&e&&!C){let t=e.name||e.email?.split("@")[0]||"";t&&(T(t),console.log("[GameLobby] Auto-filled player name from user profile:",t))}},[r,e,C]),(0,s.useEffect)(()=>{console.log("[GameLobby] Auth state:",{isAuthenticated:r,authLoading:g,userName:e?.name,userEmail:e?.email,playerName:C})},[r,g,e,C]);let V=async()=>{try{M(!0);let e=await fetch("https://api.ventures.isharehow.app/api/game/active-rooms"),t=await e.json();N(t.rooms||[])}catch(e){console.error("Error fetching active rooms:",e)}finally{M(!1)}};return((0,s.useEffect)(()=>{"menu"===L&&V()},[L]),(0,s.useEffect)(()=>{let e=window.socket;if(e)return e.on("game:rooms-updated",V),()=>e.off("game:rooms-updated",V)},[]),p)?(0,t.jsx)(eg,{}):(0,t.jsxs)(a.Container,{maxWidth:"lg",sx:{py:4},children:[(0,t.jsxs)(o.Box,{textAlign:"center",mb:4,children:[(0,t.jsx)(i.Typography,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"ðŸŽ® LookUp.Cafe"}),(0,t.jsx)(i.Typography,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"Play Realtime Mini-Games with Family & Friends"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",children:"Up to 16 players â€¢ Guessing Games â€¢ Drawing Games â€¢ Puzzles"}),!j&&(0,t.jsx)(h.Alert,{severity:"warning",sx:{mt:2,maxWidth:600,mx:"auto"},children:(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",gap:1,children:[(0,t.jsx)(P.CircularProgress,{size:16}),(0,t.jsx)("span",{children:"Connecting to game server..."})]})}),r&&e?.name&&(0,t.jsxs)(h.Alert,{severity:"info",sx:{mt:2,maxWidth:600,mx:"auto"},children:["Welcome, ",(0,t.jsx)("strong",{children:e.name}),"! Your display name will be used automatically."]}),f&&(0,t.jsx)(h.Alert,{severity:"error",sx:{mt:2,maxWidth:600,mx:"auto"},children:f})]}),"menu"===L&&(0,t.jsxs)(c.Grid,{container:!0,spacing:3,justifyContent:"center",children:[(0,t.jsx)(c.Grid,{item:!0,xs:12,md:5,children:(0,t.jsxs)(x.Card,{elevation:3,children:[(0,t.jsx)(m.CardContent,{children:(0,t.jsxs)(o.Box,{textAlign:"center",mb:2,children:[(0,t.jsx)(S.default,{sx:{fontSize:60,color:"primary.main"}}),(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Create Room"}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",children:"Start a new game and invite friends"})]})}),(0,t.jsx)(W,{sx:{justifyContent:"center",pb:3},children:(0,t.jsx)(d.Button,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>F("create"),sx:{maxWidth:300},children:j?"Create Room":"Create Room..."})})]})}),(0,t.jsx)(c.Grid,{item:!0,xs:12,md:5,children:(0,t.jsxs)(x.Card,{elevation:3,children:[(0,t.jsx)(m.CardContent,{children:(0,t.jsxs)(o.Box,{textAlign:"center",mb:2,children:[(0,t.jsx)(k.default,{sx:{fontSize:60,color:"secondary.main"}}),(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Join Room"}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",children:"Enter a room code to join friends"})]})}),(0,t.jsx)(W,{sx:{justifyContent:"center",pb:3},children:(0,t.jsx)(d.Button,{variant:"outlined",size:"large",fullWidth:!0,onClick:()=>F("join"),sx:{maxWidth:300},children:j?"Join Room":"Join Room..."})})]})}),(0,t.jsxs)(c.Grid,{item:!0,xs:12,children:[(0,t.jsx)(A.Divider,{sx:{my:3}}),(0,t.jsx)(i.Typography,{variant:"h6",textAlign:"center",gutterBottom:!0,children:"ðŸŽ® Current Running Games"}),U?(0,t.jsx)(o.Box,{textAlign:"center",py:2,children:(0,t.jsx)(P.CircularProgress,{size:24})}):0===D.length?(0,t.jsx)(h.Alert,{severity:"info",sx:{maxWidth:600,mx:"auto"},children:"No active games right now. Create a room to start playing!"}):(0,t.jsx)(c.Grid,{container:!0,spacing:2,justifyContent:"center",sx:{mt:1},children:D.map(e=>(0,t.jsx)(c.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(x.Card,{elevation:2,children:[(0,t.jsxs)(m.CardContent,{children:[(0,t.jsxs)(o.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,t.jsx)(u.Chip,{label:e.roomCode,color:"primary",sx:{fontFamily:"monospace"}}),(0,t.jsx)(u.Chip,{label:"lobby"===e.state?"Lobby":`Round ${e.currentRound}/${e.maxRounds}`,size:"small",color:"lobby"===e.state?"default":"success"})]}),(0,t.jsxs)(i.Typography,{variant:"subtitle1",fontWeight:"bold",children:["guessing"===e.gameType&&"ðŸ¤” Guessing Game","drawing"===e.gameType&&"ðŸŽ¨ Drawing Game","puzzle"===e.gameType&&"ðŸ§© Puzzle Game",!e.gameType&&"â³ Setting up..."]}),(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:["Host: ",e.hostName]}),(0,t.jsxs)(i.Typography,{variant:"body2",color:"text.secondary",children:["Players: ",e.playerCount,"/",e.maxPlayers]})]}),(0,t.jsx)(W,{children:(0,t.jsx)(d.Button,{size:"small",variant:"contained",fullWidth:!0,onClick:()=>{B(e.roomCode),F("join")},disabled:e.playerCount>=e.maxPlayers,children:e.playerCount>=e.maxPlayers?"Full":"lobby"===e.state?"Join":"Join (In Progress)"})})]})},e.roomCode))})]})]}),"create"===L&&(0,t.jsx)(o.Box,{maxWidth:600,mx:"auto",children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Create New Room"}),!j&&(0,t.jsx)(h.Alert,{severity:"warning",sx:{mb:2},children:(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",gap:1,children:[(0,t.jsx)(P.CircularProgress,{size:16}),(0,t.jsx)("span",{children:"Waiting for game server connection..."})]})}),(0,t.jsx)(l.TextField,{fullWidth:!0,label:"Your Name",value:C,onChange:e=>T(e.target.value),margin:"normal",helperText:r?"Using your account name":"Enter a display name",disabled:r&&!!C}),(0,t.jsx)(l.TextField,{fullWidth:!0,label:"Custom Room Code (Optional)",value:I,onChange:e=>z(e.target.value.toUpperCase()),margin:"normal",placeholder:"Enter 9-digit code or leave blank for auto-generate",helperText:"Create your own 9-character code, or leave blank to auto-generate",inputProps:{maxLength:9,style:{textTransform:"uppercase",fontFamily:"monospace",fontSize:"1.2rem",letterSpacing:"0.1em"}}}),(0,t.jsxs)(o.Box,{mt:3,display:"flex",gap:2,children:[(0,t.jsx)(d.Button,{variant:"outlined",onClick:()=>F("menu"),fullWidth:!0,children:"Back"}),(0,t.jsx)(d.Button,{variant:"contained",onClick:()=>{if(!C.trim())return void alert("Please enter your name");if(I.trim()){let e=I.trim().toUpperCase();if(9!==e.length)return void alert("Room code must be exactly 9 characters");if(!/^[A-Z0-9]+$/.test(e))return void alert("Room code can only contain letters and numbers")}v({playerName:C.trim(),userId:e?.id,avatar:e?.avatar,roomCode:I.trim().toUpperCase()||void 0})},fullWidth:!0,disabled:!C.trim()||!j,startIcon:j?null:(0,t.jsx)(P.CircularProgress,{size:20,color:"inherit"}),children:j?"Create Room":"Connecting..."})]})]})}),"join"===L&&(0,t.jsx)(o.Box,{maxWidth:600,mx:"auto",children:(0,t.jsxs)(n.Paper,{elevation:3,sx:{p:4},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Join Room"}),!j&&(0,t.jsx)(h.Alert,{severity:"warning",sx:{mb:2},children:(0,t.jsxs)(o.Box,{display:"flex",alignItems:"center",gap:1,children:[(0,t.jsx)(P.CircularProgress,{size:16}),(0,t.jsx)("span",{children:"Waiting for game server connection..."})]})}),(0,t.jsx)(l.TextField,{fullWidth:!0,label:"Your Name",value:C,onChange:e=>T(e.target.value),margin:"normal",helperText:r?"Using your account name":"Enter a display name",disabled:r&&!!C}),(0,t.jsx)(l.TextField,{fullWidth:!0,label:"Room Code",value:w,onChange:e=>B(e.target.value.toUpperCase()),margin:"normal",helperText:"Enter the 9-character room code",inputProps:{maxLength:9,style:{textTransform:"uppercase"}}}),(0,t.jsxs)(o.Box,{mt:3,display:"flex",gap:2,children:[(0,t.jsx)(d.Button,{variant:"outlined",onClick:()=>F("menu"),fullWidth:!0,children:"Back"}),(0,t.jsx)(d.Button,{variant:"contained",onClick:()=>{C.trim()?w.trim()&&9===w.length?b({roomCode:w.trim().toUpperCase(),playerName:C.trim(),userId:e?.id,avatar:e?.avatar}):alert("Please enter a valid 9-character room code"):alert("Please enter your name")},fullWidth:!0,disabled:!C.trim()||9!==w.length||!j,startIcon:j?null:(0,t.jsx)(P.CircularProgress,{size:20,color:"inherit"}),children:j?"Join Room":"Connecting..."})]})]})})]})}e.s(["default",0,function(){return(0,t.jsx)(r.default,{active:"lookupcafe",children:(0,t.jsx)(ep,{})})}],19250)},952856,(e,t,r)=>{let s="/lookupcafe";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(19250)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})}]);