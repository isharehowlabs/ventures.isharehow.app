(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58176,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart")},49876,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)([(0,a.jsx)("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,a.jsx)("circle",{cx:"15",cy:"13",r:"1"},"2"),(0,a.jsx)("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47"},"3")],"SupportAgent")},28018,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)([(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),(0,a.jsx)("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")],"PeopleAlt")},59096,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline")},20534,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language")},96181,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},46242,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"Key")},34164,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},12214,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},26712,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},19391,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},25449,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},27367,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},16875,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},94556,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},27325,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline")},26482,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[s,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[p,h]=(0,t.useState)([]),[f,m]=(0,t.useState)({}),[x,g]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null);return{files:e,components:i,tokens:o,likedComponents:s,savedComponents:d,draftedComponents:p,componentStatuses:f,isLoading:x,error:y,fetchFiles:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),i=await t.json();n(i.projects||[])}catch(e){j(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await n.json()).file}catch(e){throw j(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),i=await n.json();return a(i.components||[]),i.components}catch(e){throw j(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),i=await n.json();return l(i.tokens||[]),i.tokens}catch(e){throw j(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:n})}),o=await a.json();return o.success&&(m(r=>({...r,[e]:{...r[e],liked:t}})),t?c(t=>t.includes(e)?t:[...t,e]):c(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:n})}),o=await a.json();return o.success&&(m(r=>({...r,[e]:{...r[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:n})}),o=await a.json();return o.success&&(m(r=>({...r,[e]:{...r[e],drafted:t}})),t?h(t=>t.includes(e)?t:[...t,e]):h(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),n=await t.json();return c(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),n=await t.json();return u(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),n=await t.json();return h(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),i=await n.json();return m(t=>({...t,[e]:{liked:i.liked||!1,saved:i.saved||!1,drafted:i.drafted||!1}})),i}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),j(null);let t=(0,r.getBackendUrl)(),n=e?JSON.stringify({componentIds:e}):void 0,i=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:n}),a=await i.json();if(a.preferences){m(e=>{let t={...e};return Object.entries(a.preferences).forEach(([e,r])=>{t[e]={liked:r.liked||!1,saved:r.saved||!1,drafted:r.drafted||!1}}),t});let e=Object.entries(a.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(a.preferences).filter(([e,t])=>t.saved).map(([e])=>e),r=Object.entries(a.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);c(e),u(t),h(r)}return a}catch(e){throw j(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>n])},38568,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[s,c]=(0,t.useState)(null),d=async e=>{try{l(!0),c(null);let t=(0,r.getBackendUrl)(),i=new URL(`${t}/api/mcp/code-links`);e&&i.searchParams.append("figmaFileId",e);let a=await fetch(i.toString(),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch code links");let o=await a.json();n(o.links||[])}catch(e){c(e.message)}finally{l(!1)}},u=async()=>{try{l(!0),c(null);let e=(0,r.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let n=await t.json();a(n.tokens||[])}catch(e){c(e.message)}finally{l(!1)}};return{links:e,tokens:i,isLoading:o,error:s,linkComponentToCode:async(e,t,n,i)=>{try{l(!0),c(null);let a=(0,r.getBackendUrl)(),o=await fetch(`${a}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:n,figmaFileId:i})});if(!o.ok)throw Error("Failed to link component");let s=await o.json();return await d(),s}catch(e){throw c(e.message),e}finally{l(!1)}},fetchCodeLinks:d,syncTokens:async e=>{try{l(!0),c(null);let t=(0,r.getBackendUrl)(),n=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!n.ok)throw Error("Failed to sync tokens");let i=await n.json();return await u(),i}catch(e){throw c(e.message),e}finally{l(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{l(!0),c(null);let n=(0,r.getBackendUrl)(),i=await fetch(`${n}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!i.ok)throw Error("Failed to generate code");return await i.json()}catch(e){throw c(e.message),e}finally{l(!1)}}}}e.s(["useMCP",()=>n])},62438,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},18805,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},28097,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},27796,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},11500,e=>{"use strict";let t,r,n,i;var a,o,l,s,c,d,u,p,h=e.i(44855),f=e.i(20887),m=e.i(21504),x=e.i(58891),g=e.i(83344),y=e.i(74614),j=e.i(72204),b=e.i(15915),v=e.i(32327),S=e.i(54385),C=e.i(65790),w=e.i(83378),k=e.i(70095),T=e.i(45162),E=e.i(3430),A=e.i(37025),I=e.i(9109),P=e.i(58176),O=e.i(49876),B=e.i(28018),R=e.i(59096),F=e.i(20534),$=e.i(31255),L=e.i(33948),M=e.i(18295),W=e.i(92279),N=e.i(47379),z=e.i(75557),D=e.i(92378),U=e.i(15708),_=e.i(83161),q=e.i(47617),H=e.i(39972),G=e.i(20161),X=e.i(13654);function V({open:e,onClose:t}){let r=(0,g.useRouter)(),[n,i]=(0,x.useState)({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),[a,o]=(0,x.useState)(null),[l,s]=(0,x.useState)(!1),c=e=>t=>{i(r=>({...r,[e]:t.target.value})),o(null)},d=async()=>{if(!n.name||!n.email||!n.phone)return void o("Please fill in all required fields (Name, Email, Phone)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return void o("Please enter a valid email address");s(!0),o(null);try{let e=(0,X.getBackendUrl)(),a=await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:n.name,email:n.email,company:n.company,phone:n.phone||void 0,tier:n.tier||void 0,notes:n.notes||void 0,marketingBudget:n.marketingBudget||void 0,status:"pending"})});if(!a.ok){let e=await a.json().catch(()=>({error:"Failed to create client"}));throw Error(e.error||"Failed to create client")}if(t(),n.tier){let e=new URLSearchParams({name:n.name,email:n.email,company:n.company,tier:n.tier});r.push(`/demo?${e.toString()}`)}else window.location.reload();i({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""})}catch(e){o(e.message||"Failed to add client. Please try again.")}finally{s(!1)}},u=()=>{i({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),o(null),t()};return(0,h.jsxs)(L.Dialog,{open:e,onClose:u,maxWidth:"sm",fullWidth:!0,children:[(0,h.jsxs)(M.DialogTitle,{children:[(0,h.jsx)(b.Typography,{variant:"h6",fontWeight:700,children:"Add New Client"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Add a client lead and send them to the sign-up page"})]}),(0,h.jsx)(W.DialogContent,{children:(0,h.jsxs)(U.Stack,{spacing:3,sx:{mt:1},children:[a&&(0,h.jsx)(I.Alert,{severity:"error",onClose:()=>o(null),children:a}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Client Name",required:!0,value:n.name,onChange:c("name"),placeholder:"John Doe"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Email Address",type:"email",required:!0,value:n.email,onChange:c("email"),placeholder:"john@company.com"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Company Name (Optional)",value:n.company,onChange:c("company"),placeholder:"Company Inc."}),(0,h.jsx)(D.TextField,{fullWidth:!0,required:!0,label:"Phone Number",type:"tel",value:n.phone,onChange:c("phone"),placeholder:"+1 (555) 123-4567"}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Recommended Tier"}),(0,h.jsxs)(H.Select,{value:n.tier,label:"Recommended Tier",onChange:e=>{i(t=>({...t,tier:e.target.value}))},children:[(0,h.jsx)(G.MenuItem,{value:"",children:"None"}),(0,h.jsx)(G.MenuItem,{value:"starter",children:"Starter"}),(0,h.jsx)(G.MenuItem,{value:"professional",children:"Professional"}),(0,h.jsx)(G.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:n.notes,onChange:c("notes"),placeholder:"Any additional information about this client..."}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Marketing Budget",value:n.marketingBudget,onChange:c("marketingBudget"),placeholder:"Do you have a marketing budget available or willing to get one?",helperText:"Do you have a marketing budget available or willing to get one?"})]})}),(0,h.jsxs)(N.DialogActions,{sx:{p:2},children:[(0,h.jsx)(z.Button,{onClick:u,children:"Cancel"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:d,disabled:l,children:l?"Sending...":"Send to Sign-Up"})]})]})}var J=e.i(54704),K=e.i(35153),K=K,Y=e.i(10251),Q=e.i(48177),Z=e.i(45680),ee=e.i(24918),et=e.i(11425),er=e.i(96181),en=e.i(46242),ei=e.i(34164);function ea(){let e,[t,r]=(0,x.useState)("all"),[n,i]=(0,x.useState)([]),[a,o]=(0,x.useState)(!1),[l,s]=(0,x.useState)(!0),[c,d]=(0,x.useState)(null),[u,p]=(0,x.useState)(!1),[f,m]=(0,x.useState)(!1),[g,j]=(0,x.useState)(null),[v,S]=(0,x.useState)(!1),[w,k]=(0,x.useState)({propertyId:"",measurementId:"",apiKey:"",viewId:""}),[T,E]=(0,x.useState)(""),[P,O]=(0,x.useState)(!1),[B,R]=(0,x.useState)(null),[F,$]=(0,x.useState)(!1);(0,x.useEffect)(()=>{(async()=>{try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();i(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}finally{s(!1)}})()},[]),(0,x.useEffect)(()=>{if(t&&"all"!==t){let e=n.find(e=>e.id===t);e&&E(e.googleAnalyticsPropertyKey||"")}else E("")},[t,n]);let L=async()=>{o(!0);try{await new Promise(e=>setTimeout(e,2e3)),d(new Date)}catch(e){console.error("Failed to sync analytics:",e)}finally{o(!1)}},M=e=>t=>{k(r=>({...r,[e]:t.target.value})),j(null)},W=async e=>{e.preventDefault(),m(!0),j(null),S(!1);try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/analytics/connect`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)});if(!t.ok){let e=await t.json().catch(()=>({message:"Failed to connect"}));throw Error(e.message||"Failed to connect to Google Analytics")}S(!0),p(!1),k({propertyId:"",measurementId:"",apiKey:"",viewId:""}),setTimeout(()=>{L()},1e3)}catch(e){j(e.message||"An error occurred while connecting to Google Analytics")}finally{m(!1)}},N=async()=>{if(!t||"all"===t)return void R("Please select a client first");O(!0),R(null),$(!1);try{let e=(0,X.getBackendUrl)(),r=await fetch(`${e}/api/creative/clients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({googleAnalyticsPropertyKey:T||null})});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to save"}));throw Error(e.error||"Failed to save analytics key")}let n=await r.json();i(e=>e.map(e=>e.id===t?{...e,googleAnalyticsPropertyKey:n.googleAnalyticsPropertyKey}:e)),$(!0),setTimeout(()=>{$(!1)},3e3)}catch(e){R(e.message||"An error occurred while saving the analytics key")}finally{O(!1)}};return(0,h.jsxs)(y.Box,{children:[(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Analytics & Activity"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Track client usage, activity, and system analytics with Google Analytics integration"})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(z.Button,{variant:"outlined",startIcon:(0,h.jsx)(ee.default,{}),onClick:L,disabled:a,children:a?(0,h.jsx)(A.CircularProgress,{size:20}):"Sync Analytics"}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(Z.default,{}),onClick:()=>{console.log("Exporting analytics report...")},children:"Export Report"})]})]}),c&&(0,h.jsxs)(I.Alert,{severity:"success",sx:{mb:3},children:["Last synced: ",c.toLocaleString()]}),(0,h.jsxs)(C.Paper,{elevation:2,sx:{p:3,mb:3,bgcolor:"primary.main",color:"white"},children:[(0,h.jsxs)(U.Stack,{spacing:2,children:[(0,h.jsx)(b.Typography,{variant:"h6",fontWeight:700,children:"Google Analytics Integration"}),(0,h.jsx)(b.Typography,{variant:"body2",sx:{opacity:.9},children:"Connect your Google Analytics account to import project data for clients. Analytics data will be automatically synced and displayed here."}),(0,h.jsx)(z.Button,{variant:"contained",size:"large",endIcon:u?(0,h.jsx)(er.default,{}):(0,h.jsx)(et.default,{}),sx:{bgcolor:"white",color:"primary.main",alignSelf:"flex-start","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},onClick:()=>{p(!u),j(null),S(!1)},children:"Connect Google Analytics"})]}),(0,h.jsx)(K.default,{in:u,children:(0,h.jsx)(y.Box,{component:"form",onSubmit:W,sx:{mt:3,p:3,bgcolor:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)"},children:(0,h.jsxs)(U.Stack,{spacing:3,children:[v&&(0,h.jsx)(I.Alert,{severity:"success",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white"},children:"Successfully connected to Google Analytics! Syncing data..."}),g&&(0,h.jsx)(I.Alert,{severity:"error",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white"},children:g}),(0,h.jsx)(b.Typography,{variant:"subtitle1",fontWeight:600,sx:{color:"white"},children:"Enter your Google Analytics credentials"}),(0,h.jsx)(D.TextField,{fullWidth:!0,required:!0,label:"Property ID",value:w.propertyId,onChange:M("propertyId"),placeholder:"G-XXXXXXXXXX",disabled:f,InputProps:{startAdornment:(0,h.jsx)(ei.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your Google Analytics 4 Property ID (starts with G-)"}),(0,h.jsx)(D.TextField,{fullWidth:!0,required:!0,label:"Measurement ID",value:w.measurementId,onChange:M("measurementId"),placeholder:"G-XXXXXXXXXX",disabled:f,InputProps:{startAdornment:(0,h.jsx)(Q.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your GA4 Measurement ID (usually same as Property ID)"}),(0,h.jsx)(D.TextField,{fullWidth:!0,required:!0,label:"API Key",type:"password",value:w.apiKey,onChange:M("apiKey"),placeholder:"Enter your Google Analytics API key",disabled:f,InputProps:{startAdornment:(0,h.jsx)(en.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your Google Analytics API key (from Google Cloud Console)"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"View ID (Optional)",value:w.viewId,onChange:M("viewId"),placeholder:"Enter View ID for Universal Analytics (if applicable)",disabled:f,InputProps:{startAdornment:(0,h.jsx)(ei.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Only needed for Universal Analytics (GA3) properties"}),(0,h.jsx)(Y.Divider,{sx:{borderColor:"rgba(255, 255, 255, 0.2)"}}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,h.jsx)(z.Button,{variant:"outlined",onClick:()=>{p(!1),j(null),S(!1)},disabled:f,sx:{borderColor:"white",color:"white","&:hover":{borderColor:"rgba(255, 255, 255, 0.8)",bgcolor:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"}),(0,h.jsx)(z.Button,{type:"submit",variant:"contained",disabled:f||!w.propertyId||!w.measurementId||!w.apiKey,sx:{bgcolor:"white",color:"primary.main","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"},"&:disabled":{bgcolor:"rgba(255, 255, 255, 0.5)",color:"rgba(0, 0, 0, 0.3)"}},startIcon:f?(0,h.jsx)(A.CircularProgress,{size:20}):(0,h.jsx)(Q.default,{}),children:f?"Connecting...":"Connect & Sync"})]})]})})})]}),(0,h.jsx)(C.Paper,{sx:{p:2,mb:3},children:(0,h.jsxs)(U.Stack,{spacing:2,children:[(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Select Client"}),(0,h.jsxs)(H.Select,{value:t,label:"Select Client",onChange:e=>r(e.target.value),disabled:l,children:[(0,h.jsx)(G.MenuItem,{value:"all",children:"All Clients"}),n.map(e=>(0,h.jsx)(G.MenuItem,{value:e.id,children:e.company||e.name},e.id))]})]}),t&&"all"!==t&&(0,h.jsx)(y.Box,{children:(0,h.jsxs)(U.Stack,{spacing:2,children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",fontWeight:600,color:"text.secondary",children:"Client Google Analytics Property Key"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Add or update the Google Analytics Property ID (G-XXXXXXXXXX) for this client to track their analytics growth."}),F&&(0,h.jsx)(I.Alert,{severity:"success",onClose:()=>$(!1),children:"Analytics key saved successfully!"}),B&&(0,h.jsx)(I.Alert,{severity:"error",onClose:()=>R(null),children:B}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Google Analytics Property Key",value:T,onChange:e=>E(e.target.value),placeholder:"G-XXXXXXXXXX",helperText:"Enter the client's Google Analytics 4 Property ID",InputProps:{startAdornment:(0,h.jsx)(ei.default,{sx:{mr:1,color:"text.secondary"}})},disabled:P}),(0,h.jsx)(z.Button,{variant:"contained",onClick:N,disabled:P||!T.trim(),startIcon:P?(0,h.jsx)(A.CircularProgress,{size:20}):(0,h.jsx)(en.default,{}),sx:{minWidth:150},children:P?"Saving...":"Save Key"})]}),t&&"all"!==t&&(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:(e=n.find(e=>e.id===t),e?.googleAnalyticsPropertyKey?`Current key: ${e.googleAnalyticsPropertyKey}`:"No analytics key set for this client")})]})})]})}),(0,h.jsxs)(J.Grid,{container:!0,spacing:3,children:[(0,h.jsx)(J.Grid,{item:!0,xs:12,md:4,children:(0,h.jsxs)(C.Paper,{sx:{p:3,textAlign:"center"},children:[(0,h.jsx)(Q.default,{sx:{fontSize:40,color:"primary.main",mb:1}}),(0,h.jsx)(b.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Total Sessions"})]})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,md:4,children:(0,h.jsxs)(C.Paper,{sx:{p:3,textAlign:"center"},children:[(0,h.jsx)(Q.default,{sx:{fontSize:40,color:"success.main",mb:1}}),(0,h.jsx)(b.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Active Users"})]})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,md:4,children:(0,h.jsxs)(C.Paper,{sx:{p:3,textAlign:"center"},children:[(0,h.jsx)(Q.default,{sx:{fontSize:40,color:"warning.main",mb:1}}),(0,h.jsx)(b.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Page Views"})]})})]}),(0,h.jsxs)(C.Paper,{sx:{p:3,mt:3},children:[(0,h.jsx)(b.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Recent Activity"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Activity logs will appear here once Google Analytics is connected and synced."})]})]})}var eo=e.i(1051),el=e.i(94367),es=e.i(87225),ec=e.i(33932),ed=e.i(63104),eu=e.i(7656),ep=e.i(50723),eh=e.i(86012),ef=e.i(96335),em=e.i(80622),ex=e.i(84933),eg=e.i(81706),ey=e.i(15127),ej=e.i(96163),eb=e.i(52569),ev=e.i(91947),eS=e.i(30401),eC=e.i(40762),eC=eC,ew=e.i(19575);function ek(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function eT(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return -1}let eE=function(e={}){let{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:i="any",stringify:a,trim:o=!1}=e;return(e,{inputValue:l,getOptionLabel:s})=>{let c=o?l.trim():l;r&&(c=c.toLowerCase()),t&&(c=ek(c));let d=c?e.filter(e=>{let n=(a||s)(e);return r&&(n=n.toLowerCase()),t&&(n=ek(n)),"start"===i?0===n.indexOf(c):n.indexOf(c)>-1}):e;return"number"==typeof n?d.slice(0,n):d}}(),eA=e=>{var t;return null!==e.current&&(null==(t=e.current.parentElement)?void 0:t.contains(document.activeElement))},eI=[],eP=function(e){let{unstable_isActiveElementInListbox:t=eA,unstable_classNamePrefix:r="Mui",autoComplete:n=!1,autoHighlight:i=!1,autoSelect:a=!1,blurOnSelect:o=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:s=!1,componentName:c="useAutocomplete",defaultValue:d=e.multiple?eI:null,disableClearable:u=!1,disableCloseOnSelect:p=!1,disabled:h,disabledItemsFocusable:f=!1,disableListWrap:m=!1,filterOptions:g=eE,filterSelectedOptions:y=!1,freeSolo:j=!1,getOptionDisabled:b,getOptionKey:v,getOptionLabel:S=e=>{var t;return null!=(t=e.label)?t:e},groupBy:C,handleHomeEndKeys:w=!e.freeSolo,id:k,includeInputInList:T=!1,inputValue:E,isOptionEqualToValue:A=(e,t)=>e===t,multiple:I=!1,onChange:P,onClose:O,onHighlightChange:B,onInputChange:R,onOpen:F,open:$,openOnFocus:L=!1,options:M,readOnly:W=!1,selectOnFocus:N=!e.freeSolo,value:z}=e,D=(0,eC.default)(k),U=S;U=e=>{let t=S(e);return"string"!=typeof t?String(t):t};let _=x.useRef(!1),q=x.useRef(!0),H=x.useRef(null),G=x.useRef(null),[X,V]=x.useState(null),[J,K]=x.useState(-1),Y=i?0:-1,Q=x.useRef(Y),[Z,ee]=(0,eS.unstable_useControlled)({controlled:z,default:d,name:c}),[et,er]=(0,eS.unstable_useControlled)({controlled:E,default:"",name:c,state:"inputValue"}),[en,ei]=x.useState(!1),ea=x.useCallback((e,t)=>{let r;if((I?Z.length<t.length:null!==t)||l){if(I)r="";else if(null==t)r="";else{let e=U(t);r="string"==typeof e?e:""}et!==r&&(er(r),R&&R(e,r,"reset"))}},[U,et,I,R,er,l,Z]),[eo,el]=(0,eS.unstable_useControlled)({controlled:$,default:!1,name:c,state:"open"}),[es,ec]=x.useState(!0),ed=!I&&null!=Z&&et===U(Z),eu=eo&&!W,ep=eu?g(M.filter(e=>!(y&&(I?Z:[Z]).some(t=>null!==t&&A(e,t)))),{inputValue:ed&&es?"":et,getOptionLabel:U}):[],eh=(0,ew.usePreviousProps)({filteredOptions:ep,value:Z,inputValue:et});x.useEffect(()=>{let e=Z!==eh.value;en&&!e||(!j||e)&&ea(null,Z)},[Z,ea,en,eh.value,j]);let ef=eo&&ep.length>0&&!W,em=(0,ev.unstable_useEventCallback)(e=>{-1===e?H.current.focus():X.querySelector(`[data-tag-index="${e}"]`).focus()});x.useEffect(()=>{I&&J>Z.length-1&&(K(-1),em(-1))},[Z,I,J,em]);let eg=(0,ev.unstable_useEventCallback)(({event:e,index:t,reason:n="auto"})=>{if(Q.current=t,-1===t?H.current.removeAttribute("aria-activedescendant"):H.current.setAttribute("aria-activedescendant",`${D}-option-${t}`),B&&B(e,-1===t?null:ep[t],n),!G.current)return;let i=G.current.querySelector(`[role="option"].${r}-focused`);i&&(i.classList.remove(`${r}-focused`),i.classList.remove(`${r}-focusVisible`));let a=G.current;if("listbox"!==G.current.getAttribute("role")&&(a=G.current.parentElement.querySelector('[role="listbox"]')),!a)return;if(-1===t){a.scrollTop=0;return}let o=G.current.querySelector(`[data-option-index="${t}"]`);if(o&&(o.classList.add(`${r}-focused`),"keyboard"===n&&o.classList.add(`${r}-focusVisible`),a.scrollHeight>a.clientHeight&&"mouse"!==n&&"touch"!==n)){let e=a.clientHeight+a.scrollTop,t=o.offsetTop+o.offsetHeight;t>e?a.scrollTop=t-a.clientHeight:o.offsetTop-o.offsetHeight*(1.3*!!C)<a.scrollTop&&(a.scrollTop=o.offsetTop-o.offsetHeight*(1.3*!!C))}}),ey=(0,ev.unstable_useEventCallback)(({event:e,diff:t,direction:r="next",reason:i="auto"})=>{if(!eu)return;let a=function(e,t){if(!G.current||e<0||e>=ep.length)return -1;let r=e;for(;;){let n=G.current.querySelector(`[data-option-index="${r}"]`),i=!f&&(!n||n.disabled||"true"===n.getAttribute("aria-disabled"));if(n&&n.hasAttribute("tabindex")&&!i)return r;if((r="next"===t?(r+1)%ep.length:(r-1+ep.length)%ep.length)===e)return -1}}((()=>{let e=ep.length-1;if("reset"===t)return Y;if("start"===t)return 0;if("end"===t)return e;let r=Q.current+t;return r<0?-1===r&&T?-1:m&&-1!==Q.current||Math.abs(t)>1?0:e:r>e?r===e+1&&T?-1:m||Math.abs(t)>1?e:0:r})(),r);if(eg({index:a,reason:i,event:e}),n&&"reset"!==t)if(-1===a)H.current.value=et;else{let e=U(ep[a]);H.current.value=e,0===e.toLowerCase().indexOf(et.toLowerCase())&&et.length>0&&H.current.setSelectionRange(et.length,e.length)}}),ej=x.useCallback(()=>{if(!eu)return;let e=(()=>{var e;if(-1!==Q.current&&eh.filteredOptions&&eh.filteredOptions.length!==ep.length&&eh.inputValue===et&&(I?Z.length===eh.value.length&&eh.value.every((e,t)=>U(Z[t])===U(e)):(e=eh.value,(e?U(e):"")===(Z?U(Z):"")))){let e=eh.filteredOptions[Q.current];if(e)return eT(ep,t=>U(t)===U(e))}return -1})();if(-1!==e){Q.current=e;return}let t=I?Z[0]:Z;if(0===ep.length||null==t)return void ey({diff:"reset"});if(G.current){if(null!=t){let e=ep[Q.current];if(I&&e&&-1!==eT(Z,t=>A(e,t)))return;let r=eT(ep,e=>A(e,t));-1===r?ey({diff:"reset"}):eg({index:r});return}if(Q.current>=ep.length-1)return void eg({index:ep.length-1});eg({index:Q.current})}},[ep.length,!I&&Z,y,ey,eg,eu,et,I]),ek=(0,ev.unstable_useEventCallback)(e=>{(0,eb.unstable_setRef)(G,e),e&&ej()});x.useEffect(()=>{ej()},[ej]);let eP=e=>{!eo&&(el(!0),ec(!0),F&&F(e))},eO=(e,t)=>{eo&&(el(!1),O&&O(e,t))},eB=(e,t,r,n)=>{if(I){if(Z.length===t.length&&Z.every((e,r)=>e===t[r]))return}else if(Z===t)return;P&&P(e,t,r,n),ee(t)},eR=x.useRef(!1),eF=(e,t,r="selectOption",n="options")=>{let i=r,a=t;if(I){let e=eT(a=Array.isArray(Z)?Z.slice():[],e=>A(t,e));-1===e?a.push(t):"freeSolo"!==n&&(a.splice(e,1),i="removeOption")}ea(e,a),eB(e,a,i,{option:t}),p||e&&(e.ctrlKey||e.metaKey)||eO(e,i),(!0===o||"touch"===o&&eR.current||"mouse"===o&&!eR.current)&&H.current.blur()},e$=(e,t)=>{if(!I)return;""===et&&eO(e,"toggleInput");let r=J;-1===J?""===et&&"previous"===t&&(r=Z.length-1):((r+="next"===t?1:-1)<0&&(r=0),r===Z.length&&(r=-1)),K(r=function(e,t){if(-1===e)return -1;let r=e;for(;;){if("next"===t&&r===Z.length||"previous"===t&&-1===r)return -1;let e=X.querySelector(`[data-tag-index="${r}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return r;r+="next"===t?1:-1}}(r,t)),em(r)},eL=e=>{_.current=!0,er(""),R&&R(e,"","clear"),eB(e,I?[]:null,"clear")},eM=e=>{ei(!0),L&&!_.current&&eP(e)},eW=e=>{t(G)?H.current.focus():(ei(!1),q.current=!0,_.current=!1,a&&-1!==Q.current&&eu?eF(e,ep[Q.current],"blur"):a&&j&&""!==et?eF(e,et,"blur","freeSolo"):l&&ea(e,Z),eO(e,"blur"))},eN=e=>{let t=e.target.value;et!==t&&(er(t),ec(!1),R&&R(e,t,"input")),""===t?u||I||eB(e,null,"clear"):eP(e)},ez=e=>{let t=Number(e.currentTarget.getAttribute("data-option-index"));Q.current!==t&&eg({event:e,index:t,reason:"mouse"})},eD=e=>{eg({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),eR.current=!0},eU=e=>{let t=Number(e.currentTarget.getAttribute("data-option-index"));eF(e,ep[t],"selectOption"),eR.current=!1},e_=e=>{eo?eO(e,"toggleInput"):eP(e)},eq=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==D&&e.preventDefault()},eH=e=>{e.currentTarget.contains(e.target)&&(H.current.focus(),N&&q.current&&H.current.selectionEnd-H.current.selectionStart==0&&H.current.select(),q.current=!1)},eG=e=>{h||""!==et&&eo||e_(e)},eX=j&&et.length>0;eX=eX||(I?Z.length>0:null!==Z);let eV=ep;return C&&(eV=ep.reduce((e,t,r)=>{let n=C(t);return e.length>0&&e[e.length-1].group===n?e[e.length-1].options.push(t):e.push({key:r,index:r,group:n,options:[t]}),e},[])),h&&en&&eW(),{getRootProps:(e={})=>(0,ex.default)({"aria-owns":ef?`${D}-listbox`:null},e,{onKeyDown:t=>{if(e.onKeyDown&&e.onKeyDown(t),!t.defaultMuiPrevented&&(-1!==J&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(K(-1),em(-1)),229!==t.which))switch(t.key){case"Home":eu&&w&&(t.preventDefault(),ey({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":eu&&w&&(t.preventDefault(),ey({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),ey({diff:-5,direction:"previous",reason:"keyboard",event:t}),eP(t);break;case"PageDown":t.preventDefault(),ey({diff:5,direction:"next",reason:"keyboard",event:t}),eP(t);break;case"ArrowDown":t.preventDefault(),ey({diff:1,direction:"next",reason:"keyboard",event:t}),eP(t);break;case"ArrowUp":t.preventDefault(),ey({diff:-1,direction:"previous",reason:"keyboard",event:t}),eP(t);break;case"ArrowLeft":e$(t,"previous");break;case"ArrowRight":e$(t,"next");break;case"Enter":if(-1!==Q.current&&eu){let e=ep[Q.current],r=!!b&&b(e);if(t.preventDefault(),r)return;eF(t,e,"selectOption"),n&&H.current.setSelectionRange(H.current.value.length,H.current.value.length)}else j&&""!==et&&!1===ed&&(I&&t.preventDefault(),eF(t,et,"createOption","freeSolo"));break;case"Escape":eu?(t.preventDefault(),t.stopPropagation(),eO(t,"escape")):s&&(""!==et||I&&Z.length>0)&&(t.preventDefault(),t.stopPropagation(),eL(t));break;case"Backspace":if(I&&!W&&""===et&&Z.length>0){let e=-1===J?Z.length-1:J,r=Z.slice();r.splice(e,1),eB(t,r,"removeOption",{option:Z[e]})}break;case"Delete":if(I&&!W&&""===et&&Z.length>0&&-1!==J){let e=Z.slice();e.splice(J,1),eB(t,e,"removeOption",{option:Z[J]})}}},onMouseDown:eq,onClick:eH}),getInputLabelProps:()=>({id:`${D}-label`,htmlFor:D}),getInputProps:()=>({id:D,value:et,onBlur:eW,onFocus:eM,onChange:eN,onMouseDown:eG,"aria-activedescendant":eu?"":null,"aria-autocomplete":n?"both":"list","aria-controls":ef?`${D}-listbox`:void 0,"aria-expanded":ef,autoComplete:"off",ref:H,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:h}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:eL}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:e_}),getTagProps:({index:e})=>(0,ex.default)({key:e,"data-tag-index":e,tabIndex:-1},!W&&{onDelete:t=>{let r=Z.slice();r.splice(e,1),eB(t,r,"removeOption",{option:Z[e]})}}),getListboxProps:()=>({role:"listbox",id:`${D}-listbox`,"aria-labelledby":`${D}-label`,ref:ek,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:t})=>{var r;let n=(I?Z:[Z]).some(e=>null!=e&&A(t,e)),i=!!b&&b(t);return{key:null!=(r=null==v?void 0:v(t))?r:U(t),tabIndex:-1,role:"option",id:`${D}-option-${e}`,onMouseMove:ez,onClick:eU,onTouchStart:eD,"data-option-index":e,"aria-disabled":i,"aria-selected":n}},id:D,inputValue:et,value:Z,dirty:eX,expanded:eu&&X,popupOpen:eu,focused:en||-1!==J,anchorEl:X,setAnchorEl:V,focusedTag:J,groupedOptions:eV}};var eO=e.i(73598),eB=e.i(95262),eR=e.i(96861),eF=e.i(18420),e$=e.i(51480),eL=e.i(13740);function eM(e){return(0,eL.default)("MuiListSubheader",e)}(0,e$.default)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);let eW=["className","color","component","disableGutters","disableSticky","inset"],eN=(0,eB.default)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,eF.default)(r.color)}`],!r.disableGutters&&t.gutters,r.inset&&t.inset,!r.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>(0,ex.default)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===t.color&&{color:(e.vars||e).palette.primary.main},"inherit"===t.color&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),ez=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiListSubheader"}),{className:n,color:i="default",component:a="li",disableGutters:o=!1,disableSticky:l=!1,inset:s=!1}=r,c=(0,em.default)(r,eW),d=(0,ex.default)({},r,{color:i,component:a,disableGutters:o,disableSticky:l,inset:s}),u=(e=>{let{classes:t,color:r,disableGutters:n,inset:i,disableSticky:a}=e,o={root:["root","default"!==r&&`color${(0,eF.default)(r)}`,!n&&"gutters",i&&"inset",!a&&"sticky"]};return(0,ey.default)(o,eM,t)})(d);return(0,h.jsx)(eN,(0,ex.default)({as:a,className:(0,eg.default)(u.root,n),ref:t,ownerState:d},c))});ez.muiSkipListHighlight=!0;var eD=e.i(79413),eU=e.i(795),e_=e.i(36887),eq=e.i(54581),eH=e.i(99918),eG=e.i(11740),eX=e.i(71462),eV=e.i(15168),eJ=e.i(12447),eK=e.i(9254);function eY(e){return(0,eL.default)("MuiAutocomplete",e)}let eQ=(0,e$.default)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var eZ=e.i(11488);let e0=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],e1=["ref"],e2=["key"],e5=["key"],e4=(0,eK.styled)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e,{fullWidth:n,hasClearIcon:i,hasPopupIcon:a,inputFocused:o,size:l}=r;return[{[`& .${eQ.tag}`]:t.tag},{[`& .${eQ.tag}`]:t[`tagSize${(0,eF.default)(l)}`]},{[`& .${eQ.inputRoot}`]:t.inputRoot},{[`& .${eQ.input}`]:t.input},{[`& .${eQ.input}`]:o&&t.inputFocused},t.root,n&&t.fullWidth,a&&t.hasPopupIcon,i&&t.hasClearIcon]}})({[`&.${eQ.focused} .${eQ.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${eQ.clearIndicator}`]:{visibility:"visible"}},[`& .${eQ.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${eQ.inputRoot}`]:{[`.${eQ.hasPopupIcon}&, .${eQ.hasClearIcon}&`]:{paddingRight:30},[`.${eQ.hasPopupIcon}.${eQ.hasClearIcon}&`]:{paddingRight:56},[`& .${eQ.input}`]:{width:0,minWidth:30}},[`& .${eq.default.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${eq.default.root}.${eH.default.sizeSmall}`]:{[`& .${eq.default.input}`]:{padding:"2px 4px 3px 0"}},[`& .${eG.default.root}`]:{padding:9,[`.${eQ.hasPopupIcon}&, .${eQ.hasClearIcon}&`]:{paddingRight:39},[`.${eQ.hasPopupIcon}.${eQ.hasClearIcon}&`]:{paddingRight:65},[`& .${eQ.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${eQ.endAdornment}`]:{right:9}},[`& .${eG.default.root}.${eH.default.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${eQ.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${eX.default.root}`]:{paddingTop:19,paddingLeft:8,[`.${eQ.hasPopupIcon}&, .${eQ.hasClearIcon}&`]:{paddingRight:39},[`.${eQ.hasPopupIcon}.${eQ.hasClearIcon}&`]:{paddingRight:65},[`& .${eX.default.input}`]:{padding:"7px 4px"},[`& .${eQ.endAdornment}`]:{right:9}},[`& .${eX.default.root}.${eH.default.sizeSmall}`]:{paddingBottom:1,[`& .${eX.default.input}`]:{padding:"2.5px 4px"}},[`& .${eH.default.hiddenLabel}`]:{paddingTop:8},[`& .${eX.default.root}.${eH.default.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${eQ.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${eX.default.root}.${eH.default.hiddenLabel}.${eH.default.sizeSmall}`]:{[`& .${eQ.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${eQ.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${eQ.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${eQ.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${eQ.inputRoot}`]:{flexWrap:"wrap"}}}]}),e3=(0,eK.styled)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),e6=(0,eK.styled)(eU.default,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),e8=(0,eK.styled)(eU.default,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>(0,ex.default)({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),e7=(0,eK.styled)(eO.default,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${eQ.option}`]:t.option},t.popper,r.disablePortal&&t.popperDisablePortal]}})(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),e9=(0,eK.styled)(eD.default,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>(0,ex.default)({},e.typography.body1,{overflow:"auto"})),te=(0,eK.styled)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),tt=(0,eK.styled)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),tr=(0,eK.styled)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${eQ.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${eQ.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${eQ.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,ej.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${eQ.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,ej.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${eQ.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,ej.alpha)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),tn=(0,eK.styled)(ez,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),ti=(0,eK.styled)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${eQ.option}`]:{paddingLeft:24}}),ta=x.forwardRef(function(e,t){var r,n,i,a;let o,l=(0,eR.useDefaultProps)({props:e,name:"MuiAutocomplete"}),{autoComplete:s=!1,autoHighlight:u=!1,autoSelect:p=!1,blurOnSelect:f=!1,ChipProps:m,className:g,clearIcon:y=c||(c=(0,h.jsx)(eV.default,{fontSize:"small"})),clearOnBlur:j=!l.freeSolo,clearOnEscape:b=!1,clearText:v="Clear",closeText:S="Close",componentsProps:C={},defaultValue:w=l.multiple?[]:null,disableClearable:k=!1,disableCloseOnSelect:T=!1,disabled:E=!1,disabledItemsFocusable:A=!1,disableListWrap:I=!1,disablePortal:P=!1,filterSelectedOptions:O=!1,forcePopupIcon:B="auto",freeSolo:R=!1,fullWidth:F=!1,getLimitTagsText:$=e=>`+${e}`,getOptionLabel:L,groupBy:M,handleHomeEndKeys:W=!l.freeSolo,includeInputInList:N=!1,limitTags:z=-1,ListboxComponent:D="ul",ListboxProps:U,loading:_=!1,loadingText:q="Loading",multiple:H=!1,noOptionsText:G="No options",openOnFocus:X=!1,openText:V="Open",PaperComponent:J=eD.default,PopperComponent:K=eO.default,popupIcon:Y=d||(d=(0,h.jsx)(eJ.default,{})),readOnly:Q=!1,renderGroup:Z,renderInput:ee,renderOption:et,renderTags:er,selectOnFocus:en=!l.freeSolo,size:ei="medium",slotProps:ea={}}=l,eo=(0,em.default)(l,e0),{getRootProps:el,getInputProps:es,getInputLabelProps:ec,getPopupIndicatorProps:ed,getClearProps:eu,getTagProps:ep,getListboxProps:eh,getOptionProps:ef,value:ej,dirty:eb,expanded:ev,id:eS,popupOpen:eC,focused:ew,focusedTag:ek,anchorEl:eT,setAnchorEl:eE,inputValue:eA,groupedOptions:eI}=eP((0,ex.default)({},l,{componentName:"Autocomplete"})),eB=!k&&!E&&eb&&!Q,e$=(!R||!0===B)&&!1!==B,{onMouseDown:eL}=es(),{ref:eM}=null!=U?U:{},eW=eh(),{ref:eN}=eW,ez=(0,em.default)(eW,e1),eU=(0,eZ.default)(eN,eM),eq=L||(e=>{var t;return null!=(t=e.label)?t:e}),eH=(0,ex.default)({},l,{disablePortal:P,expanded:ev,focused:ew,fullWidth:F,getOptionLabel:eq,hasClearIcon:eB,hasPopupIcon:e$,inputFocused:-1===ek,popupOpen:eC,size:ei}),eG=(e=>{let{classes:t,disablePortal:r,expanded:n,focused:i,fullWidth:a,hasClearIcon:o,hasPopupIcon:l,inputFocused:s,popupOpen:c,size:d}=e,u={root:["root",n&&"expanded",i&&"focused",a&&"fullWidth",o&&"hasClearIcon",l&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",s&&"inputFocused"],tag:["tag",`tagSize${(0,eF.default)(d)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",r&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,ey.default)(u,eY,t)})(eH);if(H&&ej.length>0){let e=e=>(0,ex.default)({className:eG.tag,disabled:E},ep(e));o=er?er(ej,e,eH):ej.map((t,r)=>{let n=e({index:r}),{key:i}=n,a=(0,em.default)(n,e2);return(0,h.jsx)(e_.default,(0,ex.default)({label:eq(t),size:ei},a,m),i)})}if(z>-1&&Array.isArray(o)){let e=o.length-z;!ew&&e>0&&(o=o.splice(0,z)).push((0,h.jsx)("span",{className:eG.tag,children:$(e)},o.length))}let eX=Z||(e=>(0,h.jsxs)("li",{children:[(0,h.jsx)(tn,{className:eG.groupLabel,ownerState:eH,component:"div",children:e.group}),(0,h.jsx)(ti,{className:eG.groupUl,ownerState:eH,children:e.children})]},e.key)),eK=et||((e,t)=>{let{key:r}=e,n=(0,em.default)(e,e5);return(0,h.jsx)("li",(0,ex.default)({},n,{children:eq(t)}),r)}),eQ=(e,t)=>{let r=ef({option:e,index:t});return eK((0,ex.default)({},r,{className:eG.option}),e,{selected:r["aria-selected"],index:t,inputValue:eA},eH)},ta=null!=(r=ea.clearIndicator)?r:C.clearIndicator,to=null!=(n=ea.paper)?n:C.paper,tl=null!=(i=ea.popper)?i:C.popper,ts=null!=(a=ea.popupIndicator)?a:C.popupIndicator;return(0,h.jsxs)(x.Fragment,{children:[(0,h.jsx)(e4,(0,ex.default)({ref:t,className:(0,eg.default)(eG.root,g),ownerState:eH},el(eo),{children:ee({id:eS,disabled:E,fullWidth:!0,size:"small"===ei?"small":void 0,InputLabelProps:ec(),InputProps:(0,ex.default)({ref:eE,className:eG.inputRoot,startAdornment:o,onClick:e=>{e.target===e.currentTarget&&eL(e)}},(eB||e$)&&{endAdornment:(0,h.jsxs)(e3,{className:eG.endAdornment,ownerState:eH,children:[eB?(0,h.jsx)(e6,(0,ex.default)({},eu(),{"aria-label":v,title:v,ownerState:eH},ta,{className:(0,eg.default)(eG.clearIndicator,null==ta?void 0:ta.className),children:y})):null,e$?(0,h.jsx)(e8,(0,ex.default)({},ed(),{disabled:E,"aria-label":eC?S:V,title:eC?S:V,ownerState:eH},ts,{className:(0,eg.default)(eG.popupIndicator,null==ts?void 0:ts.className),children:Y})):null]})}),inputProps:(0,ex.default)({className:eG.input,disabled:E,readOnly:Q},es())})})),eT?(0,h.jsx)(e7,(0,ex.default)({as:K,disablePortal:P,style:{width:eT?eT.clientWidth:null},ownerState:eH,role:"presentation",anchorEl:eT,open:eC},tl,{className:(0,eg.default)(eG.popper,null==tl?void 0:tl.className),children:(0,h.jsxs)(e9,(0,ex.default)({ownerState:eH,as:J},to,{className:(0,eg.default)(eG.paper,null==to?void 0:to.className),children:[_&&0===eI.length?(0,h.jsx)(te,{className:eG.loading,ownerState:eH,children:q}):null,0!==eI.length||R||_?null:(0,h.jsx)(tt,{className:eG.noOptions,ownerState:eH,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:G}),eI.length>0?(0,h.jsx)(tr,(0,ex.default)({as:D,className:eG.listbox,ownerState:eH},ez,U,{ref:eU,children:eI.map((e,t)=>M?eX({key:e.key,group:e.group,children:e.options.map((t,r)=>eQ(t,e.index+r))}):eQ(e,t))})):null]}))})):null]})});var to=e.i(34699),tl=e.i(12214),ts=e.i(95532),tc=e.i(26712),td=e.i(92297);function tu(){let[e,t]=(0,x.useState)([]),[r,n]=(0,x.useState)([]),[i,a]=(0,x.useState)([]),[o,l]=(0,x.useState)([]),[s,c]=(0,x.useState)(!0),[d,u]=(0,x.useState)(null),[p,f]=(0,x.useState)(null),[m,g]=(0,x.useState)(!1),[j,v]=(0,x.useState)(null),[S,w]=(0,x.useState)(null),[k,T]=(0,x.useState)(null),[E,A]=(0,x.useState)(null),[P,O]=(0,x.useState)(null),[B,R]=(0,x.useState)(null),[F,$]=(0,x.useState)(null),[V,J]=(0,x.useState)({client:"",subject:"",description:"",priority:"medium"}),[K,Y]=(0,x.useState)({subject:"",description:"",priority:"medium",status:"open",assignedTo:""});(0,x.useEffect)(()=>{et(),Q(),Z(),ee()},[]);let Q=async()=>{try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();n(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},Z=async()=>{try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();a(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}},ee=async()=>{try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/tasks`,{credentials:"include"});if(t.ok){let e=await t.json();l(e.tasks||[])}}catch(e){console.error("Error fetching tasks:",e)}},et=async()=>{c(!0),u(null);try{let e=(0,X.getBackendUrl)(),r=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to fetch support requests"}));throw Error(e.error||e.details||"Failed to fetch support requests")}let n=await r.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),u(e.message||"Failed to load support requests"),t([])}finally{c(!1)}},er=async()=>{if(!S||!S.id||!K.subject||!K.description)return void u("Subject and description are required");let r=S.id;c(!0),u(null);try{let n=(0,X.getBackendUrl)(),i=await fetch(`${n}/api/creative/support-requests/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:K.subject,description:K.description,priority:K.priority,status:K.status,assignedTo:E?E.name||E.email:K.assignedTo||null})});if(!i.ok){let e=await i.json().catch(()=>({error:"Failed to update support request"})),t=e.error||e.message||`Failed to update support request (${i.status})`;throw Error(t)}let a=await i.json();if(P&&P.id&&r)try{await fetch(`${n}/api/tasks/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:r})})}catch(e){console.error("Error linking task:",e)}t(e.map(e=>e.id===r?a:e)),w(null),A(null),O(null),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""}),g(!1),et(),ee()}catch(e){console.error("Error updating support request:",e),u(e.message||"Failed to update support request")}finally{c(!1)}},en=async()=>{if(!V.subject||!V.description)return void u("Subject and description are required");c(!0),u(null);try{let r=(0,X.getBackendUrl)(),n=await fetch(`${r}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:k?k.company||k.name:V.client,clientId:k?.id,subject:V.subject,description:V.description,priority:V.priority,assignedTo:E?E.name||E.email:null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let i=await n.json();if(P&&P.id&&i&&i.id)try{await fetch(`${r}/api/tasks/${P.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:i.id})})}catch(e){console.error("Error linking task:",e)}t([i,...e]),f("Support request created successfully"),J({client:"",subject:"",description:"",priority:"medium"}),T(null),A(null),O(null),g(!1),setTimeout(()=>f(null),3e3),et(),ee()}catch(e){console.error("Error creating support request:",e),u(e.message||"Failed to create support request")}finally{c(!1)}},ei=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ea=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,h.jsxs)(y.Box,{children:[p&&(0,h.jsx)(I.Alert,{severity:"success",onClose:()=>f(null),sx:{mb:2},children:p}),d&&(0,h.jsx)(I.Alert,{severity:"error",onClose:()=>u(null),sx:{mb:2},children:d}),(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(to.default,{}),onClick:()=>{v(null),g(!0)},children:"New Request"})]}),(0,h.jsx)(ed.TableContainer,{component:C.Paper,children:(0,h.jsxs)(el.Table,{children:[(0,h.jsx)(eu.TableHead,{children:(0,h.jsxs)(ep.TableRow,{children:[(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,h.jsx)(es.TableBody,{children:0===e.length?(0,h.jsx)(ep.TableRow,{children:(0,h.jsx)(ec.TableCell,{colSpan:7,align:"center",sx:{py:4},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,h.jsxs)(ep.TableRow,{hover:!0,children:[(0,h.jsx)(ec.TableCell,{children:e.client}),(0,h.jsx)(ec.TableCell,{children:e.subject}),(0,h.jsx)(ec.TableCell,{children:e.assignedTo?(0,h.jsx)(eo.Chip,{label:e.assignedTo,size:"small",variant:"outlined"}):(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:"Unassigned"})}),(0,h.jsx)(ec.TableCell,{children:(0,h.jsx)(eo.Chip,{label:e.status,size:"small",color:ei(e.status)})}),(0,h.jsx)(ec.TableCell,{children:(0,h.jsx)(eo.Chip,{label:e.priority,size:"small",color:ea(e.priority)})}),(0,h.jsx)(ec.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,h.jsx)(ec.TableCell,{align:"right",children:(0,h.jsx)(eh.IconButton,{size:"small",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),R(t.currentTarget),$(r))},children:(0,h.jsx)(tc.default,{})})})]},e.id))})]})}),(0,h.jsxs)(td.Menu,{anchorEl:B,open:!!B,onClose:()=>{R(null),$(null)},children:[(0,h.jsxs)(G.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===F);t&&(v(t),w(null),g(!0))},children:[(0,h.jsx)(tl.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,h.jsxs)(G.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===F);t&&(w(t),v(null),A((t.assignedTo?i.find(e=>e.name===t.assignedTo||e.email===t.assignedTo):null)||null),O((t.linkedTasks&&t.linkedTasks.length>0&&t.linkedTasks[0]?.id?o.find(e=>e.id===t.linkedTasks[0].id):null)||null),Y({subject:t.subject,description:t.description,priority:t.priority,status:t.status,assignedTo:t.assignedTo||""}),g(!0),R(null),$(null))},children:[(0,h.jsx)(ts.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,h.jsxs)(L.Dialog,{open:m,onClose:()=>{g(!1),v(null),w(null),T(null),J({client:"",subject:"",description:"",priority:"medium"}),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},maxWidth:"md",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:j?"Support Request Details":S?"Edit Support Request":"Create Support Request"}),(0,h.jsx)(W.DialogContent,{children:S?(0,h.jsxs)(U.Stack,{spacing:3,sx:{mt:1},children:[(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Subject",value:K.subject,onChange:e=>Y({...K,subject:e.target.value})}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:K.description,onChange:e=>Y({...K,description:e.target.value})}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Assigned Employee"}),(0,h.jsxs)(H.Select,{value:E?.id||"",label:"Assigned Employee",onChange:e=>{let t=i.find(t=>t.id===Number(e.target.value));A(t||null),Y({...K,assignedTo:t?t.name||t.email:""})},children:[(0,h.jsx)(G.MenuItem,{value:"",children:"Unassigned"}),i.map(e=>(0,h.jsxs)(G.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,h.jsx)(ta,{fullWidth:!0,options:o.filter(e=>!e.supportRequestId||e.supportRequestId===S?.id),getOptionLabel:e=>{let t=e.supportRequestId?" (Linked)":"";return`${e.title||""}${t}`},value:P,onChange:(e,t)=>{O(t)},renderInput:e=>(0,h.jsx)(D.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,h.jsx)(y.Box,{component:"li",...e,children:(0,h.jsxs)(U.Stack,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(b.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&t.supportRequestId!==S?.id&&(0,h.jsx)(eo.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,h.jsxs)(b.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:.5},children:[(0,h.jsx)(eo.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.createdAt&&(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Priority"}),(0,h.jsxs)(H.Select,{value:K.priority,label:"Priority",onChange:e=>Y({...K,priority:e.target.value}),children:[(0,h.jsx)(G.MenuItem,{value:"low",children:"Low"}),(0,h.jsx)(G.MenuItem,{value:"medium",children:"Medium"}),(0,h.jsx)(G.MenuItem,{value:"high",children:"High"})]})]}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Status"}),(0,h.jsxs)(H.Select,{value:K.status,label:"Status",onChange:e=>Y({...K,status:e.target.value}),children:[(0,h.jsx)(G.MenuItem,{value:"open",children:"Open"}),(0,h.jsx)(G.MenuItem,{value:"in-progress",children:"In Progress"}),(0,h.jsx)(G.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):j?(0,h.jsx)(y.Box,{children:(0,h.jsxs)(U.Stack,{spacing:2,sx:{mt:1},children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,h.jsx)(b.Typography,{variant:"body1",children:j.client})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Assigned To"}),(0,h.jsx)(b.Typography,{variant:"body1",children:j.assignedTo||"Unassigned"})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,h.jsx)(b.Typography,{variant:"body1",children:j.subject})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,h.jsx)(b.Typography,{variant:"body1",children:j.description})]}),j.linkedTasks&&j.linkedTasks.length>0&&(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Linked Tasks"}),(0,h.jsx)(U.Stack,{spacing:1,children:j.linkedTasks.map(e=>(0,h.jsx)(eo.Chip,{label:e.title,size:"small",variant:"outlined",sx:{mr:1,mb:1}},e.id))})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,h.jsx)(eo.Chip,{label:j.status,color:ei(j.status)})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,h.jsx)(eo.Chip,{label:j.priority,color:ea(j.priority)})]})]})]})}):(0,h.jsxs)(U.Stack,{spacing:3,sx:{mt:1},children:[(0,h.jsx)(ta,{fullWidth:!0,options:r,getOptionLabel:e=>e.company||e.name||"",value:k,onChange:(e,t)=>{T(t),J({...V,client:t?t.company||t.name:""})},renderInput:e=>(0,h.jsx)(D.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,h.jsx)(y.Box,{component:"li",...e,children:(0,h.jsxs)(U.Stack,{children:[(0,h.jsx)(b.Typography,{variant:"body1",children:t.company||t.name}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Subject",value:V.subject,onChange:e=>J({...V,subject:e.target.value})}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:V.description,onChange:e=>J({...V,description:e.target.value})}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Assigned Employee"}),(0,h.jsxs)(H.Select,{value:E?.id||"",label:"Assigned Employee",onChange:e=>{A(i.find(t=>t.id===Number(e.target.value))||null)},children:[(0,h.jsx)(G.MenuItem,{value:"",children:"Unassigned"}),i.map(e=>(0,h.jsxs)(G.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,h.jsx)(ta,{fullWidth:!0,options:o,getOptionLabel:e=>{let t=e.supportRequestId?" (Already Linked)":"";return`${e.title||""}${t}`},value:P,onChange:(e,t)=>{t&&!t.supportRequestId?O(t):t&&t.supportRequestId?(u("This task is already linked to another support request"),setTimeout(()=>u(null),3e3)):O(null)},renderInput:e=>(0,h.jsx)(D.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,h.jsx)(y.Box,{component:"li",...e,children:(0,h.jsxs)(U.Stack,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(b.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&(0,h.jsx)(eo.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,h.jsxs)(b.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:.5},flexWrap:"wrap",children:[(0,h.jsx)(eo.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.assignedToName&&(0,h.jsx)(eo.Chip,{label:`Assigned: ${t.assignedToName}`,size:"small",variant:"outlined"}),t.createdAt&&(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Priority"}),(0,h.jsxs)(H.Select,{value:V.priority,label:"Priority",onChange:e=>J({...V,priority:e.target.value}),children:[(0,h.jsx)(G.MenuItem,{value:"low",children:"Low"}),(0,h.jsx)(G.MenuItem,{value:"medium",children:"Medium"}),(0,h.jsx)(G.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:()=>{g(!1),v(null),w(null),T(null),A(null),O(null),J({client:"",subject:"",description:"",priority:"medium"}),Y({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},children:j?"Close":"Cancel"}),S?(0,h.jsx)(z.Button,{variant:"contained",onClick:er,children:"Update Request"}):!j&&(0,h.jsx)(z.Button,{variant:"contained",onClick:en,children:"Create Request"})]})]})]})}var tp=e.i(98807),th=e.i(19391),tf=e.i(94544),tm=e.i(1911),tx=e.i(25449),tg=e.i(27367),ty=e.i(16875),tj=e.i(5385),tb=e.i(46631),tv=e.i(70385),tS=e.i(37451),tC=e.i(27121),tw=e.i(72695);e.i(94556),e.i(20012);var tk=e.i(99700),tT=e.i(28810),tE=e.i(27325),tA=e.i(75016);function tI(e,t){return function(){return e.apply(t,arguments)}}let{toString:tP}=Object.prototype,{getPrototypeOf:tO}=Object,{iterator:tB,toStringTag:tR}=Symbol,tF=(t=Object.create(null),e=>{let r=tP.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}),t$=e=>(e=e.toLowerCase(),t=>tF(t)===e),tL=e=>t=>typeof t===e,{isArray:tM}=Array,tW=tL("undefined");function tN(e){return null!==e&&!tW(e)&&null!==e.constructor&&!tW(e.constructor)&&tU(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let tz=t$("ArrayBuffer"),tD=tL("string"),tU=tL("function"),t_=tL("number"),tq=e=>null!==e&&"object"==typeof e,tH=e=>{if("object"!==tF(e))return!1;let t=tO(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(tR in e)&&!(tB in e)},tG=t$("Date"),tX=t$("File"),tV=t$("Blob"),tJ=t$("FileList"),tK=t$("URLSearchParams"),[tY,tQ,tZ,t0]=["ReadableStream","Request","Response","Headers"].map(t$);function t1(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e)if("object"!=typeof e&&(e=[e]),tM(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;if(tN(e))return;let a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;for(n=0;n<o;n++)i=a[n],t.call(null,e[i],i,e)}}function t2(e,t){let r;if(tN(e))return null;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let t5="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,t4=e=>!tW(e)&&e!==t5,t3=(r="undefined"!=typeof Uint8Array&&tO(Uint8Array),e=>r&&e instanceof r),t6=t$("HTMLFormElement"),t8=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),t7=t$("RegExp"),t9=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};t1(r,(r,i)=>{let a;!1!==(a=t(r,i,e))&&(n[i]=a||r)}),Object.defineProperties(e,n)},re=t$("AsyncFunction"),rt=(a="function"==typeof setImmediate,o=tU(t5.postMessage),a?setImmediate:o?(l=`axios@${Math.random()}`,s=[],t5.addEventListener("message",({source:e,data:t})=>{e===t5&&t===l&&s.length&&s.shift()()},!1),e=>{s.push(e),t5.postMessage(l,"*")}):e=>setTimeout(e)),rr="undefined"!=typeof queueMicrotask?queueMicrotask.bind(t5):void 0!==ef.default&&ef.default.nextTick||rt,rn={isArray:tM,isArrayBuffer:tz,isBuffer:tN,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||tU(e.append)&&("formdata"===(t=tF(e))||"object"===t&&tU(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&tz(e.buffer)},isString:tD,isNumber:t_,isBoolean:e=>!0===e||!1===e,isObject:tq,isPlainObject:tH,isEmptyObject:e=>{if(!tq(e)||tN(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:tY,isRequest:tQ,isResponse:tZ,isHeaders:t0,isUndefined:tW,isDate:tG,isFile:tX,isBlob:tV,isRegExp:t7,isFunction:tU,isStream:e=>tq(e)&&tU(e.pipe),isURLSearchParams:tK,isTypedArray:t3,isFileList:tJ,forEach:t1,merge:function e(){let{caseless:t,skipUndefined:r}=t4(this)&&this||{},n={},i=(i,a)=>{let o=t&&t2(n,a)||a;tH(n[o])&&tH(i)?n[o]=e(n[o],i):tH(i)?n[o]=e({},i):tM(i)?n[o]=i.slice():r&&tW(i)||(n[o]=i)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&t1(arguments[e],i);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(t1(t,(t,n)=>{r&&tU(t)?e[n]=tI(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,a,o,l={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=!1!==r&&tO(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype)return t},kindOf:tF,kindOfTest:t$,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(tM(e))return e;let t=e.length;if(!t_(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r,n=(e&&e[tB]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:t6,hasOwnProperty:t8,hasOwnProp:t8,reduceDescriptors:t9,freezeMethods:e=>{t9(e,(t,r)=>{if(tU(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(tU(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(tM(e)?e:String(e).split(t)).forEach(e=>{r[e]=!0}),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:t2,global:t5,isContextDefined:t4,isSpecCompliantForm:function(e){return!!(e&&tU(e.append)&&"FormData"===e[tR]&&e[tB])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(tq(e)){if(t.indexOf(e)>=0)return;if(tN(e))return e;if(!("toJSON"in e)){t[n]=e;let i=tM(e)?[]:{};return t1(e,(e,t)=>{let a=r(e,n+1);tW(a)||(i[t]=a)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:re,isThenable:e=>e&&(tq(e)||tU(e))&&tU(e.then)&&tU(e.catch),setImmediate:rt,asap:rr,isIterable:e=>null!=e&&tU(e[tB])};var ri=e.i(85889);function ra(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}rn.inherits(ra,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rn.toJSONObject(this.config),code:this.code,status:this.status}}});let ro=ra.prototype,rl={};function rs(e){return rn.isPlainObject(e)||rn.isArray(e)}function rc(e){return rn.endsWith(e,"[]")?e.slice(0,-2):e}function rd(e,t,r){return e?e.concat(t).map(function(e,t){return e=rc(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rl[e]={value:e}}),Object.defineProperties(ra,rl),Object.defineProperty(ro,"isAxiosError",{value:!0}),ra.from=(e,t,r,n,i,a)=>{let o=Object.create(ro);rn.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let l=e&&e.message?e.message:"Error",s=null==t&&e?e.code:t;return ra.call(o,l,s,r,n,i),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};let ru=rn.toFlatObject(rn,{},null,function(e){return/^is[A-Z]/.test(e)}),rp=function(e,t,r){if(!rn.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=rn.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!rn.isUndefined(t[e])})).metaTokens,i=r.visitor||c,a=r.dots,o=r.indexes,l=(r.Blob||"undefined"!=typeof Blob&&Blob)&&rn.isSpecCompliantForm(t);if(!rn.isFunction(i))throw TypeError("visitor must be a function");function s(e){if(null===e)return"";if(rn.isDate(e))return e.toISOString();if(rn.isBoolean(e))return e.toString();if(!l&&rn.isBlob(e))throw new ra("Blob is not supported. Use a Buffer instead.");return rn.isArrayBuffer(e)||rn.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):ri.Buffer.from(e):e}function c(e,r,i){let l=e;if(e&&!i&&"object"==typeof e)if(rn.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var c;if(rn.isArray(e)&&(c=e,rn.isArray(c)&&!c.some(rs))||(rn.isFileList(e)||rn.endsWith(r,"[]"))&&(l=rn.toArray(e)))return r=rc(r),l.forEach(function(e,n){rn.isUndefined(e)||null===e||t.append(!0===o?rd([r],n,a):null===o?r:r+"[]",s(e))}),!1}return!!rs(e)||(t.append(rd(i,r,a),s(e)),!1)}let d=[],u=Object.assign(ru,{defaultVisitor:c,convertValue:s,isVisitable:rs});if(!rn.isObject(e))throw TypeError("data must be an object");return!function e(r,n){if(!rn.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),rn.forEach(r,function(r,a){!0===(!(rn.isUndefined(r)||null===r)&&i.call(t,r,rn.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])}),d.pop()}}(e),t};function rh(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rf(e,t){this._pairs=[],e&&rp(e,this,t)}let rm=rf.prototype;function rx(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rg(e,t,r){let n;if(!t)return e;let i=r&&r.encode||rx;rn.isFunction(r)&&(r={serialize:r});let a=r&&r.serialize;if(n=a?a(t,r):rn.isURLSearchParams(t)?t.toString():new rf(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}rm.append=function(e,t){this._pairs.push([e,t])},rm.toString=function(e){let t=e?function(t){return e.call(this,t,rh)}:rh;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let ry=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){rn.forEach(this.handlers,function(t){null!==t&&e(t)})}},rj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rb="undefined"!=typeof URLSearchParams?URLSearchParams:rf,rv="undefined"!=typeof FormData?FormData:null,rS="undefined"!=typeof Blob?Blob:null,rC="undefined"!=typeof window&&"undefined"!=typeof document,rw="object"==typeof navigator&&navigator||void 0,rk=rC&&(!rw||0>["ReactNative","NativeScript","NS"].indexOf(rw.product)),rT="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,rE=rC&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>rC,"hasStandardBrowserEnv",()=>rk,"hasStandardBrowserWebWorkerEnv",()=>rT,"navigator",()=>rw,"origin",()=>rE],21724);let rA={...e.i(21724),isBrowser:!0,classes:{URLSearchParams:rb,FormData:rv,Blob:rS},protocols:["http","https","file","blob","url","data"]},rI=function(e){if(rn.isFormData(e)&&rn.isFunction(e.entries)){let t={};return rn.forEachEntry(e,(e,r)=>{!function e(t,r,n,i){let a=t[i++];if("__proto__"===a)return!0;let o=Number.isFinite(+a),l=i>=t.length;return(a=!a&&rn.isArray(n)?n.length:a,l)?rn.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r:(n[a]&&rn.isObject(n[a])||(n[a]=[]),e(t,r,n[a],i)&&rn.isArray(n[a])&&(n[a]=function(e){let t,r,n={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)n[r=i[t]]=e[r];return n}(n[a]))),!o}(rn.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null},rP={transitional:rj,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",i=n.indexOf("application/json")>-1,a=rn.isObject(e);if(a&&rn.isHTMLForm(e)&&(e=new FormData(e)),rn.isFormData(e))return i?JSON.stringify(rI(e)):e;if(rn.isArrayBuffer(e)||rn.isBuffer(e)||rn.isStream(e)||rn.isFile(e)||rn.isBlob(e)||rn.isReadableStream(e))return e;if(rn.isArrayBufferView(e))return e.buffer;if(rn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1){var o,l;return(o=e,l=this.formSerializer,rp(o,new rA.classes.URLSearchParams,{visitor:function(e,t,r,n){return rA.isNode&&rn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...l})).toString()}if((r=rn.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return rp(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(a||i){t.setContentType("application/json",!1);var s=e;if(rn.isString(s))try{return(0,JSON.parse)(s),rn.trim(s)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(s)}return e}],transformResponse:[function(e){let t=this.transitional||rP.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(rn.isResponse(e)||rn.isReadableStream(e))return e;if(e&&rn.isString(e)&&(r&&!this.responseType||n)){let r=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!r&&n){if("SyntaxError"===e.name)throw ra.from(e,ra.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rA.classes.FormData,Blob:rA.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rn.forEach(["delete","get","head","post","put","patch"],e=>{rP.headers[e]={}});let rO=rn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rB=Symbol("internals");function rR(e){return e&&String(e).trim().toLowerCase()}function rF(e){return!1===e||null==e?e:rn.isArray(e)?e.map(rF):String(e)}function r$(e,t,r,n,i){if(rn.isFunction(n))return n.call(this,t,r);if(i&&(t=r),rn.isString(t)){if(rn.isString(n))return -1!==t.indexOf(n);if(rn.isRegExp(n))return n.test(t)}}class rL{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(e,t,r){let i=rR(t);if(!i)throw Error("header name must be a non-empty string");let a=rn.findKey(n,i);a&&void 0!==n[a]&&!0!==r&&(void 0!==r||!1===n[a])||(n[a||t]=rF(e))}let a=(e,t)=>rn.forEach(e,(e,r)=>i(e,r,t));if(rn.isPlainObject(e)||e instanceof this.constructor)a(e,t);else{let n;if(rn.isString(e)&&(e=e.trim())&&(n=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim()))){var o;let r,n,i,l;a((l={},(o=e)&&o.split("\n").forEach(function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||l[r]&&rO[r]||("set-cookie"===r?l[r]?l[r].push(n):l[r]=[n]:l[r]=l[r]?l[r]+", "+n:n)}),l),t)}else if(rn.isObject(e)&&rn.isIterable(e)){let r={},n,i;for(let t of e){if(!rn.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?rn.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(r,t)}else null!=e&&i(t,e,r)}return this}get(e,t){if(e=rR(e)){let r=rn.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}if(rn.isFunction(t))return t.call(this,e,r);if(rn.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rR(e)){let r=rn.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||r$(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=rR(e)){let i=rn.findKey(r,e);i&&(!t||r$(r,r[i],i,t))&&(delete r[i],n=!0)}}return rn.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||r$(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return rn.forEach(this,(n,i)=>{let a=rn.findKey(r,i);if(a){t[a]=rF(n),delete t[i];return}let o=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(i).trim();o!==i&&delete t[i],t[o]=rF(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return rn.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&rn.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[rB]=this[rB]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=rR(e);if(!t[n]){let i;i=rn.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(r,t+i,{value:function(r,n,i){return this[t].call(this,e,r,n,i)},configurable:!0})}),t[n]=!0}}return rn.isArray(e)?e.forEach(n):n(e),this}}function rM(e,t){let r=this||rP,n=t||r,i=rL.from(n.headers),a=n.data;return rn.forEach(e,function(e){a=e.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function rW(e){return!!(e&&e.__CANCEL__)}function rN(e,t,r){ra.call(this,null==e?"canceled":e,ra.ERR_CANCELED,t,r),this.name="CanceledError"}function rz(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ra("Request failed with status code "+r.status,[ra.ERR_BAD_REQUEST,ra.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}rL.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),rn.reduceDescriptors(rL.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),rn.freezeMethods(rL),rn.inherits(rN,ra,{__CANCEL__:!0});let rD=function(e,t){let r,n=Array(e=e||10),i=Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(l){let s=Date.now(),c=i[o];r||(r=s),n[a]=l,i[a]=s;let d=o,u=0;for(;d!==a;)u+=n[d++],d%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),s-r<t)return;let p=c&&s-c;return p?Math.round(1e3*u/p):void 0}},rU=function(e,t){let r,n,i=0,a=1e3/t,o=(t,a=Date.now())=>{i=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),l=t-i;l>=a?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},a-l)))},()=>r&&o(r)]},r_=(e,t,r=3)=>{let n=0,i=rD(50,250);return rU(r=>{let a=r.loaded,o=r.lengthComputable?r.total:void 0,l=a-n,s=i(l);n=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},rq=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},rH=e=>(...t)=>rn.asap(()=>e(...t)),rG=rA.hasStandardBrowserEnv?(n=new URL(rA.origin),i=rA.navigator&&/(msie|trident)/i.test(rA.navigator.userAgent),e=>(e=new URL(e,rA.origin),n.protocol===e.protocol&&n.host===e.host&&(i||n.port===e.port))):()=>!0,rX=rA.hasStandardBrowserEnv?{write(e,t,r,n,i,a,o){if("undefined"==typeof document)return;let l=[`${e}=${encodeURIComponent(t)}`];rn.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),rn.isString(n)&&l.push(`path=${n}`),rn.isString(i)&&l.push(`domain=${i}`),!0===a&&l.push("secure"),rn.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function rV(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||!1==r)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let rJ=e=>e instanceof rL?{...e}:e;function rK(e,t){t=t||{};let r={};function n(e,t,r,n){return rn.isPlainObject(e)&&rn.isPlainObject(t)?rn.merge.call({caseless:n},e,t):rn.isPlainObject(t)?rn.merge({},t):rn.isArray(t)?t.slice():t}function i(e,t,r,i){return rn.isUndefined(t)?rn.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function a(e,t){if(!rn.isUndefined(t))return n(void 0,t)}function o(e,t){return rn.isUndefined(t)?rn.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(r,i,a){return a in t?n(r,i):a in e?n(void 0,r):void 0}let s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(e,t,r)=>i(rJ(e),rJ(t),r,!0)};return rn.forEach(Object.keys({...e,...t}),function(n){let a=s[n]||i,o=a(e[n],t[n],n);rn.isUndefined(o)&&a!==l||(r[n]=o)}),r}let rY=e=>{let t=rK({},e),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=rL.from(o),t.url=rg(rV(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),rn.isFormData(r)){if(rA.hasStandardBrowserEnv||rA.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(rn.isFunction(r.getHeaders)){let e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}}if(rA.hasStandardBrowserEnv&&(n&&rn.isFunction(n)&&(n=n(t)),n||!1!==n&&rG(t.url))){let e=i&&a&&rX.read(a);e&&o.set(i,e)}return t},rQ="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){var n;let i,a,o,l,s,c,d=rY(e),u=d.data,p=rL.from(d.headers).normalize(),{responseType:h,onUploadProgress:f,onDownloadProgress:m}=d;function x(){l&&l(),s&&s(),d.cancelToken&&d.cancelToken.unsubscribe(i),d.signal&&d.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function y(){if(!g)return;let n=rL.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());rz(function(e){t(e),x()},function(e){r(e),x()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(d.method.toUpperCase(),d.url,!0),g.timeout=d.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||4!==g.readyState||(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(r(new ra("Request aborted",ra.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){let n=new ra(t&&t.message?t.message:"Network Error",ra.ERR_NETWORK,e,g);n.event=t||null,r(n),g=null},g.ontimeout=function(){let t=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",n=d.transitional||rj;d.timeoutErrorMessage&&(t=d.timeoutErrorMessage),r(new ra(t,n.clarifyTimeoutError?ra.ETIMEDOUT:ra.ECONNABORTED,e,g)),g=null},void 0===u&&p.setContentType(null),"setRequestHeader"in g&&rn.forEach(p.toJSON(),function(e,t){g.setRequestHeader(t,e)}),rn.isUndefined(d.withCredentials)||(g.withCredentials=!!d.withCredentials),h&&"json"!==h&&(g.responseType=d.responseType),m&&([o,s]=r_(m,!0),g.addEventListener("progress",o)),f&&g.upload&&([a,l]=r_(f),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",l)),(d.cancelToken||d.signal)&&(i=t=>{g&&(r(!t||t.type?new rN(null,e,g):t),g.abort(),g=null)},d.cancelToken&&d.cancelToken.subscribe(i),d.signal&&(d.signal.aborted?i():d.signal.addEventListener("abort",i)));let j=(n=d.url,(c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n))&&c[1]||"");j&&-1===rA.protocols.indexOf(j)?r(new ra("Unsupported protocol "+j+":",ra.ERR_BAD_REQUEST,e)):g.send(u||null)})},rZ=function*(e,t){let r,n=e.byteLength;if(!t||n<t)return void(yield e);let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},r0=async function*(e,t){for await(let r of r1(e))yield*rZ(r,t)},r1=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},r2=(e,t,r,n)=>{let i,a=r0(e,t),o=0,l=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await a.next();if(t){l(),e.close();return}let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw l(e),e}},cancel:e=>(l(e),a.return())},{highWaterMark:2})},{isFunction:r5}=rn,r4=(({Request:e,Response:t})=>({Request:e,Response:t}))(rn.global),{ReadableStream:r3,TextEncoder:r6}=rn.global,r8=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},r7=e=>{let t,{fetch:r,Request:n,Response:i}=e=rn.merge.call({skipUndefined:!0},r4,e),a=r?r5(r):"function"==typeof fetch,o=r5(n),l=r5(i);if(!a)return!1;let s=a&&r5(r3),c=a&&("function"==typeof r6?(t=new r6,e=>t.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer())),d=o&&s&&r8(()=>{let e=!1,t=new n(rA.origin,{body:new r3,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=l&&s&&r8(()=>rn.isReadableStream(new i("").body)),p={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{p[e]||(p[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new ra(`Response type '${e}' is not supported`,ra.ERR_NOT_SUPPORT,r)})});let h=async e=>{if(null==e)return 0;if(rn.isBlob(e))return e.size;if(rn.isSpecCompliantForm(e)){let t=new n(rA.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return rn.isArrayBufferView(e)||rn.isArrayBuffer(e)?e.byteLength:(rn.isURLSearchParams(e)&&(e+=""),rn.isString(e))?(await c(e)).byteLength:void 0},f=async(e,t)=>{let r=rn.toFiniteNumber(e.getContentLength());return null==r?h(t):r};return async e=>{let t,{url:a,method:l,data:s,signal:c,cancelToken:h,timeout:m,onDownloadProgress:x,onUploadProgress:g,responseType:y,headers:j,withCredentials:b="same-origin",fetchOptions:v}=rY(e),S=r||fetch;y=y?(y+"").toLowerCase():"text";let C=((e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,o();let t=e instanceof Error?e:this.reason;n.abort(t instanceof ra?t:new rN(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new ra(`timeout ${t} of ms exceeded`,ra.ETIMEDOUT))},t),o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:l}=n;return l.unsubscribe=()=>rn.asap(o),l}})([c,h&&h.toAbortSignal()],m),w=null,k=C&&C.unsubscribe&&(()=>{C.unsubscribe()});try{if(g&&d&&"get"!==l&&"head"!==l&&0!==(t=await f(j,s))){let e,r=new n(a,{method:"POST",body:s,duplex:"half"});if(rn.isFormData(s)&&(e=r.headers.get("content-type"))&&j.setContentType(e),r.body){let[e,n]=rq(t,r_(rH(g)));s=r2(r.body,65536,e,n)}}rn.isString(b)||(b=b?"include":"omit");let r=o&&"credentials"in n.prototype,c={...v,signal:C,method:l.toUpperCase(),headers:j.normalize().toJSON(),body:s,duplex:"half",credentials:r?b:void 0};w=o&&new n(a,c);let h=await (o?S(w,v):S(a,c)),m=u&&("stream"===y||"response"===y);if(u&&(x||m&&k)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});let t=rn.toFiniteNumber(h.headers.get("content-length")),[r,n]=x&&rq(t,r_(rH(x),!0))||[];h=new i(r2(h.body,65536,r,()=>{n&&n(),k&&k()}),e)}y=y||"text";let T=await p[rn.findKey(p,y)||"text"](h,e);return!m&&k&&k(),await new Promise((t,r)=>{rz(t,r,{data:T,headers:rL.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:w})})}catch(t){if(k&&k(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new ra("Network Error",ra.ERR_NETWORK,e,w),{cause:t.cause||t});throw ra.from(t,t&&t.code,e,w)}}},r9=new Map,ne=e=>{let t=e&&e.env||{},{fetch:r,Request:n,Response:i}=t,a=[n,i,r],o=a.length,l,s,c=r9;for(;o--;)l=a[o],void 0===(s=c.get(l))&&c.set(l,s=o?new Map:r7(t)),c=s;return s};ne();let nt={http:null,xhr:rQ,fetch:{get:ne}};rn.forEach(nt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let nr=e=>`- ${e}`,nn=e=>rn.isFunction(e)||null===e||!1===e,ni=function(e,t){let r,n,{length:i}=e=rn.isArray(e)?e:[e],a={};for(let o=0;o<i;o++){let i;if(n=r=e[o],!nn(r)&&void 0===(n=nt[(i=String(r)).toLowerCase()]))throw new ra(`Unknown adapter '${i}'`);if(n&&(rn.isFunction(n)||(n=n.get(t))))break;a[i||"#"+o]=n}if(!n){let e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new ra("There is no suitable adapter to dispatch the request "+(i?e.length>1?"since :\n"+e.map(nr).join("\n"):" "+nr(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function na(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rN(null,e)}function no(e){return na(e),e.headers=rL.from(e.headers),e.data=rM.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ni(e.adapter||rP.adapter,e)(e).then(function(t){return na(e),t.data=rM.call(e,e.transformResponse,t),t.headers=rL.from(t.headers),t},function(t){return!rW(t)&&(na(e),t&&t.response&&(t.response.data=rM.call(e,e.transformResponse,t.response),t.response.headers=rL.from(t.response.headers))),Promise.reject(t)})}let nl="1.13.2",ns={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ns[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let nc={};ns.transitional=function(e,t,r){function n(e,t){return"[Axios v"+nl+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,a)=>{if(!1===e)throw new ra(n(i," has been removed"+(t?" in "+t:"")),ra.ERR_DEPRECATED);return t&&!nc[i]&&(nc[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,a)}},ns.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let nd=function(e,t,r){if("object"!=typeof e)throw new ra("options must be an object",ra.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let a=n[i],o=t[a];if(o){let t=e[a],r=void 0===t||o(t,a,e);if(!0!==r)throw new ra("option "+a+" must be "+r,ra.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new ra("Unknown option "+a,ra.ERR_BAD_OPTION)}};class nu{constructor(e){this.defaults=e||{},this.interceptors={request:new ry,response:new ry}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:a,headers:o}=t=rK(this.defaults,t);void 0!==i&&nd(i,{silentJSONParsing:ns.transitional(ns.boolean),forcedJSONParsing:ns.transitional(ns.boolean),clarifyTimeoutError:ns.transitional(ns.boolean)},!1),null!=a&&(rn.isFunction(a)?t.paramsSerializer={serialize:a}:nd(a,{encode:ns.function,serialize:ns.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),nd(t,{baseUrl:ns.spelling("baseURL"),withXsrfToken:ns.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&rn.merge(o.common,o[t.method]);o&&rn.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=rL.concat(l,o);let s=[],c=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(c=c&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});let d=[];this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)});let u=0;if(!c){let e=[no.bind(this),void 0];for(e.unshift(...s),e.push(...d),n=e.length,r=Promise.resolve(t);u<n;)r=r.then(e[u++],e[u++]);return r}n=s.length;let p=t;for(;u<n;){let e=s[u++],t=s[u++];try{p=e(p)}catch(e){t.call(this,e);break}}try{r=no.call(this,p)}catch(e){return Promise.reject(e)}for(u=0,n=d.length;u<n;)r=r.then(d[u++],d[u++]);return r}getUri(e){return rg(rV((e=rK(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}rn.forEach(["delete","get","head","options"],function(e){nu.prototype[e]=function(t,r){return this.request(rK(r||{},{method:e,url:t,data:(r||{}).data}))}}),rn.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(rK(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}nu.prototype[e]=t(),nu.prototype[e+"Form"]=t(!0)});class np{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new rN(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new np(function(t){e=t}),cancel:e}}}let nh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nh).forEach(([e,t])=>{nh[t]=e});let nf=function e(t){let r=new nu(t),n=tI(nu.prototype.request,r);return rn.extend(n,nu.prototype,r,{allOwnKeys:!0}),rn.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(rK(t,r))},n}(rP);nf.Axios=nu,nf.CanceledError=rN,nf.CancelToken=np,nf.isCancel=rW,nf.VERSION=nl,nf.toFormData=rp,nf.AxiosError=ra,nf.Cancel=nf.CanceledError,nf.all=function(e){return Promise.all(e)},nf.spread=function(e){return function(t){return e.apply(null,t)}},nf.isAxiosError=function(e){return rn.isObject(e)&&!0===e.isAxiosError},nf.mergeConfig=rK,nf.AxiosHeaders=rL,nf.formToJSON=e=>rI(rn.isHTMLForm(e)?new FormData(e):e),nf.getAdapter=ni,nf.HttpStatusCode=nh,nf.default=nf;var nm=e.i(9929),nx=e.i(15254);function ng({height:e=500}){let{user:t}=(0,nx.useAuth)(),{users:r}=(()=>{let[e,t]=(0,x.useState)([]),[r,n]=(0,x.useState)(!0),[i,a]=(0,x.useState)(null);return(0,x.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){a("Not authenticated"),n(!1);return}let r=ef.default.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",i=await nf.get(`${r}/api/users/workspace`,{headers:{Authorization:`Bearer ${e}`}});t(i.data),a(null)}catch(e){console.error("Error fetching workspace users:",e),a(e.response?.data?.message||"Failed to fetch users")}finally{n(!1)}})()},[]),{users:e,loading:r,error:i}})(),{tasks:n,createTask:i,updateTask:a,deleteTask:o,updateTaskNotes:l,isLoading:s,error:c,authRequired:d,refresh:u,isStale:p}=function(e){let[t,r]=(0,x.useState)([]),[n,i]=(0,x.useState)(!1),[a,o]=(0,x.useState)(null),[l,s]=(0,x.useState)(!1),c=(0,x.useRef)(void 0),[d,u]=(0,x.useState)(!1),[p,h]=(0,x.useState)(null),[f,m]=(0,x.useState)(null),g=(0,x.useRef)(null),y=(0,x.useCallback)(async()=>{try{i(!0),o(null),s(!1);let e=(0,X.getTasksBackendUrl)(),t=await (0,X.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===t.status){s(!0),o("Authentication required"),r([]);return}let n=await t.json(),a=new Date;r(n.tasks||[]),h(a),g.current=a,u(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(s(!0),o("Authentication required"),r([])):(o(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{i(!1)}},[]),j=(0,x.useCallback)(()=>y(),[y]),b=async(e,t,a,l,c,d,u)=>{if(n)return void console.warn("Task creation already in progress, ignoring duplicate call");try{i(!0),o(null),s(!1);let n=(0,X.getTasksBackendUrl)();console.log("Creating task at:",`${n}/api/tasks`,{title:e,description:t,hyperlinks:a,status:l,notes:u});let p=await (0,X.fetchWithErrorHandling)(`${n}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:t,hyperlinks:a,status:l,assignedTo:c,assignedToName:d,notes:u||""})});if(401===p.status)throw s(!0),Error("Authentication required");if(!p.ok){let e=await p.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||e.message||`Server error: ${p.status}`)}let f=(await p.json()).task;if(!f)throw Error("Server did not return a task");console.log("Task created, adding to state:",f);let m=new Date;return r(e=>e.some(e=>e.id===f.id)?e.map(e=>e.id===f.id?f:e):[...e,f]),h(m),g.current=m,f}catch(e){throw console.error("Error in createTask:",e),(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),o(e.message),e}finally{i(!1)}},v=async(e,t)=>{try{i(!0),o(null),s(!1);let n=(0,X.getTasksBackendUrl)(),a=await (0,X.fetchWithErrorHandling)(`${n}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)});if(401===a.status)throw s(!0),Error("Authentication required");let l=(await a.json()).task,c=new Date;return r(e=>e.map(e=>e.id===l.id?l:e)),h(c),g.current=c,l}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),o(e.message),e}finally{i(!1)}},S=async e=>{try{i(!0),o(null),s(!1);let t=(0,X.getTasksBackendUrl)(),r=await (0,X.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===r.status)throw s(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),o(e.message),e}finally{i(!1)}};return(0,x.useEffect)(()=>{let e=!0;y();let t=(0,tA.getTasksSocket)();m(t);let n=()=>{console.log("Socket.io connected for tasks")},i=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},a=e=>{console.log("Socket.io disconnected (tasks):",e)};t.on("connect",n),t.on("connect_error",i),t.on("disconnect",a),t.on("task_created",t=>{if(!e)return;let n=new Date;r(e=>e.some(e=>e.id===t.id)?e.map(e=>e.id===t.id?t:e):[...e,t]),h(n),g.current=n}),t.on("task_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.id?t:e)),h(n),g.current=n}),t.on("task_deleted",t=>{if(!e)return;let n=new Date;r(e=>e.filter(e=>e.id!==t.id)),h(n),g.current=n}),t.on("task_notes_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.task_id?{...e,notes:t.notes}:e)),h(n),g.current=n}),t.on("task_assigned",t=>{if(!e)return;console.log("Task assigned notification:",t);let n=new Date;r(e=>e.map(e=>e.id===t.task.id?t.task:e)),h(n),g.current=n,c.current&&c.current(t.task,t.assignedTo)}),t.on("auth_restored_ack",()=>{e&&(s(!1),y())});let o=setInterval(()=>{if(!e)return;let t=g.current;t&&Date.now()-t.getTime()>3e5&&u(!0)},6e4);return()=>{e=!1,t.off("connect",n),t.off("connect_error",i),t.off("disconnect",a),t.off("task_created"),t.off("task_updated"),t.off("task_deleted"),t.off("task_assigned"),t.off("task_notes_updated"),t.off("auth_restored_ack"),clearInterval(o)}},[y]),(0,x.useEffect)(()=>{c.current=void 0},[void 0]),{tasks:t,isLoading:n,error:a,authRequired:l,isStale:d,lastUpdated:p,refresh:j,fetchTasks:y,createTask:b,updateTask:v,deleteTask:S,updateTaskNotes:(e,t)=>{r(r=>r.map(r=>r.id===e?{...r,notes:t}:r)),f&&f.emit("task_notes_update",{task_id:e,notes:t,user_id:null})}}}(),[f,m]=(0,x.useState)(!1),[g,j]=(0,x.useState)("create"),[v,S]=(0,x.useState)(null),[w,k]=(0,x.useState)(""),[P,O]=(0,x.useState)(""),[B,R]=(0,x.useState)(""),[F,$]=(0,x.useState)(null),[U,V]=(0,x.useState)(!1),[J,K]=(0,x.useState)(""),[Y,Q]=(0,x.useState)("info"),[Z,et]=(0,x.useState)(!1),er=x.default.useRef(null),[en,ei]=(0,x.useState)(""),[ea,el]=(0,x.useState)("pending"),[es,ec]=(0,x.useState)(""),[ed,eu]=(0,x.useState)(localStorage.getItem("taskFilter")||"all"),[ep,em]=(0,x.useState)([]),[ex,eg]=(0,x.useState)(!1),[ey,ej]=(0,x.useState)([]),eb=x.default.useMemo(()=>[...r.map(e=>({id:String(e.id),name:e.name||e.email||"Unknown"})),...ey.map(e=>({id:String(e.id),name:`${e.name} (${e.email})`}))].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id)),[r,ey]);x.default.useEffect(()=>{(async()=>{try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();ej(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}})()},[]),x.default.useEffect(()=>{(async()=>{if(t&&(t.isEmployee||t.isAdmin)){eg(!0);try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();em(e.requests||[])}else{let e=await t.json().catch(()=>({error:"Failed to fetch support requests"}));console.error("Error fetching support requests:",e)}}catch(e){console.error("Error fetching support requests:",e)}finally{eg(!1)}}})()},[t]);let ev=n.filter(e=>"my-tasks"===ed?e.assignedTo===t?.id:"created-by-me"!==ed||e.createdBy===t?.id),eS=n.filter(e=>e.assignedTo===t?.id).length,eC=n.filter(e=>e.createdBy===t?.id).length,ew=async e=>{let r=n.find(t=>t.id===e);if(!r)return;let i="completed"===r.status?"pending":"completed";try{await a(e,{status:i}),"completed"===i&&(0,nm.trackTaskCompleted)(e,t?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},ek=async()=>{if(w.trim())try{let e=en.split(",").map(e=>e.trim()).filter(e=>e);if("create"===g){let t=await i(w.trim(),P.trim(),e,ea,F?.id,F?.name,B.trim());es&&t?.id&&await a(t.id,{supportRequestId:es})}else v&&(await a(v,{title:w.trim(),description:P.trim(),hyperlinks:e,status:ea,supportRequestId:es||void 0}),"completed"===ea&&(0,nm.trackTaskCompleted)(v,t?.userRole||"user","cowork"));m(!1)}catch(e){console.error("Error saving task:",e)}},eT=async e=>{try{await o(e)}catch(e){console.error("Error deleting task:",e)}},eE=()=>{V(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(C.Paper,{elevation:2,sx:{p:3,height:e,display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(y.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,children:"Tasks"}),(0,h.jsxs)(y.Box,{sx:{display:"flex",gap:1},children:[(0,h.jsx)(tp.Tooltip,{title:"Refresh",children:(0,h.jsx)(eh.IconButton,{onClick:u,size:"small",children:(0,h.jsx)(ee.default,{})})}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(to.default,{}),onClick:()=>{j("create"),S(null),k(""),O(""),ei(""),el("pending"),ec(""),m(!0)},size:"small",children:"Add Task"})]})]}),c&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},children:c}),p&&(0,h.jsx)(I.Alert,{severity:"info",sx:{mb:2},action:(0,h.jsx)(z.Button,{size:"small",onClick:u,children:"Refresh"}),children:"Tasks may be out of date"}),(0,h.jsxs)(y.Box,{sx:{flexGrow:1,overflow:"auto"},children:[(0,h.jsx)(y.Box,{sx:{mb:2,display:"flex",justifyContent:"center"},children:(0,h.jsxs)(tb.ToggleButtonGroup,{value:ed,exclusive:!0,onChange:(e,t)=>{null!==t&&(eu(t),localStorage.setItem("taskFilter",t))},size:"small","aria-label":"task filter",children:[(0,h.jsxs)(tv.ToggleButton,{value:"all","aria-label":"all tasks",children:["All Tasks (",n.length,")"]}),(0,h.jsxs)(tv.ToggleButton,{value:"my-tasks","aria-label":"my tasks",children:["My Tasks (",eS,")"]}),(0,h.jsxs)(tv.ToggleButton,{value:"created-by-me","aria-label":"created by me",children:["Created by Me (",eC,")"]})]})}),ev.map(e=>(0,h.jsx)(T.Card,{sx:{mb:2},elevation:1,children:(0,h.jsx)(E.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,h.jsxs)(y.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,h.jsx)(tS.Checkbox,{checked:"completed"===e.status,onChange:()=>ew(e.id),disabled:s,size:"small"}),(0,h.jsxs)(y.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,h.jsx)(b.Typography,{variant:"subtitle1",fontWeight:500,sx:{textDecoration:"completed"===e.status?"line-through":"none"},children:e.title}),e.description&&(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description}),(0,h.jsxs)(y.Box,{sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[(0,h.jsx)(eo.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status)}),e.hyperlinks&&e.hyperlinks.length>0&&(0,h.jsx)(eo.Chip,{icon:(0,h.jsx)(tk.default,{}),label:`${e.hyperlinks.length}`,size:"small",variant:"outlined"}),e.createdByName&&(0,h.jsx)(eo.Chip,{icon:(0,h.jsx)(tE.default,{}),label:`By: ${e.createdByName}`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}}),e.assignedToName?(0,h.jsx)(eo.Chip,{icon:(0,h.jsx)(tT.default,{}),label:` ${e.assignedToName}`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem"}}):void 0===e.assignedTo&&(0,h.jsx)(eo.Chip,{label:"Unassigned",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",opacity:.6}})]})]}),(0,h.jsxs)(y.Box,{sx:{display:"flex",gap:.5},children:[(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>{j("edit"),S(e.id),k(e.title),O(e.description||""),ei(e.hyperlinks.join(", ")),el(e.status),ec(e.supportRequestId||""),R(e.notes||""),m(!0)},children:(0,h.jsx)(ts.default,{fontSize:"small"})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>eT(e.id),children:(0,h.jsx)(tf.default,{fontSize:"small"})})]})]})})},e.id)),0===n.length&&!s&&(0,h.jsx)(y.Box,{sx:{textAlign:"center",py:4},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"No tasks yet. Add your first task to get started!"})}),s&&(0,h.jsx)(y.Box,{sx:{textAlign:"center",py:4},children:(0,h.jsx)(A.CircularProgress,{size:24})})]})]}),(0,h.jsxs)(L.Dialog,{open:f,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:"create"===g?"Add Task":"Edit Task"}),(0,h.jsxs)(W.DialogContent,{children:[(0,h.jsx)(D.TextField,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,variant:"outlined",value:w,onChange:e=>k(e.target.value),sx:{mb:2,mt:1}}),(0,h.jsx)(D.TextField,{margin:"dense",label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:P,onChange:e=>O(e.target.value),sx:{mb:2}}),(0,h.jsx)(ta,{options:eb,getOptionLabel:e=>e.name,value:F,onChange:(e,t)=>$(t),renderInput:e=>(0,h.jsx)(D.TextField,{...e,margin:"dense",label:"Assign To (Optional)",variant:"outlined",helperText:"Select from active workspace users or all employees"}),sx:{mb:2}}),(0,h.jsxs)(b.Typography,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:["Collaborative Notes ",Z&&"(Saving...)"]}),(0,h.jsx)(D.TextField,{margin:"dense",label:"Notes (Shared Workspace)",fullWidth:!0,variant:"outlined",multiline:!0,rows:6,value:B,onChange:e=>{var t;R(t=e.target.value),et(!0),er.current&&clearTimeout(er.current),er.current=setTimeout(()=>{v&&(l(v,t),et(!1))},500)},placeholder:"Start typing to collaborate with your team...",sx:{mb:2},helperText:"edit"===g?"Changes auto-save. Shared with assigned user in real-time.":"Add notes that will be shared with your team."}),(0,h.jsx)(D.TextField,{margin:"dense",label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:en,onChange:e=>ei(e.target.value),placeholder:"https://example.com, https://another.com",sx:{mb:2}}),ex?(0,h.jsx)(A.CircularProgress,{size:24}):ep.length>0&&(0,h.jsxs)(_.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,h.jsx)(q.InputLabel,{children:"Link to Support Request (Optional)"}),(0,h.jsxs)(H.Select,{value:es,label:"Link to Support Request (Optional)",onChange:e=>ec(e.target.value),children:[(0,h.jsx)(G.MenuItem,{value:"",children:"None"}),ep.map(e=>(0,h.jsxs)(G.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,margin:"dense",children:[(0,h.jsx)(q.InputLabel,{children:"Status"}),(0,h.jsxs)(H.Select,{value:ea,label:"Status",onChange:e=>el(e.target.value),children:[(0,h.jsx)(G.MenuItem,{value:"pending",children:"Pending"}),(0,h.jsx)(G.MenuItem,{value:"in-progress",children:"In Progress"}),(0,h.jsx)(G.MenuItem,{value:"completed",children:"Completed"})]})]})]}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:()=>m(!1),children:"Cancel"}),(0,h.jsx)(z.Button,{onClick:ek,variant:"contained",disabled:!w.trim()||s||d,children:"create"===g?"Add":"Save"})]})]}),(0,h.jsx)(tC.Snackbar,{open:U,autoHideDuration:6e3,onClose:eE,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,h.jsx)(I.Alert,{onClose:eE,severity:Y,sx:{width:"100%"},children:J})})]})}function ny(e){return(0,eL.default)("MuiStepper",e)}(0,e$.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);let nj=x.createContext({}),nb=x.createContext({});function nv(e){return(0,eL.default)("MuiStepConnector",e)}(0,e$.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let nS=["className"],nC=(0,eB.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ex.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),nw=(0,eB.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.line,t[`line${(0,eF.default)(r.orientation)}`]]}})(({ownerState:e,theme:t})=>{let r="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,ex.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:r},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),nk=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:n}=r,i=(0,em.default)(r,nS),{alternativeLabel:a,orientation:o="horizontal"}=x.useContext(nj),{active:l,disabled:s,completed:c}=x.useContext(nb),d=(0,ex.default)({},r,{alternativeLabel:a,orientation:o,active:l,completed:c,disabled:s}),u=(e=>{let{classes:t,orientation:r,alternativeLabel:n,active:i,completed:a,disabled:o}=e,l={root:["root",r,n&&"alternativeLabel",i&&"active",a&&"completed",o&&"disabled"],line:["line",`line${(0,eF.default)(r)}`]};return(0,ey.default)(l,nv,t)})(d);return(0,h.jsx)(nC,(0,ex.default)({className:(0,eg.default)(u.root,n),ref:t,ownerState:d},i,{children:(0,h.jsx)(nw,{className:u.line,ownerState:d})}))}),nT=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],nE=(0,eB.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,ex.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),nA=(0,h.jsx)(nk,{}),nI=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:n=0,alternativeLabel:i=!1,children:a,className:o,component:l="div",connector:s=nA,nonLinear:c=!1,orientation:d="horizontal"}=r,u=(0,em.default)(r,nT),p=(0,ex.default)({},r,{nonLinear:c,alternativeLabel:i,orientation:d,component:l}),f=(e=>{let{orientation:t,nonLinear:r,alternativeLabel:n,classes:i}=e;return(0,ey.default)({root:["root",t,r&&"nonLinear",n&&"alternativeLabel"]},ny,i)})(p),m=x.Children.toArray(a).filter(Boolean),g=m.map((e,t)=>x.cloneElement(e,(0,ex.default)({index:t,last:t+1===m.length},e.props))),y=x.useMemo(()=>({activeStep:n,alternativeLabel:i,connector:s,nonLinear:c,orientation:d}),[n,i,s,c,d]);return(0,h.jsx)(nj.Provider,{value:y,children:(0,h.jsx)(nE,(0,ex.default)({as:l,ownerState:p,className:(0,eg.default)(f.root,o),ref:t},u,{children:g}))})});function nP(e){return(0,eL.default)("MuiStep",e)}(0,e$.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let nO=["active","children","className","component","completed","disabled","expanded","index","last"],nB=(0,eB.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ex.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),nR=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiStep"}),{active:n,children:i,className:a,component:o="div",completed:l,disabled:s,expanded:c=!1,index:d,last:u}=r,p=(0,em.default)(r,nO),{activeStep:f,connector:m,alternativeLabel:g,orientation:y,nonLinear:j}=x.useContext(nj),[b=!1,v=!1,S=!1]=[n,l,s];f===d?b=void 0===n||n:!j&&f>d?v=void 0===l||l:!j&&f<d&&(S=void 0===s||s);let C=x.useMemo(()=>({index:d,last:u,expanded:c,icon:d+1,active:b,completed:v,disabled:S}),[d,u,c,b,v,S]),w=(0,ex.default)({},r,{active:b,orientation:y,alternativeLabel:g,completed:v,disabled:S,expanded:c,component:o}),k=(e=>{let{classes:t,orientation:r,alternativeLabel:n,completed:i}=e;return(0,ey.default)({root:["root",r,n&&"alternativeLabel",i&&"completed"]},nP,t)})(w),T=(0,h.jsxs)(nB,(0,ex.default)({as:o,className:(0,eg.default)(k.root,a),ref:t,ownerState:w},p,{children:[m&&g&&0!==d?m:null,i]}));return(0,h.jsx)(nb.Provider,{value:C,children:m&&!g&&0!==d?(0,h.jsxs)(x.Fragment,{children:[m,T]}):T})});var nF=e.i(62731);let n$=(0,nF.default)((0,h.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),nL=(0,nF.default)((0,h.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var nM=e.i(48040);function nW(e){return(0,eL.default)("MuiStepIcon",e)}let nN=(0,e$.default)("MuiStepIcon",["root","active","completed","error","text"]),nz=["active","className","completed","error","icon"],nD=(0,eB.default)(nM.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${nN.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${nN.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${nN.error}`]:{color:(e.vars||e).palette.error.main}})),nU=(0,eB.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),n_=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:n=!1,className:i,completed:a=!1,error:o=!1,icon:l}=r,s=(0,em.default)(r,nz),c=(0,ex.default)({},r,{active:n,completed:a,error:o}),d=(e=>{let{classes:t,active:r,completed:n,error:i}=e;return(0,ey.default)({root:["root",r&&"active",n&&"completed",i&&"error"],text:["text"]},nW,t)})(c);if("number"==typeof l||"string"==typeof l){let e=(0,eg.default)(i,d.root);return o?(0,h.jsx)(nD,(0,ex.default)({as:nL,className:e,ref:t,ownerState:c},s)):a?(0,h.jsx)(nD,(0,ex.default)({as:n$,className:e,ref:t,ownerState:c},s)):(0,h.jsxs)(nD,(0,ex.default)({className:e,ref:t,ownerState:c},s,{children:[u||(u=(0,h.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,h.jsx)(nU,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:c,children:l})]}))}return l});function nq(e){return(0,eL.default)("MuiStepLabel",e)}let nH=(0,e$.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),nG=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],nX=(0,eB.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation]]}})(({ownerState:e})=>(0,ex.default)({display:"flex",alignItems:"center",[`&.${nH.alternativeLabel}`]:{flexDirection:"column"},[`&.${nH.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),nV=(0,eB.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,ex.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${nH.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${nH.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${nH.alternativeLabel}`]:{marginTop:16},[`&.${nH.error}`]:{color:(e.vars||e).palette.error.main}})),nJ=(0,eB.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${nH.alternativeLabel}`]:{paddingRight:0}})),nK=(0,eB.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${nH.alternativeLabel}`]:{textAlign:"center"}})),nY=x.forwardRef(function(e,t){var r;let n=(0,eR.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:i,className:a,componentsProps:o={},error:l=!1,icon:s,optional:c,slotProps:d={},StepIconComponent:u,StepIconProps:p}=n,f=(0,em.default)(n,nG),{alternativeLabel:m,orientation:g}=x.useContext(nj),{active:y,disabled:j,completed:b,icon:v}=x.useContext(nb),S=s||v,C=u;S&&!C&&(C=n_);let w=(0,ex.default)({},n,{active:y,alternativeLabel:m,completed:b,disabled:j,error:l,orientation:g}),k=(e=>{let{classes:t,orientation:r,active:n,completed:i,error:a,disabled:o,alternativeLabel:l}=e;return(0,ey.default)({root:["root",r,a&&"error",o&&"disabled",l&&"alternativeLabel"],label:["label",n&&"active",i&&"completed",a&&"error",o&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",i&&"completed",a&&"error",o&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]},nq,t)})(w),T=null!=(r=d.label)?r:o.label;return(0,h.jsxs)(nX,(0,ex.default)({className:(0,eg.default)(k.root,a),ref:t,ownerState:w},f,{children:[S||C?(0,h.jsx)(nJ,{className:k.iconContainer,ownerState:w,children:(0,h.jsx)(C,(0,ex.default)({completed:b,active:y,error:l,icon:S},p))}):null,(0,h.jsxs)(nK,{className:k.labelContainer,ownerState:w,children:[i?(0,h.jsx)(nV,(0,ex.default)({ownerState:w},T,{className:(0,eg.default)(k.label,null==T?void 0:T.className),children:i})):null,c]})]}))});nY.muiName="StepLabel";var nQ=K;function nZ(e){return(0,eL.default)("MuiStepContent",e)}(0,e$.default)("MuiStepContent",["root","last","transition"]);let n0=["children","className","TransitionComponent","transitionDuration","TransitionProps"],n1=(0,eB.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.last&&t.last]}})(({ownerState:e,theme:t})=>(0,ex.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),n2=(0,eB.default)(nQ.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),n5=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:n,className:i,TransitionComponent:a=nQ.default,transitionDuration:o="auto",TransitionProps:l}=r,s=(0,em.default)(r,n0),{orientation:c}=x.useContext(nj),{active:d,last:u,expanded:p}=x.useContext(nb),f=(0,ex.default)({},r,{last:u}),m=(e=>{let{classes:t,last:r}=e;return(0,ey.default)({root:["root",r&&"last"],transition:["transition"]},nZ,t)})(f),g=o;return"auto"!==o||a.muiSupportAuto||(g=void 0),(0,h.jsx)(n1,(0,ex.default)({className:(0,eg.default)(m.root,i),ref:t,ownerState:f},s,{children:(0,h.jsx)(n2,(0,ex.default)({as:a,in:d||p,className:m.transition,ownerState:f,timeout:g,unmountOnExit:!0},l,{children:n}))}))});var n4=e.i(92487),n3=e.i(94660),n6=e.i(43884),n8=e.i(29360),n7=e.i(56553),n9=e.i(52377),ie=e.i(53251);function it(){let[e,t]=(0,x.useState)(0),[r,n]=(0,x.useState)([]),[i,a]=(0,x.useState)(""),[o,l]=(0,x.useState)(""),[s,c]=(0,x.useState)(""),[d,u]=(0,x.useState)(""),[p,f]=(0,x.useState)(!1),[m,g]=(0,x.useState)(null),[j,v]=(0,x.useState)(!1),[S,w]=(0,x.useState)(!1),k=["Guide","Quiz","SEO Audit","Generate Script"],A={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with valuelike a free SEO audit or actionable insightsyou immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:` Personalization is non-negotiable
 Focus on their problems, not your solutions
 Use data and insights, not flattery
 Make it easy for them to say yes
 Follow up with more value, not pressure`}]},P=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],O=()=>{1!==e||P.every(e=>r.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||i.trim()?t(e=>Math.min(e+1,k.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},B=()=>{t(e=>Math.max(e-1,0))},R=async()=>{f(!0),u(""),g(null);try{let e=(0,X.getBackendUrl)(),t=r.map(e=>{let t=P.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),n=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${o||"Not provided"}
- Website: ${i}
- Industry: ${s||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,a=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:n}]})});if(!a.ok)throw Error("Failed to generate script");let l=await a.json();u(l.text);try{let e=l.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let r=JSON.parse(e);g({script:r.script||l.text,seoAudit:r.seoAudit||"SEO audit details will be generated.",valueProposition:r.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(r.nextSteps)?r.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){g({script:l.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}v(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{f(!1)}};return(0,h.jsx)(y.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,h.jsxs)(U.Stack,{spacing:3,children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(eo.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,h.jsx)(n8.default,{}),sx:{fontWeight:700,mb:2}}),(0,h.jsx)(b.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,h.jsx)(b.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,h.jsx)(I.Alert,{severity:"info",sx:{mb:2},children:(0,h.jsxs)(b.Typography,{variant:"body2",children:[(0,h.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,h.jsx)(z.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,h.jsx)(ie.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,h.jsx)(C.Paper,{sx:{p:3},children:(0,h.jsxs)(nI,{activeStep:e,orientation:"vertical",children:[(0,h.jsxs)(nR,{children:[(0,h.jsx)(nY,{children:(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,h.jsxs)(n5,{children:[(0,h.jsxs)(y.Box,{sx:{mb:3},children:[(0,h.jsx)(b.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:A.title}),(0,h.jsx)(U.Stack,{spacing:3,children:A.sections.map((e,t)=>(0,h.jsxs)(n4.Accordion,{defaultExpanded:0===t,children:[(0,h.jsx)(n3.AccordionSummary,{expandIcon:(0,h.jsx)(et.default,{}),children:(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,h.jsx)(n6.AccordionDetails,{children:(0,h.jsx)(b.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,h.jsx)(z.Button,{variant:"contained",onClick:O,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,h.jsxs)(nR,{children:[(0,h.jsx)(nY,{children:(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,h.jsxs)(n5,{children:[(0,h.jsxs)(U.Stack,{spacing:3,sx:{mb:3},children:[(0,h.jsx)(I.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),P.map(e=>{let t=r.find(t=>t.questionId===e.id);return(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,h.jsx)(D.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var r,i;return r=e.id,i=t.target.value,void n(e=>e.find(e=>e.questionId===r)?e.map(e=>e.questionId===r?{...e,answer:i}:e):[...e,{questionId:r,answer:i}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(z.Button,{onClick:B,children:"Back"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:O,children:"Continue to SEO Audit"})]})]})]}),(0,h.jsxs)(nR,{children:[(0,h.jsx)(nY,{children:(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,h.jsxs)(n5,{children:[(0,h.jsxs)(U.Stack,{spacing:3,sx:{mb:3},children:[(0,h.jsx)(I.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Client Name",value:o,onChange:e=>l(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Client Website URL",value:i,onChange:e=>a(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Industry",value:s,onChange:e=>c(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(z.Button,{onClick:B,children:"Back"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:O,children:"Generate Script"})]})]})]}),(0,h.jsxs)(nR,{children:[(0,h.jsx)(nY,{children:(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,h.jsxs)(n5,{children:[(0,h.jsxs)(U.Stack,{spacing:3,sx:{mb:3},children:[(0,h.jsx)(I.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,h.jsxs)(U.Stack,{spacing:1,children:[(0,h.jsxs)(b.Typography,{children:[(0,h.jsx)("strong",{children:"Client:"})," ",o||"Not provided"]}),(0,h.jsxs)(b.Typography,{children:[(0,h.jsx)("strong",{children:"Website:"})," ",i||"Not provided"]}),(0,h.jsxs)(b.Typography,{children:[(0,h.jsx)("strong",{children:"Industry:"})," ",s||"Not provided"]}),(0,h.jsxs)(b.Typography,{children:[(0,h.jsx)("strong",{children:"Quiz Answers:"})," ",r.length," / ",P.length]})]})]})})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(z.Button,{onClick:B,children:"Back"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:R,disabled:p,startIcon:(0,h.jsx)(n7.default,{}),size:"large",children:p?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,h.jsxs)(L.Dialog,{open:j,onClose:()=>v(!1),maxWidth:"md",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,h.jsx)(b.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,children:[(0,h.jsx)(eh.IconButton,{onClick:()=>{m&&(navigator.clipboard.writeText(m.script),w(!0),setTimeout(()=>w(!1),2e3))},title:"Copy Script",children:(0,h.jsx)(n9.default,{})}),(0,h.jsx)(eh.IconButton,{onClick:()=>{if(m){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${o||"N/A"}
Website: ${i}

SCRIPT:
${m.script}

SEO AUDIT SUMMARY:
${m.seoAudit}

VALUE PROPOSITION:
${m.valueProposition}

NEXT STEPS:
${m.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`seo-prospecting-script-${o||"client"}-${Date.now()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,h.jsx)(Z.default,{})})]})]})}),(0,h.jsx)(W.DialogContent,{dividers:!0,children:m&&(0,h.jsxs)(U.Stack,{spacing:3,children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,h.jsx)(C.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,h.jsx)(b.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:m.script})})]}),(0,h.jsx)(Y.Divider,{}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,h.jsx)(C.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,h.jsx)(b.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:m.seoAudit})})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,h.jsx)(C.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,h.jsx)(b.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:m.valueProposition})})]}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,h.jsx)(U.Stack,{spacing:1,children:m.nextSteps.map((e,t)=>(0,h.jsx)(eo.Chip,{label:`${t+1}. ${e}`,icon:(0,h.jsx)(tw.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:()=>v(!1),children:"Close"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:()=>{v(!1),t(0),g(null),n([]),a(""),l(""),c("")},children:"Create Another Script"})]})]}),S&&(0,h.jsx)(I.Alert,{severity:"success",onClose:()=>w(!1),children:"Script copied to clipboard!"})]})})}let ir=null,ii=null;try{let t=e.r(26482);ir=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);ii=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function ia(){let{settings:e,updateApiKeys:t}=(0,tj.useSettings)(),[r,n]=(0,x.useState)([]),[i,a]=(0,x.useState)(null),[o,l]=(0,x.useState)(!1),[s,c]=(0,x.useState)(""),[d,u]=(0,x.useState)(""),[p,f]=(0,x.useState)(null),[m,g]=(0,x.useState)(null),[j,v]=(0,x.useState)(""),S=null,w=null;try{ir&&(S=ir())}catch(e){console.warn("Figma hook not available:",e)}try{ii&&(w=ii())}catch(e){console.warn("MCP hook not available:",e)}let k=S?.files||[],P=S?.components||[],O=S?.componentStatuses||{};S?.isLoading;let B=S?.error||null,R=S?.fetchFiles||(()=>Promise.resolve()),F=S?.fetchComponents||(()=>Promise.resolve()),$=S?.likeComponent||(()=>Promise.resolve()),X=S?.saveComponent||(()=>Promise.resolve()),V=S?.fetchComponentStatus||(()=>Promise.resolve()),K=w?.linkComponentToCode||(()=>Promise.resolve()),Y=w?.fetchCodeLinks||(()=>Promise.resolve()),[Q,Z]=(0,x.useState)(null),[et,er]=(0,x.useState)(!1),[en,ei]=(0,x.useState)(""),[ea,el]=(0,x.useState)(""),[es,ec]=(0,x.useState)(""),[ed,eu]=(0,x.useState)(!1);(0,x.useEffect)(()=>{v(e.apiKeys?.revidApiKey||"")},[e.apiKeys]),(0,x.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{n(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]),(0,x.useEffect)(()=>{ir&&ii&&(async()=>{try{await Promise.all([R(),Y()])}catch(e){console.error("Error loading Figma data:",e)}})()},[]),(0,x.useEffect)(()=>{Q&&ir&&(eu(!0),F(Q).then(()=>{P.length>0&&Promise.all(P.map(e=>V(e.key,Q)))}).catch(e=>console.error("Error fetching components:",e)).finally(()=>eu(!1)))},[Q]);let ep=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),n(e)},ef=()=>{a(null),c(""),u(""),l(!0),f(null)},em=async e=>{if(!j)return void f("Revid.ai API key is required. Please add your API key above.");f(null),g("Generating video... This may take a few minutes.");try{let t=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify({script:e.content,title:e.title})});if(!t.ok)throw Error("Failed to generate video");await t.json();let n=r.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);ep(n),g("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>g(null),5e3)}catch(e){f(e.message||"Failed to generate video. Please check your API key and try again."),g(null)}},ex=async(e,t)=>{t.stopPropagation();let r=O[e]?.liked||!1;try{await $(e,!r,Q||void 0)}catch(e){console.error("Error liking component:",e)}},eg=async(e,t)=>{t.stopPropagation();let r=O[e]?.saved||!1;try{await X(e,!r,Q||void 0)}catch(e){console.error("Error saving component:",e)}},ey=async()=>{if(en&&ea)try{await K(en,ea,es,Q||""),er(!1),Y()}catch(e){console.error("Error linking component:",e)}};return(0,h.jsxs)(y.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:[(0,h.jsxs)(J.Grid,{container:!0,spacing:3,children:[(0,h.jsx)(J.Grid,{item:!0,xs:12,md:4,children:(0,h.jsx)(ng,{height:600})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,md:8,children:(0,h.jsxs)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(y.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"}),(0,h.jsxs)(y.Box,{sx:{display:"flex",gap:1},children:[(0,h.jsx)(tp.Tooltip,{title:"Refresh",children:(0,h.jsx)(eh.IconButton,{onClick:()=>{Q?F(Q):R()},size:"small",children:(0,h.jsx)(ee.default,{})})}),(0,h.jsx)(z.Button,{variant:"outlined",size:"small",onClick:()=>er(!0),disabled:!Q||0===P.length,children:"Link to Code"})]})]}),ir&&ii?(0,h.jsxs)(y.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[B&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},children:B}),(0,h.jsx)(y.Box,{sx:{mb:2},children:(0,h.jsxs)(_.FormControl,{fullWidth:!0,size:"small",children:[(0,h.jsx)(q.InputLabel,{children:"Select Figma File"}),(0,h.jsxs)(H.Select,{value:Q||"",label:"Select Figma File",onChange:e=>Z(e.target.value),children:[(0,h.jsx)(G.MenuItem,{value:"",children:"-- Select a file --"}),k.map(e=>(0,h.jsx)(G.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),Q&&(0,h.jsx)(y.Box,{sx:{flexGrow:1,overflow:"auto"},children:ed?(0,h.jsxs)(y.Box,{sx:{textAlign:"center",py:4},children:[(0,h.jsx)(A.CircularProgress,{size:24}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,h.jsxs)(J.Grid,{container:!0,spacing:2,children:[P.map(e=>(0,h.jsx)(J.Grid,{item:!0,xs:12,sm:6,children:(0,h.jsx)(T.Card,{elevation:1,children:(0,h.jsxs)(E.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,h.jsxs)(y.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,h.jsx)(eh.IconButton,{size:"small",onClick:t=>ex(e.key,t),color:O[e.key]?.liked?"error":"default",children:(0,h.jsx)(tg.default,{fontSize:"small"})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:t=>eg(e.key,t),color:O[e.key]?.saved?"primary":"default",children:(0,h.jsx)(ty.default,{fontSize:"small"})})]})]})})},e.key)),0===P.length&&(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!Q&&(0,h.jsx)(y.Box,{sx:{textAlign:"center",py:4},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,h.jsx)(I.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,md:8,children:(0,h.jsxs)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,h.jsx)(th.default,{sx:{fontSize:32,color:"primary.main"}}),(0,h.jsx)(b.Typography,{variant:"h5",sx:{fontWeight:700},children:"AI Agent Content Manager"})]}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily."}),(0,h.jsx)(y.Box,{sx:{mb:3},children:(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Revid.ai API Key",type:"password",value:j,onChange:e=>{let r=e.target.value;v(r),t({revidApiKey:r})},placeholder:"Enter your Revid.ai API key",helperText:"Required for AI Agent panel to generate and auto-post videos",size:"small"})}),m&&(0,h.jsx)(I.Alert,{severity:"success",sx:{mb:2},onClose:()=>g(null),children:m}),p&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},onClose:()=>f(null),children:p}),(0,h.jsx)(y.Box,{sx:{flexGrow:1,overflow:"auto"},children:o?(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{mb:2},children:i?"Edit Content":"Add New Content"}),(0,h.jsxs)(U.Stack,{spacing:2,children:[(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Title",value:s,onChange:e=>c(e.target.value),placeholder:"Enter content title",required:!0,size:"small"}),(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Content",value:d,onChange:e=>u(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:6,required:!0,size:"small"}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,children:[(0,h.jsx)(z.Button,{variant:"contained",onClick:()=>{if(!s.trim()||!d.trim())return void f("Title and content are required");if(!j)return void f("Revid.ai API key is required. Please add your API key above.");let e=i?{...i,title:s,content:d}:{id:Date.now().toString(),title:s,content:d,createdAt:new Date().toISOString(),status:"active"};ep(i?r.map(t=>t.id===i.id?e:t):[...r,e]),l(!1),c(""),u(""),a(null),g(i?"Content updated successfully":"Content added successfully"),setTimeout(()=>g(null),3e3)},size:"small",children:i?"Update":"Save"}),(0,h.jsx)(z.Button,{variant:"outlined",onClick:()=>{l(!1),c(""),u(""),a(null),f(null)},size:"small",children:"Cancel"})]})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(y.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,h.jsx)(b.Typography,{variant:"h6",children:"Content Library"}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(to.default,{}),onClick:ef,disabled:!j,size:"small",children:"Add Content"})]}),0===r.length?(0,h.jsxs)(y.Box,{sx:{textAlign:"center",py:4},children:[(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,h.jsx)(z.Button,{variant:"outlined",startIcon:(0,h.jsx)(to.default,{}),onClick:ef,disabled:!j,size:"small",children:"Add Your First Content"})]}):(0,h.jsx)(U.Stack,{spacing:2,children:r.filter(e=>"active"===e.status).map(e=>(0,h.jsx)(T.Card,{elevation:1,children:(0,h.jsx)(E.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",children:[(0,h.jsxs)(y.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,h.jsx)(b.Typography,{variant:"subtitle1",fontWeight:500,sx:{mb:.5},children:e.title}),(0,h.jsxs)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,h.jsx)(eo.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,h.jsx)(eo.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:.5,children:[(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>em(e),title:"Generate Video",disabled:!j,children:(0,h.jsx)(tm.default,{fontSize:"small"})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>{g("Scheduling feature coming soon!"),setTimeout(()=>g(null),3e3)},title:"Schedule",disabled:!j,children:(0,h.jsx)(tx.default,{fontSize:"small"})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>{a(e),c(e.title),u(e.content),l(!0),f(null)},title:"Edit",children:(0,h.jsx)(ts.default,{fontSize:"small"})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this content?")&&(ep(r.filter(e=>e.id!==t)),g("Content deleted successfully"),setTimeout(()=>g(null),3e3)))},title:"Delete",color:"error",children:(0,h.jsx)(tf.default,{fontSize:"small"})})]})]})})},e.id))})]})})]})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(C.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:(0,h.jsx)(it,{})})})]}),(0,h.jsxs)(L.Dialog,{open:et,onClose:()=>er(!1),maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:"Link Figma Component to Code"}),(0,h.jsxs)(W.DialogContent,{children:[(0,h.jsxs)(_.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,h.jsx)(q.InputLabel,{children:"Figma Component"}),(0,h.jsx)(H.Select,{value:en,label:"Figma Component",onChange:e=>ei(e.target.value),children:P.map(e=>(0,h.jsx)(G.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,h.jsx)(D.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:ea,onChange:e=>el(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,h.jsx)(D.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:es,onChange:e=>ec(e.target.value),placeholder:"Button"})]}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:()=>er(!1),children:"Cancel"}),(0,h.jsx)(z.Button,{onClick:ey,variant:"contained",disabled:!en||!ea,children:"Link"})]})]})]})}var io=e.i(88795),il=e.i(68418),is=e.i(85760);function ic(e){return(0,eL.default)("MuiInputAdornment",e)}let id=(0,e$.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),iu=["children","className","component","disablePointerEvents","disableTypography","position","variant"],ip=(0,eB.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`position${(0,eF.default)(r.position)}`],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(({theme:e,ownerState:t})=>(0,ex.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${id.positionStart}&:not(.${id.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),ih=x.forwardRef(function(e,t){let r=(0,eR.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:n,className:i,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:s,variant:c}=r,d=(0,em.default)(r,iu),u=(0,is.default)()||{},f=c;c&&u.variant,u&&!f&&(f=u.variant);let m=(0,ex.default)({},r,{hiddenLabel:u.hiddenLabel,size:u.size,disablePointerEvents:o,position:s,variant:f}),g=(e=>{let{classes:t,disablePointerEvents:r,hiddenLabel:n,position:i,size:a,variant:o}=e,l={root:["root",r&&"disablePointerEvents",i&&`position${(0,eF.default)(i)}`,o,n&&"hiddenLabel",a&&`size${(0,eF.default)(a)}`]};return(0,ey.default)(l,ic,t)})(m);return(0,h.jsx)(il.default.Provider,{value:null,children:(0,h.jsx)(ip,(0,ex.default)({as:a,ownerState:m,className:(0,eg.default)(g.root,i),ref:t},d,{children:"string"!=typeof n||l?(0,h.jsxs)(x.Fragment,{children:["start"===s?p||(p=(0,h.jsx)("span",{className:"notranslate",children:""})):null,n]}):(0,h.jsx)(io.default,{color:"text.secondary",children:n})}))})});var im=e.i(84579),ix=e.i(4591),ig=e.i(31862),iy=e.i(62438),ij=e.i(85106),ib=e.i(18805),iv=e.i(28097),iS=e.i(98721),iC=e.i(12895),iw=e.i(88522),ik=e.i(10600);function iT({open:e,onClose:t,client:r,onSave:n,readOnly:i=!1}){let[a,o]=(0,x.useState)({name:"",email:"",company:"",phone:"",status:"pending",tier:"starter",notes:"",googleAnalyticsPropertyKey:""}),[l,s]=(0,x.useState)(""),[c,d]=(0,x.useState)(!1);(0,x.useEffect)(()=>{r&&o({name:r.name||"",email:r.email||"",company:r.company||"",phone:r.phone||"",status:r.status||"pending",tier:r.tier||"starter",notes:r.notes||"",googleAnalyticsPropertyKey:r.googleAnalyticsPropertyKey||""})},[r]);let u=async()=>{if(i)return void t();s(""),d(!0);try{let e=await fetch(`${(0,X.getBackendUrl)()}/api/creative/clients/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to update client"}));throw Error(t.error||"Failed to update client")}n(),t()}catch(e){s(e.message||"Failed to update client")}finally{d(!1)}};return(0,h.jsxs)(L.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:i?"View Client":"Edit Client"}),(0,h.jsx)(W.DialogContent,{children:(0,h.jsxs)(y.Box,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[l&&(0,h.jsx)(I.Alert,{severity:"error",children:l}),(0,h.jsx)(D.TextField,{label:"Name",value:a.name,onChange:e=>o({...a,name:e.target.value}),fullWidth:!0,required:!0,disabled:i}),(0,h.jsx)(D.TextField,{label:"Email",type:"email",value:a.email,onChange:e=>o({...a,email:e.target.value}),fullWidth:!0,required:!0,disabled:i}),(0,h.jsx)(D.TextField,{label:"Company",value:a.company,onChange:e=>o({...a,company:e.target.value}),fullWidth:!0,required:!0,disabled:i}),(0,h.jsx)(D.TextField,{label:"Phone",value:a.phone,onChange:e=>o({...a,phone:e.target.value}),fullWidth:!0,disabled:i}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,disabled:i,children:[(0,h.jsx)(q.InputLabel,{children:"Status"}),(0,h.jsxs)(H.Select,{value:a.status,onChange:e=>o({...a,status:e.target.value}),label:"Status",children:[(0,h.jsx)(G.MenuItem,{value:"pending",children:"Pending"}),(0,h.jsx)(G.MenuItem,{value:"active",children:"Active"}),(0,h.jsx)(G.MenuItem,{value:"inactive",children:"Inactive"}),(0,h.jsx)(G.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,disabled:i,children:[(0,h.jsx)(q.InputLabel,{children:"Tier"}),(0,h.jsxs)(H.Select,{value:a.tier,onChange:e=>o({...a,tier:e.target.value}),label:"Tier",children:[(0,h.jsx)(G.MenuItem,{value:"starter",children:"Starter"}),(0,h.jsx)(G.MenuItem,{value:"professional",children:"Professional"}),(0,h.jsx)(G.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,h.jsx)(D.TextField,{label:"Notes",value:a.notes,onChange:e=>o({...a,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3,disabled:i}),(0,h.jsx)(D.TextField,{label:"Google Analytics Property Key",value:a.googleAnalyticsPropertyKey,onChange:e=>o({...a,googleAnalyticsPropertyKey:e.target.value}),fullWidth:!0,placeholder:"G-XXXXXXXXXX",helperText:"Google Analytics 4 Property ID for tracking client analytics growth",disabled:i})]})}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:t,children:i?"Close":"Cancel"}),!i&&(0,h.jsx)(z.Button,{onClick:u,variant:"contained",disabled:c,children:c?"Saving...":"Save Changes"})]})]})}function iE({open:e,onClose:t,clientId:r,clientName:n,currentEmployee:i,onAssign:a}){let[o,l]=(0,x.useState)([]),[s,c]=(0,x.useState)(null),[d,u]=(0,x.useState)(""),[p,f]=(0,x.useState)(!1),[m,g]=(0,x.useState)(!1),[j,v]=(0,x.useState)(!1),[S,C]=(0,x.useState)(null);(0,x.useEffect)(()=>{e?(w(),i&&(u(i),f(!0))):(c(null),u(""),f(!1),C(null))},[e,i]);let w=async()=>{v(!0),C(null);try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let r=await t.json();if(l(r.employees||[]),i&&r.employees){let e=r.employees.find(e=>e.name===i||e.email===i);e&&(c(e),f(!1))}}catch(e){console.error("Error fetching employees:",e),C(e.message||"Failed to load employees")}finally{v(!1)}},k=async()=>{g(!0),C(null);try{let e=p?null:s?.id||null,r=p?d.trim():s?.name||null;if(!r&&!e){C("Please select an employee or enter a custom name"),g(!1);return}await a(e,r),t()}catch(e){C(e.message||"Failed to assign employee")}finally{g(!1)}},T=async()=>{g(!0),C(null);try{await a(null,null),t()}catch(e){C(e.message||"Failed to remove employee assignment")}finally{g(!1)}};return(0,h.jsxs)(L.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,h.jsxs)(M.DialogTitle,{children:["Assign Employee to ",n]}),(0,h.jsx)(W.DialogContent,{children:(0,h.jsxs)(U.Stack,{spacing:3,sx:{mt:1},children:[S&&(0,h.jsx)(I.Alert,{severity:"error",onClose:()=>C(null),children:S}),j?(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,h.jsx)(A.CircularProgress,{})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Assignment Type"}),(0,h.jsxs)(H.Select,{value:p?"custom":"employee",onChange:e=>f("custom"===e.target.value),label:"Assignment Type",children:[(0,h.jsx)(G.MenuItem,{value:"employee",children:"Select from Employees"}),(0,h.jsx)(G.MenuItem,{value:"custom",children:"Enter Custom Name"})]})]}),p?(0,h.jsx)(D.TextField,{fullWidth:!0,label:"Employee Name",value:d,onChange:e=>u(e.target.value),placeholder:"Enter employee name",helperText:"Use this for external employees or contractors"}):(0,h.jsx)(ta,{options:o,getOptionLabel:e=>`${e.name} (${e.email})`,value:s,onChange:(e,t)=>c(t),loading:j,renderInput:e=>(0,h.jsx)(D.TextField,{...e,label:"Select Employee",placeholder:"Search employees..."}),renderOption:(e,t)=>(0,h.jsx)(y.Box,{component:"li",...e,children:(0,h.jsxs)(U.Stack,{children:[(0,h.jsx)(b.Typography,{variant:"body1",children:t.name}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})})]})]})}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:t,disabled:m,children:"Cancel"}),i&&(0,h.jsx)(z.Button,{onClick:T,color:"error",disabled:m,children:"Remove Assignment"}),(0,h.jsx)(z.Button,{onClick:k,variant:"contained",disabled:m||(p?!d.trim():!s),children:m?(0,h.jsx)(A.CircularProgress,{size:20}):"Assign"})]})]})}var iA=e.i(68914),iI=e.i(62555),iP=e.i(7065);function iO({title:e,value:t,subtitle:r,progress:n,icon:i,color:a="primary"}){return(0,w.useTheme)(),(0,h.jsx)(T.Card,{className:"dashboard-card metric-card",sx:{height:"100%"},children:(0,h.jsxs)(E.CardContent,{sx:{p:3},children:[(0,h.jsxs)(y.Box,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[(0,h.jsxs)(y.Box,{sx:{flex:1},children:[(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:e}),(0,h.jsx)(b.Typography,{variant:"h4",fontWeight:700,sx:{mb:1},children:t}),r&&(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:r})]}),(0,h.jsx)(y.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",bgcolor:`${a}.main`,color:"white"},children:i})]}),void 0!==n&&(0,h.jsxs)(y.Box,{sx:{mt:2},children:[(0,h.jsx)(iI.LinearProgress,{variant:"determinate",value:n,sx:{height:8,borderRadius:4,bgcolor:"action.disabledBackground","& .MuiLinearProgress-bar":{borderRadius:4}}}),(0,h.jsxs)(b.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[n,"% complete"]})]})]})})}function iB({metrics:e}){let t={clients:0,projects:0,tasks:0,completion:0,...e};return(0,h.jsxs)(y.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2,mb:3},children:[(0,h.jsx)(iO,{title:"Active Clients",value:t.clients||0,subtitle:"This month",icon:(0,h.jsx)(iy.default,{}),color:"primary"}),(0,h.jsx)(iO,{title:"Projects",value:t.projects||0,subtitle:"In progress",icon:(0,h.jsx)(iS.default,{}),color:"info"}),(0,h.jsx)(iO,{title:"Tasks",value:t.tasks||0,subtitle:"Completed today",icon:(0,h.jsx)(tw.default,{}),color:"success"}),(0,h.jsx)(iO,{title:"Progress",value:`${t.completion||0}%`,subtitle:"Overall completion",progress:t.completion||0,icon:(0,h.jsx)(iP.default,{}),color:"warning"})]})}var iR=e.i(35134),iF=e.i(60472);function i$({onAssignmentChange:e,onAddClient:t}){let{user:r}=(0,nx.useAuth)(),n=r?.isAdmin||!1,[i,a]=(0,x.useState)([]),[o,l]=(0,x.useState)([]),[s,c]=(0,x.useState)([]),[d,u]=(0,x.useState)(!0),[p,f]=(0,x.useState)(null),[m,g]=(0,x.useState)(null),[j,v]=(0,x.useState)([]),[S,w]=(0,x.useState)(!1),[k,P]=(0,x.useState)(null),[O,B]=(0,x.useState)(!1),[R,F]=(0,x.useState)(null),[$,K]=(0,x.useState)(""),[Q,Z]=(0,x.useState)(""),[et,er]=(0,x.useState)(!1),[en,ei]=(0,x.useState)(null),[ea,ef]=(0,x.useState)(!1),[em,ex]=(0,x.useState)(!1),[eg,ey]=(0,x.useState)(null),[ej,eb]=(0,x.useState)(!1),[ev,eS]=(0,x.useState)(null),[eC,ew]=(0,x.useState)(""),[ek,eT]=(0,x.useState)(null),[eE,eA]=(0,x.useState)(!1),[eI,eP]=(0,x.useState)(""),[eO,eB]=(0,x.useState)("all"),[eR,eF]=(0,x.useState)("all"),[e$,eL]=(0,x.useState)(null),[eM,eW]=(0,x.useState)(null),[eN,ez]=(0,x.useState)(!1),[eD,eU]=(0,x.useState)(!1),[e_,eq]=(0,x.useState)(!1),[eH,eG]=(0,x.useState)(!1),[eX,eV]=(0,x.useState)(!1),[eJ,eK]=(0,x.useState)(null),[eY,eQ]=(0,x.useState)({name:"",email:"",company:"",phone:"",notes:""}),[eZ,e0]=(0,x.useState)({clients:0,projects:0,tasks:0,completion:0}),[e1,e2]=(0,x.useState)(!0),[e5,e4]=(0,x.useState)(null);(0,x.useEffect)(()=>{tn(),e3(),n&&e6()},[eO,eR,eI,n]);let e3=async()=>{try{e2(!0);let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/metrics`,{credentials:"include"});if(t.ok){let e=await t.json();e0({clients:e.clients||0,projects:e.projects||0,tasks:e.tasks||0,completion:e.completion||0}),e4(null)}else{let e=await t.json().catch(()=>({error:"Failed to fetch metrics"}));e4(e.error||"Failed to load metrics"),e0({clients:0,projects:0,tasks:0,completion:0})}}catch(e){console.error("Error fetching metrics:",e),e4(e.message||"Failed to load metrics"),e0({clients:0,projects:0,tasks:0,completion:0})}finally{e2(!1)}},e6=async()=>{if(n){w(!0),P(null);try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/admin/users`,{credentials:"include"});if(t.ok){let e=await t.json();v(e.users||[])}else{let e=await t.json().catch(()=>({error:`HTTP ${t.status}`}));P(e.error||`Failed to load users (${t.status})`)}}catch(e){console.error("Error fetching users:",e),P(e.message||"Failed to load users")}finally{w(!1)}}},e8=async(e,t)=>{try{let r=(0,X.getBackendUrl)(),n=await fetch(`${r}/api/admin/users/${e}/employee`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isEmployee:!t})});if(n.ok)await e6(),await tn(),g(`Employee status ${!t?"enabled":"disabled"} successfully`);else{let e=await n.json();P(e.error||"Failed to update employee status")}}catch(e){P(e.message||"Failed to update employee status")}},e7=async(e,t)=>{try{let r=(0,X.getBackendUrl)(),n=await fetch(`${r}/api/admin/users/${e}/admin`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!t})});if(n.ok)await e6(),g(`Admin status ${!t?"enabled":"disabled"} successfully`);else{let e=await n.json();P(e.error||"Failed to update admin status")}}catch(e){P(e.message||"Failed to update admin status")}},e9=()=>{B(!1),F(null),K(""),Z(""),ei(null)},te=async()=>{if(R){if(!$||$.length<6)return void ei("Password must be at least 6 characters");if($!==Q)return void ei("Passwords do not match");er(!0),ei(null);try{let e=(0,X.getBackendUrl)(),t=R.id||R.username||R.user_id,r=encodeURIComponent(t),n=await fetch(`${e}/api/admin/users/${r}/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:$})});if(n.ok)e9(),g("Password changed successfully");else{let e=await n.json();ei(e.error||"Failed to change password")}}catch(e){ei(e.message||"Failed to change password")}finally{er(!1)}}},tt=()=>{ex(!1),ey(null),eS(null)},tr=async()=>{if(!eg)return;let e=eg.id||eg.user_id;if(e===r?.id||eg.username===r?.username)return void eS("Cannot delete your own account");eb(!0),eS(null);try{let t=(0,X.getBackendUrl)(),r=encodeURIComponent(e),n=await fetch(`${t}/api/admin/users/${r}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(n.ok)tt(),await e6(),await tn(),g("User deleted successfully");else{let e="Failed to delete user";try{let t=await n.json();e=t.error||t.message||e,t.details&&(e+=`: ${t.details}`)}catch(t){e=`HTTP ${n.status}: ${n.statusText}`}eS(e)}}catch(e){eS(e.message||"Failed to delete user"),console.error("Error deleting user:",e)}finally{eb(!1)}},tn=async()=>{u(!0),f(null);try{let e=(0,X.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let r=await t.json();a(r.employees||[]);let n=new URLSearchParams;"all"!==eO&&n.append("status",eO),"all"!==eR&&"unassigned"!==eR&&n.append("employee_id",eR),eI&&n.append("search",eI);let i=await fetch(`${e}/api/creative/clients?${n.toString()}`,{credentials:"include"});if(!i.ok)throw Error("Failed to fetch clients");let o=(await i.json()).clients||[],s=o;"unassigned"===eR&&(s=s.filter(e=>!e.assignedEmployee)),l(s);let d=o.filter(e=>"prospect"===e.status);c(d)}catch(e){console.error("Error fetching data:",e),f(e.message||"Failed to load data")}finally{u(!1)}},ti=async()=>{if(!eC||!ek)return void f("Please select both a client and an employee");eA(!0),f(null),g(null);try{let t=(0,X.getBackendUrl)(),r=i.find(e=>e.id===ek),n=await fetch(`${t}/api/creative/clients/${eC}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:ek,employee_name:r?.name||null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to assign employee"}));throw Error(e.error||"Failed to assign employee")}g(`Successfully assigned ${r?.name} to ${o.find(e=>e.id===eC)?.name}`),await tn(),ew(""),eT(null),e&&e()}catch(e){console.error("Error assigning employee:",e),f(e.message||"Failed to assign employee")}finally{eA(!1)}},ta=()=>{eL(null),eW(null)},tu=async()=>{if(!eM)return void ta();try{let e=(0,X.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${eM.id}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete client");await tn()}catch(e){console.error("Error deleting client:",e),alert(e.message||"Failed to delete client")}ta()},tp=async()=>{ta(),eU(!0)},th=async(e,t)=>{if(eM)try{let r=(0,X.getBackendUrl)();if(!(await fetch(`${r}/api/creative/clients/${eM.id}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:e,employee_name:t})})).ok)throw Error("Failed to assign employee");await tn()}catch(e){throw console.error("Error assigning employee:",e),e}},tm=async()=>{if(!eY.name||!eY.email||!eY.phone)return void f("Name, email, and phone are required");try{let e=(0,X.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:eY.name,email:eY.email,company:eY.company,phone:eY.phone,notes:eY.notes,status:"prospect"})})).ok)throw Error("Failed to create prospect");eV(!1),eQ({name:"",email:"",company:"",phone:"",notes:""}),await tn(),g("Prospect created successfully")}catch(e){console.error("Error creating prospect:",e),f(e.message||"Failed to create prospect")}},tx=async()=>{if(!eJ||!eY.name||!eY.email||!eY.phone)return void f("Name, email, and phone are required");try{let e=(0,X.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${eJ.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:eY.name,email:eY.email,company:eY.company,phone:eY.phone,notes:eY.notes,status:"prospect"})})).ok)throw Error("Failed to update prospect");eV(!1),eK(null),eQ({name:"",email:"",company:"",phone:"",notes:""}),await tn(),g("Prospect updated successfully")}catch(e){console.error("Error updating prospect:",e),f(e.message||"Failed to update prospect")}},tg=async e=>{alert(`Send email to ${e.email} - Feature coming soon`)},ty=async e=>{alert(`Send notification to ${e.name} - Feature coming soon`)},tj=Array.from(new Set(o.filter(e=>e.assignedEmployee).map(e=>e.assignedEmployee)));return d?(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,h.jsx)(A.CircularProgress,{})}):(0,h.jsxs)(y.Box,{children:[p&&(0,h.jsx)(I.Alert,{severity:"error",onClose:()=>f(null),sx:{mb:2},children:p}),m&&(0,h.jsx)(I.Alert,{severity:"success",onClose:()=>g(null),sx:{mb:2},children:m}),(0,h.jsxs)(y.Box,{sx:{mb:4},children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Overview"}),(0,h.jsx)(b.Typography,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Welcome to your mission control for managing clients across all your dashboards and systems."}),(0,h.jsxs)(y.Box,{sx:{mb:4},children:[e1?(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,h.jsx)(b.Typography,{children:"Loading metrics..."})}):e5?(0,h.jsx)(y.Box,{sx:{p:2,bgcolor:"error.light",borderRadius:1,mb:2},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"error",children:e5})}):null,(0,h.jsx)(iB,{metrics:eZ})]})]}),(0,h.jsxs)(J.Grid,{container:!0,spacing:3,children:[(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(T.Card,{elevation:2,children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,h.jsx)(iS.default,{color:"primary",sx:{fontSize:32}}),(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,children:"Prospects"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"People we need to keep prospecting with email and notifications to finish checkout"})]})]}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(to.default,{}),onClick:()=>{eK(null),eQ({name:"",email:"",company:"",phone:"",notes:""}),eV(!0)},children:"Add Prospect"})]}),0===s.length?(0,h.jsxs)(C.Paper,{sx:{p:4,textAlign:"center"},children:[(0,h.jsx)(iS.default,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,h.jsx)(b.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No prospects yet"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add prospects to track and nurture potential clients"})]}):(0,h.jsx)(J.Grid,{container:!0,spacing:2,children:s.map(e=>(0,h.jsx)(J.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",sx:{mb:1},children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"h6",children:e.name}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:e.company}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:e.email})]}),(0,h.jsx)(eo.Chip,{label:"Prospect",size:"small",color:"warning"})]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:2},children:[(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>{eK(e),eQ({name:e.name,email:e.email,company:e.company,phone:e.phone||"",notes:e.notes||""}),eV(!0)},color:"primary",children:(0,h.jsx)(ts.default,{})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>tg(e),color:"info",children:(0,h.jsx)(iC.default,{})}),(0,h.jsx)(eh.IconButton,{size:"small",onClick:()=>ty(e),color:"secondary",children:(0,h.jsx)(iw.default,{})})]})]})})},e.id))})]})})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(T.Card,{elevation:2,children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,h.jsx)(ij.default,{color:"primary",sx:{fontSize:32}}),(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,children:"Client List"})]}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(iv.default,{}),onClick:()=>{t?t():eG(!0)},children:"Add Client"})]}),(0,h.jsx)(C.Paper,{sx:{p:2,mb:3},children:(0,h.jsxs)(U.Stack,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,h.jsx)(D.TextField,{fullWidth:!0,size:"small",placeholder:"Search clients...",value:eI,onChange:e=>eP(e.target.value),InputProps:{startAdornment:(0,h.jsx)(ih,{position:"start",children:(0,h.jsx)(n8.default,{})})}}),(0,h.jsxs)(_.FormControl,{size:"small",sx:{minWidth:150},children:[(0,h.jsx)(q.InputLabel,{children:"Status"}),(0,h.jsxs)(H.Select,{value:eO,label:"Status",onChange:e=>eB(e.target.value),children:[(0,h.jsx)(G.MenuItem,{value:"all",children:"All Status"}),(0,h.jsx)(G.MenuItem,{value:"active",children:"Active"}),(0,h.jsx)(G.MenuItem,{value:"inactive",children:"Inactive"}),(0,h.jsx)(G.MenuItem,{value:"pending",children:"Pending"}),(0,h.jsx)(G.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,h.jsxs)(_.FormControl,{size:"small",sx:{minWidth:150},children:[(0,h.jsx)(q.InputLabel,{children:"Employee"}),(0,h.jsxs)(H.Select,{value:eR,label:"Employee",onChange:e=>eF(e.target.value),children:[(0,h.jsx)(G.MenuItem,{value:"all",children:"All Employees"}),(0,h.jsx)(G.MenuItem,{value:"unassigned",children:"Unassigned"}),tj.map(e=>(0,h.jsx)(G.MenuItem,{value:e,children:e},e))]})]})]})}),(0,h.jsx)(ed.TableContainer,{children:(0,h.jsxs)(el.Table,{children:[(0,h.jsx)(eu.TableHead,{children:(0,h.jsxs)(ep.TableRow,{children:[(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Client Name"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Email"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},children:"Systems Connected"}),(0,h.jsx)(ec.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,h.jsx)(es.TableBody,{children:0===o.length?(0,h.jsx)(ep.TableRow,{children:(0,h.jsx)(ec.TableCell,{colSpan:6,align:"center",sx:{py:4},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:'No clients found. Click "Add Client" to get started.'})})}):o.map(e=>(0,h.jsxs)(ep.TableRow,{hover:!0,children:[(0,h.jsxs)(ec.TableCell,{children:[(0,h.jsx)(b.Typography,{variant:"body2",fontWeight:600,children:e.name}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:e.company})]}),(0,h.jsx)(ec.TableCell,{children:e.email}),(0,h.jsx)(ec.TableCell,{children:(0,h.jsx)(eo.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"pending"===e.status||"prospect"===e.status?"warning":"default"})}),(0,h.jsx)(ec.TableCell,{children:e.assignedEmployee||(0,h.jsx)(eo.Chip,{label:"Unassigned",size:"small",variant:"outlined"})}),(0,h.jsx)(ec.TableCell,{children:(0,h.jsx)(U.Stack,{direction:"row",spacing:.5,flexWrap:"wrap",children:e.systemsConnected.map(e=>(0,h.jsx)(eo.Chip,{label:e,size:"small",variant:"outlined"},e))})}),(0,h.jsx)(ec.TableCell,{align:"right",children:(0,h.jsx)(eh.IconButton,{size:"small",onClick:t=>{eL(t.currentTarget),eW(e)},children:(0,h.jsx)(tc.default,{})})})]},e.id))})]})})]})})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(T.Card,{elevation:2,children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,h.jsx)(ig.default,{color:"primary",sx:{fontSize:32}}),(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,children:"Match Clients & Employees"})]}),(0,h.jsxs)(J.Grid,{container:!0,spacing:3,children:[(0,h.jsx)(J.Grid,{item:!0,xs:12,md:6,children:(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,h.jsx)(ij.default,{color:"primary"}),(0,h.jsx)(b.Typography,{variant:"h6",children:"Select Client"})]}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Client"}),(0,h.jsxs)(H.Select,{value:eC,onChange:e=>ew(e.target.value),label:"Client",children:[(0,h.jsx)(G.MenuItem,{value:"",children:(0,h.jsx)("em",{children:"Select a client..."})}),o.map(e=>(0,h.jsx)(G.MenuItem,{value:e.id,children:(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"body1",children:e.name}),(0,h.jsxs)(b.Typography,{variant:"caption",color:"text.secondary",children:[e.company,"  ",e.email]}),e.assignedEmployee&&(0,h.jsx)(eo.Chip,{label:`Assigned to: ${e.assignedEmployee}`,size:"small",color:"info",sx:{mt:.5}})]})},e.id))]})]}),o.find(e=>e.id===eC)&&(0,h.jsxs)(y.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Client:"}),(0,h.jsx)(b.Typography,{variant:"body1",fontWeight:600,children:o.find(e=>e.id===eC)?.name}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:o.find(e=>e.id===eC)?.company})]})]})})}),(0,h.jsx)(J.Grid,{item:!0,xs:12,md:6,children:(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,h.jsx)(iy.default,{color:"secondary"}),(0,h.jsx)(b.Typography,{variant:"h6",children:"Select Employee"})]}),(0,h.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,h.jsx)(q.InputLabel,{children:"Employee"}),(0,h.jsxs)(H.Select,{value:ek||"",onChange:e=>eT(e.target.value?Number(e.target.value):null),label:"Employee",children:[(0,h.jsx)(G.MenuItem,{value:"",children:(0,h.jsx)("em",{children:"Select an employee..."})}),i.map(e=>(0,h.jsx)(G.MenuItem,{value:e.id,children:(0,h.jsxs)(y.Box,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(b.Typography,{variant:"body1",children:e.name}),e.is_admin&&(0,h.jsx)(eo.Chip,{label:"Admin",size:"small",color:"error"})]}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:e.email})]})},e.id))]})]}),i.find(e=>e.id===ek)&&(0,h.jsxs)(y.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,h.jsx)(b.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Employee:"}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(b.Typography,{variant:"body1",fontWeight:600,children:i.find(e=>e.id===ek)?.name}),i.find(e=>e.id===ek)?.is_admin&&(0,h.jsx)(eo.Chip,{label:"Admin",size:"small",color:"error"})]})]})]})})})]}),(0,h.jsx)(Y.Divider,{sx:{my:3}}),(0,h.jsxs)(y.Box,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,h.jsx)(z.Button,{variant:"outlined",onClick:tn,disabled:eE,children:"Refresh Lists"}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:eE?(0,h.jsx)(A.CircularProgress,{size:20}):(0,h.jsx)(tw.default,{}),onClick:ti,disabled:!eC||!ek||eE,size:"large",children:eE?"Assigning...":"Assign Employee to Client"})]}),(0,h.jsxs)(y.Box,{sx:{mt:4},children:[(0,h.jsx)(b.Typography,{variant:"h6",gutterBottom:!0,children:"Current Assignments"}),(0,h.jsxs)(J.Grid,{container:!0,spacing:2,children:[o.filter(e=>e.assignedEmployee).map(e=>(0,h.jsx)(J.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsxs)(E.CardContent,{children:[(0,h.jsx)(b.Typography,{variant:"body1",fontWeight:600,children:e.name}),(0,h.jsx)(b.Typography,{variant:"caption",color:"text.secondary",children:e.company}),(0,h.jsx)(eo.Chip,{label:` ${e.assignedEmployee}`,size:"small",color:"primary",sx:{mt:1}})]})})},e.id)),0===o.filter(e=>e.assignedEmployee).length&&(0,h.jsx)(J.Grid,{item:!0,xs:12,children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No assignments yet. Use the form above to assign employees to clients."})})]})]}),n&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Y.Divider,{sx:{my:4}}),(0,h.jsxs)(y.Box,{children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,h.jsx)(iR.default,{color:"primary",sx:{fontSize:28}}),(0,h.jsx)(b.Typography,{variant:"h6",fontWeight:700,children:"Employee Management (Admin Only)"})]}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Manage employee status for users. Employees have access to the Creative Dashboard and can be assigned to clients."}),k&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},onClose:()=>P(null),children:k}),S?(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,h.jsx)(A.CircularProgress,{})}):0===j.length?(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"No users found."}):(0,h.jsx)(J.Grid,{container:!0,spacing:2,children:j.map(e=>(0,h.jsx)(J.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,h.jsx)(T.Card,{variant:"outlined",children:(0,h.jsx)(E.CardContent,{children:(0,h.jsxs)(U.Stack,{spacing:2,children:[(0,h.jsxs)(y.Box,{children:[(0,h.jsx)(b.Typography,{variant:"body1",sx:{fontWeight:600},children:e.name||e.username||e.email||"Unknown User"}),(0,h.jsxs)(b.Typography,{variant:"body2",color:"text.secondary",children:[e.ensName||e.id," ",e.email&&` ${e.email}`]}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[e.isAdmin&&(0,h.jsx)(eo.Chip,{label:"Admin",color:"error",size:"small"}),e.isEmployee&&(0,h.jsx)(eo.Chip,{label:"Employee",color:"secondary",size:"small"}),e.isPaidMember&&(0,h.jsx)(eo.Chip,{label:"Paid Member",color:"success",size:"small",variant:"outlined"})]})]}),(0,h.jsx)(Y.Divider,{}),(0,h.jsxs)(U.Stack,{spacing:1,children:[(0,h.jsx)(im.FormControlLabel,{control:(0,h.jsx)(ix.Switch,{checked:e.isAdmin||!1,onChange:()=>e7(e.id||e.user_id,e.isAdmin||!1),disabled:e.id===r?.id||e.username===r?.username,size:"small"}),label:"Admin"}),(0,h.jsx)(im.FormControlLabel,{control:(0,h.jsx)(ix.Switch,{checked:e.isEmployee||!1,onChange:()=>e8(e.id||e.user_id,e.isEmployee||!1),disabled:e.isAdmin,size:"small"}),label:e.isEmployee?"Employee: On":"Employee: Off"}),(0,h.jsx)(z.Button,{variant:"outlined",size:"small",startIcon:(0,h.jsx)(iF.default,{}),onClick:()=>{F(e),K(""),Z(""),ei(null),B(!0)},fullWidth:!0,children:"Change Password"}),(0,h.jsx)(z.Button,{variant:"outlined",size:"small",color:"error",startIcon:(0,h.jsx)(tf.default,{}),onClick:()=>{ey(e),eS(null),ex(!0)},fullWidth:!0,disabled:e.id===r?.id||e.username===r?.username,children:"Delete User"})]})]})})})},e.id||e.user_id))}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,sx:{mt:3},children:[(0,h.jsx)(z.Button,{variant:"outlined",startIcon:(0,h.jsx)(ee.default,{}),onClick:e6,disabled:S,children:S?"Loading...":"Refresh Users"}),(0,h.jsx)(z.Button,{variant:"contained",startIcon:(0,h.jsx)(ig.default,{}),onClick:()=>ef(!0),disabled:S,children:"Manage Client Assignments"})]})]})]})]})})})]}),(0,h.jsxs)(td.Menu,{anchorEl:e$,open:!!e$,onClose:ta,children:[(0,h.jsxs)(G.MenuItem,{onClick:()=>{eq(!0),ez(!0),ta()},children:[(0,h.jsx)(tl.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,h.jsxs)(G.MenuItem,{onClick:()=>{eq(!1),ez(!0),ta()},children:[(0,h.jsx)(ts.default,{sx:{mr:1,fontSize:20}}),"Edit"]}),(0,h.jsxs)(G.MenuItem,{onClick:tp,children:[(0,h.jsx)(iv.default,{sx:{mr:1,fontSize:20}}),"Assign Employee"]}),(0,h.jsxs)(G.MenuItem,{onClick:tu,sx:{color:"error.main"},children:[(0,h.jsx)(tf.default,{sx:{mr:1,fontSize:20}}),"Delete"]})]}),(0,h.jsx)(V,{open:eH,onClose:()=>{eG(!1),tn()}}),(0,h.jsx)(iT,{open:eN,onClose:()=>{ez(!1),eW(null),eq(!1),tn()},client:eM,onSave:()=>tn(),readOnly:e_}),(0,h.jsx)(iE,{open:eD,onClose:()=>{eU(!1),eW(null)},clientId:eM?.id||"",clientName:eM?.name||"",currentEmployee:eM?.assignedEmployee,onAssign:th}),n&&(0,h.jsx)(iA.default,{open:ea,onClose:()=>ef(!1),currentUser:r,isAdminView:n}),(0,h.jsxs)(L.Dialog,{open:em,onClose:tt,maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(ib.default,{color:"error"}),(0,h.jsx)(b.Typography,{variant:"h6",children:"Delete User"})]}),(0,h.jsx)(z.Button,{onClick:tt,size:"small",sx:{minWidth:"auto"},children:(0,h.jsx)(ik.default,{})})]})}),(0,h.jsxs)(W.DialogContent,{children:[eg&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(I.Alert,{severity:"warning",sx:{mb:2},children:[(0,h.jsx)(b.Typography,{variant:"body2",fontWeight:600,children:"This action cannot be undone!"}),(0,h.jsx)(b.Typography,{variant:"body2",children:"Deleting this user will permanently remove their account and all associated data."})]}),(0,h.jsxs)(y.Box,{sx:{mb:3},children:[(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"User to delete:"}),(0,h.jsx)(b.Typography,{variant:"body1",fontWeight:600,children:eg.name||eg.username||eg.email}),eg.email&&(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:eg.email}),(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[eg.isAdmin&&(0,h.jsx)(eo.Chip,{label:"Admin",color:"error",size:"small"}),eg.isEmployee&&(0,h.jsx)(eo.Chip,{label:"Employee",color:"secondary",size:"small"})]})]})]}),ev&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},onClose:()=>eS(null),children:ev}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Are you sure you want to delete this user? This will permanently delete:"}),(0,h.jsxs)(y.Box,{component:"ul",sx:{mt:1,pl:2},children:[(0,h.jsx)(b.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"User account and profile"}),(0,h.jsx)(b.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All client assignments"}),(0,h.jsx)(b.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All notifications"}),(0,h.jsx)(b.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All subscriptions"})]})]}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:tt,disabled:ej,children:"Cancel"}),(0,h.jsx)(z.Button,{onClick:tr,variant:"contained",color:"error",disabled:ej,startIcon:ej?(0,h.jsx)(A.CircularProgress,{size:20}):(0,h.jsx)(tf.default,{}),children:ej?"Deleting...":"Delete User"})]})]}),(0,h.jsxs)(L.Dialog,{open:O,onClose:e9,maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:(0,h.jsxs)(U.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,h.jsx)(iF.default,{}),(0,h.jsx)(b.Typography,{variant:"h6",children:"Change Password"})]}),(0,h.jsx)(z.Button,{onClick:e9,size:"small",sx:{minWidth:"auto"},children:(0,h.jsx)(ik.default,{})})]})}),(0,h.jsxs)(W.DialogContent,{children:[R&&(0,h.jsxs)(y.Box,{sx:{mb:3},children:[(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Changing password for:"}),(0,h.jsx)(b.Typography,{variant:"body1",fontWeight:600,children:R.name||R.username||R.email}),R.email&&(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:R.email})]}),en&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},onClose:()=>ei(null),children:en}),(0,h.jsxs)(U.Stack,{spacing:2,sx:{mt:1},children:[(0,h.jsx)(D.TextField,{fullWidth:!0,type:"password",label:"New Password",value:$,onChange:e=>K(e.target.value),placeholder:"Enter new password (min 6 characters)",disabled:et,helperText:"Password must be at least 6 characters long"}),(0,h.jsx)(D.TextField,{fullWidth:!0,type:"password",label:"Confirm Password",value:Q,onChange:e=>Z(e.target.value),placeholder:"Confirm new password",disabled:et,error:""!==Q&&$!==Q,helperText:""!==Q&&$!==Q?"Passwords do not match":""})]})]}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:e9,disabled:et,children:"Cancel"}),(0,h.jsx)(z.Button,{onClick:te,variant:"contained",disabled:et||!$||!Q||$!==Q||$.length<6,startIcon:et?(0,h.jsx)(A.CircularProgress,{size:20}):(0,h.jsx)(iF.default,{}),children:et?"Changing...":"Change Password"})]})]}),(0,h.jsxs)(L.Dialog,{open:eX,onClose:()=>eV(!1),maxWidth:"sm",fullWidth:!0,children:[(0,h.jsx)(M.DialogTitle,{children:eJ?"Edit Prospect":"Add New Prospect"}),(0,h.jsx)(W.DialogContent,{children:(0,h.jsxs)(U.Stack,{spacing:2,sx:{mt:1},children:[(0,h.jsx)(D.TextField,{label:"Name",value:eY.name,onChange:e=>eQ({...eY,name:e.target.value}),fullWidth:!0,required:!0}),(0,h.jsx)(D.TextField,{label:"Email",type:"email",value:eY.email,onChange:e=>eQ({...eY,email:e.target.value}),fullWidth:!0,required:!0}),(0,h.jsx)(D.TextField,{label:"Company (Optional)",value:eY.company,onChange:e=>eQ({...eY,company:e.target.value}),fullWidth:!0}),(0,h.jsx)(D.TextField,{label:"Phone",value:eY.phone,onChange:e=>eQ({...eY,phone:e.target.value}),fullWidth:!0,required:!0}),(0,h.jsx)(D.TextField,{label:"Notes",value:eY.notes,onChange:e=>eQ({...eY,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3})]})}),(0,h.jsxs)(N.DialogActions,{children:[(0,h.jsx)(z.Button,{onClick:()=>{eV(!1),eK(null),eQ({name:"",email:"",company:"",phone:"",notes:""})},children:"Cancel"}),(0,h.jsx)(z.Button,{variant:"contained",onClick:eJ?tx:tm,children:eJ?"Update":"Create"})]})]})]})}var iL=e.i(27282);function iM(){let{user:e}=(0,nx.useAuth)(),t=`cowork_${e?.id||"shared"}`;return(0,h.jsxs)(y.Box,{sx:{width:"100%"},children:[(0,h.jsx)(y.Box,{sx:{mb:3},children:(0,h.jsx)(ng,{height:400})}),(0,h.jsx)(C.Paper,{elevation:2,sx:{p:0,minHeight:700,height:"calc(100vh - 400px)",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:(0,h.jsx)(y.Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},children:(0,h.jsx)(y.Box,{sx:{height:"100%",width:"100%","& > div":{height:"100% !important"}},children:(0,h.jsx)(iL.default,{boardId:t,userId:e?.id?.toString()||"anonymous",userName:e?.name||e?.email||"Anonymous User"})})})})]})}var iW=e.i(43892),K=K,iN=e.i(24676),iz=e.i(27796);function iD(){let[e,t]=(0,x.useState)(!1),[r,n]=(0,x.useState)([]),[i,a]=(0,x.useState)(""),[o,l]=(0,x.useState)(!1),[s,c]=(0,x.useState)(null),[d,u]=(0,x.useState)("gemini-3-pro-preview"),p=(0,x.useRef)(null);(0,x.useEffect)(()=>{p.current&&e&&(p.current.scrollTop=p.current.scrollHeight)},[r,e]);let f=async e=>{if(e.preventDefault(),!i.trim()||o)return;let t={role:"user",text:i};n(e=>[...e,t]),a(""),l(!0),c(null);try{let e=(0,X.getBackendUrl)(),i=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[...r,t],model:d})});if(!i.ok){let e=i.headers.get("content-type");if(e&&e.includes("application/json")){let e=await i.json(),t=e.text||e.error||e.message||`Server error: ${i.status}`,r=e.details?` (${e.details})`:"";throw Error(`${t}${r}`)}{let e=await i.text();throw Error(`Server error: ${i.status} ${i.statusText}${e?` - ${e.substring(0,100)}`:""}`)}}let a=await i.json();if(!a.text||"string"!=typeof a.text)throw Error("Invalid response format from server");let o={role:"model",text:a.text};n(e=>[...e,o])}catch(i){let e=i?.message||"An unexpected error occurred",t=e.toLowerCase().includes("not configured")||e.toLowerCase().includes("api key")||e.toLowerCase().includes("configuration");t||console.error("Error sending message:",i),c(e);let r=t?"The AI chat feature is not yet configured. Please contact an administrator to set up the Gemini API key.":`Sorry, I encountered an error: ${e}`;n(e=>[...e,{role:"model",text:r}])}finally{l(!1)}};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iW.Fab,{color:"primary","aria-label":"AI Chat",onClick:()=>t(!e),sx:{position:"fixed",bottom:24,right:24,zIndex:1300,boxShadow:3},children:e?(0,h.jsx)(ik.default,{}):(0,h.jsx)(iz.default,{})}),(0,h.jsx)(K.default,{in:e,orientation:"vertical",children:(0,h.jsxs)(C.Paper,{elevation:8,sx:{position:"fixed",bottom:100,right:24,width:{xs:"calc(100vw - 48px)",sm:400,md:450},height:{xs:"calc(100vh - 150px)",sm:600},maxHeight:{sm:600},zIndex:1300,display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",border:1,borderColor:"divider"},children:[(0,h.jsxs)(y.Box,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"primary.main",color:"primary.contrastText",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{flex:1},children:[(0,h.jsx)($.default,{}),(0,h.jsxs)(y.Box,{sx:{flex:1,minWidth:0},children:[(0,h.jsx)(b.Typography,{variant:"h6",sx:{fontWeight:700,fontSize:"1rem"},children:"AI Journal"}),(0,h.jsx)(b.Typography,{variant:"caption",sx:{opacity:.9,fontSize:"0.7rem"},children:"Gemini-powered digital consciousness"})]}),(0,h.jsxs)(_.FormControl,{size:"small",sx:{minWidth:140,"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.2)",color:"inherit","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSvgIcon-root":{color:"rgba(255, 255, 255, 0.9)"}},children:[(0,h.jsx)(q.InputLabel,{id:"model-select-label",sx:{fontSize:"0.7rem"},children:"Model"}),(0,h.jsxs)(H.Select,{labelId:"model-select-label",value:d,label:"Model",onChange:e=>u(e.target.value),disabled:o,sx:{fontSize:"0.75rem","& .MuiSelect-select":{py:.5}},children:[(0,h.jsx)(G.MenuItem,{value:"gemini-3-pro-preview",sx:{fontSize:"0.75rem"},children:"Gemini 3 Pro Preview"}),(0,h.jsx)(G.MenuItem,{value:"gemini-2.5-pro",sx:{fontSize:"0.75rem"},children:"Gemini 2.5 Pro"})]})]})]}),(0,h.jsxs)(y.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,h.jsx)(tp.Tooltip,{title:"Refresh chat",children:(0,h.jsx)(eh.IconButton,{onClick:()=>{n([]),c(null),a(""),l(!1)},disabled:o,size:"small",sx:{color:"inherit"},children:(0,h.jsx)(ee.default,{fontSize:"small"})})}),(0,h.jsx)(tp.Tooltip,{title:"Close",children:(0,h.jsx)(eh.IconButton,{onClick:()=>t(!1),size:"small",sx:{color:"inherit"},children:(0,h.jsx)(ik.default,{fontSize:"small"})})})]})]}),(0,h.jsxs)(y.Box,{ref:p,sx:{flexGrow:1,p:2,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,minHeight:0,bgcolor:"background.default"},children:[0===r.length&&(0,h.jsxs)(y.Box,{sx:{textAlign:"center",py:4},children:[(0,h.jsx)($.default,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,h.jsx)(b.Typography,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Welcome to your AI Journal"}),(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",children:"Start a conversation with your digital consciousness. Ask questions, explore thoughts, or simply reflect."})]}),r.map((e,t)=>(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",mb:1},children:(0,h.jsx)(C.Paper,{elevation:1,sx:{p:1.5,maxWidth:"80%",bgcolor:"user"===e.role?"primary.main":"background.paper",color:"user"===e.role?"white":"text.primary",borderRadius:"user"===e.role?"18px 18px 4px 18px":"18px 18px 18px 4px"},children:(0,h.jsx)(b.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap",fontSize:"0.875rem"},children:e.text})})},t)),o&&(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"flex-start",mb:1},children:(0,h.jsx)(C.Paper,{elevation:1,sx:{p:1.5,bgcolor:"background.paper",borderRadius:"18px 18px 18px 4px"},children:(0,h.jsx)(b.Typography,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Thinking..."})})})]}),(0,h.jsxs)(y.Box,{sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:[(0,h.jsx)("form",{onSubmit:f,children:(0,h.jsxs)(U.Stack,{direction:"row",spacing:1,alignItems:"flex-end",children:[(0,h.jsx)(D.TextField,{fullWidth:!0,multiline:!0,maxRows:3,value:i,onChange:e=>a(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),!o&&i.trim())){let t=e.currentTarget.closest("form");t&&t.requestSubmit()}},placeholder:"Share your thoughts...",variant:"outlined",disabled:o,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,h.jsx)(iW.Fab,{type:"submit",color:"primary",disabled:o||!i.trim(),size:"small",sx:{minWidth:40,height:40},children:(0,h.jsx)(iN.default,{sx:{fontSize:18}})})]})}),s&&(0,h.jsx)(b.Typography,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:s})]})]})})]})}function iU(e){let{children:t,value:r,index:n,...i}=e;return(0,h.jsx)("div",{role:"tabpanel",hidden:r!==n,id:`creative-tabpanel-${n}`,"aria-labelledby":`creative-tab-${n}`,...i,children:r===n&&(0,h.jsx)(y.Box,{sx:{py:3},children:t})})}function i_(){let e=(0,w.useTheme)(),t=(0,k.useMediaQuery)(e.breakpoints.down("md")),r=(0,g.useRouter)(),[n,i]=(0,x.useState)(0),[a,o]=(0,x.useState)(!1),{user:l}=(0,nx.useAuth)();l?.isAdmin;let s={analytics:0,support:1,match:2,cowork:3,browser:4,ai:5},c=[{key:"analytics",label:"Analytics",icon:(0,h.jsx)(P.default,{})},{key:"support",label:"Support",icon:(0,h.jsx)(O.default,{})},{key:"match",label:"Matching",icon:(0,h.jsx)(B.default,{})},{key:"cowork",label:"Co-Work",icon:(0,h.jsx)(R.default,{})},{key:"browser",label:"Browser",icon:(0,h.jsx)(F.default,{})},{key:"ai",label:"AI Agent",icon:(0,h.jsx)($.default,{})}];return(0,x.useEffect)(()=>{let e=r.query.tab;e&&void 0!==s[e]&&i(s[e])},[r.query.tab]),(0,h.jsxs)(y.Box,{sx:{bgcolor:"#f8f9fa",minHeight:"100vh",pb:4},children:[(0,h.jsx)(y.Box,{sx:{bgcolor:"white",borderBottom:"1px solid",borderColor:"divider",mb:3},children:(0,h.jsxs)(j.Container,{maxWidth:"xl",sx:{py:3},children:[(0,h.jsx)(b.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Creative Dashboard"}),(0,h.jsx)(b.Typography,{variant:"body1",color:"text.secondary",children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,h.jsxs)(j.Container,{maxWidth:"xl",children:[(0,h.jsx)(C.Paper,{sx:{mb:3,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},children:(0,h.jsx)(v.Tabs,{value:n,onChange:(e,t)=>{i(t);let n=Object.keys(s).find(e=>s[e]===t);n&&r.push(`/creative?tab=${n}`,void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:!!t&&"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.95rem",fontWeight:500,"&.Mui-selected":{color:"#6366f1",fontWeight:600}},"& .MuiTabs-indicator":{bgcolor:"#6366f1",height:3}},children:c.map((e,t)=>(0,h.jsx)(S.Tab,{label:e.label,icon:e.icon,iconPosition:"start",id:`creative-tab-${t}`,"aria-controls":`creative-tabpanel-${t}`},e.key))})}),(0,h.jsx)(iU,{value:n,index:0,children:(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsx)(E.CardContent,{sx:{p:3},children:(0,h.jsx)(ea,{})})})}),(0,h.jsx)(iU,{value:n,index:1,children:(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsx)(E.CardContent,{sx:{p:3},children:(0,h.jsx)(tu,{})})})}),(0,h.jsx)(iU,{value:n,index:2,children:(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsx)(E.CardContent,{sx:{p:3},children:(0,h.jsx)(i$,{onAddClient:()=>o(!0)})})})}),(0,h.jsx)(iU,{value:n,index:3,children:(0,h.jsx)(iq,{})}),(0,h.jsx)(iU,{value:n,index:4,children:(0,h.jsx)(iH,{})}),(0,h.jsx)(iU,{value:n,index:5,children:(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsx)(E.CardContent,{sx:{p:3},children:(0,h.jsx)(ia,{})})})})]}),(0,h.jsx)(V,{open:a,onClose:()=>o(!1)}),3===n&&(0,h.jsx)(iD,{})]})}function iq(){return(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsxs)(E.CardContent,{sx:{p:3},children:[(0,h.jsxs)(y.Box,{sx:{mb:3},children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Co-Work Dashboard"}),(0,h.jsx)(b.Typography,{variant:"body1",color:"text.secondary",children:"Collaborate, code, and create together with your team"})]}),(0,h.jsx)(y.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,h.jsx)(iM,{})})]})})}function iH(){let[e,t]=(0,x.useState)(null),[r,n]=(0,x.useState)(!0),[i,a]=(0,x.useState)(null),[o,l]=(0,x.useState)(!0);return(0,x.useEffect)(()=>{(async()=>{try{l(!0);let e=(0,X.getBackendUrl)(),r=window.location.hostname,n=await fetch(`${e}/api/hyperbeam/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({parent:r})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||`HTTP ${n.status}`)}let i=await n.json();if(i.success&&i.embedUrl)a(i.embedUrl),t(null);else throw Error(i.error||"Failed to get Hyperbeam session URL")}catch(e){console.error("Error creating Hyperbeam session:",e),t(e.message||"Failed to create Hyperbeam session. Please try refreshing the page.")}finally{l(!1)}})()},[]),(0,h.jsx)(T.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,h.jsxs)(E.CardContent,{sx:{p:3},children:[(0,h.jsxs)(y.Box,{sx:{mb:3},children:[(0,h.jsx)(b.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Browser Session"}),(0,h.jsx)(b.Typography,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Shared browser powered by Hyperbeam"})]}),o&&(0,h.jsx)(y.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,h.jsx)(A.CircularProgress,{})}),e&&(0,h.jsx)(I.Alert,{severity:"error",sx:{mb:2},children:e}),!o&&i&&(0,h.jsxs)(y.Box,{sx:{position:"relative",width:"100%",height:"70vh",bgcolor:"#000",borderRadius:1,overflow:"hidden"},children:[r&&(0,h.jsx)(y.Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)"},children:(0,h.jsx)(A.CircularProgress,{})}),(0,h.jsx)("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",display:"block"},allow:"clipboard-read; clipboard-write; microphone; camera; display-capture",onLoad:()=>n(!1),onError:()=>{n(!1),t("Failed to load Hyperbeam session")}})]})]})})}e.s(["default",0,function(){return(0,h.jsx)(m.default,{children:(0,h.jsx)(f.default,{active:"creative",children:(0,h.jsx)(i_,{})})})}],11500)},24144,(e,t,r)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(11500)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);