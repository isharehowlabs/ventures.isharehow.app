(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25972,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code")},94556,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},27367,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},16875,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},26482,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[i,n]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)([]),[f,p]=(0,t.useState)({}),[g,x]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null);return{files:e,components:i,tokens:s,likedComponents:o,savedComponents:d,draftedComponents:h,componentStatuses:f,isLoading:g,error:y,fetchFiles:async()=>{try{x(!0),v(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),i=await t.json();r(i.projects||[])}catch(e){v(e.message),console.error("Error fetching Figma files:",e)}finally{x(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw v(e.message),e}let t=e.trim();try{x(!0),v(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await r.json()).file}catch(e){throw v(e?.message||"Failed to fetch Figma file"),e}finally{x(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw v(e.message),e}let t=e.trim();try{x(!0),v(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),i=await r.json();return n(i.components||[]),i.components}catch(e){throw v(e?.message||"Failed to fetch Figma components"),e}finally{x(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw v(e.message),e}let t=e.trim();try{x(!0),v(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),i=await r.json();return l(i.tokens||[]),i.tokens}catch(e){throw v(e?.message||"Failed to fetch Figma tokens"),e}finally{x(!1)}},likeComponent:async(e,t=!0,r)=>{try{x(!0),v(null);let i=(0,a.getBackendUrl)(),n=await (0,a.fetchWithErrorHandling)(`${i}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:r})}),s=await n.json();return s.success&&(p(a=>({...a,[e]:{...a[e],liked:t}})),t?c(t=>t.includes(e)?t:[...t,e]):c(t=>t.filter(t=>t!==e))),s}catch(e){throw v(e?.message||"Failed to like component"),e}finally{x(!1)}},saveComponent:async(e,t=!0,r)=>{try{x(!0),v(null);let i=(0,a.getBackendUrl)(),n=await (0,a.fetchWithErrorHandling)(`${i}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:r})}),s=await n.json();return s.success&&(p(a=>({...a,[e]:{...a[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),s}catch(e){throw v(e?.message||"Failed to save component"),e}finally{x(!1)}},draftComponent:async(e,t=!0,r)=>{try{x(!0),v(null);let i=(0,a.getBackendUrl)(),n=await (0,a.fetchWithErrorHandling)(`${i}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:r})}),s=await n.json();return s.success&&(p(a=>({...a,[e]:{...a[e],drafted:t}})),t?m(t=>t.includes(e)?t:[...t,e]):m(t=>t.filter(t=>t!==e))),s}catch(e){throw v(e?.message||"Failed to draft component"),e}finally{x(!1)}},fetchLikedComponents:async()=>{try{x(!0),v(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),r=await t.json();return c(r.componentIds||[]),r.componentIds||[]}catch(e){throw v(e?.message||"Failed to fetch liked components"),e}finally{x(!1)}},fetchSavedComponents:async()=>{try{x(!0),v(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),r=await t.json();return u(r.componentIds||[]),r.componentIds||[]}catch(e){throw v(e?.message||"Failed to fetch saved components"),e}finally{x(!1)}},fetchDraftedComponents:async()=>{try{x(!0),v(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),r=await t.json();return m(r.componentIds||[]),r.componentIds||[]}catch(e){throw v(e?.message||"Failed to fetch drafted components"),e}finally{x(!1)}},fetchComponentStatus:async e=>{try{let t=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),i=await r.json();return p(t=>({...t,[e]:{liked:i.liked||!1,saved:i.saved||!1,drafted:i.drafted||!1}})),i}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{x(!0),v(null);let t=(0,a.getBackendUrl)(),r=e?JSON.stringify({componentIds:e}):void 0,i=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:r}),n=await i.json();if(n.preferences){p(e=>{let t={...e};return Object.entries(n.preferences).forEach(([e,a])=>{t[e]={liked:a.liked||!1,saved:a.saved||!1,drafted:a.drafted||!1}}),t});let e=Object.entries(n.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(n.preferences).filter(([e,t])=>t.saved).map(([e])=>e),a=Object.entries(n.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);c(e),u(t),m(a)}return n}catch(e){throw v(e?.message||"Failed to fetch component preferences"),e}finally{x(!1)}}}}e.s(["useFigma",()=>r])},38568,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[i,n]=(0,t.useState)([]),[s,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(null),d=async e=>{try{l(!0),c(null);let t=(0,a.getBackendUrl)(),i=new URL(`${t}/api/mcp/code-links`);e&&i.searchParams.append("figmaFileId",e);let n=await fetch(i.toString(),{credentials:"include"});if(!n.ok)throw Error("Failed to fetch code links");let s=await n.json();r(s.links||[])}catch(e){c(e.message)}finally{l(!1)}},u=async()=>{try{l(!0),c(null);let e=(0,a.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let r=await t.json();n(r.tokens||[])}catch(e){c(e.message)}finally{l(!1)}};return{links:e,tokens:i,isLoading:s,error:o,linkComponentToCode:async(e,t,r,i)=>{try{l(!0),c(null);let n=(0,a.getBackendUrl)(),s=await fetch(`${n}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:r,figmaFileId:i})});if(!s.ok)throw Error("Failed to link component");let o=await s.json();return await d(),o}catch(e){throw c(e.message),e}finally{l(!1)}},fetchCodeLinks:d,syncTokens:async e=>{try{l(!0),c(null);let t=(0,a.getBackendUrl)(),r=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!r.ok)throw Error("Failed to sync tokens");let i=await r.json();return await u(),i}catch(e){throw c(e.message),e}finally{l(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{l(!0),c(null);let r=(0,a.getBackendUrl)(),i=await fetch(`${r}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!i.ok)throw Error("Failed to generate code");return await i.json()}catch(e){throw c(e.message),e}finally{l(!1)}}}}e.s(["useMCP",()=>r])},27245,43892,e=>{"use strict";var t=e.i(44855),a=e.i(58891),r=e.i(74614),i=e.i(65790),n=e.i(54704),s=e.i(15915),l=e.i(92378),o=e.i(86012),c=e.i(75557),d=e.i(98807),u=e.i(1051),h=e.i(33948),m=e.i(18295),f=e.i(92279),p=e.i(47379),g=e.i(83161),x=e.i(47617),y=e.i(39972),v=e.i(20161),k=e.i(9109),j=e.i(37025),w=e.i(45162),C=e.i(3430),b=e.i(37451),S=e.i(34699),T=e.i(25972),B=e.i(95532),E=e.i(94544);e.i(72695),e.i(94556),e.i(20012);var F=e.i(99700),I=e.i(27367),P=e.i(16875),W=e.i(24918),z=e.i(13654),$=e.i(75016),D=e.i(9929),M=e.i(15254);let O=null,A=null;try{let t=e.r(26482);O=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);A=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function U(){let{user:e}=(0,M.useAuth)(),{tasks:U,createTask:_,updateTask:R,deleteTask:H,isLoading:L,error:G,authRequired:q,refresh:N,isStale:J}=function(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!1),[n,s]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(null),p=(0,a.useCallback)(async()=>{try{i(!0),s(null),o(!1);let e=(0,z.getTasksBackendUrl)(),a=await (0,z.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===a.status){o(!0),s("Authentication required"),t([]);return}let r=await a.json();t(r.tasks||[]),h(new Date),d(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(o(!0),s("Authentication required"),t([])):(s(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{i(!1)}},[]),g=(0,a.useCallback)(()=>p(),[p]),x=async(e,a,r,n)=>{try{i(!0),s(null),o(!1);let l=(0,z.getTasksBackendUrl)(),c=await (0,z.fetchWithErrorHandling)(`${l}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:a,hyperlinks:r,status:n})});if(401===c.status)throw o(!0),Error("Authentication required");let d=(await c.json()).task;return t(e=>e.some(e=>e.id===d.id)?e.map(e=>e.id===d.id?d:e):[...e,d]),h(new Date),d}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{i(!1)}},y=async(e,a)=>{try{i(!0),s(null),o(!1);let r=(0,z.getTasksBackendUrl)(),n=await (0,z.fetchWithErrorHandling)(`${r}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(a)});if(401===n.status)throw o(!0),Error("Authentication required");let l=(await n.json()).task;return t(e=>e.map(e=>e.id===l.id?l:e)),h(new Date),l}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{i(!1)}},v=async e=>{try{i(!0),s(null),o(!1);let t=(0,z.getTasksBackendUrl)(),a=await (0,z.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===a.status)throw o(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{i(!1)}};return(0,a.useEffect)(()=>{p();let e=(0,$.getTasksSocket)();f(e);let a=()=>{console.log("Socket.io connected for tasks")},r=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},i=e=>{console.log("Socket.io disconnected (tasks):",e)};e.on("connect",a),e.on("connect_error",r),e.on("disconnect",i),e.on("task_created",e=>{t(t=>t.some(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[...t,e]),h(new Date)}),e.on("task_updated",e=>{t(t=>t.map(t=>t.id===e.id?e:t)),h(new Date)}),e.on("task_deleted",e=>{t(t=>t.filter(t=>t.id!==e.id)),h(new Date)}),e.on("auth_restored_ack",()=>{o(!1),p()});let n=setInterval(()=>{u&&Date.now()-u.getTime()>3e5&&d(!0)},6e4);return()=>{e.off("connect",a),e.off("connect_error",r),e.off("disconnect",i),e.off("task_created"),e.off("task_updated"),e.off("task_deleted"),e.off("auth_restored_ack"),clearInterval(n)}},[p,u]),{tasks:e,isLoading:r,error:n,authRequired:l,isStale:c,lastUpdated:u,refresh:g,fetchTasks:p,createTask:x,updateTask:y,deleteTask:v}}(),V=null,K=null;try{O&&(V=O())}catch(e){console.warn("Figma hook not available:",e)}try{A&&(K=A())}catch(e){console.warn("MCP hook not available:",e)}let Q=V?.files||[],X=V?.components||[];V?.tokens;let Y=V?.componentStatuses||{};V?.isLoading;let Z=V?.error||null,ee=V?.fetchFiles||(()=>Promise.resolve()),et=V?.fetchComponents||(()=>Promise.resolve()),ea=V?.likeComponent||(()=>Promise.resolve()),er=V?.saveComponent||(()=>Promise.resolve()),ei=V?.fetchLikedComponents||(()=>Promise.resolve()),en=V?.fetchSavedComponents||(()=>Promise.resolve()),es=V?.fetchDraftedComponents||(()=>Promise.resolve()),el=V?.fetchComponentStatus||(()=>Promise.resolve());K?.links,K?.tokens;let eo=K?.linkComponentToCode||(()=>Promise.resolve()),ec=K?.fetchCodeLinks||(()=>Promise.resolve()),ed=K?.fetchTokens||(()=>Promise.resolve()),[eu,eh]=(0,a.useState)(""),[em,ef]=(0,a.useState)(!1),[ep,eg]=(0,a.useState)("create"),[ex,ey]=(0,a.useState)(null),[ev,ek]=(0,a.useState)(""),[ej,ew]=(0,a.useState)(""),[eC,eb]=(0,a.useState)(""),[eS,eT]=(0,a.useState)("pending"),[eB,eE]=(0,a.useState)(""),[eF,eI]=(0,a.useState)([]),[eP,eW]=(0,a.useState)(!1),[ez,e$]=(0,a.useState)(null),[eD,eM]=(0,a.useState)(!1),[eO,eA]=(0,a.useState)(""),[eU,e_]=(0,a.useState)(""),[eR,eH]=(0,a.useState)(""),[eL,eG]=(0,a.useState)(!1),eq=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("workspace_markdown");e&&eh(e)},[]),(0,a.useEffect)(()=>{""!==eu&&localStorage.setItem("workspace_markdown",eu)},[eu]),(0,a.useEffect)(()=>{(async()=>{if(e&&(e.isEmployee||e.isAdmin)){eW(!0);try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();eI(e.requests||[])}}catch(e){console.error("Error fetching support requests:",e)}finally{eW(!1)}}})()},[e]),(0,a.useEffect)(()=>{O&&A&&(async()=>{try{await Promise.all([ee(),ec(),ed(),ei(),en(),es()])}catch(e){console.error("Error loading Figma data:",e)}})()},[]),(0,a.useEffect)(()=>{ez&&O&&(eG(!0),et(ez).then(()=>{X.length>0&&Promise.all(X.map(e=>el(e.key,ez)))}).catch(e=>console.error("Error fetching components:",e)).finally(()=>eG(!1)))},[ez]);let eN=async t=>{let a=U.find(e=>e.id===t);if(!a)return;let r="completed"===a.status?"pending":"completed";try{await R(t,{status:r}),"completed"===r&&(0,D.trackTaskCompleted)(t,e?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},eJ=async()=>{if(ev.trim())try{let t=eC.split(",").map(e=>e.trim()).filter(e=>e);if("create"===ep){let e=await _(ev.trim(),ej.trim(),t,eS);eB&&e?.id&&await R(e.id,{supportRequestId:eB})}else ex&&(await R(ex,{title:ev.trim(),description:ej.trim(),hyperlinks:t,status:eS,supportRequestId:eB||void 0}),"completed"===eS&&(0,D.trackTaskCompleted)(ex,e?.userRole||"user","cowork"));ef(!1)}catch(e){console.error("Error saving task:",e)}},eV=async e=>{try{await H(e)}catch(e){console.error("Error deleting task:",e)}},eK=async(e,t)=>{t.stopPropagation();let a=Y[e]?.liked||!1;try{await ea(e,!a,ez||void 0)}catch(e){console.error("Error liking component:",e)}},eQ=async(e,t)=>{t.stopPropagation();let a=Y[e]?.saved||!1;try{await er(e,!a,ez||void 0)}catch(e){console.error("Error saving component:",e)}},eX=async()=>{if(eO&&eU)try{await eo(eO,eU,eR,ez||""),eM(!1),ec()}catch(e){console.error("Error linking component:",e)}};return(0,t.jsxs)(r.Box,{sx:{width:"100%"},children:[(0,t.jsxs)(n.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(n.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(i.Paper,{elevation:2,sx:{p:3,height:500},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Collaborative Notes"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Copy all",children:(0,t.jsx)(o.IconButton,{onClick:()=>{eq.current?(eq.current.select(),document.execCommand("copy")):navigator.clipboard.writeText(eu)},size:"small",children:(0,t.jsx)(T.default,{})})}),(0,t.jsx)(c.Button,{variant:"outlined",size:"small",onClick:()=>{eh(""),localStorage.removeItem("workspace_markdown")},children:"Clear"})]})]}),(0,t.jsx)(l.TextField,{fullWidth:!0,multiline:!0,rows:15,variant:"outlined",placeholder:"Write your collaborative notes here...",value:eu,onChange:e=>eh(e.target.value),inputRef:eq,sx:{"& .MuiInputBase-root":{height:"100%",alignItems:"flex-start"}}})]})}),(0,t.jsx)(n.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(i.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Tasks"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Refresh",children:(0,t.jsx)(o.IconButton,{onClick:N,size:"small",children:(0,t.jsx)(W.default,{})})}),(0,t.jsx)(c.Button,{variant:"contained",startIcon:(0,t.jsx)(S.default,{}),onClick:()=>{eg("create"),ey(null),ek(""),ew(""),eb(""),eT("pending"),eE(""),ef(!0)},size:"small",children:"Add Task"})]})]}),G&&(0,t.jsx)(k.Alert,{severity:"error",sx:{mb:2},children:G}),J&&(0,t.jsx)(k.Alert,{severity:"info",sx:{mb:2},action:(0,t.jsx)(c.Button,{size:"small",onClick:N,children:"Refresh"}),children:"Tasks may be out of date"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:[U.map(e=>(0,t.jsx)(w.Card,{sx:{mb:2},elevation:1,children:(0,t.jsx)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,t.jsxs)(r.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,t.jsx)(b.Checkbox,{checked:"completed"===e.status,onChange:()=>eN(e.id),disabled:L,size:"small"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,t.jsx)(s.Typography,{variant:"subtitle1",fontWeight:500,sx:{textDecoration:"completed"===e.status?"line-through":"none"},children:e.title}),e.description&&(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[(0,t.jsx)(u.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status)}),e.hyperlinks&&e.hyperlinks.length>0&&(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(F.default,{}),label:`${e.hyperlinks.length}`,size:"small",variant:"outlined"})]})]}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5},children:[(0,t.jsx)(o.IconButton,{size:"small",onClick:()=>{eg("edit"),ey(e.id),ek(e.title),ew(e.description||""),eb(e.hyperlinks.join(", ")),eT(e.status),eE(e.supportRequestId||""),ef(!0)},children:(0,t.jsx)(B.default,{fontSize:"small"})}),(0,t.jsx)(o.IconButton,{size:"small",onClick:()=>eV(e.id),children:(0,t.jsx)(E.default,{fontSize:"small"})})]})]})})},e.id)),0===U.length&&!L&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:"No tasks yet. Add your first task to get started!"})}),L&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(j.CircularProgress,{size:24})})]})]})}),(0,t.jsx)(n.Grid,{item:!0,xs:12,children:(0,t.jsxs)(i.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Refresh",children:(0,t.jsx)(o.IconButton,{onClick:()=>{ez?et(ez):ee()},size:"small",children:(0,t.jsx)(W.default,{})})}),(0,t.jsx)(c.Button,{variant:"outlined",size:"small",onClick:()=>eM(!0),disabled:!ez||0===X.length,children:"Link to Code"})]})]}),O&&A?(0,t.jsxs)(r.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[Z&&(0,t.jsx)(k.Alert,{severity:"error",sx:{mb:2},children:Z}),(0,t.jsx)(r.Box,{sx:{mb:2},children:(0,t.jsxs)(g.FormControl,{fullWidth:!0,size:"small",children:[(0,t.jsx)(x.InputLabel,{children:"Select Figma File"}),(0,t.jsxs)(y.Select,{value:ez||"",label:"Select Figma File",onChange:e=>e$(e.target.value),children:[(0,t.jsx)(v.MenuItem,{value:"",children:"-- Select a file --"}),Q.map(e=>(0,t.jsx)(v.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),ez&&(0,t.jsx)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:eL?(0,t.jsxs)(r.Box,{sx:{textAlign:"center",py:4},children:[(0,t.jsx)(j.CircularProgress,{size:24}),(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,t.jsxs)(n.Grid,{container:!0,spacing:2,children:[X.map(e=>(0,t.jsx)(n.Grid,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,t.jsx)(w.Card,{elevation:1,children:(0,t.jsxs)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,t.jsx)(s.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,t.jsx)(o.IconButton,{size:"small",onClick:t=>eK(e.key,t),color:Y[e.key]?.liked?"error":"default",children:(0,t.jsx)(I.default,{fontSize:"small"})}),(0,t.jsx)(o.IconButton,{size:"small",onClick:t=>eQ(e.key,t),color:Y[e.key]?.saved?"primary":"default",children:(0,t.jsx)(P.default,{fontSize:"small"})})]})]})})},e.key)),0===X.length&&(0,t.jsx)(n.Grid,{item:!0,xs:12,children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!ez&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,t.jsx)(k.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]})})]}),(0,t.jsxs)(h.Dialog,{open:em,onClose:()=>ef(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(m.DialogTitle,{children:"create"===ep?"Add Task":"Edit Task"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsx)(l.TextField,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,variant:"outlined",value:ev,onChange:e=>ek(e.target.value),sx:{mb:2,mt:1}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:ej,onChange:e=>ew(e.target.value),sx:{mb:2}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:eC,onChange:e=>eb(e.target.value),placeholder:"https://example.com, https://another.com",sx:{mb:2}}),eP?(0,t.jsx)(j.CircularProgress,{size:24}):eF.length>0&&(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,t.jsx)(x.InputLabel,{children:"Link to Support Request (Optional)"}),(0,t.jsxs)(y.Select,{value:eB,label:"Link to Support Request (Optional)",onChange:e=>eE(e.target.value),children:[(0,t.jsx)(v.MenuItem,{value:"",children:"None"}),eF.map(e=>(0,t.jsxs)(v.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",children:[(0,t.jsx)(x.InputLabel,{children:"Status"}),(0,t.jsxs)(y.Select,{value:eS,label:"Status",onChange:e=>eT(e.target.value),children:[(0,t.jsx)(v.MenuItem,{value:"pending",children:"Pending"}),(0,t.jsx)(v.MenuItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(v.MenuItem,{value:"completed",children:"Completed"})]})]})]}),(0,t.jsxs)(p.DialogActions,{children:[(0,t.jsx)(c.Button,{onClick:()=>ef(!1),children:"Cancel"}),(0,t.jsx)(c.Button,{onClick:eJ,variant:"contained",disabled:!ev.trim()||L||q,children:"create"===ep?"Add":"Save"})]})]}),(0,t.jsxs)(h.Dialog,{open:eD,onClose:()=>eM(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(m.DialogTitle,{children:"Link Figma Component to Code"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,t.jsx)(x.InputLabel,{children:"Figma Component"}),(0,t.jsx)(y.Select,{value:eO,label:"Figma Component",onChange:e=>eA(e.target.value),children:X.map(e=>(0,t.jsx)(v.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:eU,onChange:e=>e_(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:eR,onChange:e=>eH(e.target.value),placeholder:"Button"})]}),(0,t.jsxs)(p.DialogActions,{children:[(0,t.jsx)(c.Button,{onClick:()=>eM(!1),children:"Cancel"}),(0,t.jsx)(c.Button,{onClick:eX,variant:"contained",disabled:!eO||!eU,children:"Link"})]})]})]})}e.s(["default",()=>U],27245),e.i(96335);var _=e.i(80622),R=e.i(84933),H=e.i(81706),L=e.i(15127),G=e.i(12396),q=e.i(18420),N=e.i(96861),J=e.i(51480),V=e.i(13740);function K(e){return(0,V.default)("MuiFab",e)}let Q=(0,J.default)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var X=e.i(95262),Y=e.i(32869);let Z=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],ee=(0,X.default)(G.default,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,Y.rootShouldForwardProp)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,q.default)(a.size)}`],"inherit"===a.color&&t.colorInherit,t[(0,q.default)(a.size)],t[a.color]]}})(({theme:e,ownerState:t})=>{var a,r;return(0,R.default)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(a=(r=e.palette).getContrastText)?void 0:a.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${Q.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})},({theme:e,ownerState:t})=>(0,R.default)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${Q.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),et=a.forwardRef(function(e,a){let r=(0,N.useDefaultProps)({props:e,name:"MuiFab"}),{children:i,className:n,color:s="default",component:l="button",disabled:o=!1,disableFocusRipple:c=!1,focusVisibleClassName:d,size:u="large",variant:h="circular"}=r,m=(0,_.default)(r,Z),f=(0,R.default)({},r,{color:s,component:l,disabled:o,disableFocusRipple:c,size:u,variant:h}),p=(e=>{let{color:t,variant:a,classes:r,size:i}=e,n={root:["root",a,`size${(0,q.default)(i)}`,"inherit"===t?"colorInherit":t]},s=(0,L.default)(n,K,r);return(0,R.default)({},r,s)})(f);return(0,t.jsx)(ee,(0,R.default)({className:(0,H.default)(p.root,n),component:l,disabled:o,focusRipple:!c,focusVisibleClassName:(0,H.default)(p.focusVisible,d),ownerState:f,ref:a},m,{classes:p,children:i}))});e.s(["Fab",0,et],43892)},27796,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(e.r(64800)),n=e.r(44855);a.default=(0,i.default)((0,n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")}]);