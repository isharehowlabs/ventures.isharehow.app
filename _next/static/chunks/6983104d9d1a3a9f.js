(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31617,9929,e=>{"use strict";var t=e.i(44855),r=e.i(58891);let o=(0,r.createContext)(void 0);function n({children:e}){let[n,a]=(0,r.useState)(null);return(0,t.jsx)(o.Provider,{value:{timerState:n,setTimerState:a},children:e})}function a(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useTimer must be used within a TimerProvider");return e}e.s(["TimerProvider",()=>n,"useTimer",()=>a],31617);let i=e=>{if(!window.gtag)return void console.log("Analytics event (gtag not loaded):",e);try{window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,user_role:e.userRole,dashboard_context:e.dashboardContext}),console.log("Analytics event tracked:",e)}catch(e){console.error("Error tracking analytics event:",e)}};e.s(["initAnalytics",0,e=>{let t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer?.push(arguments)},window.gtag("js",new Date),window.gtag("config",e,{send_page_view:!0}),console.log("Google Analytics initialized:",e)},"trackFocusSession",0,(e,t,r)=>{i({category:"Focus",action:"focus_session",label:t,value:e,dashboardContext:r})},"trackJournalEntry",0,(e,t)=>{i({category:"Mindset",action:"journal_entry",label:e,dashboardContext:t})},"trackPageView",0,(e,t)=>{window.gtag&&window.gtag("event","page_view",{page_path:e,page_title:t})},"trackTaskCompleted",0,(e,t,r)=>{i({category:"Tasks",action:"task_completed",label:e,userRole:t,dashboardContext:r})}],9929)},71880,e=>{"use strict";var t=e.i(84933),r=e.i(80622),o=e.i(58891),n=e.i(44855);let a=["value"],i=o.createContext();e.s(["default",0,function(e){let{value:o}=e,l=(0,r.default)(e,a);return(0,n.jsx)(i.Provider,(0,t.default)({value:null==o||o},l))},"useRtl",0,()=>{let e=o.useContext(i);return null!=e&&e}])},40762,e=>{"use strict";var t=e.i(58891);let r=0,o=t["useId".toString()];function n(e){if(void 0!==o){let t=o();return null!=e?e:t}return function(e){let[o,n]=t.useState(e),a=e||o;return t.useEffect(()=>{null==o&&(r+=1,n(`mui-${r}`))},[o]),a}(e)}e.s(["default",()=>n])},12385,83120,e=>{"use strict";e.i(96335);var t=e.i(84933);e.i(58891);var r=e.i(54760),r=r,o=e.i(61678),n=e.i(83799),a=e.i(44855);function i(e){let t=(0,o.internal_serializeStyles)(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}let l=function({styles:e,themeId:t,defaultTheme:o={}}){let l=(0,n.default)(o),s=t&&l[t]||l,c="function"==typeof e?e(s):e;return s.modularCssLayers&&(c=Array.isArray(c)?c.map(e=>"function"==typeof e?i(e(s)):i(e)):i(c)),(0,a.jsx)(r.default,{styles:c})};e.s(["default",0,l],83120);var s=e.i(47523),c=e.i(61060);e.s(["default",0,function(e){return(0,a.jsx)(l,(0,t.default)({},e,{defaultTheme:s.default,themeId:c.default}))}],12385)},85696,94476,e=>{"use strict";var t=e.i(44855),r=e.i(58891);e.i(96335);var o=e.i(84933),n=e.i(80622);let a=r.createContext(null);function i(){return r.useContext(a)}let l="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",s=function(e){let{children:n,theme:s}=e,c=i(),u=r.useMemo(()=>{var e,t;let r=null===c?s:(e=c,"function"==typeof(t=s)?t(e):(0,o.default)({},e,t));return null!=r&&(r[l]=null!==c),r},[s,c]);return(0,t.jsx)(a.Provider,{value:u,children:n})};var c=e.i(19864),u=e.i(21488),d=e.i(71880),h=e.i(24677),g=e.i(52007),f=e.i(40762),m=e.i(83120);let p={};function w(e,t,n,a=!1){return r.useMemo(()=>{let r=e&&t[e]||t;if("function"==typeof n){let i=n(r),l=e?(0,o.default)({},t,{[e]:i}):i;return a?()=>l:l}return e?(0,o.default)({},t,{[e]:n}):(0,o.default)({},t,n)},[e,t,n,a])}let y=function(e){let{children:r,theme:o,themeId:n}=e,a=(0,u.default)(p),l=i()||p,y=w(n,a,o),b=w(n,l,o,!0),v="rtl"===y.direction,x=function(e){let r=(0,u.default)(),o=(0,f.default)()||"",{modularCssLayers:n}=e,a="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return(a=n&&null===r?"string"==typeof n?n.replace(/mui(?!\.)/g,a):`@layer ${a};`:"",(0,g.default)(()=>{var e,t;let r=document.querySelector("head");if(!r)return;let n=r.firstChild;if(a){if(n&&null!=(e=n.hasAttribute)&&e.call(n,"data-mui-layer-order")&&n.getAttribute("data-mui-layer-order")===o)return;let t=document.createElement("style");t.setAttribute("data-mui-layer-order",o),t.textContent=a,r.prepend(t)}else null==(t=r.querySelector(`style[data-mui-layer-order="${o}"]`))||t.remove()},[a,o]),a)?(0,t.jsx)(m.default,{styles:a}):null}(y);return(0,t.jsx)(s,{theme:b,children:(0,t.jsx)(c.ThemeContext.Provider,{value:y,children:(0,t.jsx)(d.default,{value:v,children:(0,t.jsxs)(h.default,{value:null==y?void 0:y.components,children:[x,r]})})})})};var b=e.i(61060);let v=["theme"];function x(e){let{theme:r}=e,a=(0,n.default)(e,v),i=r[b.default],l=i||r;return"function"!=typeof r&&(i&&!i.vars?l=(0,o.default)({},i,{vars:null}):r&&!r.vars&&(l=(0,o.default)({},r,{vars:null}))),(0,t.jsx)(y,(0,o.default)({},a,{themeId:i?b.default:void 0,theme:l}))}var k=e.i(96861),C=e.i(12385);let S=function(e){let{children:n,enableColorScheme:a=!1}=(0,k.useDefaultProps)({props:e,name:"MuiCssBaseline"});return(0,t.jsxs)(r.Fragment,{children:[(0,t.jsx)(C.default,{styles:e=>((e,t=!1)=>{var r;let n={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([t,r])=>{var o;n[e.getColorSchemeSelector(t).replace(/\s*&/,"")]={colorScheme:null==(o=r.palette)?void 0:o.mode}});let a=(0,o.default)({html:(0,o.default)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,o.default)({margin:0},(0,o.default)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},n),i=null==(r=e.components)||null==(r=r.MuiCssBaseline)?void 0:r.styleOverrides;return i&&(a=[a,i]),a})(e,a)}),n]})};var T=e.i(54545),E=e.i(54117);function A(e){return String(parseFloat(e)).length===String(e).length}function j(e){return parseFloat(e)}let _={header:"#0a0e1a",sidebar:"#151b2e",border:"#1e293b",textPrimary:"#f7fafc",textSecondary:"#cbd5e0"},P=e=>(function(e,t={}){var r;let{breakpoints:n=["sm","md","lg"],disableAlign:a=!1,factor:i=2,variants:l=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=t,s=(0,o.default)({},e);s.typography=(0,o.default)({},s.typography);let c=s.typography,u=(r=c.htmlFontSize,(e,t)=>{let o=String(e).match(/[\d.\-+]*\s*(.*)/)[1]||"";if(o===t)return e;let n=j(e);"px"!==o&&("em"===o?n=j(e)*j(r):"rem"===o&&(n=j(e)*j(r)));let a=n;if("px"!==t)if("em"===t)a=n/j(r);else{if("rem"!==t)return e;a=n/j(r)}return parseFloat(a.toFixed(5))+t}),d=n.map(e=>s.breakpoints.values[e]);return l.forEach(e=>{let t=c[e];if(!t)return;let r=parseFloat(u(t.fontSize,"rem"));if(r<=1)return;let{lineHeight:n}=t;if(!A(n)&&!a)throw Error((0,E.default)(6));A(n)||(n=parseFloat(u(n,"rem"))/parseFloat(r));let l=null;a||(l=e=>(function({size:e,grid:t}){let r=e-e%t,o=r+t;return e-r<o-e?r:o})({size:e,grid:function({lineHeight:e,pixels:t,htmlFontSize:r}){return t/(e*r)}({pixels:4,lineHeight:n,htmlFontSize:c.htmlFontSize})})),c[e]=(0,o.default)({},t,function({cssProperty:e,min:t,max:r,unit:o="rem",breakpoints:n=[600,900,1200],transform:a=null}){let i={[e]:`${t}${o}`},l=(r-t)/n[n.length-1];return n.forEach(r=>{let n=t+l*r;null!==a&&(n=a(n)),i[`@media (min-width:${r}px)`]={[e]:`${Math.round(1e4*n)/1e4}${o}`}}),i}({cssProperty:"fontSize",min:1+(r-1)/i,max:r,unit:"rem",breakpoints:d,transform:l}))}),s})((0,T.createTheme)({palette:{mode:e,primary:{light:"#42a5f5",main:"#1976d2",dark:"#1565c0",contrastText:"#fff"},secondary:{light:"#ba68c8",main:"#9c27b0",dark:"#7b1fa2",contrastText:"#fff"},error:{light:"#ef5350",main:"#d32f2f",dark:"#c62828",contrastText:"#fff"},warning:{light:"#ff9800",main:"#ed6c02",dark:"#e65100",contrastText:"#fff"},info:{light:"#03a9f4",main:"#0288d1",dark:"#01579b",contrastText:"#fff"},success:{light:"#4caf50",main:"#2e7d32",dark:"#1b5e20",contrastText:"#fff"},background:{default:"light"===e?"#f5f5f5":"#0f172a",paper:"light"===e?"rgba(255, 255, 255, 0.4)":"rgba(15, 23, 42, 0.6)"},text:{primary:"light"===e?"#212529":"#f7fafc",secondary:"light"===e?"#8b95a8":"#cbd5e0",disabled:"light"===e?"rgba(33, 37, 41, 0.38)":"rgba(247, 250, 252, 0.5)"},divider:"light"===e?"#dee2e6":"#334155",..."dark"===e&&{custom:{shell:_}}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:300,fontSize:"6rem",lineHeight:1.167,letterSpacing:"-0.01562em"},h2:{fontWeight:300,fontSize:"3.75rem",lineHeight:1.2,letterSpacing:"-0.00833em"},h3:{fontWeight:400,fontSize:"3rem",lineHeight:1.167,letterSpacing:"0em"},h4:{fontWeight:400,fontSize:"2.125rem",lineHeight:1.235,letterSpacing:"0.00735em"},h5:{fontWeight:400,fontSize:"1.5rem",lineHeight:1.334,letterSpacing:"0em"},h6:{fontWeight:500,fontSize:"1.25rem",lineHeight:1.6,letterSpacing:"0.0075em"},body1:{fontWeight:400,fontSize:"1rem",lineHeight:1.5,letterSpacing:"0.00938em"},body2:{fontWeight:400,fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em"},button:{fontWeight:500,fontSize:"0.875rem",lineHeight:1.75,letterSpacing:"0.02857em",textTransform:"uppercase"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:{backgroundColor:"light"===e?"#f5f5f5":"#0f172a",color:"light"===e?"#212529":"#f7fafc",scrollbarColor:"light"===e?"#bbb #f5f5f5":"#8a94a6 #0f172a","&::-webkit-scrollbar, & *::-webkit-scrollbar":{width:10,height:10},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:5,background:"light"===e?"linear-gradient(45deg, #ff6b6b, #4ecdc4)":"linear-gradient(45deg, #ff8a80, #80deea)",minHeight:24,"&:hover":{background:"light"===e?"linear-gradient(45deg, #ff5252, #26a69a)":"linear-gradient(45deg, #ff6b6b, #4ecdc4)"}},"&::-webkit-scrollbar-track, & *::-webkit-scrollbar-track":{backgroundColor:"light"===e?"#f5f5f5":"#0f172a"}},"#__next":{backgroundColor:"light"===e?"#f5f5f5":"#0f172a",minHeight:"100vh"}}},MuiModal:{styleOverrides:{root:{zIndex:1400},backdrop:{backgroundColor:"light"===e?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)",zIndex:1400}}},MuiBackdrop:{styleOverrides:{root:{backgroundColor:"light"===e?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)",zIndex:1400}}},MuiDialog:{styleOverrides:{root:{zIndex:1400,"& .MuiBackdrop-root":{backgroundColor:"light"===e?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)",zIndex:1400}},container:{display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none","& > *":{pointerEvents:"auto"}},paper:{backgroundColor:"light"===e?"#ffffff":"#1e293b",backgroundImage:"none",opacity:1,position:"relative",zIndex:1401,margin:"32px",maxHeight:"calc(100% - 64px)",display:"flex",flexDirection:"column",pointerEvents:"auto"},paperScrollPaper:{maxHeight:"calc(100% - 64px)"},paperWidthXs:{maxWidth:"444px"},paperWidthSm:{maxWidth:"600px"},paperWidthMd:{maxWidth:"900px"},paperWidthLg:{maxWidth:"1200px"},paperWidthXl:{maxWidth:"1536px"}}},MuiDialogTitle:{styleOverrides:{root:{backgroundColor:"light"===e?"#ffffff":"#1e293b",borderBottom:`1px solid ${"light"===e?"#e2e8f0":"#334155"}`,padding:"16px 24px",pointerEvents:"auto"}}},MuiDialogContent:{styleOverrides:{root:{backgroundColor:"light"===e?"#ffffff":"#1e293b",padding:"20px 24px",pointerEvents:"auto",overflow:"auto"}}},MuiDialogActions:{styleOverrides:{root:{backgroundColor:"light"===e?"#ffffff":"#1e293b",borderTop:`1px solid ${"light"===e?"#e2e8f0":"#334155"}`,padding:"8px 24px",pointerEvents:"auto"}}},MuiMenu:{styleOverrides:{root:{zIndex:1300},paper:{backgroundColor:"light"===e?"#ffffff":"#1e293b",pointerEvents:"auto"},list:{pointerEvents:"auto"}}},MuiPopover:{styleOverrides:{root:{zIndex:1300},paper:{backgroundColor:"light"===e?"#ffffff":"#1e293b",pointerEvents:"auto"}}},MuiSelect:{styleOverrides:{select:{pointerEvents:"auto"}}},MuiMenuItem:{styleOverrides:{root:{pointerEvents:"auto","&:hover":{pointerEvents:"auto"}}}}}}));P("light"),P("dark"),e.s(["SHELL_COLORS",()=>_,"default",0,P],94476);let M=(0,r.createContext)(void 0),z=e=>{console.log("[ThemeContext] Updating DOM theme to:",e);let t=document.documentElement;t.classList.add("theme-transitioning"),t.setAttribute("data-theme",e),t.classList.remove("light-mode","dark-mode"),t.classList.add(`${e}-mode`);let r=document.querySelector('meta[name="color-scheme"]');r||((r=document.createElement("meta")).setAttribute("name","color-scheme"),document.head.appendChild(r)),r.setAttribute("content",e),requestAnimationFrame(()=>{setTimeout(()=>{t.classList.remove("theme-transitioning")},50)})};e.s(["ThemeProviderWrapper",0,({children:e})=>{let[o,n]=(0,r.useState)(()=>(()=>{try{let e=localStorage.getItem("themeMode");if(console.log("[ThemeContext] Initial mode from localStorage:",e),e&&("light"===e||"dark"===e||"system"===e))return e}catch(e){console.warn("[ThemeContext] Failed to read theme preference from localStorage:",e)}return"system"})()),[a,i]=(0,r.useState)(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),l=(0,r.useRef)(!1),s=(0,r.useRef)("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light"),c=(0,r.useMemo)(()=>{let e="system"===o?a:o;return console.log("[ThemeContext] Resolved mode:",e,"from mode:",o,"systemPref:",a),e},[o,a]);(0,r.useLayoutEffect)(()=>{l.current=!0,console.log("[ThemeContext] Component mounted, mode:",o,"resolvedMode:",c,"initialDOM:",s.current),c!==s.current&&(console.log("[ThemeContext] Syncing DOM theme on mount"),z(c))},[]),(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{let t=e.matches?"dark":"light";console.log("[ThemeContext] System preference changed to:",t),i(t)};return e.addEventListener?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t))},[]),(0,r.useLayoutEffect)(()=>{if(l.current){console.log("[ThemeContext] resolvedMode changed, updating DOM to:",c),z(c);{let e=new CustomEvent("themechange",{bubbles:!0,detail:{mode:c}});document.dispatchEvent(e)}}},[c]);let u=e=>{console.log("[ThemeContext] Setting theme mode to:",e),n(e);try{localStorage.setItem("themeMode",e)}catch(e){console.warn("[ThemeContext] Failed to save theme preference to localStorage:",e)}},d=(0,r.useMemo)(()=>{console.log("[ThemeContext] Creating theme for:",c);let e=P(c);return e.palette.mode!==c&&console.warn("[ThemeContext] MUI theme mode mismatch! Expected:",c,"Got:",e.palette.mode),e},[c]);return(0,t.jsx)(M.Provider,{value:{mode:o,resolvedMode:c,toggleTheme:()=>{let e="light"===o?"dark":"dark"===o?"system":"light";console.log("[ThemeContext] Toggling theme from",o,"to",e),u(e)},setThemeMode:u},children:(0,t.jsxs)(x,{theme:d,children:[(0,t.jsx)(S,{}),e]})})},"useThemeContext",0,()=>{let e=(0,r.useContext)(M);if(!e)throw Error("useThemeContext must be used within a ThemeProvider");return e}],85696)},83344,(e,t,r)=>{t.exports=e.r(50513)},13654,e=>{"use strict";var t=e.i(96335);let r=async(e,t={})=>{try{let r=void 0!==t.body&&null!==t.body,o=(t.method||"GET").toUpperCase(),n=r&&["POST","PUT","PATCH"].includes(o),a={...t.headers};n&&!a["Content-Type"]&&(a["Content-Type"]="application/json");let i=await fetch(e,{...t,credentials:"include",headers:a});if(!i.ok){let e=`Request failed with status ${i.status}`;try{let t=await i.json();e=t.error||t.message||e}catch(r){let t=await i.text().catch(()=>"");t&&(e=t)}throw Error(e)}return i}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error: Unable to connect to the server. Please check your internet connection.");throw e}};e.s(["fetchWithErrorHandling",0,r,"getBackendUrl",0,()=>{let e=t.default.env.NEXT_PUBLIC_BACKEND_URL;return e?e.replace(/\/$/,""):"https://api.ventures.isharehow.app"},"getTasksBackendUrl",0,()=>{let e=t.default.env.NEXT_PUBLIC_TASKS_BACKEND_URL;return e?e.replace(/\/$/,""):"https://api.ventures.isharehow.app"}])},15254,e=>{"use strict";var t=e.i(58891),r=e.i(13654);let o=!1,n=null,a=null,i=new Set;function l(){let[e,l]=(0,t.useState)(()=>a||{user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,t.useEffect)(()=>{let e=e=>{l(e)};return i.add(e),a&&!a.isLoading&&l(a),()=>{i.delete(e)}},[]);let s=(0,t.useCallback)(e=>{a=e,i.forEach(t=>t(e))},[]),c=(0,t.useCallback)(async()=>{if(o&&n){console.log("[Auth] Auth check already in progress globally, waiting for existing check...");try{await Promise.race([n,new Promise((e,t)=>setTimeout(()=>t(Error("Wait timeout")),3e3))]);return}catch(e){console.log("[Auth] Previous check failed or timed out, starting new check..."),o=!1,n=null}}o=!0;let e=(async()=>{let e=(0,r.getBackendUrl)(),t=null;1===i.size&&console.log("[Auth] Checking authentication...",{backendUrl:e,timestamp:new Date().toISOString(),listeners:i.size});try{for(let r=0;r<3;r++)try{let o=new Promise((e,t)=>{setTimeout(()=>{t(Error("Request timeout"))},15e3)}),n={"Content-Type":"application/json"},a=await Promise.race([fetch(`${e}/api/auth/me`,{method:"GET",credentials:"include",headers:n,mode:"cors"}),o]);if(1===i.size&&0===r&&console.log("[Auth] Response received:",{status:a.status,statusText:a.statusText}),a.ok){let e=await a.json();if(!1!==e.authenticated&&e.id){1===i.size&&console.log("[Auth] ✓ Authentication successful:",{userId:e.id,userName:e.name,isPaidMember:e.isPaidMember});let t={user:e,isAuthenticated:!0,isLoading:!1,error:null};s(t);return}{let e={user:null,isAuthenticated:!1,isLoading:!1,error:null};s(e);return}}{let e={};try{let t=await a.text();t&&(e=JSON.parse(t))}catch(t){e={message:`Server error: ${a.status} ${a.statusText}`}}if(401===a.status){1===i.size&&console.warn("[Auth] ✗ Unauthorized (401) - user not authenticated");let e={user:null,isAuthenticated:!1,isLoading:!1,error:null};s(e);return}if(500===a.status)t=Error(`Server error: ${a.status}`),1===i.size&&r<2&&console.warn(`[Auth] Server error (500), retrying... (attempt ${r+1}/3)`);else{t=Error(e.message||`HTTP ${a.status}`),1===i.size&&console.warn("[Auth] ✗ Auth check failed:",{status:a.status,statusText:a.statusText,error:e});return}}}catch(n){t=n;let e="Request timeout"===n.message,o="TypeError"===n.name||n.message.includes("fetch");if(1===i.size&&r<2&&(e?console.warn(`[Auth] Request timed out, retrying... (attempt ${r+1}/3)`):o?console.warn(`[Auth] Network error, retrying... (attempt ${r+1}/3)`):console.warn(`[Auth] Error: ${n.message}, retrying... (attempt ${r+1}/3)`)),r<2){await new Promise(e=>setTimeout(e,Math.min(1e3*Math.pow(2,r),5e3)));continue}}1===i.size&&(console.error("[Auth] ✗ Auth check failed after all retries:",t?.message||"Unknown error"),console.warn("[Auth] Keeping previous authentication state to prevent unwanted logout"))}finally{o=!1,n=null}})();n=e,await e},[s]);(0,t.useEffect)(()=>{let e=!0;if((async()=>{e&&await c()})(),"success"===new URLSearchParams(window.location.search).get("auth")){console.log("[Auth] Detected auth=success in URL, JWT should be in httpOnly cookie");let t=window.location.pathname;window.history.replaceState({},"",t),console.log("[Auth] Cleaned up URL parameter"),setTimeout(()=>{e&&(console.log("[Auth] Retry auth check after URL cleanup"),c())},1e3)}return()=>{e=!1}},[]);let u=(0,t.useCallback)(async()=>{try{let e=(0,r.getBackendUrl)();console.log("[Auth] Logging out..."),await fetch(`${e}/api/auth/logout`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),s({user:null,isAuthenticated:!1,isLoading:!1,error:null}),console.log("[Auth] ✓ Logged out successfully")}catch(e){console.error("[Auth] Logout error:",e),s({user:null,isAuthenticated:!1,isLoading:!1,error:null})}},[s]),d=(0,t.useCallback)(async(e,t,o)=>{try{let n=await fetch(`${(0,r.getBackendUrl)()}/api/auth/wallet/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:e,signature:t,nonce:o})}),a=await n.json();if(n.ok&&a.success)return await c(),{success:!0};if(404===n.status&&a.requiresRegistration)return{success:!1,requiresRegistration:!0};return{success:!1,error:a.error||"Wallet login failed"}}catch(e){return console.error("Error logging in with wallet:",e),{success:!1,error:e.message||"Network error during wallet login"}}},[c]),h=(0,t.useCallback)(async(e,t,o,n,a)=>{try{let i=await fetch(`${(0,r.getBackendUrl)()}/api/auth/wallet/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:e,signature:t,nonce:o,email:n,username:a})}),l=await i.json();if(i.ok&&l.success)return await c(),{success:!0};return{success:!1,error:l.error||"Wallet registration failed"}}catch(e){return console.error("Error registering with wallet:",e),{success:!1,error:e.message||"Network error during registration"}}},[c]),g=(0,t.useCallback)(async(e,t,o)=>{try{let n=await fetch(`${(0,r.getBackendUrl)()}/api/auth/wallet/link`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:e,signature:t,nonce:o})}),a=await n.json();if(n.ok&&a.success)return await c(),{success:!0};return{success:!1,error:a.error||"Failed to link wallet"}}catch(e){return console.error("Error linking wallet:",e),{success:!1,error:e.message||"Network error while linking wallet"}}},[c]),f=(0,t.useCallback)(async e=>{try{let t=await fetch(`${(0,r.getBackendUrl)()}/api/auth/wallet/nonce`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e})}),o=await t.json();if(t.ok&&o.success)return{nonce:o.nonce,message:o.message};return{error:o.error||"Failed to get nonce"}}catch(e){return console.error("Error getting wallet nonce:",e),{error:e.message||"Network error while getting nonce"}}},[]),m=(0,t.useCallback)(()=>{window.location.href=`${(0,r.getBackendUrl)()}/api/auth/google/login`},[]),p=(0,t.useCallback)(async e=>{try{let t=await fetch(`${(0,r.getBackendUrl)()}/api/auth/start-trial`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e})}),o=await t.json();if(t.ok&&o.success)return await c(),{success:!0,trialExpires:o.trial_expires};return{success:!1,error:o.error||"Failed to start trial"}}catch(e){return console.error("Error starting trial:",e),{success:!1,error:e.message||"Network error while starting trial"}}},[c]),w=(0,t.useCallback)(async()=>{try{let e=await fetch(`${(0,r.getBackendUrl)()}/api/user/access`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(e.ok)return await e.json();throw Error("Failed to get user access")}catch(e){throw console.error("Error getting user access:",e),e}},[]);return{...e,login:()=>{window.location.href="/?login=true"},logout:u,refresh:c,loginWithWallet:d,registerWithWallet:h,linkWallet:g,getWalletNonce:f,loginWithGoogle:m,startTrial:p,getUserAccess:w}}e.s(["useAuth",()=>l])},54024,e=>{"use strict";var t=e.i(96335),r=e.i(44855),o=e.i(58891),n=e.i(83344),a=e.i(85696),i=e.i(23353),l=e.i(31617),s=e.i(9929),c=o,u=e.i(74614),d=e.i(15915),h=e.i(75557);class g extends c.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,r.jsxs)(u.Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",p:4,textAlign:"center"},children:[(0,r.jsx)(d.Typography,{variant:"h5",gutterBottom:!0,children:"Something went wrong"}),(0,r.jsx)(d.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:this.state.error?.message||"An unexpected error occurred"}),(0,r.jsx)(h.Button,{variant:"contained",onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},children:"Reload Page"})]}):this.props.children}}function f({Component:e,pageProps:a}){let i=(0,n.useRouter)();return(0,o.useEffect)(()=>{{let e=console.error,t=console.warn,r=e=>e.includes("WebSocket connection to")||e.includes("ws://localhost:3000")||e.includes("[webpack-dev-server]")||e.includes("[HMR]")||e.includes("Waiting for update signal from WDS")||e.includes("Hot Module Replacement enabled")||e.includes("Disconnected!");return console.error=(...t)=>{r(t.map(e=>"string"==typeof e?e:JSON.stringify(e)).join(" "))||e.apply(console,t)},console.warn=(...e)=>{r(e.map(e=>"string"==typeof e?e:JSON.stringify(e)).join(" "))||t.apply(console,e)},()=>{console.error=e,console.warn=t}}},[]),(0,o.useEffect)(()=>{{let e=()=>{window.g_usernameControls||(window.g_usernameControls={}),window.g_passwordControls||(window.g_passwordControls={});let e="ForCompletionList";window.g_usernameControls[e]||(window.g_usernameControls[e]=[]),window.g_passwordControls[e]||(window.g_passwordControls[e]=[]),window.g_usernameControls[e]=window.g_usernameControls[e].filter(e=>null!=e),window.g_passwordControls[e]=window.g_passwordControls[e].filter(e=>null!=e)};e();let t=setTimeout(e,100);return()=>clearTimeout(t)}},[]),(0,o.useEffect)(()=>{let e=t.default.env.NEXT_PUBLIC_GA_MEASUREMENT_ID;e&&(0,s.initAnalytics)(e)},[]),(0,o.useEffect)(()=>{let e=e=>{(0,s.trackPageView)(e,document.title)};return i.events.on("routeChangeComplete",e),()=>{i.events.off("routeChangeComplete",e)}},[i.events]),(0,r.jsx)(e,{...a})}function m(e){return(0,r.jsx)(g,{children:(0,r.jsx)(a.ThemeProviderWrapper,{children:(0,r.jsx)(i.NotificationProvider,{children:(0,r.jsx)(l.TimerProvider,{children:(0,r.jsx)(f,{...e})})})})})}e.s(["default",()=>m],54024)},13166,(e,t,r)=>{let o="/_app";(window.__NEXT_P=window.__NEXT_P||[]).push([o,()=>e.r(54024)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([o])})},9781,e=>{e.v(t=>Promise.all(["static/chunks/d62b89fe821ade37.js"].map(t=>e.l(t))).then(()=>t(94246)))},90413,e=>{e.v(t=>Promise.all(["static/chunks/1b9991f459e98f67.js"].map(t=>e.l(t))).then(()=>t(18636)))}]);