(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49876,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)([(0,a.jsx)("path",{d:"M21 12.22C21 6.73 16.74 3 12 3c-4.69 0-9 3.65-9 9.28-.6.34-1 .98-1 1.72v2c0 1.1.9 2 2 2h1v-6.1c0-3.87 3.13-7 7-7s7 3.13 7 7V19h-8v2h8c1.1 0 2-.9 2-2v-1.22c.59-.31 1-.92 1-1.64v-2.3c0-.7-.41-1.31-1-1.62"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,a.jsx)("circle",{cx:"15",cy:"13",r:"1"},"2"),(0,a.jsx)("path",{d:"M18 11.03C17.52 8.18 15.04 6 12.05 6c-3.03 0-6.29 2.51-6.03 6.45 2.47-1.01 4.33-3.21 4.86-5.89 1.31 2.63 4 4.44 7.12 4.47"},"3")],"SupportAgent")},59096,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline")},20534,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language")},12214,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},33918,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined")},7294,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment")},926,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline")},19391,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},25449,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},94556,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},27325,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline")},61637,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm-3.06 16L7.4 14.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41zM13 9V3.5L18.5 9z"}),"Task")},16875,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},25303,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48"}),"Gesture")},26482,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[x,f]=(0,t.useState)({}),[m,g]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null);return{files:e,components:i,tokens:o,likedComponents:l,savedComponents:d,draftedComponents:h,componentStatuses:x,isLoading:m,error:y,fetchFiles:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),i=await t.json();n(i.projects||[])}catch(e){j(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await n.json()).file}catch(e){throw j(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),i=await n.json();return a(i.components||[]),i.components}catch(e){throw j(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),i=await n.json();return s(i.tokens||[]),i.tokens}catch(e){throw j(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:n})}),o=await a.json();return o.success&&(f(r=>({...r,[e]:{...r[e],liked:t}})),t?c(t=>t.includes(e)?t:[...t,e]):c(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:n})}),o=await a.json();return o.success&&(f(r=>({...r,[e]:{...r[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:n})}),o=await a.json();return o.success&&(f(r=>({...r,[e]:{...r[e],drafted:t}})),t?p(t=>t.includes(e)?t:[...t,e]):p(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),n=await t.json();return c(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),n=await t.json();return u(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),j(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),n=await t.json();return p(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),i=await n.json();return f(t=>({...t,[e]:{liked:i.liked||!1,saved:i.saved||!1,drafted:i.drafted||!1}})),i}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),j(null);let t=(0,r.getBackendUrl)(),n=e?JSON.stringify({componentIds:e}):void 0,i=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:n}),a=await i.json();if(a.preferences){f(e=>{let t={...e};return Object.entries(a.preferences).forEach(([e,r])=>{t[e]={liked:r.liked||!1,saved:r.saved||!1,drafted:r.drafted||!1}}),t});let e=Object.entries(a.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(a.preferences).filter(([e,t])=>t.saved).map(([e])=>e),r=Object.entries(a.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);c(e),u(t),p(r)}return a}catch(e){throw j(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>n])},38568,e=>{"use strict";var t=e.i(58891),r=e.i(13654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),d=async e=>{try{s(!0),c(null);let t=(0,r.getBackendUrl)(),i=new URL(`${t}/api/mcp/code-links`);e&&i.searchParams.append("figmaFileId",e);let a=await fetch(i.toString(),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch code links");let o=await a.json();n(o.links||[])}catch(e){c(e.message)}finally{s(!1)}},u=async()=>{try{s(!0),c(null);let e=(0,r.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let n=await t.json();a(n.tokens||[])}catch(e){c(e.message)}finally{s(!1)}};return{links:e,tokens:i,isLoading:o,error:l,linkComponentToCode:async(e,t,n,i)=>{try{s(!0),c(null);let a=(0,r.getBackendUrl)(),o=await fetch(`${a}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:n,figmaFileId:i})});if(!o.ok)throw Error("Failed to link component");let l=await o.json();return await d(),l}catch(e){throw c(e.message),e}finally{s(!1)}},fetchCodeLinks:d,syncTokens:async e=>{try{s(!0),c(null);let t=(0,r.getBackendUrl)(),n=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!n.ok)throw Error("Failed to sync tokens");let i=await n.json();return await u(),i}catch(e){throw c(e.message),e}finally{s(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{s(!0),c(null);let n=(0,r.getBackendUrl)(),i=await fetch(`${n}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!i.ok)throw Error("Failed to generate code");return await i.json()}catch(e){throw c(e.message),e}finally{s(!1)}}}}e.s(["useMCP",()=>n])},27796,(e,t,r)=>{"use strict";var n=e.r(91074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(64800)),a=e.r(44855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},11500,e=>{"use strict";let t,r,n,i;var a,o,s,l,c,d=e.i(44855),u=e.i(20887),h=e.i(21504),p=e.i(58891),x=e.i(83344),f=e.i(74614),m=e.i(72204),g=e.i(15915),y=e.i(32327),j=e.i(54385),b=e.i(65790),v=e.i(83378),w=e.i(70095),S=e.i(45162),C=e.i(3430),k=e.i(37025),T=e.i(9109),E=e.i(58176),A=e.i(49876),R=e.i(59096),B=e.i(20534),O=e.i(31255),P=e.i(67812),I=e.i(8195),L=e.i(54704),F=e.i(39972),M=e.i(20161),D=e.i(83161),W=e.i(47617),N=e.i(75557),z=e.i(15708),U=e.i(86012),$=e.i(98807),_=e.i(92378),q=e.i(1051),H=e.i(92297),G=e.i(10251),V=e.i(62438),J=e.i(13516),K=e.i(98793),X=e.i(12214),Y=e.i(33918),Q=e.i(45680),Z=e.i(13109),ee=e.i(7294),et=e.i(926),er=e.i(79539),en=e.i(33675),ei=["axis"],ea=(0,p.forwardRef)((e,t)=>p.createElement(en.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ei,tooltipPayloadSearcher:er.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),eo=e.i(5526),es=e.i(86386),el=e.i(82205),ec=e.i(25411),ed=e.i(25806),eu=e.i(19148),eh=e.i(40382),ep=e.i(21310),ex=e.i(79507),ef=e.i(71088),em=e.i(62992),eg=e.i(98721),ey=e.i(83066);function ej({title:e,value:t,icon:r,trend:n,trendLabel:i,color:a="#6366f1",loading:o=!1}){let s=n&&n>0;return(0,d.jsx)(S.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsxs)(f.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:e}),(0,d.jsx)(em.Avatar,{sx:{bgcolor:`${a}15`,width:40,height:40,color:a},children:r})]}),o?(0,d.jsx)(f.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:48},children:(0,d.jsx)(k.CircularProgress,{size:24})}):(0,d.jsx)(g.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:t}),void 0!==n&&(0,d.jsxs)(f.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[s?(0,d.jsx)(eg.default,{sx:{fontSize:16,color:"success.main"}}):(0,d.jsx)(ey.default,{sx:{fontSize:16,color:"error.main"}}),(0,d.jsxs)(g.Typography,{variant:"caption",sx:{color:s?"success.main":"error.main",fontWeight:600},children:[Math.abs(n),"%"]}),i&&(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:i})]})]})})}function eb({title:e,subtitle:t,children:r,action:n}){return(0,d.jsx)(S.Card,{sx:{height:"100%",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","&:hover":{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},transition:"box-shadow 0.2s"},children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsxs)(f.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:e}),t&&(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:t})]}),n&&(0,d.jsx)(f.Box,{children:n})]}),(0,d.jsx)(f.Box,{children:r})]})})}var ev=e.i(13654);function ew(){let e=(0,v.useTheme)(),[t,r]=(0,p.useState)("all"),[n,i]=(0,p.useState)([]),[a,o]=(0,p.useState)(!1),[s,l]=(0,p.useState)(!0),[c,u]=(0,p.useState)("7d"),[h,x]=(0,p.useState)(null),[m,y]=(0,p.useState)(""),[j,w]=(0,p.useState)(null),[E,A]=(0,p.useState)(null),[R,B]=(0,p.useState)(null),[O,P]=(0,p.useState)(null);(0,p.useEffect)(()=>{(async()=>{try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();i(e.clients||[]),e.clients&&e.clients.length>0&&e.clients[0].googleAnalyticsPropertyKey&&y(e.clients[0].googleAnalyticsPropertyKey)}}catch(e){console.error("Error fetching clients:",e)}finally{l(!1)}})()},[]);let I=async(e,t)=>{if(!e)return void w(null);o(!0),A(null);try{let r=(0,ev.getBackendUrl)(),n=await fetch(`${r}/api/analytics/data`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({propertyId:e,timeRange:t})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||"Failed to fetch analytics data")}let i=await n.json();i.error&&i.isMockData?(A(i.error),w({totalRevenue:i.totalRevenue||0,totalUsers:i.totalUsers||0,pageViews:i.pageViews||0,conversionRate:i.conversionRate||0,revenueTrend:i.revenueTrend||0,usersTrend:i.usersTrend||0,pageViewsTrend:i.pageViewsTrend||0,conversionTrend:i.conversionTrend||0,revenueData:i.revenueData||[],visitorData:i.visitorData||[],conversionData:i.conversionData||[]})):i.error?(A(i.error),w(null)):(w(i),A(null)),x(new Date)}catch(e){console.error("Error fetching analytics data:",e),A(e.message||"Failed to load analytics data"),w(null)}finally{o(!1)}},er=async()=>{m&&await I(m,c)};(0,p.useEffect)(()=>{m&&c&&I(m,c)},[m,c]);let en=e=>{console.log(`Exporting analytics data as ${e}`),B(null)},ei=e=>({"24h":"Last 24 Hours","7d":"Last 7 Days","30d":"Last 30 Days","90d":"Last 90 Days"})[e]||e,em=j&&j.totalUsers>0?(j.totalRevenue/j.totalUsers).toFixed(2):"0",eg=j&&j.totalUsers>0?(j.pageViews/j.totalUsers).toFixed(1):"0";return(0,d.jsxs)(f.Box,{sx:{width:"100%"},children:[(0,d.jsx)(b.Paper,{elevation:0,sx:{p:3,mb:3,background:"dark"===e.palette.mode?"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)":"linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%)",border:`1px solid ${e.palette.divider}`,borderRadius:2},children:(0,d.jsxs)(f.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Analytics Dashboard"}),(0,d.jsxs)(g.Typography,{variant:"body2",color:"text.secondary",children:["Track performance metrics and insights",h&&(0,d.jsx)(q.Chip,{label:`Last updated ${h.toLocaleTimeString()}`,size:"small",sx:{ml:1,height:20}})]})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,flexWrap:"wrap",children:[(0,d.jsx)(_.TextField,{size:"small",label:"GA Property ID",placeholder:"G-XXXXXXXXXX",value:m,onChange:e=>y(e.target.value),sx:{minWidth:200},InputProps:{startAdornment:(0,d.jsx)(ee.default,{sx:{fontSize:16,mr:1,color:"text.secondary"}})}}),(0,d.jsxs)(D.FormControl,{size:"small",sx:{minWidth:150},children:[(0,d.jsx)(W.InputLabel,{children:"Time Range"}),(0,d.jsxs)(F.Select,{value:c,onChange:e=>u(e.target.value),label:"Time Range",children:[(0,d.jsx)(M.MenuItem,{value:"24h",children:"Last 24 Hours"}),(0,d.jsx)(M.MenuItem,{value:"7d",children:"Last 7 Days"}),(0,d.jsx)(M.MenuItem,{value:"30d",children:"Last 30 Days"}),(0,d.jsx)(M.MenuItem,{value:"90d",children:"Last 90 Days"})]})]}),(0,d.jsxs)(D.FormControl,{size:"small",sx:{minWidth:150},children:[(0,d.jsx)(W.InputLabel,{children:"Client"}),(0,d.jsxs)(F.Select,{value:t,onChange:e=>r(e.target.value),label:"Client",disabled:s,children:[(0,d.jsx)(M.MenuItem,{value:"all",children:"All Clients"}),n.map(e=>(0,d.jsx)(M.MenuItem,{value:e.id,children:e.name},e.id))]})]}),(0,d.jsx)($.Tooltip,{title:"Refresh data",children:(0,d.jsx)(U.IconButton,{onClick:er,disabled:a||!m,sx:{bgcolor:"background.paper",border:"1px solid",borderColor:"divider","&:hover":{bgcolor:"action.hover"}},children:a?(0,d.jsx)(k.CircularProgress,{size:20}):(0,d.jsx)(Y.default,{})})}),(0,d.jsx)(N.Button,{variant:"outlined",startIcon:(0,d.jsx)(Z.default,{}),onClick:e=>P(e.currentTarget),sx:{borderColor:"divider"},children:"Filters"}),(0,d.jsx)(N.Button,{variant:"outlined",startIcon:(0,d.jsx)(Q.default,{}),onClick:e=>B(e.currentTarget),sx:{borderColor:"divider"},children:"Export"})]})]})}),(0,d.jsxs)(H.Menu,{anchorEl:R,open:!!R,onClose:()=>B(null),children:[(0,d.jsxs)(M.MenuItem,{onClick:()=>en("csv"),children:[(0,d.jsx)(Q.default,{sx:{mr:1,fontSize:18}}),"Export as CSV"]}),(0,d.jsxs)(M.MenuItem,{onClick:()=>en("pdf"),children:[(0,d.jsx)(Q.default,{sx:{mr:1,fontSize:18}}),"Export as PDF"]})]}),(0,d.jsx)(H.Menu,{anchorEl:O,open:!!O,onClose:()=>P(null),children:(0,d.jsxs)(f.Box,{sx:{p:2,minWidth:250},children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Filter Options"}),(0,d.jsx)(G.Divider,{sx:{my:1}}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Additional filters coming soon"})]})}),E&&(0,d.jsxs)(T.Alert,{severity:E.includes("not configured")||E.includes("not installed")?"warning":"error",sx:{mb:3},onClose:()=>A(null),action:(0,d.jsx)(N.Button,{color:"inherit",size:"small",onClick:er,children:"Retry"}),children:[(0,d.jsx)(g.Typography,{variant:"body2",fontWeight:600,gutterBottom:!0,children:E.includes("not configured")||E.includes("not installed")?"Google Analytics API Not Configured":"Error Loading Analytics Data"}),(0,d.jsx)(g.Typography,{variant:"body2",children:E}),E.includes("GOOGLE_APPLICATION_CREDENTIALS")&&(0,d.jsx)(f.Box,{sx:{mt:1},children:(0,d.jsxs)(g.Typography,{variant:"caption",component:"div",children:[(0,d.jsx)("strong",{children:"To fix this:"}),(0,d.jsxs)("ol",{style:{marginTop:8,paddingLeft:20},children:[(0,d.jsx)("li",{children:"Create a service account in Google Cloud Console"}),(0,d.jsx)("li",{children:"Enable Google Analytics Data API for your project"}),(0,d.jsx)("li",{children:"Download the JSON key file"}),(0,d.jsx)("li",{children:"Set GOOGLE_APPLICATION_CREDENTIALS environment variable to the JSON file path"})]})]})})]}),(0,d.jsxs)(L.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,d.jsx)(ej,{title:"Total Revenue",value:j?`$${j.totalRevenue.toLocaleString()}`:"$0",icon:(0,d.jsx)(K.default,{}),trend:j?.revenueTrend||0,trendLabel:"vs last period",color:"#10b981",loading:a&&!j})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,d.jsx)(ej,{title:"Total Users",value:j?j.totalUsers.toLocaleString():"0",icon:(0,d.jsx)(V.default,{}),trend:j?.usersTrend||0,trendLabel:"vs last period",color:"#6366f1",loading:a&&!j})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,d.jsx)(ej,{title:"Page Views",value:j?`${(j.pageViews/1e3).toFixed(1)}K`:"0",icon:(0,d.jsx)(X.default,{}),trend:j?.pageViewsTrend||0,trendLabel:"vs last period",color:"#f59e0b",loading:a&&!j})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:3,children:(0,d.jsx)(ej,{title:"Conversion Rate",value:j?`${j.conversionRate.toFixed(2)}%`:"0%",icon:(0,d.jsx)(J.default,{}),trend:j?.conversionTrend||0,trendLabel:"vs last period",color:"#8b5cf6",loading:a&&!j})})]}),(0,d.jsxs)(L.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:4,children:(0,d.jsx)(S.Card,{sx:{boxShadow:2},children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Pages per User"}),(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:eg})]})})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:4,children:(0,d.jsx)(S.Card,{sx:{boxShadow:2},children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Conversion Rate"}),(0,d.jsxs)(g.Typography,{variant:"h5",fontWeight:700,children:[j?.conversionRate?.toFixed(1)||"0","%"]})]})})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:4,children:(0,d.jsx)(S.Card,{sx:{boxShadow:2},children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Revenue per User"}),(0,d.jsxs)(g.Typography,{variant:"h5",fontWeight:700,children:["$",em]})]})})})]}),(0,d.jsxs)(L.Grid,{container:!0,spacing:3,sx:{mb:3},children:[(0,d.jsx)(L.Grid,{item:!0,xs:12,lg:8,children:(0,d.jsx)(eb,{title:"Revenue Overview",subtitle:`${ei(c)} - Current vs Previous Period`,action:(0,d.jsx)(N.Button,{size:"small",variant:"outlined",startIcon:(0,d.jsx)(et.default,{}),children:"View Details"}),children:(0,d.jsx)(ep.ResponsiveContainer,{width:"100%",height:350,children:(0,d.jsxs)(ea,{data:j?.revenueData||[],children:[(0,d.jsxs)("defs",{children:[(0,d.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,d.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.4}),(0,d.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),(0,d.jsxs)("linearGradient",{id:"colorPrevious",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,d.jsx)("stop",{offset:"5%",stopColor:"#cbd5e1",stopOpacity:.2}),(0,d.jsx)("stop",{offset:"95%",stopColor:"#cbd5e1",stopOpacity:0})]})]}),(0,d.jsx)(eu.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,d.jsx)(ec.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(ed.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(eh.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,d.jsx)(eo.Area,{type:"monotone",dataKey:"value",stroke:"#6366f1",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)",name:"Current Period"}),(0,d.jsx)(eo.Area,{type:"monotone",dataKey:"previous",stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5 5",fill:"url(#colorPrevious)",fillOpacity:.3,name:"Previous Period"})]})})})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,lg:4,children:(0,d.jsx)(eb,{title:"Conversion Rate",subtitle:"Weekly trend analysis",children:(0,d.jsx)(ep.ResponsiveContainer,{width:"100%",height:350,children:(0,d.jsxs)(ex.LineChart,{data:j?.conversionData||[],children:[(0,d.jsx)(eu.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,d.jsx)(ec.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(ed.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(eh.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,d.jsx)(ef.Line,{type:"monotone",dataKey:"rate",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:5},activeDot:{r:7},name:"Conversion Rate (%)"})]})})})})]}),(0,d.jsx)(L.Grid,{container:!0,spacing:3,children:(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsx)(eb,{title:"Visitor Activity",subtitle:`${ei(c)} - Daily visitors and page views`,action:(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,d.jsxs)(f.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,d.jsx)(f.Box,{sx:{width:12,height:12,bgcolor:"#6366f1",borderRadius:"2px"}}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Visitors"})]}),(0,d.jsxs)(f.Box,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,d.jsx)(f.Box,{sx:{width:12,height:12,bgcolor:"#8b5cf6",borderRadius:"2px"}}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Page Views"})]})]}),children:(0,d.jsx)(ep.ResponsiveContainer,{width:"100%",height:350,children:(0,d.jsxs)(es.BarChart,{data:j?.visitorData||[],children:[(0,d.jsx)(eu.CartesianGrid,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,d.jsx)(ec.XAxis,{dataKey:"name",stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(ed.YAxis,{stroke:e.palette.text.secondary,fontSize:12,tick:{fill:e.palette.text.secondary}}),(0,d.jsx)(eh.Tooltip,{contentStyle:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,borderRadius:"8px",color:e.palette.text.primary}}),(0,d.jsx)(el.Bar,{dataKey:"visitors",fill:"#6366f1",radius:[8,8,0,0],name:"Visitors"}),(0,d.jsx)(el.Bar,{dataKey:"pageViews",fill:"#8b5cf6",radius:[8,8,0,0],name:"Page Views"})]})})})})})]})}var eS=e.i(94367),eC=e.i(87225),ek=e.i(33932),eT=e.i(63104),eE=e.i(7656),eA=e.i(50723),eR=e.i(33948),eB=e.i(18295),eO=e.i(92279),eP=e.i(47379),eI=e.i(63640),eL=e.i(34699),eF=e.i(95532),eM=e.i(26712);function eD(){let[e,t]=(0,p.useState)([]),[r,n]=(0,p.useState)([]),[i,a]=(0,p.useState)([]),[o,s]=(0,p.useState)([]),[l,c]=(0,p.useState)(!0),[u,h]=(0,p.useState)(null),[x,m]=(0,p.useState)(null),[y,j]=(0,p.useState)(!1),[v,w]=(0,p.useState)(null),[S,C]=(0,p.useState)(null),[k,E]=(0,p.useState)(null),[A,R]=(0,p.useState)(null),[B,O]=(0,p.useState)(null),[P,I]=(0,p.useState)(null),[L,$]=(0,p.useState)(null),[G,V]=(0,p.useState)({client:"",subject:"",description:"",priority:"medium"}),[J,K]=(0,p.useState)({subject:"",description:"",priority:"medium",status:"open",assignedTo:""});(0,p.useEffect)(()=>{ee(),Y(),Q(),Z()},[]);let Y=async()=>{try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();n(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},Q=async()=>{try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();a(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}},Z=async()=>{try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/tasks`,{credentials:"include"});if(t.ok){let e=await t.json();s(e.tasks||[])}}catch(e){console.error("Error fetching tasks:",e)}},ee=async()=>{c(!0),h(null);try{let e=(0,ev.getBackendUrl)(),r=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to fetch support requests"}));throw Error(e.error||e.details||"Failed to fetch support requests")}let n=await r.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),h(e.message||"Failed to load support requests"),t([])}finally{c(!1)}},et=async()=>{if(!S||!S.id||!J.subject||!J.description)return void h("Subject and description are required");let r=S.id;c(!0),h(null);try{let n=(0,ev.getBackendUrl)(),i=await fetch(`${n}/api/creative/support-requests/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:J.subject,description:J.description,priority:J.priority,status:J.status,assignedTo:A?A.name||A.email:J.assignedTo||null})});if(!i.ok){let e=await i.json().catch(()=>({error:"Failed to update support request"})),t=e.error||e.message||`Failed to update support request (${i.status})`;throw Error(t)}let a=await i.json();if(B&&B.id&&r)try{await fetch(`${n}/api/tasks/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:r})})}catch(e){console.error("Error linking task:",e)}t(e.map(e=>e.id===r?a:e)),C(null),R(null),O(null),K({subject:"",description:"",priority:"medium",status:"open",assignedTo:""}),j(!1),ee(),Z()}catch(e){console.error("Error updating support request:",e),h(e.message||"Failed to update support request")}finally{c(!1)}},er=async()=>{if(!G.subject||!G.description)return void h("Subject and description are required");c(!0),h(null);try{let r=(0,ev.getBackendUrl)(),n=await fetch(`${r}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:k?k.company||k.name:G.client,clientId:k?.id,subject:G.subject,description:G.description,priority:G.priority,assignedTo:A?A.name||A.email:null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let i=await n.json();if(B&&B.id&&i&&i.id)try{await fetch(`${r}/api/tasks/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:i.id})})}catch(e){console.error("Error linking task:",e)}t([i,...e]),m("Support request created successfully"),V({client:"",subject:"",description:"",priority:"medium"}),E(null),R(null),O(null),j(!1),setTimeout(()=>m(null),3e3),ee(),Z()}catch(e){console.error("Error creating support request:",e),h(e.message||"Failed to create support request")}finally{c(!1)}},en=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ei=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,d.jsxs)(f.Box,{children:[x&&(0,d.jsx)(T.Alert,{severity:"success",onClose:()=>m(null),sx:{mb:2},children:x}),u&&(0,d.jsx)(T.Alert,{severity:"error",onClose:()=>h(null),sx:{mb:2},children:u}),(0,d.jsxs)(z.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,d.jsx)(N.Button,{variant:"contained",startIcon:(0,d.jsx)(eL.default,{}),onClick:()=>{w(null),j(!0)},children:"New Request"})]}),(0,d.jsx)(eT.TableContainer,{component:b.Paper,children:(0,d.jsxs)(eS.Table,{children:[(0,d.jsx)(eE.TableHead,{children:(0,d.jsxs)(eA.TableRow,{children:[(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,d.jsx)(ek.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,d.jsx)(eC.TableBody,{children:0===e.length?(0,d.jsx)(eA.TableRow,{children:(0,d.jsx)(ek.TableCell,{colSpan:7,align:"center",sx:{py:4},children:(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,d.jsxs)(eA.TableRow,{hover:!0,children:[(0,d.jsx)(ek.TableCell,{children:e.client}),(0,d.jsx)(ek.TableCell,{children:e.subject}),(0,d.jsx)(ek.TableCell,{children:e.assignedTo?(0,d.jsx)(q.Chip,{label:e.assignedTo,size:"small",variant:"outlined"}):(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Unassigned"})}),(0,d.jsx)(ek.TableCell,{children:(0,d.jsx)(q.Chip,{label:e.status,size:"small",color:en(e.status)})}),(0,d.jsx)(ek.TableCell,{children:(0,d.jsx)(q.Chip,{label:e.priority,size:"small",color:ei(e.priority)})}),(0,d.jsx)(ek.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,d.jsx)(ek.TableCell,{align:"right",children:(0,d.jsx)(U.IconButton,{size:"small",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),I(t.currentTarget),$(r))},children:(0,d.jsx)(eM.default,{})})})]},e.id))})]})}),(0,d.jsxs)(H.Menu,{anchorEl:P,open:!!P,onClose:()=>{I(null),$(null)},children:[(0,d.jsxs)(M.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===L);t&&(w(t),C(null),j(!0))},children:[(0,d.jsx)(X.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,d.jsxs)(M.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===L);t&&(C(t),w(null),R((t.assignedTo?i.find(e=>e.name===t.assignedTo||e.email===t.assignedTo):null)||null),O((t.linkedTasks&&t.linkedTasks.length>0&&t.linkedTasks[0]?.id?o.find(e=>e.id===t.linkedTasks[0].id):null)||null),K({subject:t.subject,description:t.description,priority:t.priority,status:t.status,assignedTo:t.assignedTo||""}),j(!0),I(null),$(null))},children:[(0,d.jsx)(eF.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,d.jsxs)(eR.Dialog,{open:y,onClose:()=>{j(!1),w(null),C(null),E(null),V({client:"",subject:"",description:"",priority:"medium"}),K({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},maxWidth:"md",fullWidth:!0,children:[(0,d.jsx)(eB.DialogTitle,{children:v?"Support Request Details":S?"Edit Support Request":"Create Support Request"}),(0,d.jsx)(eO.DialogContent,{children:S?(0,d.jsxs)(z.Stack,{spacing:3,sx:{mt:1},children:[(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Subject",value:J.subject,onChange:e=>K({...J,subject:e.target.value})}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:J.description,onChange:e=>K({...J,description:e.target.value})}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Assigned Employee"}),(0,d.jsxs)(F.Select,{value:A?.id||"",label:"Assigned Employee",onChange:e=>{let t=i.find(t=>t.id===Number(e.target.value));R(t||null),K({...J,assignedTo:t?t.name||t.email:""})},children:[(0,d.jsx)(M.MenuItem,{value:"",children:"Unassigned"}),i.map(e=>(0,d.jsxs)(M.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,d.jsx)(eI.Autocomplete,{fullWidth:!0,options:o.filter(e=>!e.supportRequestId||e.supportRequestId===S?.id),getOptionLabel:e=>{let t=e.supportRequestId?" (Linked)":"";return`${e.title||""}${t}`},value:B,onChange:(e,t)=>{O(t)},renderInput:e=>(0,d.jsx)(_.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,d.jsx)(f.Box,{component:"li",...e,children:(0,d.jsxs)(z.Stack,{children:[(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,d.jsx)(g.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&t.supportRequestId!==S?.id&&(0,d.jsx)(q.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,d.jsxs)(g.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,sx:{mt:.5},children:[(0,d.jsx)(q.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.createdAt&&(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Priority"}),(0,d.jsxs)(F.Select,{value:J.priority,label:"Priority",onChange:e=>K({...J,priority:e.target.value}),children:[(0,d.jsx)(M.MenuItem,{value:"low",children:"Low"}),(0,d.jsx)(M.MenuItem,{value:"medium",children:"Medium"}),(0,d.jsx)(M.MenuItem,{value:"high",children:"High"})]})]}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Status"}),(0,d.jsxs)(F.Select,{value:J.status,label:"Status",onChange:e=>K({...J,status:e.target.value}),children:[(0,d.jsx)(M.MenuItem,{value:"open",children:"Open"}),(0,d.jsx)(M.MenuItem,{value:"in-progress",children:"In Progress"}),(0,d.jsx)(M.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):v?(0,d.jsx)(f.Box,{children:(0,d.jsxs)(z.Stack,{spacing:2,sx:{mt:1},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,d.jsx)(g.Typography,{variant:"body1",children:v.client})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Assigned To"}),(0,d.jsx)(g.Typography,{variant:"body1",children:v.assignedTo||"Unassigned"})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,d.jsx)(g.Typography,{variant:"body1",children:v.subject})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,d.jsx)(g.Typography,{variant:"body1",children:v.description})]}),v.linkedTasks&&v.linkedTasks.length>0&&(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Linked Tasks"}),(0,d.jsx)(z.Stack,{spacing:1,children:v.linkedTasks.map(e=>(0,d.jsx)(q.Chip,{label:e.title,size:"small",variant:"outlined",sx:{mr:1,mb:1}},e.id))})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,d.jsx)(q.Chip,{label:v.status,color:en(v.status)})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,d.jsx)(q.Chip,{label:v.priority,color:ei(v.priority)})]})]})]})}):(0,d.jsxs)(z.Stack,{spacing:3,sx:{mt:1},children:[(0,d.jsx)(eI.Autocomplete,{fullWidth:!0,options:r,getOptionLabel:e=>e.company||e.name||"",value:k,onChange:(e,t)=>{E(t),V({...G,client:t?t.company||t.name:""})},renderInput:e=>(0,d.jsx)(_.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,d.jsx)(f.Box,{component:"li",...e,children:(0,d.jsxs)(z.Stack,{children:[(0,d.jsx)(g.Typography,{variant:"body1",children:t.company||t.name}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Subject",value:G.subject,onChange:e=>V({...G,subject:e.target.value})}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:G.description,onChange:e=>V({...G,description:e.target.value})}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Assigned Employee"}),(0,d.jsxs)(F.Select,{value:A?.id||"",label:"Assigned Employee",onChange:e=>{R(i.find(t=>t.id===Number(e.target.value))||null)},children:[(0,d.jsx)(M.MenuItem,{value:"",children:"Unassigned"}),i.map(e=>(0,d.jsxs)(M.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,d.jsx)(eI.Autocomplete,{fullWidth:!0,options:o,getOptionLabel:e=>{let t=e.supportRequestId?" (Already Linked)":"";return`${e.title||""}${t}`},value:B,onChange:(e,t)=>{t&&!t.supportRequestId?O(t):t&&t.supportRequestId?(h("This task is already linked to another support request"),setTimeout(()=>h(null),3e3)):O(null)},renderInput:e=>(0,d.jsx)(_.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,d.jsx)(f.Box,{component:"li",...e,children:(0,d.jsxs)(z.Stack,{children:[(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,d.jsx)(g.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&(0,d.jsx)(q.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,d.jsxs)(g.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,sx:{mt:.5},flexWrap:"wrap",children:[(0,d.jsx)(q.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.assignedToName&&(0,d.jsx)(q.Chip,{label:`Assigned: ${t.assignedToName}`,size:"small",variant:"outlined"}),t.createdAt&&(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Priority"}),(0,d.jsxs)(F.Select,{value:G.priority,label:"Priority",onChange:e=>V({...G,priority:e.target.value}),children:[(0,d.jsx)(M.MenuItem,{value:"low",children:"Low"}),(0,d.jsx)(M.MenuItem,{value:"medium",children:"Medium"}),(0,d.jsx)(M.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,d.jsxs)(eP.DialogActions,{children:[(0,d.jsx)(N.Button,{onClick:()=>{j(!1),w(null),C(null),E(null),R(null),O(null),V({client:"",subject:"",description:"",priority:"medium"}),K({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},children:v?"Close":"Cancel"}),S?(0,d.jsx)(N.Button,{variant:"contained",onClick:et,children:"Update Request"}):!v&&(0,d.jsx)(N.Button,{variant:"contained",onClick:er,children:"Create Request"})]})]})]})}var eW=e.i(19391),eN=e.i(94544),ez=e.i(1911),eU=e.i(25449),e$=e.i(5385),e_=e.i(46631),eq=e.i(70385),eH=e.i(37451),eG=e.i(27121),eV=e.i(7356),eJ=e.i(62555),eK=e.i(72695),eX=e.i(94556),eY=e.i(20012),eQ=e.i(99700),eZ=e.i(28810),e0=e.i(27325),e1=e.i(61637),e2=e.i(75016),e3=e.i(96335);function e5(e,t){return function(){return e.apply(t,arguments)}}let{toString:e4}=Object.prototype,{getPrototypeOf:e6}=Object,{iterator:e8,toStringTag:e9}=Symbol,e7=(t=Object.create(null),e=>{let r=e4.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}),te=e=>(e=e.toLowerCase(),t=>e7(t)===e),tt=e=>t=>typeof t===e,{isArray:tr}=Array,tn=tt("undefined");function ti(e){return null!==e&&!tn(e)&&null!==e.constructor&&!tn(e.constructor)&&ts(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let ta=te("ArrayBuffer"),to=tt("string"),ts=tt("function"),tl=tt("number"),tc=e=>null!==e&&"object"==typeof e,td=e=>{if("object"!==e7(e))return!1;let t=e6(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(e9 in e)&&!(e8 in e)},tu=te("Date"),th=te("File"),tp=te("Blob"),tx=te("FileList"),tf=te("URLSearchParams"),[tm,tg,ty,tj]=["ReadableStream","Request","Response","Headers"].map(te);function tb(e,t,{allOwnKeys:r=!1}={}){let n,i;if(null!=e)if("object"!=typeof e&&(e=[e]),tr(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{let i;if(ti(e))return;let a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;for(n=0;n<o;n++)i=a[n],t.call(null,e[i],i,e)}}function tv(e,t){let r;if(ti(e))return null;t=t.toLowerCase();let n=Object.keys(e),i=n.length;for(;i-- >0;)if(t===(r=n[i]).toLowerCase())return r;return null}let tw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,tS=e=>!tn(e)&&e!==tw,tC=(r="undefined"!=typeof Uint8Array&&e6(Uint8Array),e=>r&&e instanceof r),tk=te("HTMLFormElement"),tT=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),tE=te("RegExp"),tA=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};tb(r,(r,i)=>{let a;!1!==(a=t(r,i,e))&&(n[i]=a||r)}),Object.defineProperties(e,n)},tR=te("AsyncFunction"),tB=(a="function"==typeof setImmediate,o=ts(tw.postMessage),a?setImmediate:o?(s=`axios@${Math.random()}`,l=[],tw.addEventListener("message",({source:e,data:t})=>{e===tw&&t===s&&l.length&&l.shift()()},!1),e=>{l.push(e),tw.postMessage(s,"*")}):e=>setTimeout(e)),tO="undefined"!=typeof queueMicrotask?queueMicrotask.bind(tw):void 0!==e3.default&&e3.default.nextTick||tB,tP={isArray:tr,isArrayBuffer:ta,isBuffer:ti,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ts(e.append)&&("formdata"===(t=e7(e))||"object"===t&&ts(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ta(e.buffer)},isString:to,isNumber:tl,isBoolean:e=>!0===e||!1===e,isObject:tc,isPlainObject:td,isEmptyObject:e=>{if(!tc(e)||ti(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:tm,isRequest:tg,isResponse:ty,isHeaders:tj,isUndefined:tn,isDate:tu,isFile:th,isBlob:tp,isRegExp:tE,isFunction:ts,isStream:e=>tc(e)&&ts(e.pipe),isURLSearchParams:tf,isTypedArray:tC,isFileList:tx,forEach:tb,merge:function e(){let{caseless:t,skipUndefined:r}=tS(this)&&this||{},n={},i=(i,a)=>{let o=t&&tv(n,a)||a;td(n[o])&&td(i)?n[o]=e(n[o],i):td(i)?n[o]=e({},i):tr(i)?n[o]=i.slice():r&&tn(i)||(n[o]=i)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&tb(arguments[e],i);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(tb(t,(t,n)=>{r&&ts(t)?e[n]=e5(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=!1!==r&&e6(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype)return t},kindOf:e7,kindOfTest:te,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(tr(e))return e;let t=e.length;if(!tl(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r,n=(e&&e[e8]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:tk,hasOwnProperty:tT,hasOwnProp:tT,reduceDescriptors:tA,freezeMethods:e=>{tA(e,(t,r)=>{if(ts(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(ts(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(tr(e)?e:String(e).split(t)).forEach(e=>{r[e]=!0}),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:tv,global:tw,isContextDefined:tS,isSpecCompliantForm:function(e){return!!(e&&ts(e.append)&&"FormData"===e[e9]&&e[e8])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(tc(e)){if(t.indexOf(e)>=0)return;if(ti(e))return e;if(!("toJSON"in e)){t[n]=e;let i=tr(e)?[]:{};return tb(e,(e,t)=>{let a=r(e,n+1);tn(a)||(i[t]=a)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:tR,isThenable:e=>e&&(tc(e)||ts(e))&&ts(e.then)&&ts(e.catch),setImmediate:tB,asap:tO,isIterable:e=>null!=e&&ts(e[e8])};var tI=e.i(85889);function tL(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}tP.inherits(tL,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tP.toJSONObject(this.config),code:this.code,status:this.status}}});let tF=tL.prototype,tM={};function tD(e){return tP.isPlainObject(e)||tP.isArray(e)}function tW(e){return tP.endsWith(e,"[]")?e.slice(0,-2):e}function tN(e,t,r){return e?e.concat(t).map(function(e,t){return e=tW(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{tM[e]={value:e}}),Object.defineProperties(tL,tM),Object.defineProperty(tF,"isAxiosError",{value:!0}),tL.from=(e,t,r,n,i,a)=>{let o=Object.create(tF);tP.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return tL.call(o,s,l,r,n,i),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};let tz=tP.toFlatObject(tP,{},null,function(e){return/^is[A-Z]/.test(e)}),tU=function(e,t,r){if(!tP.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let n=(r=tP.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!tP.isUndefined(t[e])})).metaTokens,i=r.visitor||c,a=r.dots,o=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&tP.isSpecCompliantForm(t);if(!tP.isFunction(i))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(tP.isDate(e))return e.toISOString();if(tP.isBoolean(e))return e.toString();if(!s&&tP.isBlob(e))throw new tL("Blob is not supported. Use a Buffer instead.");return tP.isArrayBuffer(e)||tP.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):tI.Buffer.from(e):e}function c(e,r,i){let s=e;if(e&&!i&&"object"==typeof e)if(tP.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var c;if(tP.isArray(e)&&(c=e,tP.isArray(c)&&!c.some(tD))||(tP.isFileList(e)||tP.endsWith(r,"[]"))&&(s=tP.toArray(e)))return r=tW(r),s.forEach(function(e,n){tP.isUndefined(e)||null===e||t.append(!0===o?tN([r],n,a):null===o?r:r+"[]",l(e))}),!1}return!!tD(e)||(t.append(tN(i,r,a),l(e)),!1)}let d=[],u=Object.assign(tz,{defaultVisitor:c,convertValue:l,isVisitable:tD});if(!tP.isObject(e))throw TypeError("data must be an object");return!function e(r,n){if(!tP.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),tP.forEach(r,function(r,a){!0===(!(tP.isUndefined(r)||null===r)&&i.call(t,r,tP.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])}),d.pop()}}(e),t};function t$(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function t_(e,t){this._pairs=[],e&&tU(e,this,t)}let tq=t_.prototype;function tH(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tG(e,t,r){let n;if(!t)return e;let i=r&&r.encode||tH;tP.isFunction(r)&&(r={serialize:r});let a=r&&r.serialize;if(n=a?a(t,r):tP.isURLSearchParams(t)?t.toString():new t_(t,r).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}tq.append=function(e,t){this._pairs.push([e,t])},tq.toString=function(e){let t=e?function(t){return e.call(this,t,t$)}:t$;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let tV=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){tP.forEach(this.handlers,function(t){null!==t&&e(t)})}},tJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tK="undefined"!=typeof URLSearchParams?URLSearchParams:t_,tX="undefined"!=typeof FormData?FormData:null,tY="undefined"!=typeof Blob?Blob:null,tQ="undefined"!=typeof window&&"undefined"!=typeof document,tZ="object"==typeof navigator&&navigator||void 0,t0=tQ&&(!tZ||0>["ReactNative","NativeScript","NS"].indexOf(tZ.product)),t1="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,t2=tQ&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>tQ,"hasStandardBrowserEnv",()=>t0,"hasStandardBrowserWebWorkerEnv",()=>t1,"navigator",()=>tZ,"origin",()=>t2],21724);let t3={...e.i(21724),isBrowser:!0,classes:{URLSearchParams:tK,FormData:tX,Blob:tY},protocols:["http","https","file","blob","url","data"]},t5=function(e){if(tP.isFormData(e)&&tP.isFunction(e.entries)){let t={};return tP.forEachEntry(e,(e,r)=>{!function e(t,r,n,i){let a=t[i++];if("__proto__"===a)return!0;let o=Number.isFinite(+a),s=i>=t.length;return(a=!a&&tP.isArray(n)?n.length:a,s)?tP.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r:(n[a]&&tP.isObject(n[a])||(n[a]=[]),e(t,r,n[a],i)&&tP.isArray(n[a])&&(n[a]=function(e){let t,r,n={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)n[r=i[t]]=e[r];return n}(n[a]))),!o}(tP.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null},t4={transitional:tJ,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",i=n.indexOf("application/json")>-1,a=tP.isObject(e);if(a&&tP.isHTMLForm(e)&&(e=new FormData(e)),tP.isFormData(e))return i?JSON.stringify(t5(e)):e;if(tP.isArrayBuffer(e)||tP.isBuffer(e)||tP.isStream(e)||tP.isFile(e)||tP.isBlob(e)||tP.isReadableStream(e))return e;if(tP.isArrayBufferView(e))return e.buffer;if(tP.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1){var o,s;return(o=e,s=this.formSerializer,tU(o,new t3.classes.URLSearchParams,{visitor:function(e,t,r,n){return t3.isNode&&tP.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...s})).toString()}if((r=tP.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return tU(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(a||i){t.setContentType("application/json",!1);var l=e;if(tP.isString(l))try{return(0,JSON.parse)(l),tP.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||t4.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(tP.isResponse(e)||tP.isReadableStream(e))return e;if(e&&tP.isString(e)&&(r&&!this.responseType||n)){let r=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!r&&n){if("SyntaxError"===e.name)throw tL.from(e,tL.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:t3.classes.FormData,Blob:t3.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tP.forEach(["delete","get","head","post","put","patch"],e=>{t4.headers[e]={}});let t6=tP.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t8=Symbol("internals");function t9(e){return e&&String(e).trim().toLowerCase()}function t7(e){return!1===e||null==e?e:tP.isArray(e)?e.map(t7):String(e)}function re(e,t,r,n,i){if(tP.isFunction(n))return n.call(this,t,r);if(i&&(t=r),tP.isString(t)){if(tP.isString(n))return -1!==t.indexOf(n);if(tP.isRegExp(n))return n.test(t)}}class rt{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function i(e,t,r){let i=t9(t);if(!i)throw Error("header name must be a non-empty string");let a=tP.findKey(n,i);a&&void 0!==n[a]&&!0!==r&&(void 0!==r||!1===n[a])||(n[a||t]=t7(e))}let a=(e,t)=>tP.forEach(e,(e,r)=>i(e,r,t));if(tP.isPlainObject(e)||e instanceof this.constructor)a(e,t);else{let n;if(tP.isString(e)&&(e=e.trim())&&(n=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim()))){var o;let r,n,i,s;a((s={},(o=e)&&o.split("\n").forEach(function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||s[r]&&t6[r]||("set-cookie"===r?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s),t)}else if(tP.isObject(e)&&tP.isIterable(e)){let r={},n,i;for(let t of e){if(!tP.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?tP.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(r,t)}else null!=e&&i(t,e,r)}return this}get(e,t){if(e=t9(e)){let r=tP.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}if(tP.isFunction(t))return t.call(this,e,r);if(tP.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=t9(e)){let r=tP.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||re(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function i(e){if(e=t9(e)){let i=tP.findKey(r,e);i&&(!t||re(r,r[i],i,t))&&(delete r[i],n=!0)}}return tP.isArray(e)?e.forEach(i):i(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let i=t[r];(!e||re(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){let t=this,r={};return tP.forEach(this,(n,i)=>{let a=tP.findKey(r,i);if(a){t[a]=t7(n),delete t[i];return}let o=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(i).trim();o!==i&&delete t[i],t[o]=t7(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return tP.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&tP.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[t8]=this[t8]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=t9(e);if(!t[n]){let i;i=tP.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(r,t+i,{value:function(r,n,i){return this[t].call(this,e,r,n,i)},configurable:!0})}),t[n]=!0}}return tP.isArray(e)?e.forEach(n):n(e),this}}function rr(e,t){let r=this||t4,n=t||r,i=rt.from(n.headers),a=n.data;return tP.forEach(e,function(e){a=e.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function rn(e){return!!(e&&e.__CANCEL__)}function ri(e,t,r){tL.call(this,null==e?"canceled":e,tL.ERR_CANCELED,t,r),this.name="CanceledError"}function ra(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new tL("Request failed with status code "+r.status,[tL.ERR_BAD_REQUEST,tL.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),tP.reduceDescriptors(rt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),tP.freezeMethods(rt),tP.inherits(ri,tL,{__CANCEL__:!0});let ro=function(e,t){let r,n=Array(e=e||10),i=Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){let l=Date.now(),c=i[o];r||(r=l),n[a]=s,i[a]=l;let d=o,u=0;for(;d!==a;)u+=n[d++],d%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),l-r<t)return;let h=c&&l-c;return h?Math.round(1e3*u/h):void 0}},rs=function(e,t){let r,n,i=0,a=1e3/t,o=(t,a=Date.now())=>{i=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),s=t-i;s>=a?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},a-s)))},()=>r&&o(r)]},rl=(e,t,r=3)=>{let n=0,i=ro(50,250);return rs(r=>{let a=r.loaded,o=r.lengthComputable?r.total:void 0,s=a-n,l=i(s);n=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},rc=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},rd=e=>(...t)=>tP.asap(()=>e(...t)),ru=t3.hasStandardBrowserEnv?(n=new URL(t3.origin),i=t3.navigator&&/(msie|trident)/i.test(t3.navigator.userAgent),e=>(e=new URL(e,t3.origin),n.protocol===e.protocol&&n.host===e.host&&(i||n.port===e.port))):()=>!0,rh=t3.hasStandardBrowserEnv?{write(e,t,r,n,i,a,o){if("undefined"==typeof document)return;let s=[`${e}=${encodeURIComponent(t)}`];tP.isNumber(r)&&s.push(`expires=${new Date(r).toUTCString()}`),tP.isString(n)&&s.push(`path=${n}`),tP.isString(i)&&s.push(`domain=${i}`),!0===a&&s.push("secure"),tP.isString(o)&&s.push(`SameSite=${o}`),document.cookie=s.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function rp(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||!1==r)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let rx=e=>e instanceof rt?{...e}:e;function rf(e,t){t=t||{};let r={};function n(e,t,r,n){return tP.isPlainObject(e)&&tP.isPlainObject(t)?tP.merge.call({caseless:n},e,t):tP.isPlainObject(t)?tP.merge({},t):tP.isArray(t)?t.slice():t}function i(e,t,r,i){return tP.isUndefined(t)?tP.isUndefined(e)?void 0:n(void 0,e,r,i):n(e,t,r,i)}function a(e,t){if(!tP.isUndefined(t))return n(void 0,t)}function o(e,t){return tP.isUndefined(t)?tP.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,i,a){return a in t?n(r,i):a in e?n(void 0,r):void 0}let l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,r)=>i(rx(e),rx(t),r,!0)};return tP.forEach(Object.keys({...e,...t}),function(n){let a=l[n]||i,o=a(e[n],t[n],n);tP.isUndefined(o)&&a!==s||(r[n]=o)}),r}let rm=e=>{let t=rf({},e),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=rt.from(o),t.url=tG(rp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),tP.isFormData(r)){if(t3.hasStandardBrowserEnv||t3.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(tP.isFunction(r.getHeaders)){let e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}}if(t3.hasStandardBrowserEnv&&(n&&tP.isFunction(n)&&(n=n(t)),n||!1!==n&&ru(t.url))){let e=i&&a&&rh.read(a);e&&o.set(i,e)}return t},rg="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){var n;let i,a,o,s,l,c,d=rm(e),u=d.data,h=rt.from(d.headers).normalize(),{responseType:p,onUploadProgress:x,onDownloadProgress:f}=d;function m(){s&&s(),l&&l(),d.cancelToken&&d.cancelToken.unsubscribe(i),d.signal&&d.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function y(){if(!g)return;let n=rt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());ra(function(e){t(e),m()},function(e){r(e),m()},{data:p&&"text"!==p&&"json"!==p?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(d.method.toUpperCase(),d.url,!0),g.timeout=d.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||4!==g.readyState||(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(r(new tL("Request aborted",tL.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){let n=new tL(t&&t.message?t.message:"Network Error",tL.ERR_NETWORK,e,g);n.event=t||null,r(n),g=null},g.ontimeout=function(){let t=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",n=d.transitional||tJ;d.timeoutErrorMessage&&(t=d.timeoutErrorMessage),r(new tL(t,n.clarifyTimeoutError?tL.ETIMEDOUT:tL.ECONNABORTED,e,g)),g=null},void 0===u&&h.setContentType(null),"setRequestHeader"in g&&tP.forEach(h.toJSON(),function(e,t){g.setRequestHeader(t,e)}),tP.isUndefined(d.withCredentials)||(g.withCredentials=!!d.withCredentials),p&&"json"!==p&&(g.responseType=d.responseType),f&&([o,l]=rl(f,!0),g.addEventListener("progress",o)),x&&g.upload&&([a,s]=rl(x),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",s)),(d.cancelToken||d.signal)&&(i=t=>{g&&(r(!t||t.type?new ri(null,e,g):t),g.abort(),g=null)},d.cancelToken&&d.cancelToken.subscribe(i),d.signal&&(d.signal.aborted?i():d.signal.addEventListener("abort",i)));let j=(n=d.url,(c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n))&&c[1]||"");j&&-1===t3.protocols.indexOf(j)?r(new tL("Unsupported protocol "+j+":",tL.ERR_BAD_REQUEST,e)):g.send(u||null)})},ry=function*(e,t){let r,n=e.byteLength;if(!t||n<t)return void(yield e);let i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},rj=async function*(e,t){for await(let r of rb(e))yield*ry(r,t)},rb=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},rv=(e,t,r,n)=>{let i,a=rj(e,t),o=0,s=e=>{!i&&(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await a.next();if(t){s(),e.close();return}let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw s(e),e}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},{isFunction:rw}=tP,rS=(({Request:e,Response:t})=>({Request:e,Response:t}))(tP.global),{ReadableStream:rC,TextEncoder:rk}=tP.global,rT=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},rE=e=>{let t,{fetch:r,Request:n,Response:i}=e=tP.merge.call({skipUndefined:!0},rS,e),a=r?rw(r):"function"==typeof fetch,o=rw(n),s=rw(i);if(!a)return!1;let l=a&&rw(rC),c=a&&("function"==typeof rk?(t=new rk,e=>t.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer())),d=o&&l&&rT(()=>{let e=!1,t=new n(t3.origin,{body:new rC,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=s&&l&&rT(()=>tP.isReadableStream(new i("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{h[e]||(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new tL(`Response type '${e}' is not supported`,tL.ERR_NOT_SUPPORT,r)})});let p=async e=>{if(null==e)return 0;if(tP.isBlob(e))return e.size;if(tP.isSpecCompliantForm(e)){let t=new n(t3.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return tP.isArrayBufferView(e)||tP.isArrayBuffer(e)?e.byteLength:(tP.isURLSearchParams(e)&&(e+=""),tP.isString(e))?(await c(e)).byteLength:void 0},x=async(e,t)=>{let r=tP.toFiniteNumber(e.getContentLength());return null==r?p(t):r};return async e=>{let t,{url:a,method:s,data:l,signal:c,cancelToken:p,timeout:f,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:j,withCredentials:b="same-origin",fetchOptions:v}=rm(e),w=r||fetch;y=y?(y+"").toLowerCase():"text";let S=((e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,i=function(e){if(!r){r=!0,o();let t=e instanceof Error?e:this.reason;n.abort(t instanceof tL?t:new ri(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new tL(`timeout ${t} of ms exceeded`,tL.ETIMEDOUT))},t),o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:s}=n;return s.unsubscribe=()=>tP.asap(o),s}})([c,p&&p.toAbortSignal()],f),C=null,k=S&&S.unsubscribe&&(()=>{S.unsubscribe()});try{if(g&&d&&"get"!==s&&"head"!==s&&0!==(t=await x(j,l))){let e,r=new n(a,{method:"POST",body:l,duplex:"half"});if(tP.isFormData(l)&&(e=r.headers.get("content-type"))&&j.setContentType(e),r.body){let[e,n]=rc(t,rl(rd(g)));l=rv(r.body,65536,e,n)}}tP.isString(b)||(b=b?"include":"omit");let r=o&&"credentials"in n.prototype,c={...v,signal:S,method:s.toUpperCase(),headers:j.normalize().toJSON(),body:l,duplex:"half",credentials:r?b:void 0};C=o&&new n(a,c);let p=await (o?w(C,v):w(a,c)),f=u&&("stream"===y||"response"===y);if(u&&(m||f&&k)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});let t=tP.toFiniteNumber(p.headers.get("content-length")),[r,n]=m&&rc(t,rl(rd(m),!0))||[];p=new i(rv(p.body,65536,r,()=>{n&&n(),k&&k()}),e)}y=y||"text";let T=await h[tP.findKey(h,y)||"text"](p,e);return!f&&k&&k(),await new Promise((t,r)=>{ra(t,r,{data:T,headers:rt.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:C})})}catch(t){if(k&&k(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new tL("Network Error",tL.ERR_NETWORK,e,C),{cause:t.cause||t});throw tL.from(t,t&&t.code,e,C)}}},rA=new Map,rR=e=>{let t=e&&e.env||{},{fetch:r,Request:n,Response:i}=t,a=[n,i,r],o=a.length,s,l,c=rA;for(;o--;)s=a[o],void 0===(l=c.get(s))&&c.set(s,l=o?new Map:rE(t)),c=l;return l};rR();let rB={http:null,xhr:rg,fetch:{get:rR}};tP.forEach(rB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let rO=e=>`- ${e}`,rP=e=>tP.isFunction(e)||null===e||!1===e,rI=function(e,t){let r,n,{length:i}=e=tP.isArray(e)?e:[e],a={};for(let o=0;o<i;o++){let i;if(n=r=e[o],!rP(r)&&void 0===(n=rB[(i=String(r)).toLowerCase()]))throw new tL(`Unknown adapter '${i}'`);if(n&&(tP.isFunction(n)||(n=n.get(t))))break;a[i||"#"+o]=n}if(!n){let e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new tL("There is no suitable adapter to dispatch the request "+(i?e.length>1?"since :\n"+e.map(rO).join("\n"):" "+rO(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function rL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ri(null,e)}function rF(e){return rL(e),e.headers=rt.from(e.headers),e.data=rr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),rI(e.adapter||t4.adapter,e)(e).then(function(t){return rL(e),t.data=rr.call(e,e.transformResponse,t),t.headers=rt.from(t.headers),t},function(t){return!rn(t)&&(rL(e),t&&t.response&&(t.response.data=rr.call(e,e.transformResponse,t.response),t.response.headers=rt.from(t.response.headers))),Promise.reject(t)})}let rM="1.13.2",rD={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rD[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let rW={};rD.transitional=function(e,t,r){function n(e,t){return"[Axios v"+rM+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,a)=>{if(!1===e)throw new tL(n(i," has been removed"+(t?" in "+t:"")),tL.ERR_DEPRECATED);return t&&!rW[i]&&(rW[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,a)}},rD.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let rN=function(e,t,r){if("object"!=typeof e)throw new tL("options must be an object",tL.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),i=n.length;for(;i-- >0;){let a=n[i],o=t[a];if(o){let t=e[a],r=void 0===t||o(t,a,e);if(!0!==r)throw new tL("option "+a+" must be "+r,tL.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new tL("Unknown option "+a,tL.ERR_BAD_OPTION)}};class rz{constructor(e){this.defaults=e||{},this.interceptors={request:new tV,response:new tV}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:i,paramsSerializer:a,headers:o}=t=rf(this.defaults,t);void 0!==i&&rN(i,{silentJSONParsing:rD.transitional(rD.boolean),forcedJSONParsing:rD.transitional(rD.boolean),clarifyTimeoutError:rD.transitional(rD.boolean)},!1),null!=a&&(tP.isFunction(a)?t.paramsSerializer={serialize:a}:rN(a,{encode:rD.function,serialize:rD.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rN(t,{baseUrl:rD.spelling("baseURL"),withXsrfToken:rD.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=o&&tP.merge(o.common,o[t.method]);o&&tP.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=rt.concat(s,o);let l=[],c=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(c=c&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let d=[];this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)});let u=0;if(!c){let e=[rF.bind(this),void 0];for(e.unshift(...l),e.push(...d),n=e.length,r=Promise.resolve(t);u<n;)r=r.then(e[u++],e[u++]);return r}n=l.length;let h=t;for(;u<n;){let e=l[u++],t=l[u++];try{h=e(h)}catch(e){t.call(this,e);break}}try{r=rF.call(this,h)}catch(e){return Promise.reject(e)}for(u=0,n=d.length;u<n;)r=r.then(d[u++],d[u++]);return r}getUri(e){return tG(rp((e=rf(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}tP.forEach(["delete","get","head","options"],function(e){rz.prototype[e]=function(t,r){return this.request(rf(r||{},{method:e,url:t,data:(r||{}).data}))}}),tP.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(rf(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}rz.prototype[e]=t(),rz.prototype[e+"Form"]=t(!0)});class rU{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new ri(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new rU(function(t){e=t}),cancel:e}}}let r$={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(r$).forEach(([e,t])=>{r$[t]=e});let r_=function e(t){let r=new rz(t),n=e5(rz.prototype.request,r);return tP.extend(n,rz.prototype,r,{allOwnKeys:!0}),tP.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(rf(t,r))},n}(t4);r_.Axios=rz,r_.CanceledError=ri,r_.CancelToken=rU,r_.isCancel=rn,r_.VERSION=rM,r_.toFormData=tU,r_.AxiosError=tL,r_.Cancel=r_.CanceledError,r_.all=function(e){return Promise.all(e)},r_.spread=function(e){return function(t){return e.apply(null,t)}},r_.isAxiosError=function(e){return tP.isObject(e)&&!0===e.isAxiosError},r_.mergeConfig=rf,r_.AxiosHeaders=rt,r_.formToJSON=e=>t5(tP.isHTMLForm(e)?new FormData(e):e),r_.getAdapter=rI,r_.HttpStatusCode=r$,r_.default=r_;var rq=e.i(9929),rH=e.i(15254);function rG({height:e=500}){let t=(0,v.useTheme)(),{user:r}=(0,rH.useAuth)(),{users:n}=(()=>{let[e,t]=(0,p.useState)([]),[r,n]=(0,p.useState)(!0),[i,a]=(0,p.useState)(null);return(0,p.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){a("Not authenticated"),n(!1);return}let r=e3.default.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",i=await r_.get(`${r}/api/users/workspace`,{headers:{Authorization:`Bearer ${e}`}});t(i.data),a(null)}catch(e){console.error("Error fetching workspace users:",e),a(e.response?.data?.message||"Failed to fetch users")}finally{n(!1)}})()},[]),{users:e,loading:r,error:i}})(),{tasks:i,createTask:a,updateTask:o,deleteTask:s,updateTaskNotes:l,isLoading:c,error:u,authRequired:h,refresh:x,isStale:m}=function(e){let[t,r]=(0,p.useState)([]),[n,i]=(0,p.useState)(!1),[a,o]=(0,p.useState)(null),[s,l]=(0,p.useState)(!1),c=(0,p.useRef)(void 0),[d,u]=(0,p.useState)(!1),[h,x]=(0,p.useState)(null),[f,m]=(0,p.useState)(null),g=(0,p.useRef)(null),y=(0,p.useCallback)(async()=>{try{i(!0),o(null),l(!1);let e=(0,ev.getTasksBackendUrl)(),t=await (0,ev.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===t.status){l(!0),o("Authentication required"),r([]);return}let n=await t.json(),a=new Date;r(n.tasks||[]),x(a),g.current=a,u(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(l(!0),o("Authentication required"),r([])):(o(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{i(!1)}},[]),j=(0,p.useCallback)(()=>y(),[y]),b=async(e,t,a,s,c,d,u)=>{if(n)return void console.warn("Task creation already in progress, ignoring duplicate call");try{i(!0),o(null),l(!1);let n=(0,ev.getTasksBackendUrl)();console.log("Creating task at:",`${n}/api/tasks`,{title:e,description:t,hyperlinks:a,status:s,notes:u});let h=await (0,ev.fetchWithErrorHandling)(`${n}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:t,hyperlinks:a,status:s,assignedTo:c,assignedToName:d,notes:u||""})});if(401===h.status)throw l(!0),Error("Authentication required");if(!h.ok){let e=await h.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||e.message||`Server error: ${h.status}`)}let p=(await h.json()).task;if(!p)throw Error("Server did not return a task");console.log("Task created, adding to state:",p);let f=new Date;return r(e=>e.some(e=>e.id===p.id)?e.map(e=>e.id===p.id?p:e):[...e,p]),x(f),g.current=f,p}catch(e){throw console.error("Error in createTask:",e),(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{i(!1)}},v=async(e,t)=>{try{i(!0),o(null),l(!1);let n=(0,ev.getTasksBackendUrl)(),a=await (0,ev.fetchWithErrorHandling)(`${n}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)});if(401===a.status)throw l(!0),Error("Authentication required");let s=(await a.json()).task,c=new Date;return r(e=>e.map(e=>e.id===s.id?s:e)),x(c),g.current=c,s}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{i(!1)}},w=async e=>{try{i(!0),o(null),l(!1);let t=(0,ev.getTasksBackendUrl)(),r=await (0,ev.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===r.status)throw l(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&l(!0),o(e.message),e}finally{i(!1)}};return(0,p.useEffect)(()=>{let e=!0;y();let t=(0,e2.getTasksSocket)();m(t);let n=()=>{console.log("Socket.io connected for tasks")},i=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},a=e=>{console.log("Socket.io disconnected (tasks):",e)};t.on("connect",n),t.on("connect_error",i),t.on("disconnect",a),t.on("task_created",t=>{if(!e)return;let n=new Date;r(e=>e.some(e=>e.id===t.id)?e.map(e=>e.id===t.id?t:e):[...e,t]),x(n),g.current=n}),t.on("task_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.id?t:e)),x(n),g.current=n}),t.on("task_deleted",t=>{if(!e)return;let n=new Date;r(e=>e.filter(e=>e.id!==t.id)),x(n),g.current=n}),t.on("task_notes_updated",t=>{if(!e)return;let n=new Date;r(e=>e.map(e=>e.id===t.task_id?{...e,notes:t.notes}:e)),x(n),g.current=n}),t.on("task_assigned",t=>{if(!e)return;console.log("Task assigned notification:",t);let n=new Date;r(e=>e.map(e=>e.id===t.task.id?t.task:e)),x(n),g.current=n,c.current&&c.current(t.task,t.assignedTo)}),t.on("auth_restored_ack",()=>{e&&(l(!1),y())});let o=setInterval(()=>{if(!e)return;let t=g.current;t&&Date.now()-t.getTime()>3e5&&u(!0)},6e4);return()=>{e=!1,t.off("connect",n),t.off("connect_error",i),t.off("disconnect",a),t.off("task_created"),t.off("task_updated"),t.off("task_deleted"),t.off("task_assigned"),t.off("task_notes_updated"),t.off("auth_restored_ack"),clearInterval(o)}},[y]),(0,p.useEffect)(()=>{c.current=void 0},[void 0]),{tasks:t,isLoading:n,error:a,authRequired:s,isStale:d,lastUpdated:h,refresh:j,fetchTasks:y,createTask:b,updateTask:v,deleteTask:w,updateTaskNotes:(e,t)=>{r(r=>r.map(r=>r.id===e?{...r,notes:t}:r)),f&&f.emit("task_notes_update",{task_id:e,notes:t,user_id:null})}}}(),[y,j]=(0,p.useState)(!1),[w,E]=(0,p.useState)("create"),[A,R]=(0,p.useState)(null),[B,O]=(0,p.useState)(""),[P,I]=(0,p.useState)(""),[H,G]=(0,p.useState)(""),[V,J]=(0,p.useState)(null),[K,X]=(0,p.useState)(!1),[Y,Q]=(0,p.useState)(""),[Z,ee]=(0,p.useState)("info"),[et,er]=(0,p.useState)(!1),en=p.default.useRef(null),[ei,ea]=(0,p.useState)(""),[eo,es]=(0,p.useState)("pending"),[el,ec]=(0,p.useState)(""),[ed,eu]=(0,p.useState)(localStorage.getItem("taskFilter")||"all"),[eh,ep]=(0,p.useState)([]),[ex,ef]=(0,p.useState)(!1),[eg,ey]=(0,p.useState)([]),ej=p.default.useMemo(()=>[...n.map(e=>({id:String(e.id),name:e.name||e.email||"Unknown"})),...eg.map(e=>({id:String(e.id),name:`${e.name} (${e.email})`}))].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id)),[n,eg]);p.default.useEffect(()=>{(async()=>{try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();ey(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}})()},[]),p.default.useEffect(()=>{(async()=>{if(r&&(r.isEmployee||r.isAdmin)){ef(!0);try{let e=(0,ev.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();ep(e.requests||[])}else{let e=await t.json().catch(()=>({error:"Failed to fetch support requests"}));console.error("Error fetching support requests:",e)}}catch(e){console.error("Error fetching support requests:",e)}finally{ef(!1)}}})()},[r]);let eb=i.filter(e=>"my-tasks"===ed?e.assignedTo===r?.id:"created-by-me"!==ed||e.createdBy===r?.id),ew=i.length,eS=i.filter(e=>"completed"===e.status).length,eC=i.filter(e=>"in-progress"===e.status).length,ek=i.filter(e=>"pending"===e.status).length,eT=i.filter(e=>e.assignedTo===r?.id).length,eE=i.filter(e=>e.createdBy===r?.id).length,eA=ew>0?Math.round(eS/ew*100):0,eM=async e=>{let t=i.find(t=>t.id===e);if(!t)return;let n="completed"===t.status?"pending":"completed";try{await o(e,{status:n}),"completed"===n&&(0,rq.trackTaskCompleted)(e,r?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},eD=()=>{E("create"),R(null),O(""),I(""),ea(""),es("pending"),ec(""),J(null),G(""),j(!0)},eW=async()=>{if(B.trim())try{let e=ei.split(",").map(e=>e.trim()).filter(e=>e);if("create"===w){let t=await a(B.trim(),P.trim(),e,eo,V?.id,V?.name,H.trim());el&&t?.id&&await o(t.id,{supportRequestId:el})}else A&&(await o(A,{title:B.trim(),description:P.trim(),hyperlinks:e,status:eo,supportRequestId:el||void 0,assignedTo:V?.id||void 0,assignedToName:V?.name||void 0}),"completed"===eo&&(0,rq.trackTaskCompleted)(A,r?.userRole||"user","cowork"));j(!1)}catch(e){console.error("Error saving task:",e)}},ez=async e=>{try{await s(e)}catch(e){console.error("Error deleting task:",e)}},eU=()=>{X(!1)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(f.Box,{sx:{height:e,display:"flex",flexDirection:"column",gap:3},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsxs)(z.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"Todo List"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Manage your tasks and track progress"})]}),(0,d.jsx)(N.Button,{variant:"contained",startIcon:(0,d.jsx)(eL.default,{}),onClick:eD,sx:{borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:"Add Task"})]}),(0,d.jsxs)(L.Grid,{container:!0,spacing:2,sx:{mb:3},children:[(0,d.jsx)(L.Grid,{item:!0,xs:6,sm:3,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,eV.alpha)(t.palette.primary.main,.1)} 0%, ${(0,eV.alpha)(t.palette.primary.main,.05)} 100%)`,border:`1px solid ${(0,eV.alpha)(t.palette.primary.main,.2)}`},children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,d.jsx)(em.Avatar,{sx:{bgcolor:"primary.main",width:40,height:40},children:(0,d.jsx)(e1.default,{})}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:ew}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Total"})]})]})})}),(0,d.jsx)(L.Grid,{item:!0,xs:6,sm:3,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,eV.alpha)(t.palette.success.main,.1)} 0%, ${(0,eV.alpha)(t.palette.success.main,.05)} 100%)`,border:`1px solid ${(0,eV.alpha)(t.palette.success.main,.2)}`},children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,d.jsx)(em.Avatar,{sx:{bgcolor:"success.main",width:40,height:40},children:(0,d.jsx)(eK.default,{})}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:eS}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Completed"})]})]})})}),(0,d.jsx)(L.Grid,{item:!0,xs:6,sm:3,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,eV.alpha)(t.palette.warning.main,.1)} 0%, ${(0,eV.alpha)(t.palette.warning.main,.05)} 100%)`,border:`1px solid ${(0,eV.alpha)(t.palette.warning.main,.2)}`},children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,d.jsx)(em.Avatar,{sx:{bgcolor:"warning.main",width:40,height:40},children:(0,d.jsx)(eY.default,{})}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:eC}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"In Progress"})]})]})})}),(0,d.jsx)(L.Grid,{item:!0,xs:6,sm:3,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:2,borderRadius:2,background:`linear-gradient(135deg, ${(0,eV.alpha)(t.palette.info.main,.1)} 0%, ${(0,eV.alpha)(t.palette.info.main,.05)} 100%)`,border:`1px solid ${(0,eV.alpha)(t.palette.info.main,.2)}`},children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,d.jsx)(em.Avatar,{sx:{bgcolor:"info.main",width:40,height:40},children:(0,d.jsx)(eX.default,{})}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:ek}),(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:"Pending"})]})]})})})]}),(0,d.jsxs)(b.Paper,{elevation:2,sx:{p:2.5,borderRadius:2,mb:3,background:`linear-gradient(135deg, ${(0,eV.alpha)(t.palette.primary.main,.05)} 0%, ${(0,eV.alpha)(t.palette.secondary.main,.05)} 100%)`},children:[(0,d.jsxs)(z.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[(0,d.jsx)(g.Typography,{variant:"body2",fontWeight:600,color:"text.secondary",children:"Completion Rate"}),(0,d.jsxs)(g.Typography,{variant:"body2",fontWeight:700,color:"primary.main",children:[eA,"%"]})]}),(0,d.jsx)(eJ.LinearProgress,{variant:"determinate",value:eA,sx:{height:8,borderRadius:4,bgcolor:(0,eV.alpha)(t.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(90deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`}}})]})]}),u&&(0,d.jsx)(T.Alert,{severity:"error",sx:{mb:2},children:u}),m&&(0,d.jsx)(T.Alert,{severity:"info",sx:{mb:2},action:(0,d.jsx)(N.Button,{size:"small",onClick:x,children:"Refresh"}),children:"Tasks may be out of date"}),(0,d.jsx)(b.Paper,{elevation:2,sx:{borderRadius:2,p:1},children:(0,d.jsxs)(e_.ToggleButtonGroup,{value:ed,exclusive:!0,onChange:(e,t)=>{null!==t&&(eu(t),localStorage.setItem("taskFilter",t))},fullWidth:!0,size:"small","aria-label":"task filter",sx:{"& .MuiToggleButton-root":{textTransform:"none",fontWeight:600,borderRadius:1.5,py:1}},children:[(0,d.jsxs)(eq.ToggleButton,{value:"all","aria-label":"all tasks",children:["All (",ew,")"]}),(0,d.jsxs)(eq.ToggleButton,{value:"my-tasks","aria-label":"my tasks",children:["My Tasks (",eT,")"]}),(0,d.jsxs)(eq.ToggleButton,{value:"created-by-me","aria-label":"created by me",children:["Created by Me (",eE,")"]})]})}),(0,d.jsx)(f.Box,{sx:{flexGrow:1,overflow:"auto"},children:c?(0,d.jsx)(f.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,d.jsx)(k.CircularProgress,{})}):0===eb.length?(0,d.jsxs)(b.Paper,{elevation:0,sx:{p:6,textAlign:"center",borderRadius:2,border:`2px dashed ${(0,eV.alpha)(t.palette.divider,.5)}`},children:[(0,d.jsx)(e1.default,{sx:{fontSize:64,color:"text.secondary",mb:2,opacity:.5}}),(0,d.jsx)(g.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No tasks found"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"all"===ed?"Get started by adding your first task!":`No tasks match the "${ed}" filter.`}),(0,d.jsx)(N.Button,{variant:"outlined",startIcon:(0,d.jsx)(eL.default,{}),onClick:eD,sx:{textTransform:"none"},children:"Add Task"})]}):(0,d.jsx)(z.Stack,{spacing:2,children:eb.map(e=>(0,d.jsx)(S.Card,{elevation:2,sx:{borderRadius:2,transition:"all 0.2s",border:`1px solid ${(0,eV.alpha)(t.palette.divider,.5)}`,"&:hover":{boxShadow:4,transform:"translateY(-2px)"}},children:(0,d.jsx)(C.CardContent,{sx:{p:2.5,"&:last-child":{pb:2.5}},children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,d.jsx)(eH.Checkbox,{checked:"completed"===e.status,onChange:()=>eM(e.id),disabled:c,sx:{mt:.5}}),(0,d.jsxs)(f.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,d.jsx)(g.Typography,{variant:"subtitle1",fontWeight:600,sx:{textDecoration:"completed"===e.status?"line-through":"none",color:"completed"===e.status?"text.secondary":"text.primary",mb:.5},children:e.title}),e.description&&(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1.5,textDecoration:"completed"===e.status?"line-through":"none"},children:e.description}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,flexWrap:"wrap",sx:{mb:1},children:[(0,d.jsx)(q.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status),icon:(e=>{switch(e){case"completed":return(0,d.jsx)(eK.default,{color:"success"});case"in-progress":return(0,d.jsx)(eY.default,{color:"warning"});default:return(0,d.jsx)(eX.default,{color:"disabled"})}})(e.status),sx:{fontWeight:600}}),e.hyperlinks&&e.hyperlinks.length>0&&(0,d.jsx)(q.Chip,{icon:(0,d.jsx)(eQ.default,{}),label:`${e.hyperlinks.length} link${e.hyperlinks.length>1?"s":""}`,size:"small",variant:"outlined"})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.createdByName&&(0,d.jsx)(q.Chip,{icon:(0,d.jsx)(e0.default,{}),label:e.createdByName,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}}),e.assignedToName?(0,d.jsx)(q.Chip,{icon:(0,d.jsx)(eZ.default,{}),label:e.assignedToName,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem"}}):void 0===e.assignedTo&&(0,d.jsx)(q.Chip,{label:"Unassigned",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",opacity:.6}}),e.createdAt&&(0,d.jsx)(g.Typography,{variant:"caption",color:"text.secondary",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:.5,children:[(0,d.jsx)($.Tooltip,{title:"Edit",children:(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>{E("edit"),R(e.id),O(e.title),I(e.description||""),ea(e.hyperlinks.join(", ")),es(e.status),ec(e.supportRequestId||""),G(e.notes||""),e.assignedTo&&e.assignedToName?J({id:e.assignedTo,name:e.assignedToName}):J(null),j(!0)},sx:{color:"primary.main"},children:(0,d.jsx)(eF.default,{fontSize:"small"})})}),(0,d.jsx)($.Tooltip,{title:"Delete",children:(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>ez(e.id),sx:{color:"error.main"},children:(0,d.jsx)(eN.default,{fontSize:"small"})})})]})]})})},e.id))})})]}),(0,d.jsxs)(eR.Dialog,{open:y,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[(0,d.jsx)(eB.DialogTitle,{sx:{pb:1},children:(0,d.jsx)(g.Typography,{variant:"h6",fontWeight:700,children:"create"===w?"Add New Task":"Edit Task"})}),(0,d.jsx)(eO.DialogContent,{children:(0,d.jsxs)(z.Stack,{spacing:2,sx:{mt:1},children:[(0,d.jsx)(_.TextField,{autoFocus:!0,label:"Title",fullWidth:!0,variant:"outlined",value:B,onChange:e=>O(e.target.value),required:!0}),(0,d.jsx)(_.TextField,{label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:P,onChange:e=>I(e.target.value)}),(0,d.jsx)(eI.Autocomplete,{options:ej,getOptionLabel:e=>e.name,value:V,onChange:(e,t)=>J(t),renderInput:e=>(0,d.jsx)(_.TextField,{...e,label:"Assign To (Optional)",variant:"outlined",helperText:"Select from active workspace users or all employees"})}),(0,d.jsx)(_.TextField,{label:"Notes (Shared Workspace)",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,value:H,onChange:e=>{var t;G(t=e.target.value),er(!0),en.current&&clearTimeout(en.current),en.current=setTimeout(()=>{A&&(l(A,t),er(!1))},500)},placeholder:"Start typing to collaborate with your team...",helperText:"edit"===w?"Changes auto-save. Shared with assigned user in real-time.":"Add notes that will be shared with your team."}),(0,d.jsx)(_.TextField,{label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:ei,onChange:e=>ea(e.target.value),placeholder:"https://example.com, https://another.com"}),ex?(0,d.jsx)(k.CircularProgress,{size:24}):eh.length>0&&(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Link to Support Request (Optional)"}),(0,d.jsxs)(F.Select,{value:el,label:"Link to Support Request (Optional)",onChange:e=>ec(e.target.value),children:[(0,d.jsx)(M.MenuItem,{value:"",children:"None"}),eh.map(e=>(0,d.jsxs)(M.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,d.jsxs)(D.FormControl,{fullWidth:!0,children:[(0,d.jsx)(W.InputLabel,{children:"Status"}),(0,d.jsxs)(F.Select,{value:eo,label:"Status",onChange:e=>es(e.target.value),children:[(0,d.jsx)(M.MenuItem,{value:"pending",children:"Pending"}),(0,d.jsx)(M.MenuItem,{value:"in-progress",children:"In Progress"}),(0,d.jsx)(M.MenuItem,{value:"completed",children:"Completed"})]})]})]})}),(0,d.jsxs)(eP.DialogActions,{sx:{p:2.5,pt:1},children:[(0,d.jsx)(N.Button,{onClick:()=>j(!1),sx:{textTransform:"none"},children:"Cancel"}),(0,d.jsx)(N.Button,{onClick:eW,variant:"contained",disabled:!B.trim()||c||h,sx:{textTransform:"none",fontWeight:600},children:"create"===w?"Add Task":"Save Changes"})]})]}),(0,d.jsx)(eG.Snackbar,{open:K,autoHideDuration:6e3,onClose:eU,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,d.jsx)(T.Alert,{onClose:eU,severity:Z,sx:{width:"100%"},children:Y})})]})}var rV=e.i(80622),rJ=e.i(84933),rK=e.i(81706),rX=e.i(15127),rY=e.i(96861),rQ=e.i(95262),rZ=e.i(51480),r0=e.i(13740);function r1(e){return(0,r0.default)("MuiStepper",e)}(0,rZ.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var r2=e.i(18420);let r3=p.createContext({}),r5=p.createContext({});function r4(e){return(0,r0.default)("MuiStepConnector",e)}(0,rZ.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let r6=["className"],r8=(0,rQ.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,rJ.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),r9=(0,rQ.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.line,t[`line${(0,r2.default)(r.orientation)}`]]}})(({ownerState:e,theme:t})=>{let r="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,rJ.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:r},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),r7=p.forwardRef(function(e,t){let r=(0,rY.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:n}=r,i=(0,rV.default)(r,r6),{alternativeLabel:a,orientation:o="horizontal"}=p.useContext(r3),{active:s,disabled:l,completed:c}=p.useContext(r5),u=(0,rJ.default)({},r,{alternativeLabel:a,orientation:o,active:s,completed:c,disabled:l}),h=(e=>{let{classes:t,orientation:r,alternativeLabel:n,active:i,completed:a,disabled:o}=e,s={root:["root",r,n&&"alternativeLabel",i&&"active",a&&"completed",o&&"disabled"],line:["line",`line${(0,r2.default)(r)}`]};return(0,rX.default)(s,r4,t)})(u);return(0,d.jsx)(r8,(0,rJ.default)({className:(0,rK.default)(h.root,n),ref:t,ownerState:u},i,{children:(0,d.jsx)(r9,{className:h.line,ownerState:u})}))}),ne=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],nt=(0,rQ.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,rJ.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),nr=(0,d.jsx)(r7,{}),nn=p.forwardRef(function(e,t){let r=(0,rY.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:n=0,alternativeLabel:i=!1,children:a,className:o,component:s="div",connector:l=nr,nonLinear:c=!1,orientation:u="horizontal"}=r,h=(0,rV.default)(r,ne),x=(0,rJ.default)({},r,{nonLinear:c,alternativeLabel:i,orientation:u,component:s}),f=(e=>{let{orientation:t,nonLinear:r,alternativeLabel:n,classes:i}=e;return(0,rX.default)({root:["root",t,r&&"nonLinear",n&&"alternativeLabel"]},r1,i)})(x),m=p.Children.toArray(a).filter(Boolean),g=m.map((e,t)=>p.cloneElement(e,(0,rJ.default)({index:t,last:t+1===m.length},e.props))),y=p.useMemo(()=>({activeStep:n,alternativeLabel:i,connector:l,nonLinear:c,orientation:u}),[n,i,l,c,u]);return(0,d.jsx)(r3.Provider,{value:y,children:(0,d.jsx)(nt,(0,rJ.default)({as:s,ownerState:x,className:(0,rK.default)(f.root,o),ref:t},h,{children:g}))})});function ni(e){return(0,r0.default)("MuiStep",e)}(0,rZ.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let na=["active","children","className","component","completed","disabled","expanded","index","last"],no=(0,rQ.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,rJ.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),ns=p.forwardRef(function(e,t){let r=(0,rY.useDefaultProps)({props:e,name:"MuiStep"}),{active:n,children:i,className:a,component:o="div",completed:s,disabled:l,expanded:c=!1,index:u,last:h}=r,x=(0,rV.default)(r,na),{activeStep:f,connector:m,alternativeLabel:g,orientation:y,nonLinear:j}=p.useContext(r3),[b=!1,v=!1,w=!1]=[n,s,l];f===u?b=void 0===n||n:!j&&f>u?v=void 0===s||s:!j&&f<u&&(w=void 0===l||l);let S=p.useMemo(()=>({index:u,last:h,expanded:c,icon:u+1,active:b,completed:v,disabled:w}),[u,h,c,b,v,w]),C=(0,rJ.default)({},r,{active:b,orientation:y,alternativeLabel:g,completed:v,disabled:w,expanded:c,component:o}),k=(e=>{let{classes:t,orientation:r,alternativeLabel:n,completed:i}=e;return(0,rX.default)({root:["root",r,n&&"alternativeLabel",i&&"completed"]},ni,t)})(C),T=(0,d.jsxs)(no,(0,rJ.default)({as:o,className:(0,rK.default)(k.root,a),ref:t,ownerState:C},x,{children:[m&&g&&0!==u?m:null,i]}));return(0,d.jsx)(r5.Provider,{value:S,children:m&&!g&&0!==u?(0,d.jsxs)(p.Fragment,{children:[m,T]}):T})});var nl=e.i(62731);let nc=(0,nl.default)((0,d.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),nd=(0,nl.default)((0,d.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var nu=e.i(48040);function nh(e){return(0,r0.default)("MuiStepIcon",e)}let np=(0,rZ.default)("MuiStepIcon",["root","active","completed","error","text"]),nx=["active","className","completed","error","icon"],nf=(0,rQ.default)(nu.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${np.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${np.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${np.error}`]:{color:(e.vars||e).palette.error.main}})),nm=(0,rQ.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),ng=p.forwardRef(function(e,t){let r=(0,rY.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:n=!1,className:i,completed:a=!1,error:o=!1,icon:s}=r,l=(0,rV.default)(r,nx),u=(0,rJ.default)({},r,{active:n,completed:a,error:o}),h=(e=>{let{classes:t,active:r,completed:n,error:i}=e;return(0,rX.default)({root:["root",r&&"active",n&&"completed",i&&"error"],text:["text"]},nh,t)})(u);if("number"==typeof s||"string"==typeof s){let e=(0,rK.default)(i,h.root);return o?(0,d.jsx)(nf,(0,rJ.default)({as:nd,className:e,ref:t,ownerState:u},l)):a?(0,d.jsx)(nf,(0,rJ.default)({as:nc,className:e,ref:t,ownerState:u},l)):(0,d.jsxs)(nf,(0,rJ.default)({className:e,ref:t,ownerState:u},l,{children:[c||(c=(0,d.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,d.jsx)(nm,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:s})]}))}return s});function ny(e){return(0,r0.default)("MuiStepLabel",e)}let nj=(0,rZ.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),nb=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],nv=(0,rQ.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation]]}})(({ownerState:e})=>(0,rJ.default)({display:"flex",alignItems:"center",[`&.${nj.alternativeLabel}`]:{flexDirection:"column"},[`&.${nj.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),nw=(0,rQ.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,rJ.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${nj.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${nj.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${nj.alternativeLabel}`]:{marginTop:16},[`&.${nj.error}`]:{color:(e.vars||e).palette.error.main}})),nS=(0,rQ.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${nj.alternativeLabel}`]:{paddingRight:0}})),nC=(0,rQ.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${nj.alternativeLabel}`]:{textAlign:"center"}})),nk=p.forwardRef(function(e,t){var r;let n=(0,rY.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:i,className:a,componentsProps:o={},error:s=!1,icon:l,optional:c,slotProps:u={},StepIconComponent:h,StepIconProps:x}=n,f=(0,rV.default)(n,nb),{alternativeLabel:m,orientation:g}=p.useContext(r3),{active:y,disabled:j,completed:b,icon:v}=p.useContext(r5),w=l||v,S=h;w&&!S&&(S=ng);let C=(0,rJ.default)({},n,{active:y,alternativeLabel:m,completed:b,disabled:j,error:s,orientation:g}),k=(e=>{let{classes:t,orientation:r,active:n,completed:i,error:a,disabled:o,alternativeLabel:s}=e;return(0,rX.default)({root:["root",r,a&&"error",o&&"disabled",s&&"alternativeLabel"],label:["label",n&&"active",i&&"completed",a&&"error",o&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",i&&"completed",a&&"error",o&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},ny,t)})(C),T=null!=(r=u.label)?r:o.label;return(0,d.jsxs)(nv,(0,rJ.default)({className:(0,rK.default)(k.root,a),ref:t,ownerState:C},f,{children:[w||S?(0,d.jsx)(nS,{className:k.iconContainer,ownerState:C,children:(0,d.jsx)(S,(0,rJ.default)({completed:b,active:y,error:s,icon:w},x))}):null,(0,d.jsxs)(nC,{className:k.labelContainer,ownerState:C,children:[i?(0,d.jsx)(nw,(0,rJ.default)({ownerState:C},T,{className:(0,rK.default)(k.label,null==T?void 0:T.className),children:i})):null,c]})]}))});nk.muiName="StepLabel";var nT=e.i(35153);function nE(e){return(0,r0.default)("MuiStepContent",e)}(0,rZ.default)("MuiStepContent",["root","last","transition"]);let nA=["children","className","TransitionComponent","transitionDuration","TransitionProps"],nR=(0,rQ.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.last&&t.last]}})(({ownerState:e,theme:t})=>(0,rJ.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),nB=(0,rQ.default)(nT.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),nO=p.forwardRef(function(e,t){let r=(0,rY.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:n,className:i,TransitionComponent:a=nT.default,transitionDuration:o="auto",TransitionProps:s}=r,l=(0,rV.default)(r,nA),{orientation:c}=p.useContext(r3),{active:u,last:h,expanded:x}=p.useContext(r5),f=(0,rJ.default)({},r,{last:h}),m=(e=>{let{classes:t,last:r}=e;return(0,rX.default)({root:["root",r&&"last"],transition:["transition"]},nE,t)})(f),g=o;return"auto"!==o||a.muiSupportAuto||(g=void 0),(0,d.jsx)(nR,(0,rJ.default)({className:(0,rK.default)(m.root,i),ref:t,ownerState:f},l,{children:(0,d.jsx)(nB,(0,rJ.default)({as:a,in:u||x,className:m.transition,ownerState:f,timeout:g,unmountOnExit:!0},s,{children:n}))}))});var nP=e.i(92487),nI=e.i(94660),nL=e.i(43884),nF=e.i(29360),nM=e.i(56553),nD=e.i(52377),nW=e.i(53251),nN=e.i(11425);function nz(){let[e,t]=(0,p.useState)(0),[r,n]=(0,p.useState)([]),[i,a]=(0,p.useState)(""),[o,s]=(0,p.useState)(""),[l,c]=(0,p.useState)(""),[u,h]=(0,p.useState)(""),[x,m]=(0,p.useState)(!1),[y,j]=(0,p.useState)(null),[v,w]=(0,p.useState)(!1),[k,E]=(0,p.useState)(!1),A=["Guide","Quiz","SEO Audit","Generate Script"],R={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with valuelike a free SEO audit or actionable insightsyou immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:` Personalization is non-negotiable
 Focus on their problems, not your solutions
 Use data and insights, not flattery
 Make it easy for them to say yes
 Follow up with more value, not pressure`}]},B=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],O=()=>{1!==e||B.every(e=>r.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||i.trim()?t(e=>Math.min(e+1,A.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},P=()=>{t(e=>Math.max(e-1,0))},I=async()=>{m(!0),h(""),j(null);try{let e=(0,ev.getBackendUrl)(),t=r.map(e=>{let t=B.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),n=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${o||"Not provided"}
- Website: ${i}
- Industry: ${l||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,a=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:n}]})});if(!a.ok)throw Error("Failed to generate script");let s=await a.json();h(s.text);try{let e=s.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let r=JSON.parse(e);j({script:r.script||s.text,seoAudit:r.seoAudit||"SEO audit details will be generated.",valueProposition:r.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(r.nextSteps)?r.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){j({script:s.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}w(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{m(!1)}};return(0,d.jsx)(f.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,d.jsxs)(z.Stack,{spacing:3,children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(q.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,d.jsx)(nF.default,{}),sx:{fontWeight:700,mb:2}}),(0,d.jsx)(g.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,d.jsx)(g.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,d.jsx)(T.Alert,{severity:"info",sx:{mb:2},children:(0,d.jsxs)(g.Typography,{variant:"body2",children:[(0,d.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,d.jsx)(N.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,d.jsx)(nW.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,d.jsx)(b.Paper,{sx:{p:3},children:(0,d.jsxs)(nn,{activeStep:e,orientation:"vertical",children:[(0,d.jsxs)(ns,{children:[(0,d.jsx)(nk,{children:(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,d.jsxs)(nO,{children:[(0,d.jsxs)(f.Box,{sx:{mb:3},children:[(0,d.jsx)(g.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:R.title}),(0,d.jsx)(z.Stack,{spacing:3,children:R.sections.map((e,t)=>(0,d.jsxs)(nP.Accordion,{defaultExpanded:0===t,children:[(0,d.jsx)(nI.AccordionSummary,{expandIcon:(0,d.jsx)(nN.default,{}),children:(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,d.jsx)(nL.AccordionDetails,{children:(0,d.jsx)(g.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,d.jsx)(N.Button,{variant:"contained",onClick:O,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,d.jsxs)(ns,{children:[(0,d.jsx)(nk,{children:(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,d.jsxs)(nO,{children:[(0,d.jsxs)(z.Stack,{spacing:3,sx:{mb:3},children:[(0,d.jsx)(T.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),B.map(e=>{let t=r.find(t=>t.questionId===e.id);return(0,d.jsx)(S.Card,{variant:"outlined",children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,d.jsx)(_.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var r,i;return r=e.id,i=t.target.value,void n(e=>e.find(e=>e.questionId===r)?e.map(e=>e.questionId===r?{...e,answer:i}:e):[...e,{questionId:r,answer:i}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,children:[(0,d.jsx)(N.Button,{onClick:P,children:"Back"}),(0,d.jsx)(N.Button,{variant:"contained",onClick:O,children:"Continue to SEO Audit"})]})]})]}),(0,d.jsxs)(ns,{children:[(0,d.jsx)(nk,{children:(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,d.jsxs)(nO,{children:[(0,d.jsxs)(z.Stack,{spacing:3,sx:{mb:3},children:[(0,d.jsx)(T.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Client Name",value:o,onChange:e=>s(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Client Website URL",value:i,onChange:e=>a(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Industry",value:l,onChange:e=>c(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,children:[(0,d.jsx)(N.Button,{onClick:P,children:"Back"}),(0,d.jsx)(N.Button,{variant:"contained",onClick:O,children:"Generate Script"})]})]})]}),(0,d.jsxs)(ns,{children:[(0,d.jsx)(nk,{children:(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,d.jsxs)(nO,{children:[(0,d.jsxs)(z.Stack,{spacing:3,sx:{mb:3},children:[(0,d.jsx)(T.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,d.jsx)(S.Card,{variant:"outlined",children:(0,d.jsxs)(C.CardContent,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,d.jsxs)(z.Stack,{spacing:1,children:[(0,d.jsxs)(g.Typography,{children:[(0,d.jsx)("strong",{children:"Client:"})," ",o||"Not provided"]}),(0,d.jsxs)(g.Typography,{children:[(0,d.jsx)("strong",{children:"Website:"})," ",i||"Not provided"]}),(0,d.jsxs)(g.Typography,{children:[(0,d.jsx)("strong",{children:"Industry:"})," ",l||"Not provided"]}),(0,d.jsxs)(g.Typography,{children:[(0,d.jsx)("strong",{children:"Quiz Answers:"})," ",r.length," / ",B.length]})]})]})})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,children:[(0,d.jsx)(N.Button,{onClick:P,children:"Back"}),(0,d.jsx)(N.Button,{variant:"contained",onClick:I,disabled:x,startIcon:(0,d.jsx)(nM.default,{}),size:"large",children:x?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,d.jsxs)(eR.Dialog,{open:v,onClose:()=>w(!1),maxWidth:"md",fullWidth:!0,children:[(0,d.jsx)(eB.DialogTitle,{children:(0,d.jsxs)(z.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(g.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,children:[(0,d.jsx)(U.IconButton,{onClick:()=>{y&&(navigator.clipboard.writeText(y.script),E(!0),setTimeout(()=>E(!1),2e3))},title:"Copy Script",children:(0,d.jsx)(nD.default,{})}),(0,d.jsx)(U.IconButton,{onClick:()=>{if(y){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${o||"N/A"}
Website: ${i}

SCRIPT:
${y.script}

SEO AUDIT SUMMARY:
${y.seoAudit}

VALUE PROPOSITION:
${y.valueProposition}

NEXT STEPS:
${y.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`seo-prospecting-script-${o||"client"}-${Date.now()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,d.jsx)(Q.default,{})})]})]})}),(0,d.jsx)(eO.DialogContent,{dividers:!0,children:y&&(0,d.jsxs)(z.Stack,{spacing:3,children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,d.jsx)(b.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,d.jsx)(g.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:y.script})})]}),(0,d.jsx)(G.Divider,{}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,d.jsx)(b.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,d.jsx)(g.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:y.seoAudit})})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,d.jsx)(b.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,d.jsx)(g.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:y.valueProposition})})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,d.jsx)(z.Stack,{spacing:1,children:y.nextSteps.map((e,t)=>(0,d.jsx)(q.Chip,{label:`${t+1}. ${e}`,icon:(0,d.jsx)(eK.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,d.jsxs)(eP.DialogActions,{children:[(0,d.jsx)(N.Button,{onClick:()=>w(!1),children:"Close"}),(0,d.jsx)(N.Button,{variant:"contained",onClick:()=>{w(!1),t(0),j(null),n([]),a(""),s(""),c("")},children:"Create Another Script"})]})]}),k&&(0,d.jsx)(T.Alert,{severity:"success",onClose:()=>E(!1),children:"Script copied to clipboard!"})]})})}function nU(){let{settings:e,updateApiKeys:t}=(0,e$.useSettings)(),[r,n]=(0,p.useState)([]),[i,a]=(0,p.useState)(null),[o,s]=(0,p.useState)(!1),[l,c]=(0,p.useState)(""),[u,h]=(0,p.useState)(""),[x,m]=(0,p.useState)(null),[y,j]=(0,p.useState)(null),[v,w]=(0,p.useState)("");(0,p.useEffect)(()=>{w(e.apiKeys?.revidApiKey||"")},[e.apiKeys]),(0,p.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{n(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]);let k=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),n(e)},E=()=>{a(null),c(""),h(""),s(!0),m(null)},A=async e=>{if(!v)return void m("Revid.ai API key is required. Please add your API key above.");m(null),j("Generating video... This may take a few minutes.");try{let t=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({script:e.content,title:e.title})});if(!t.ok)throw Error("Failed to generate video");await t.json();let n=r.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);k(n),j("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>j(null),5e3)}catch(e){m(e.message||"Failed to generate video. Please check your API key and try again."),j(null)}};return(0,d.jsx)(f.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,d.jsxs)(L.Grid,{container:!0,spacing:3,children:[(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:3,minHeight:600},children:(0,d.jsx)(rG,{height:600})})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsxs)(b.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,d.jsx)(eW.default,{sx:{fontSize:32,color:"primary.main"}}),(0,d.jsx)(g.Typography,{variant:"h5",sx:{fontWeight:700},children:"Ai Content Agent"})]}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily."}),(0,d.jsx)(f.Box,{sx:{mb:3},children:(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Revid.ai API Key",type:"password",value:v,onChange:e=>{let r=e.target.value;w(r),t({revidApiKey:r})},placeholder:"Enter your Revid.ai API key",helperText:"Required for AI Agent panel to generate and auto-post videos",size:"small"})}),y&&(0,d.jsx)(T.Alert,{severity:"success",sx:{mb:2},onClose:()=>j(null),children:y}),x&&(0,d.jsx)(T.Alert,{severity:"error",sx:{mb:2},onClose:()=>m(null),children:x}),(0,d.jsx)(f.Box,{sx:{flexGrow:1,overflow:"auto"},children:o?(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{mb:2},children:i?"Edit Content":"Add New Content"}),(0,d.jsxs)(z.Stack,{spacing:2,children:[(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Title",value:l,onChange:e=>c(e.target.value),placeholder:"Enter content title",required:!0,size:"small"}),(0,d.jsx)(_.TextField,{fullWidth:!0,label:"Content",value:u,onChange:e=>h(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:6,required:!0,size:"small"}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:2,children:[(0,d.jsx)(N.Button,{variant:"contained",onClick:()=>{if(!l.trim()||!u.trim())return void m("Title and content are required");if(!v)return void m("Revid.ai API key is required. Please add your API key above.");let e=i?{...i,title:l,content:u}:{id:Date.now().toString(),title:l,content:u,createdAt:new Date().toISOString(),status:"active"};k(i?r.map(t=>t.id===i.id?e:t):[...r,e]),s(!1),c(""),h(""),a(null),j(i?"Content updated successfully":"Content added successfully"),setTimeout(()=>j(null),3e3)},size:"small",children:i?"Update":"Save"}),(0,d.jsx)(N.Button,{variant:"outlined",onClick:()=>{s(!1),c(""),h(""),a(null),m(null)},size:"small",children:"Cancel"})]})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(f.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsx)(g.Typography,{variant:"h6",children:"Content Library"}),(0,d.jsx)(N.Button,{variant:"contained",startIcon:(0,d.jsx)(eL.default,{}),onClick:E,disabled:!v,size:"small",children:"Add Content"})]}),0===r.length?(0,d.jsxs)(f.Box,{sx:{textAlign:"center",py:4},children:[(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,d.jsx)(N.Button,{variant:"outlined",startIcon:(0,d.jsx)(eL.default,{}),onClick:E,disabled:!v,size:"small",children:"Add Your First Content"})]}):(0,d.jsx)(z.Stack,{spacing:2,children:r.filter(e=>"active"===e.status).map(e=>(0,d.jsx)(S.Card,{elevation:1,children:(0,d.jsx)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,d.jsxs)(z.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",children:[(0,d.jsxs)(f.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,d.jsx)(g.Typography,{variant:"subtitle1",fontWeight:500,sx:{mb:.5},children:e.title}),(0,d.jsxs)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,d.jsx)(q.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,d.jsx)(q.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,d.jsxs)(z.Stack,{direction:"row",spacing:.5,children:[(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>A(e),title:"Generate Video",disabled:!v,children:(0,d.jsx)(ez.default,{fontSize:"small"})}),(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>{j("Scheduling feature coming soon!"),setTimeout(()=>j(null),3e3)},title:"Schedule",disabled:!v,children:(0,d.jsx)(eU.default,{fontSize:"small"})}),(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>{a(e),c(e.title),h(e.content),s(!0),m(null)},title:"Edit",children:(0,d.jsx)(eF.default,{fontSize:"small"})}),(0,d.jsx)(U.IconButton,{size:"small",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this content?")&&(k(r.filter(e=>e.id!==t)),j("Content deleted successfully"),setTimeout(()=>j(null),3e3)))},title:"Delete",color:"error",children:(0,d.jsx)(eN.default,{fontSize:"small"})})]})]})})},e.id))})]})})]})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsxs)(b.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,mb:2},children:"How to Format Video Scripts"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Format this into a video script that follows these tips:"}),(0,d.jsxs)(z.Stack,{spacing:2,children:[(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"1. Use short and punctuated sentences"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Correct punctuation helps the generated voice to be much better."})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"2. Use brackets for media guidance"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"When generating voice, [text between brackets] will be ignored but can be used to guide the AI with the media generation."})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"3. Add pauses with break tags"}),(0,d.jsxs)(g.Typography,{variant:"body2",color:"text.secondary",component:"div",children:["Use ",(0,d.jsx)("code",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px",borderRadius:"3px"},children:'<break time="1.0s" />'})," to mark a pause in the generated voice."]})]}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"4. Use line breaks for slide separation"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Use breaking lines to force slide separation and media change."})]}),(0,d.jsx)(G.Divider,{sx:{my:2}}),(0,d.jsxs)(f.Box,{children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2},children:"Script Example:"}),(0,d.jsx)(b.Paper,{elevation:0,sx:{p:2,bgcolor:"#f9f9f9",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:300},children:`[close-up of a cat]
Did you know how to make viral videos?

[cat playing with a ball]
First, you need to grab the viewer's attention.

<break time="1.0s" />

[cat chasing a laser pointer]
Then, you need to keep them engaged.

[cat sleeping]
Finally, you need to make them share it.`})]})]})]})}),(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsx)(b.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:(0,d.jsx)(nz,{})})})]})})}var n$=e.i(24918),n_=e.i(27367),nq=e.i(16875),nH=e.i(25303),nG=e.i(27282);let nV=null,nJ=null,nK=!1;function nX(){let{user:t}=(0,rH.useAuth)(),[r,n]=(0,p.useState)(0),i=(0,p.useMemo)(()=>`design_${t?.id||"shared"}`,[t?.id]);(0,p.useEffect)(()=>{if(!nK){try{let t=e.r(26482);nV=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);nJ=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}nK=!0}},[]);let a=(0,p.useRef)(null),o=(0,p.useRef)(null);(0,p.useEffect)(()=>{if(nV&&!a.current)try{a.current=nV()}catch(e){console.warn("Figma hook initialization failed:",e)}if(nJ&&!o.current)try{o.current=nJ()}catch(e){console.warn("MCP hook initialization failed:",e)}},[]);let s=a.current,l=o.current,c=(0,p.useMemo)(()=>s?.files||[],[s?.files]),u=(0,p.useMemo)(()=>s?.components||[],[s?.components]),h=(0,p.useMemo)(()=>s?.componentStatuses||{},[s?.componentStatuses]);s?.isLoading;let x=s?.error||null,m=(0,p.useCallback)(()=>s?.fetchFiles?s.fetchFiles():Promise.resolve(),[s?.fetchFiles]),v=(0,p.useCallback)(e=>s?.fetchComponents?s.fetchComponents(e):Promise.resolve(),[s?.fetchComponents]),w=(0,p.useCallback)((e,t,r)=>s?.likeComponent?s.likeComponent(e,t,r):Promise.resolve(),[s?.likeComponent]),E=(0,p.useCallback)((e,t,r)=>s?.saveComponent?s.saveComponent(e,t,r):Promise.resolve(),[s?.saveComponent]),A=(0,p.useCallback)(()=>l?.fetchCodeLinks?l.fetchCodeLinks():Promise.resolve(),[l?.fetchCodeLinks]),R=(0,p.useCallback)((e,t,r,n)=>l?.linkComponentToCode?l.linkComponentToCode(e,t,r,n):Promise.resolve(),[l?.linkComponentToCode]),[B,O]=(0,p.useState)(null),[I,z]=(0,p.useState)(!1),[q,H]=(0,p.useState)(""),[G,V]=(0,p.useState)(""),[J,K]=(0,p.useState)(""),[X,Y]=(0,p.useState)(!1),[Q,Z]=(0,p.useState)(!1);(0,p.useEffect)(()=>{if(!nV||!nJ||Q)return;let e=!0;return(async()=>{try{await Promise.all([m(),A()]),e&&Z(!0)}catch(t){e&&console.error("Error loading Figma data:",t)}})(),()=>{e=!1}},[m,A,Q]),(0,p.useEffect)(()=>{if(!B||!nV||!s)return;let e=!0;return Y(!0),v(B).then(()=>{if(!e)return}).catch(t=>{e&&console.error("Error fetching components:",t)}).finally(()=>{e&&Y(!1)}),()=>{e=!1}},[B,v,s]);let ee=(0,p.useCallback)(()=>{B?v(B):m()},[B,v,m]),et=(0,p.useCallback)(async(e,t)=>{t.stopPropagation();let r=h[e]?.liked||!1;try{await w(e,!r,B||void 0)}catch(e){console.error("Error liking component:",e)}},[h,w,B]),er=(0,p.useCallback)(async(e,t)=>{t.stopPropagation();let r=h[e]?.saved||!1;try{await E(e,!r,B||void 0)}catch(e){console.error("Error saving component:",e)}},[h,E,B]),en=(0,p.useCallback)(async()=>{if(q&&G)try{await R(q,G,J,B||""),z(!1),A(),H(""),V(""),K("")}catch(e){console.error("Error linking component:",e)}},[q,G,J,B,R,A]),ei=(0,p.useMemo)(()=>u.map(e=>(0,d.jsx)(L.Grid,{item:!0,xs:12,sm:6,children:(0,d.jsx)(S.Card,{elevation:1,children:(0,d.jsxs)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,d.jsx)(g.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,d.jsxs)(f.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,d.jsx)(U.IconButton,{size:"small",onClick:t=>et(e.key,t),color:h[e.key]?.liked?"error":"default",children:(0,d.jsx)(n_.default,{fontSize:"small"})}),(0,d.jsx)(U.IconButton,{size:"small",onClick:t=>er(e.key,t),color:h[e.key]?.saved?"primary":"default",children:(0,d.jsx)(nq.default,{fontSize:"small"})})]})]})})},e.key)),[u,h,et,er]);return(0,d.jsxs)(f.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,d.jsxs)(b.Paper,{elevation:2,sx:{p:3,flexGrow:1,display:"flex",flexDirection:"column",minHeight:0},children:[(0,d.jsx)(f.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"})}),(0,d.jsx)(f.Box,{sx:{borderBottom:1,borderColor:"divider",mb:3,flexShrink:0},children:(0,d.jsxs)(y.Tabs,{value:r,onChange:(e,t)=>n(t),children:[(0,d.jsx)(j.Tab,{icon:(0,d.jsx)(P.default,{}),iconPosition:"start",label:"Figma Components"}),(0,d.jsx)(j.Tab,{icon:(0,d.jsx)(nH.default,{}),iconPosition:"start",label:"Collaboration Board"})]})}),0===r&&(0,d.jsxs)(f.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,d.jsxs)(f.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,d.jsx)(g.Typography,{variant:"h6",children:"Figma Integration"}),(0,d.jsxs)(f.Box,{sx:{display:"flex",gap:1},children:[(0,d.jsx)($.Tooltip,{title:"Refresh",children:(0,d.jsx)(U.IconButton,{onClick:ee,size:"small",children:(0,d.jsx)(n$.default,{})})}),(0,d.jsx)(N.Button,{variant:"outlined",size:"small",onClick:()=>z(!0),disabled:!B||0===u.length,children:"Link to Code"})]})]}),nV&&nJ?(0,d.jsxs)(f.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[x&&(0,d.jsx)(T.Alert,{severity:"error",sx:{mb:2},children:x}),(0,d.jsx)(f.Box,{sx:{mb:2},children:(0,d.jsxs)(D.FormControl,{fullWidth:!0,size:"small",children:[(0,d.jsx)(W.InputLabel,{children:"Select Figma File"}),(0,d.jsxs)(F.Select,{value:B||"",label:"Select Figma File",onChange:e=>O(e.target.value),children:[(0,d.jsx)(M.MenuItem,{value:"",children:"-- Select a file --"}),c.map(e=>(0,d.jsx)(M.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),B&&(0,d.jsx)(f.Box,{sx:{flexGrow:1,overflow:"auto"},children:X?(0,d.jsxs)(f.Box,{sx:{textAlign:"center",py:4},children:[(0,d.jsx)(k.CircularProgress,{size:24}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,d.jsxs)(L.Grid,{container:!0,spacing:2,children:[ei,0===u.length&&(0,d.jsx)(L.Grid,{item:!0,xs:12,children:(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!B&&(0,d.jsx)(f.Box,{sx:{textAlign:"center",py:4},children:(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,d.jsx)(T.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]}),1===r&&(0,d.jsxs)(f.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,d.jsxs)(f.Box,{sx:{mb:2,flexShrink:0},children:[(0,d.jsxs)(g.Typography,{variant:"h6",gutterBottom:!0,children:["Collaboration Board - ",i]}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Collaborate, design, and create together with your team in real-time"})]}),(0,d.jsx)(f.Box,{sx:{flexGrow:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",bgcolor:"background.default",borderRadius:1},children:(0,d.jsx)(f.Box,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column","& > div":{height:"100% !important",minHeight:"100% !important"}},children:(0,d.jsx)(nG.default,{boardId:i,userId:t?.id?.toString()||"anonymous",userName:t?.name||t?.email||"Anonymous User"})})})]})]}),(0,d.jsxs)(eR.Dialog,{open:I,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,children:[(0,d.jsx)(eB.DialogTitle,{children:"Link Figma Component to Code"}),(0,d.jsxs)(eO.DialogContent,{children:[(0,d.jsxs)(D.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,d.jsx)(W.InputLabel,{children:"Figma Component"}),(0,d.jsx)(F.Select,{value:q,label:"Figma Component",onChange:e=>H(e.target.value),children:u.map(e=>(0,d.jsx)(M.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,d.jsx)(_.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:G,onChange:e=>V(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,d.jsx)(_.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:J,onChange:e=>K(e.target.value),placeholder:"Button"})]}),(0,d.jsxs)(eP.DialogActions,{children:[(0,d.jsx)(N.Button,{onClick:()=>z(!1),children:"Cancel"}),(0,d.jsx)(N.Button,{onClick:en,variant:"contained",disabled:!q||!G,children:"Link"})]})]})]})}var nY=e.i(43892),nQ=e.i(24676),nZ=e.i(10600),n0=e.i(27796);function n1(){let[e,t]=(0,p.useState)(!1),[r,n]=(0,p.useState)([]),[i,a]=(0,p.useState)(""),[o,s]=(0,p.useState)(!1),[l,c]=(0,p.useState)(null),[u,h]=(0,p.useState)("gemini-3-pro-preview"),x=(0,p.useRef)(null);(0,p.useEffect)(()=>{x.current&&e&&(x.current.scrollTop=x.current.scrollHeight)},[r,e]);let m=async e=>{if(e.preventDefault(),!i.trim()||o)return;let t={role:"user",text:i};n(e=>[...e,t]),a(""),s(!0),c(null);try{let e=(0,ev.getBackendUrl)(),i=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[...r,t],model:u})});if(!i.ok){let e=i.headers.get("content-type");if(e&&e.includes("application/json")){let e=await i.json(),t=e.text||e.error||e.message||`Server error: ${i.status}`,r=e.details?` (${e.details})`:"";throw Error(`${t}${r}`)}{let e=await i.text();throw Error(`Server error: ${i.status} ${i.statusText}${e?` - ${e.substring(0,100)}`:""}`)}}let a=await i.json();if(!a.text||"string"!=typeof a.text)throw Error("Invalid response format from server");let o={role:"model",text:a.text};n(e=>[...e,o])}catch(i){let e=i?.message||"An unexpected error occurred",t=e.toLowerCase().includes("not configured")||e.toLowerCase().includes("api key")||e.toLowerCase().includes("configuration");t||console.error("Error sending message:",i),c(e);let r=t?"The AI chat feature is not yet configured. Please contact an administrator to set up the Gemini API key.":`Sorry, I encountered an error: ${e}`;n(e=>[...e,{role:"model",text:r}])}finally{s(!1)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(nY.Fab,{color:"primary","aria-label":"AI Chat",onClick:()=>t(!e),sx:{position:"fixed",bottom:24,right:24,zIndex:1300,boxShadow:3},children:e?(0,d.jsx)(nZ.default,{}):(0,d.jsx)(n0.default,{})}),(0,d.jsx)(nT.default,{in:e,orientation:"vertical",children:(0,d.jsxs)(b.Paper,{elevation:8,sx:{position:"fixed",bottom:100,right:24,width:{xs:"calc(100vw - 48px)",sm:400,md:450},height:{xs:"calc(100vh - 150px)",sm:600},maxHeight:{sm:600},zIndex:1300,display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",border:1,borderColor:"divider"},children:[(0,d.jsxs)(f.Box,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"primary.main",color:"primary.contrastText",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{flex:1},children:[(0,d.jsx)(O.default,{}),(0,d.jsxs)(f.Box,{sx:{flex:1,minWidth:0},children:[(0,d.jsx)(g.Typography,{variant:"h6",sx:{fontWeight:700,fontSize:"1rem"},children:"AI Journal"}),(0,d.jsx)(g.Typography,{variant:"caption",sx:{opacity:.9,fontSize:"0.7rem"},children:"Gemini-powered digital consciousness"})]}),(0,d.jsxs)(D.FormControl,{size:"small",sx:{minWidth:140,"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.2)",color:"inherit","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSvgIcon-root":{color:"rgba(255, 255, 255, 0.9)"}},children:[(0,d.jsx)(W.InputLabel,{id:"model-select-label",sx:{fontSize:"0.7rem"},children:"Model"}),(0,d.jsxs)(F.Select,{labelId:"model-select-label",value:u,label:"Model",onChange:e=>h(e.target.value),disabled:o,sx:{fontSize:"0.75rem","& .MuiSelect-select":{py:.5}},children:[(0,d.jsx)(M.MenuItem,{value:"gemini-3-pro-preview",sx:{fontSize:"0.75rem"},children:"Gemini 3 Pro Preview"}),(0,d.jsx)(M.MenuItem,{value:"gemini-2.5-pro",sx:{fontSize:"0.75rem"},children:"Gemini 2.5 Pro"})]})]})]}),(0,d.jsxs)(f.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,d.jsx)($.Tooltip,{title:"Refresh chat",children:(0,d.jsx)(U.IconButton,{onClick:()=>{n([]),c(null),a(""),s(!1)},disabled:o,size:"small",sx:{color:"inherit"},children:(0,d.jsx)(n$.default,{fontSize:"small"})})}),(0,d.jsx)($.Tooltip,{title:"Close",children:(0,d.jsx)(U.IconButton,{onClick:()=>t(!1),size:"small",sx:{color:"inherit"},children:(0,d.jsx)(nZ.default,{fontSize:"small"})})})]})]}),(0,d.jsxs)(f.Box,{ref:x,sx:{flexGrow:1,p:2,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,minHeight:0,bgcolor:"background.default"},children:[0===r.length&&(0,d.jsxs)(f.Box,{sx:{textAlign:"center",py:4},children:[(0,d.jsx)(O.default,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,d.jsx)(g.Typography,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Welcome to your AI Journal"}),(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",children:"Start a conversation with your digital consciousness. Ask questions, explore thoughts, or simply reflect."})]}),r.map((e,t)=>(0,d.jsx)(f.Box,{sx:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",mb:1},children:(0,d.jsx)(b.Paper,{elevation:1,sx:{p:1.5,maxWidth:"80%",bgcolor:"user"===e.role?"primary.main":"background.paper",color:"user"===e.role?"white":"text.primary",borderRadius:"user"===e.role?"18px 18px 4px 18px":"18px 18px 18px 4px"},children:(0,d.jsx)(g.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap",fontSize:"0.875rem"},children:e.text})})},t)),o&&(0,d.jsx)(f.Box,{sx:{display:"flex",justifyContent:"flex-start",mb:1},children:(0,d.jsx)(b.Paper,{elevation:1,sx:{p:1.5,bgcolor:"background.paper",borderRadius:"18px 18px 18px 4px"},children:(0,d.jsx)(g.Typography,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Thinking..."})})})]}),(0,d.jsxs)(f.Box,{sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"background.paper"},children:[(0,d.jsx)("form",{onSubmit:m,children:(0,d.jsxs)(z.Stack,{direction:"row",spacing:1,alignItems:"flex-end",children:[(0,d.jsx)(_.TextField,{fullWidth:!0,multiline:!0,maxRows:3,value:i,onChange:e=>a(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),!o&&i.trim())){let t=e.currentTarget.closest("form");t&&t.requestSubmit()}},placeholder:"Share your thoughts...",variant:"outlined",disabled:o,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,d.jsx)(nY.Fab,{type:"submit",color:"primary",disabled:o||!i.trim(),size:"small",sx:{minWidth:40,height:40},children:(0,d.jsx)(nQ.default,{sx:{fontSize:18}})})]})}),l&&(0,d.jsx)(g.Typography,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:l})]})]})})]})}function n2(e){let{children:t,value:r,index:n,...i}=e;return(0,d.jsx)("div",{role:"tabpanel",hidden:r!==n,id:`creative-tabpanel-${n}`,"aria-labelledby":`creative-tab-${n}`,...i,children:r===n&&(0,d.jsx)(f.Box,{sx:{py:3},children:t})})}function n3(){let e=(0,v.useTheme)(),t=(0,w.useMediaQuery)(e.breakpoints.down("md")),r=(0,x.useRouter)(),[n,i]=(0,p.useState)(0),[a,o]=(0,p.useState)(!1),{user:s}=(0,rH.useAuth)();s?.isAdmin;let l={analytics:0,support:1,tasks:2,browser:3,design:4,ai:5},c=[{key:"analytics",label:"Analytics",icon:(0,d.jsx)(E.default,{})},{key:"support",label:"Support",icon:(0,d.jsx)(A.default,{})},{key:"tasks",label:"To-Do & Tasks",icon:(0,d.jsx)(R.default,{})},{key:"browser",label:"Browser",icon:(0,d.jsx)(B.default,{})},{key:"design",label:"Design & Figma",icon:(0,d.jsx)(P.default,{})},{key:"ai",label:"AI Agent",icon:(0,d.jsx)(O.default,{})}];return(0,p.useEffect)(()=>{let e=r.query.tab;e&&void 0!==l[e]&&i(l[e])},[r.query.tab]),(0,d.jsxs)(f.Box,{sx:{bgcolor:"background.default",minHeight:"100vh",pb:4},children:[(0,d.jsx)(f.Box,{sx:{bgcolor:"white",borderBottom:"1px solid",borderColor:"divider",mb:3},children:(0,d.jsxs)(m.Container,{maxWidth:"xl",sx:{py:3},children:[(0,d.jsx)(g.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Creative Dashboard"}),(0,d.jsx)(g.Typography,{variant:"body1",color:"text.secondary",children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,d.jsxs)(m.Container,{maxWidth:"xl",children:[(0,d.jsx)(b.Paper,{sx:{mb:3,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},children:(0,d.jsx)(y.Tabs,{value:n,onChange:(e,t)=>{i(t);let n=Object.keys(l).find(e=>l[e]===t);n&&r.push(`/creative?tab=${n}`,void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:!!t&&"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.95rem",fontWeight:500,"&.Mui-selected":{color:"primary.main",fontWeight:600}},"& .MuiTabs-indicator":{bgcolor:"primary.main",height:3}},children:c.map((e,t)=>(0,d.jsx)(j.Tab,{label:e.label,icon:e.icon,iconPosition:"start",id:`creative-tab-${t}`,"aria-controls":`creative-tabpanel-${t}`},e.key))})}),(0,d.jsx)(n2,{value:n,index:0,children:(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsx)(C.CardContent,{sx:{p:3},children:(0,d.jsx)(ew,{})})})}),(0,d.jsx)(n2,{value:n,index:1,children:(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsx)(C.CardContent,{sx:{p:3},children:(0,d.jsx)(eD,{})})})}),(0,d.jsx)(n2,{value:n,index:2,children:(0,d.jsx)(n5,{})}),(0,d.jsx)(n2,{value:n,index:3,children:(0,d.jsx)(n4,{})}),(0,d.jsx)(n2,{value:n,index:4,children:(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsx)(C.CardContent,{sx:{p:3},children:(0,d.jsx)(nX,{})})})}),(0,d.jsx)(n2,{value:n,index:5,children:(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsx)(C.CardContent,{sx:{p:3},children:(0,d.jsx)(nU,{})})})})]}),(0,d.jsx)(I.default,{open:a,onClose:()=>o(!1)}),3===n&&(0,d.jsx)(n1,{})]})}function n5(){return(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsxs)(C.CardContent,{sx:{p:3},children:[(0,d.jsxs)(f.Box,{sx:{mb:3},children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"To-Do & Tasks"}),(0,d.jsx)(g.Typography,{variant:"body1",color:"text.secondary",children:"Manage your tasks and track your progress"})]}),(0,d.jsx)(f.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,d.jsx)(f.Box,{sx:{width:"100%"},children:(0,d.jsx)(f.Box,{sx:{mb:3},children:(0,d.jsx)(rG,{height:600})})})})]})})}function n4(){let[e,t]=(0,p.useState)(null),[r,n]=(0,p.useState)(!0),[i,a]=(0,p.useState)(null),[o,s]=(0,p.useState)(!0);return(0,p.useEffect)(()=>{(async()=>{try{s(!0);let e=(0,ev.getBackendUrl)(),r=window.location.hostname,n=await fetch(`${e}/api/hyperbeam/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({parent:r})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||`HTTP ${n.status}`)}let i=await n.json();if(i.success&&i.embedUrl)a(i.embedUrl),t(null);else throw Error(i.error||"Failed to get Hyperbeam session URL")}catch(e){console.error("Error creating Hyperbeam session:",e),t(e.message||"Failed to create Hyperbeam session. Please try refreshing the page.")}finally{s(!1)}})()},[]),(0,d.jsx)(S.Card,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",mb:3},children:(0,d.jsxs)(C.CardContent,{sx:{p:3},children:[(0,d.jsxs)(f.Box,{sx:{mb:3},children:[(0,d.jsx)(g.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Browser Session"}),(0,d.jsx)(g.Typography,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Shared browser powered by Hyperbeam"})]}),o&&(0,d.jsx)(f.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,d.jsx)(k.CircularProgress,{})}),e&&(0,d.jsx)(T.Alert,{severity:"error",sx:{mb:2},children:e}),!o&&i&&(0,d.jsxs)(f.Box,{sx:{position:"relative",width:"100%",height:"70vh",bgcolor:"#000",borderRadius:1,overflow:"hidden"},children:[r&&(0,d.jsx)(f.Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)"},children:(0,d.jsx)(k.CircularProgress,{})}),(0,d.jsx)("iframe",{src:i,style:{width:"100%",height:"100%",border:"none",display:"block"},allow:"clipboard-read; clipboard-write; microphone; camera; display-capture",onLoad:()=>n(!1),onError:()=>{n(!1),t("Failed to load Hyperbeam session")}})]})]})})}e.s(["default",0,function(){return(0,d.jsx)(h.default,{children:(0,d.jsx)(u.default,{active:"creative",children:(0,d.jsx)(n3,{})})})}],11500)},24144,(e,t,r)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(11500)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);