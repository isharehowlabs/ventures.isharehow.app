(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25972,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code")},94556,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},27367,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},16875,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},27325,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline")},26482,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)([]),[f,p]=(0,t.useState)({}),[g,x]=(0,t.useState)(!1),[y,k]=(0,t.useState)(null);return{files:e,components:n,tokens:s,likedComponents:o,savedComponents:d,draftedComponents:h,componentStatuses:f,isLoading:g,error:y,fetchFiles:async()=>{try{x(!0),k(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),n=await t.json();r(n.projects||[])}catch(e){k(e.message),console.error("Error fetching Figma files:",e)}finally{x(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw k(e.message),e}let t=e.trim();try{x(!0),k(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await r.json()).file}catch(e){throw k(e?.message||"Failed to fetch Figma file"),e}finally{x(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw k(e.message),e}let t=e.trim();try{x(!0),k(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),n=await r.json();return i(n.components||[]),n.components}catch(e){throw k(e?.message||"Failed to fetch Figma components"),e}finally{x(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw k(e.message),e}let t=e.trim();try{x(!0),k(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),n=await r.json();return l(n.tokens||[]),n.tokens}catch(e){throw k(e?.message||"Failed to fetch Figma tokens"),e}finally{x(!1)}},likeComponent:async(e,t=!0,r)=>{try{x(!0),k(null);let n=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${n}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:r})}),s=await i.json();return s.success&&(p(a=>({...a,[e]:{...a[e],liked:t}})),t?c(t=>t.includes(e)?t:[...t,e]):c(t=>t.filter(t=>t!==e))),s}catch(e){throw k(e?.message||"Failed to like component"),e}finally{x(!1)}},saveComponent:async(e,t=!0,r)=>{try{x(!0),k(null);let n=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${n}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:r})}),s=await i.json();return s.success&&(p(a=>({...a,[e]:{...a[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),s}catch(e){throw k(e?.message||"Failed to save component"),e}finally{x(!1)}},draftComponent:async(e,t=!0,r)=>{try{x(!0),k(null);let n=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${n}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:r})}),s=await i.json();return s.success&&(p(a=>({...a,[e]:{...a[e],drafted:t}})),t?m(t=>t.includes(e)?t:[...t,e]):m(t=>t.filter(t=>t!==e))),s}catch(e){throw k(e?.message||"Failed to draft component"),e}finally{x(!1)}},fetchLikedComponents:async()=>{try{x(!0),k(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),r=await t.json();return c(r.componentIds||[]),r.componentIds||[]}catch(e){throw k(e?.message||"Failed to fetch liked components"),e}finally{x(!1)}},fetchSavedComponents:async()=>{try{x(!0),k(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),r=await t.json();return u(r.componentIds||[]),r.componentIds||[]}catch(e){throw k(e?.message||"Failed to fetch saved components"),e}finally{x(!1)}},fetchDraftedComponents:async()=>{try{x(!0),k(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),r=await t.json();return m(r.componentIds||[]),r.componentIds||[]}catch(e){throw k(e?.message||"Failed to fetch drafted components"),e}finally{x(!1)}},fetchComponentStatus:async e=>{try{let t=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),n=await r.json();return p(t=>({...t,[e]:{liked:n.liked||!1,saved:n.saved||!1,drafted:n.drafted||!1}})),n}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{x(!0),k(null);let t=(0,a.getBackendUrl)(),r=e?JSON.stringify({componentIds:e}):void 0,n=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:r}),i=await n.json();if(i.preferences){p(e=>{let t={...e};return Object.entries(i.preferences).forEach(([e,a])=>{t[e]={liked:a.liked||!1,saved:a.saved||!1,drafted:a.drafted||!1}}),t});let e=Object.entries(i.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(i.preferences).filter(([e,t])=>t.saved).map(([e])=>e),a=Object.entries(i.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);c(e),u(t),m(a)}return i}catch(e){throw k(e?.message||"Failed to fetch component preferences"),e}finally{x(!1)}}}}e.s(["useFigma",()=>r])},38568,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)([]),[s,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(null),d=async e=>{try{l(!0),c(null);let t=(0,a.getBackendUrl)(),n=new URL(`${t}/api/mcp/code-links`);e&&n.searchParams.append("figmaFileId",e);let i=await fetch(n.toString(),{credentials:"include"});if(!i.ok)throw Error("Failed to fetch code links");let s=await i.json();r(s.links||[])}catch(e){c(e.message)}finally{l(!1)}},u=async()=>{try{l(!0),c(null);let e=(0,a.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let r=await t.json();i(r.tokens||[])}catch(e){c(e.message)}finally{l(!1)}};return{links:e,tokens:n,isLoading:s,error:o,linkComponentToCode:async(e,t,r,n)=>{try{l(!0),c(null);let i=(0,a.getBackendUrl)(),s=await fetch(`${i}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:r,figmaFileId:n})});if(!s.ok)throw Error("Failed to link component");let o=await s.json();return await d(),o}catch(e){throw c(e.message),e}finally{l(!1)}},fetchCodeLinks:d,syncTokens:async e=>{try{l(!0),c(null);let t=(0,a.getBackendUrl)(),r=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!r.ok)throw Error("Failed to sync tokens");let n=await r.json();return await u(),n}catch(e){throw c(e.message),e}finally{l(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{l(!0),c(null);let r=(0,a.getBackendUrl)(),n=await fetch(`${r}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!n.ok)throw Error("Failed to generate code");return await n.json()}catch(e){throw c(e.message),e}finally{l(!1)}}}}e.s(["useMCP",()=>r])},27245,e=>{"use strict";var t=e.i(44855),a=e.i(58891),r=e.i(74614),n=e.i(65790),i=e.i(54704),s=e.i(15915),l=e.i(92378),o=e.i(86012),c=e.i(75557),d=e.i(98807),u=e.i(1051),h=e.i(33948),m=e.i(18295),f=e.i(92279),p=e.i(47379),g=e.i(83161),x=e.i(47617),y=e.i(39972),k=e.i(20161),j=e.i(9109),v=e.i(37025),w=e.i(45162),C=e.i(3430),S=e.i(46631),b=e.i(70385),T=e.i(37451),B=e.i(34699),E=e.i(25972),F=e.i(95532),I=e.i(94544);e.i(72695),e.i(94556),e.i(20012);var P=e.i(99700),W=e.i(27367),_=e.i(16875),z=e.i(24918),O=e.i(28810),$=e.i(27325),D=e.i(13654),M=e.i(75016),A=e.i(9929),U=e.i(15254);let H=null,G=null;try{let t=e.r(26482);H=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);G=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function L(){let{user:e}=(0,U.useAuth)(),{tasks:L,createTask:N,updateTask:q,deleteTask:R,updateTaskNotes:J,isLoading:V,error:K,authRequired:Q,refresh:X,isStale:Y}=function(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(null),p=(0,a.useRef)(null),g=(0,a.useCallback)(async()=>{try{n(!0),s(null),o(!1);let e=(0,D.getTasksBackendUrl)(),a=await (0,D.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===a.status){o(!0),s("Authentication required"),t([]);return}let r=await a.json(),i=new Date;t(r.tasks||[]),h(i),p.current=i,d(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(o(!0),s("Authentication required"),t([])):(s(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{n(!1)}},[]),x=(0,a.useCallback)(()=>g(),[g]),y=async(e,a,i,l,c,d)=>{if(r)return void console.warn("Task creation already in progress, ignoring duplicate call");try{n(!0),s(null),o(!1);let r=(0,D.getTasksBackendUrl)();console.log("Creating task at:",`${r}/api/tasks`,{title:e,description:a,hyperlinks:i,status:l});let u=await (0,D.fetchWithErrorHandling)(`${r}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:a,hyperlinks:i,status:l,assignedTo:c,assignedToName:d})});if(401===u.status)throw o(!0),Error("Authentication required");if(!u.ok){let e=await u.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||e.message||`Server error: ${u.status}`)}let m=(await u.json()).task;if(!m)throw Error("Server did not return a task");console.log("Task created, adding to state:",m);let f=new Date;return t(e=>e.some(e=>e.id===m.id)?e.map(e=>e.id===m.id?m:e):[...e,m]),h(f),p.current=f,m}catch(e){throw console.error("Error in createTask:",e),(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{n(!1)}},k=async(e,a)=>{try{n(!0),s(null),o(!1);let r=(0,D.getTasksBackendUrl)(),i=await (0,D.fetchWithErrorHandling)(`${r}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(a)});if(401===i.status)throw o(!0),Error("Authentication required");let l=(await i.json()).task,c=new Date;return t(e=>e.map(e=>e.id===l.id?l:e)),h(c),p.current=c,l}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{n(!1)}},j=async e=>{try{n(!0),s(null),o(!1);let t=(0,D.getTasksBackendUrl)(),a=await (0,D.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===a.status)throw o(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&o(!0),s(e.message),e}finally{n(!1)}};return(0,a.useEffect)(()=>{let e=!0;g();let a=(0,M.getTasksSocket)();f(a);let r=()=>{console.log("Socket.io connected for tasks")},n=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},i=e=>{console.log("Socket.io disconnected (tasks):",e)};a.on("connect",r),a.on("connect_error",n),a.on("disconnect",i),a.on("task_created",a=>{if(!e)return;let r=new Date;t(e=>e.some(e=>e.id===a.id)?e.map(e=>e.id===a.id?a:e):[...e,a]),h(r),p.current=r}),a.on("task_updated",a=>{if(!e)return;let r=new Date;t(e=>e.map(e=>e.id===a.id?a:e)),h(r),p.current=r}),a.on("task_deleted",a=>{if(!e)return;let r=new Date;t(e=>e.filter(e=>e.id!==a.id)),h(r),p.current=r}),a.on("task_notes_updated",a=>{if(!e)return;let r=new Date;t(e=>e.map(e=>e.id===a.task_id?{...e,notes:a.notes}:e)),h(r),p.current=r}),a.on("task_assigned",a=>{if(!e)return;console.log("Task assigned notification:",a);let r=new Date;t(e=>e.map(e=>e.id===a.task.id?a.task:e)),h(r),p.current=r}),a.on("auth_restored_ack",()=>{e&&(o(!1),g())});let s=setInterval(()=>{if(!e)return;let t=p.current;t&&Date.now()-t.getTime()>3e5&&d(!0)},6e4);return()=>{e=!1,a.off("connect",r),a.off("connect_error",n),a.off("disconnect",i),a.off("task_created"),a.off("task_updated"),a.off("task_deleted"),a.off("task_assigned"),a.off("task_notes_updated"),a.off("auth_restored_ack"),clearInterval(s)}},[g]),{tasks:e,isLoading:r,error:i,authRequired:l,isStale:c,lastUpdated:u,refresh:x,fetchTasks:g,createTask:y,updateTask:k,deleteTask:j,updateTaskNotes:(e,a)=>{t(t=>t.map(t=>t.id===e?{...t,notes:a}:t)),m&&m.emit("task_notes_update",{task_id:e,notes:a,user_id:null})}}}(),Z=null,ee=null;try{H&&(Z=H())}catch(e){console.warn("Figma hook not available:",e)}try{G&&(ee=G())}catch(e){console.warn("MCP hook not available:",e)}let et=Z?.files||[],ea=Z?.components||[];Z?.tokens;let er=Z?.componentStatuses||{};Z?.isLoading;let en=Z?.error||null,ei=Z?.fetchFiles||(()=>Promise.resolve()),es=Z?.fetchComponents||(()=>Promise.resolve()),el=Z?.likeComponent||(()=>Promise.resolve()),eo=Z?.saveComponent||(()=>Promise.resolve()),ec=Z?.fetchLikedComponents||(()=>Promise.resolve()),ed=Z?.fetchSavedComponents||(()=>Promise.resolve()),eu=Z?.fetchDraftedComponents||(()=>Promise.resolve()),eh=Z?.fetchComponentStatus||(()=>Promise.resolve());ee?.links,ee?.tokens;let em=ee?.linkComponentToCode||(()=>Promise.resolve()),ef=ee?.fetchCodeLinks||(()=>Promise.resolve()),ep=ee?.fetchTokens||(()=>Promise.resolve()),[eg,ex]=(0,a.useState)(""),[ey,ek]=(0,a.useState)(!1),[ej,ev]=(0,a.useState)("create"),[ew,eC]=(0,a.useState)(null),[eS,eb]=(0,a.useState)(""),[eT,eB]=(0,a.useState)(""),[eE,eF]=(0,a.useState)(""),[eI,eP]=(0,a.useState)(!1),eW=(0,a.useRef)(null),[e_,ez]=(0,a.useState)(""),[eO,e$]=(0,a.useState)("pending"),[eD,eM]=(0,a.useState)(""),[eA,eU]=(0,a.useState)(localStorage.getItem("taskFilter")||"all"),[eH,eG]=(0,a.useState)([]),[eL,eN]=(0,a.useState)(!1),[eq,eR]=(0,a.useState)(null),[eJ,eV]=(0,a.useState)(!1),[eK,eQ]=(0,a.useState)(""),[eX,eY]=(0,a.useState)(""),[eZ,e0]=(0,a.useState)(""),[e1,e2]=(0,a.useState)(!1),e4=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("workspace_markdown");e&&ex(e)},[]),(0,a.useEffect)(()=>{""!==eg&&localStorage.setItem("workspace_markdown",eg)},[eg]),(0,a.useEffect)(()=>{(async()=>{if(e&&(e.isEmployee||e.isAdmin)){eN(!0);try{let e=(0,D.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();eG(e.requests||[])}}catch(e){console.error("Error fetching support requests:",e)}finally{eN(!1)}}})()},[e]),(0,a.useEffect)(()=>{H&&G&&(async()=>{try{await Promise.all([ei(),ef(),ep(),ec(),ed(),eu()])}catch(e){console.error("Error loading Figma data:",e)}})()},[]),(0,a.useEffect)(()=>{eq&&H&&(e2(!0),es(eq).then(()=>{ea.length>0&&Promise.all(ea.map(e=>eh(e.key,eq)))}).catch(e=>console.error("Error fetching components:",e)).finally(()=>e2(!1)))},[eq]);let e5=L.filter(t=>"my-tasks"===eA?t.assignedTo===e?.id:"created-by-me"!==eA||t.createdBy===e?.id),e6=L.filter(t=>t.assignedTo===e?.id).length,e8=L.filter(t=>t.createdBy===e?.id).length,e9=async t=>{let a=L.find(e=>e.id===t);if(!a)return;let r="completed"===a.status?"pending":"completed";try{await q(t,{status:r}),"completed"===r&&(0,A.trackTaskCompleted)(t,e?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},e7=async()=>{if(eS.trim())try{let t=e_.split(",").map(e=>e.trim()).filter(e=>e);if("create"===ej){let e=await N(eS.trim(),eT.trim(),t,eO);eD&&e?.id&&await q(e.id,{supportRequestId:eD})}else ew&&(await q(ew,{title:eS.trim(),description:eT.trim(),hyperlinks:t,status:eO,supportRequestId:eD||void 0}),"completed"===eO&&(0,A.trackTaskCompleted)(ew,e?.userRole||"user","cowork"));ek(!1)}catch(e){console.error("Error saving task:",e)}},e3=async e=>{try{await R(e)}catch(e){console.error("Error deleting task:",e)}},te=async(e,t)=>{t.stopPropagation();let a=er[e]?.liked||!1;try{await el(e,!a,eq||void 0)}catch(e){console.error("Error liking component:",e)}},tt=async(e,t)=>{t.stopPropagation();let a=er[e]?.saved||!1;try{await eo(e,!a,eq||void 0)}catch(e){console.error("Error saving component:",e)}},ta=async()=>{if(eK&&eX)try{await em(eK,eX,eZ,eq||""),eV(!1),ef()}catch(e){console.error("Error linking component:",e)}};return(0,t.jsxs)(r.Box,{sx:{width:"100%"},children:[(0,t.jsxs)(i.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(i.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(n.Paper,{elevation:2,sx:{p:3,height:500},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Collaborative Notes"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Copy all",children:(0,t.jsx)(o.IconButton,{onClick:()=>{e4.current?(e4.current.select(),document.execCommand("copy")):navigator.clipboard.writeText(eg)},size:"small",children:(0,t.jsx)(E.default,{})})}),(0,t.jsx)(c.Button,{variant:"outlined",size:"small",onClick:()=>{ex(""),localStorage.removeItem("workspace_markdown")},children:"Clear"})]})]}),(0,t.jsx)(l.TextField,{fullWidth:!0,multiline:!0,rows:15,variant:"outlined",placeholder:"Write your collaborative notes here...",value:eg,onChange:e=>ex(e.target.value),inputRef:e4,sx:{"& .MuiInputBase-root":{height:"100%",alignItems:"flex-start"}}})]})}),(0,t.jsx)(i.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(n.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Tasks"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Refresh",children:(0,t.jsx)(o.IconButton,{onClick:X,size:"small",children:(0,t.jsx)(z.default,{})})}),(0,t.jsx)(c.Button,{variant:"contained",startIcon:(0,t.jsx)(B.default,{}),onClick:()=>{ev("create"),eC(null),eb(""),eB(""),ez(""),e$("pending"),eM(""),ek(!0)},size:"small",children:"Add Task"})]})]}),K&&(0,t.jsx)(j.Alert,{severity:"error",sx:{mb:2},children:K}),Y&&(0,t.jsx)(j.Alert,{severity:"info",sx:{mb:2},action:(0,t.jsx)(c.Button,{size:"small",onClick:X,children:"Refresh"}),children:"Tasks may be out of date"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:[(0,t.jsx)(r.Box,{sx:{mb:2,display:"flex",justifyContent:"center"},children:(0,t.jsxs)(S.ToggleButtonGroup,{value:eA,exclusive:!0,onChange:(e,t)=>{null!==t&&(eU(t),localStorage.setItem("taskFilter",t))},size:"small","aria-label":"task filter",children:[(0,t.jsxs)(b.ToggleButton,{value:"all","aria-label":"all tasks",children:["All Tasks (",L.length,")"]}),(0,t.jsxs)(b.ToggleButton,{value:"my-tasks","aria-label":"my tasks",children:["My Tasks (",e6,")"]}),(0,t.jsxs)(b.ToggleButton,{value:"created-by-me","aria-label":"created by me",children:["Created by Me (",e8,")"]})]})}),e5.map(e=>(0,t.jsx)(w.Card,{sx:{mb:2},elevation:1,children:(0,t.jsx)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,t.jsxs)(r.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,t.jsx)(T.Checkbox,{checked:"completed"===e.status,onChange:()=>e9(e.id),disabled:V,size:"small"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,t.jsx)(s.Typography,{variant:"subtitle1",fontWeight:500,sx:{textDecoration:"completed"===e.status?"line-through":"none"},children:e.title}),e.description&&(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[(0,t.jsx)(u.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status)}),e.hyperlinks&&e.hyperlinks.length>0&&(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(P.default,{}),label:`${e.hyperlinks.length}`,size:"small",variant:"outlined"}),e.createdByName&&(0,t.jsx)(u.Chip,{icon:(0,t.jsx)($.default,{}),label:`By: ${e.createdByName}`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}}),e.assignedToName?(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(O.default,{}),label:`â†’ ${e.assignedToName}`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.7rem"}}):void 0===e.assignedTo&&(0,t.jsx)(u.Chip,{label:"Unassigned",size:"small",variant:"outlined",sx:{fontSize:"0.7rem",opacity:.6}})]})]}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5},children:[(0,t.jsx)(o.IconButton,{size:"small",onClick:()=>{ev("edit"),eC(e.id),eb(e.title),eB(e.description||""),ez(e.hyperlinks.join(", ")),e$(e.status),eM(e.supportRequestId||""),eF(e.notes||""),ek(!0)},children:(0,t.jsx)(F.default,{fontSize:"small"})}),(0,t.jsx)(o.IconButton,{size:"small",onClick:()=>e3(e.id),children:(0,t.jsx)(I.default,{fontSize:"small"})})]})]})})},e.id)),0===L.length&&!V&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:"No tasks yet. Add your first task to get started!"})}),V&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(v.CircularProgress,{size:24})})]})]})}),(0,t.jsx)(i.Grid,{item:!0,xs:12,children:(0,t.jsxs)(n.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(s.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(d.Tooltip,{title:"Refresh",children:(0,t.jsx)(o.IconButton,{onClick:()=>{eq?es(eq):ei()},size:"small",children:(0,t.jsx)(z.default,{})})}),(0,t.jsx)(c.Button,{variant:"outlined",size:"small",onClick:()=>eV(!0),disabled:!eq||0===ea.length,children:"Link to Code"})]})]}),H&&G?(0,t.jsxs)(r.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[en&&(0,t.jsx)(j.Alert,{severity:"error",sx:{mb:2},children:en}),(0,t.jsx)(r.Box,{sx:{mb:2},children:(0,t.jsxs)(g.FormControl,{fullWidth:!0,size:"small",children:[(0,t.jsx)(x.InputLabel,{children:"Select Figma File"}),(0,t.jsxs)(y.Select,{value:eq||"",label:"Select Figma File",onChange:e=>eR(e.target.value),children:[(0,t.jsx)(k.MenuItem,{value:"",children:"-- Select a file --"}),et.map(e=>(0,t.jsx)(k.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),eq&&(0,t.jsx)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:e1?(0,t.jsxs)(r.Box,{sx:{textAlign:"center",py:4},children:[(0,t.jsx)(v.CircularProgress,{size:24}),(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,t.jsxs)(i.Grid,{container:!0,spacing:2,children:[ea.map(e=>(0,t.jsx)(i.Grid,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,t.jsx)(w.Card,{elevation:1,children:(0,t.jsxs)(C.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,t.jsx)(s.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,t.jsx)(o.IconButton,{size:"small",onClick:t=>te(e.key,t),color:er[e.key]?.liked?"error":"default",children:(0,t.jsx)(W.default,{fontSize:"small"})}),(0,t.jsx)(o.IconButton,{size:"small",onClick:t=>tt(e.key,t),color:er[e.key]?.saved?"primary":"default",children:(0,t.jsx)(_.default,{fontSize:"small"})})]})]})})},e.key)),0===ea.length&&(0,t.jsx)(i.Grid,{item:!0,xs:12,children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!eq&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(s.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,t.jsx)(j.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]})})]}),(0,t.jsxs)(h.Dialog,{open:ey,onClose:()=>ek(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(m.DialogTitle,{children:"create"===ej?"Add Task":"Edit Task"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsx)(l.TextField,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,variant:"outlined",value:eS,onChange:e=>eb(e.target.value),sx:{mb:2,mt:1}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:eT,onChange:e=>eB(e.target.value),sx:{mb:2}}),"edit"===ej&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Typography,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:["Collaborative Notes ",eI&&"(Saving...)"]}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Notes (Shared Workspace)",fullWidth:!0,variant:"outlined",multiline:!0,rows:6,value:eE,onChange:e=>{var t;eF(t=e.target.value),eP(!0),eW.current&&clearTimeout(eW.current),eW.current=setTimeout(()=>{ew&&(J(ew,t),eP(!1))},500)},placeholder:"Start typing to collaborate with your team...",sx:{mb:2},helperText:"Changes auto-save. Shared with assigned user in real-time."})]}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:e_,onChange:e=>ez(e.target.value),placeholder:"https://example.com, https://another.com",sx:{mb:2}}),eL?(0,t.jsx)(v.CircularProgress,{size:24}):eH.length>0&&(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,t.jsx)(x.InputLabel,{children:"Link to Support Request (Optional)"}),(0,t.jsxs)(y.Select,{value:eD,label:"Link to Support Request (Optional)",onChange:e=>eM(e.target.value),children:[(0,t.jsx)(k.MenuItem,{value:"",children:"None"}),eH.map(e=>(0,t.jsxs)(k.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",children:[(0,t.jsx)(x.InputLabel,{children:"Status"}),(0,t.jsxs)(y.Select,{value:eO,label:"Status",onChange:e=>e$(e.target.value),children:[(0,t.jsx)(k.MenuItem,{value:"pending",children:"Pending"}),(0,t.jsx)(k.MenuItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(k.MenuItem,{value:"completed",children:"Completed"})]})]})]}),(0,t.jsxs)(p.DialogActions,{children:[(0,t.jsx)(c.Button,{onClick:()=>ek(!1),children:"Cancel"}),(0,t.jsx)(c.Button,{onClick:e7,variant:"contained",disabled:!eS.trim()||V||Q,children:"create"===ej?"Add":"Save"})]})]}),(0,t.jsxs)(h.Dialog,{open:eJ,onClose:()=>eV(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(m.DialogTitle,{children:"Link Figma Component to Code"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsxs)(g.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,t.jsx)(x.InputLabel,{children:"Figma Component"}),(0,t.jsx)(y.Select,{value:eK,label:"Figma Component",onChange:e=>eQ(e.target.value),children:ea.map(e=>(0,t.jsx)(k.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:eX,onChange:e=>eY(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:eZ,onChange:e=>e0(e.target.value),placeholder:"Button"})]}),(0,t.jsxs)(p.DialogActions,{children:[(0,t.jsx)(c.Button,{onClick:()=>eV(!1),children:"Cancel"}),(0,t.jsx)(c.Button,{onClick:ta,variant:"contained",disabled:!eK||!eX,children:"Link"})]})]})]})}e.s(["default",()=>L],27245)},27796,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(e.r(64800)),i=e.r(44855);a.default=(0,n.default)((0,i.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")}]);