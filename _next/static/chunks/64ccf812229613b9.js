(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62438,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},19391,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},12214,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},26712,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},73208,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)([(0,a.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),(0,a.jsx)("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBookOutlined")},62696,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1m-2-3h1v3h-1zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1zm0-2h1v1h-1z"}),"PictureAsPdfOutlined")},59904,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline")},92080,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf")},22617,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9zm6.82 6L12 12.72 5.18 9 12 5.28zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73z"}),"SchoolOutlined")},13109,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList")},67453,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"m22 10-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99zm-7-4.5 5.5 5.5H15z"}),"Note")},75912,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build")},25449,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},31862,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},28097,(e,t,i)=>{"use strict";var n=e.r(91074);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(64800)),a=e.r(44855);i.default=(0,r.default)((0,a.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},11500,e=>{"use strict";var t,i,n=e.i(44855),r=e.i(20887),a=e.i(21504),l=e.i(58891),s=e.i(83344),o=e.i(74614),c=e.i(32327),d=e.i(54385),u=e.i(65790),h=e.i(15915),p=e.i(72204),x=e.i(83378),m=e.i(70095),y=e.i(18394),g=e.i(62438),j=e.i(48177),v=e.i(69326),f=e.i(26849),b=e.i(19391),C=e.i(35134),S=e.i(33948),w=e.i(18295),T=e.i(92279),k=e.i(47379),P=e.i(75557),I=e.i(92378),A=e.i(15708),B=e.i(83161),E=e.i(47617),W=e.i(39972),M=e.i(20161),F=e.i(9109),z=e.i(13654);function L({open:e,onClose:t}){let i=(0,s.useRouter)(),[r,a]=(0,l.useState)({name:"",email:"",company:"",phone:"",tier:"",notes:""}),[o,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!1),p=e=>t=>{a(i=>({...i,[e]:t.target.value})),c(null)},x=async()=>{if(!r.name||!r.email||!r.company)return void c("Please fill in all required fields (Name, Email, Company)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))return void c("Please enter a valid email address");u(!0),c(null);try{let e=(0,z.getBackendUrl)(),n=await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:r.name,email:r.email,company:r.company,phone:r.phone||void 0,tier:r.tier||void 0,notes:r.notes||void 0,status:"pending"})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create client"}));throw Error(e.error||"Failed to create client")}if(t(),r.tier){let e=new URLSearchParams({name:r.name,email:r.email,company:r.company,tier:r.tier});i.push(`/demo?${e.toString()}`)}else window.location.reload();a({name:"",email:"",company:"",phone:"",tier:"",notes:""})}catch(e){c(e.message||"Failed to add client. Please try again.")}finally{u(!1)}},m=()=>{a({name:"",email:"",company:"",phone:"",tier:"",notes:""}),c(null),t()};return(0,n.jsxs)(S.Dialog,{open:e,onClose:m,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(w.DialogTitle,{children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:700,children:"Add New Client"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Add a client lead and send them to the sign-up page"})]}),(0,n.jsx)(T.DialogContent,{children:(0,n.jsxs)(A.Stack,{spacing:3,sx:{mt:1},children:[o&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>c(null),children:o}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Client Name",required:!0,value:r.name,onChange:p("name"),placeholder:"John Doe"}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Email Address",type:"email",required:!0,value:r.email,onChange:p("email"),placeholder:"john@company.com"}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Company Name",required:!0,value:r.company,onChange:p("company"),placeholder:"Company Inc."}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Phone Number",type:"tel",value:r.phone,onChange:p("phone"),placeholder:"+1 (555) 123-4567"}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Recommended Tier"}),(0,n.jsxs)(W.Select,{value:r.tier,label:"Recommended Tier",onChange:e=>{a(t=>({...t,tier:e.target.value}))},children:[(0,n.jsx)(M.MenuItem,{value:"",children:"None"}),(0,n.jsx)(M.MenuItem,{value:"starter",children:"Starter"}),(0,n.jsx)(M.MenuItem,{value:"professional",children:"Professional"}),(0,n.jsx)(M.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:r.notes,onChange:p("notes"),placeholder:"Any additional information about this client..."})]})}),(0,n.jsxs)(k.DialogActions,{sx:{p:2},children:[(0,n.jsx)(P.Button,{onClick:m,children:"Cancel"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:x,disabled:d,children:d?"Sending...":"Send to Sign-Up"})]})]})}var O=e.i(37025),R=e.i(54704),D=e.i(45680),N=e.i(24918);function $(){let[e,t]=(0,l.useState)("all"),[i,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!0),[p,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();r(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}finally{d(!1)}})()},[]);let m=async()=>{s(!0);try{await new Promise(e=>setTimeout(e,2e3)),x(new Date)}catch(e){console.error("Failed to sync analytics:",e)}finally{s(!1)}};return(0,n.jsxs)(o.Box,{children:[(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Analytics & Activity"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Track client usage, activity, and system analytics with Google Analytics integration"})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(P.Button,{variant:"outlined",startIcon:(0,n.jsx)(N.default,{}),onClick:m,disabled:a,children:a?(0,n.jsx)(O.CircularProgress,{size:20}):"Sync Analytics"}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(D.default,{}),onClick:()=>{console.log("Exporting analytics report...")},children:"Export Report"})]})]}),p&&(0,n.jsxs)(F.Alert,{severity:"success",sx:{mb:3},children:["Last synced: ",p.toLocaleString()]}),(0,n.jsxs)(F.Alert,{severity:"info",sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"body2",fontWeight:600,gutterBottom:!0,children:"Google Analytics Integration"}),(0,n.jsx)(h.Typography,{variant:"body2",children:"Connect your Google Analytics account to import project data for clients. Analytics data will be automatically synced and displayed here."}),(0,n.jsx)(P.Button,{size:"small",variant:"outlined",sx:{mt:1},onClick:()=>{console.log("Connect Google Analytics")},children:"Connect Google Analytics"})]}),(0,n.jsx)(u.Paper,{sx:{p:2,mb:3},children:(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Select Client"}),(0,n.jsxs)(W.Select,{value:e,label:"Select Client",onChange:e=>t(e.target.value),disabled:c,children:[(0,n.jsx)(M.MenuItem,{value:"all",children:"All Clients"}),i.map(e=>(0,n.jsx)(M.MenuItem,{value:e.id,children:e.company||e.name},e.id))]})]})}),(0,n.jsxs)(R.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(R.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"primary.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Total Sessions"})]})}),(0,n.jsx)(R.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"success.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Active Users"})]})}),(0,n.jsx)(R.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"warning.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Page Views"})]})})]}),(0,n.jsxs)(u.Paper,{sx:{p:3,mt:3},children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Recent Activity"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Activity logs will appear here once Google Analytics is connected and synced."})]})]})}var q=e.i(1051),U=e.i(94367),_=e.i(87225),H=e.i(33932),V=e.i(63104),G=e.i(7656),J=e.i(50723),Y=e.i(86012),K=e.i(63640),Q=e.i(34699),X=e.i(12214),Z=e.i(95532),ee=e.i(26712),et=e.i(92297);function ei(){let[e,t]=(0,l.useState)([]),[i,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null),[v,f]=(0,l.useState)(null),[b,C]=(0,l.useState)(null),[L,O]=(0,l.useState)(null),[R,D]=(0,l.useState)(null),[N,$]=(0,l.useState)({client:"",subject:"",description:"",priority:"medium"}),[ei,en]=(0,l.useState)({subject:"",description:"",priority:"medium",status:"open"});(0,l.useEffect)(()=>{ea(),er()},[]);let er=async()=>{try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();r(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},ea=async()=>{s(!0),d(null);try{let e=(0,z.getBackendUrl)(),i=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!i.ok)throw Error("Failed to fetch support requests");let n=await i.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),d(e.message||"Failed to load support requests"),t([])}finally{s(!1)}},el=async()=>{if(!v||!ei.subject||!ei.description)return void d("Subject and description are required");s(!0),d(null);try{let i=(0,z.getBackendUrl)(),n=await fetch(`${i}/api/creative/support-requests/${v.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:ei.subject,description:ei.description,priority:ei.priority,status:ei.status})});if(!n.ok)throw Error("Failed to update support request");let r=await n.json();t(e.map(e=>e.id===v.id?r:e)),f(null),en({subject:"",description:"",priority:"medium",status:"open"}),y(!1)}catch(e){console.error("Error updating support request:",e),d(e.message||"Failed to update support request")}finally{s(!1)}},es=async()=>{if(!N.subject||!N.description)return void d("Subject and description are required");s(!0),d(null);try{let i=(0,z.getBackendUrl)(),n=await fetch(`${i}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:b?b.company||b.name:N.client,client_id:b?.id,subject:N.subject,description:N.description,priority:N.priority})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let r=await n.json();t([r,...e]),x("Support request created successfully"),$({client:"",subject:"",description:"",priority:"medium"}),C(null),y(!1),setTimeout(()=>x(null),3e3)}catch(e){console.error("Error creating support request:",e),d(e.message||"Failed to create support request")}finally{s(!1)}},eo=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ec=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,n.jsxs)(o.Box,{children:[p&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>x(null),sx:{mb:2},children:p}),c&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>d(null),sx:{mb:2},children:c}),(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(Q.default,{}),onClick:()=>{j(null),y(!0)},children:"New Request"})]}),(0,n.jsx)(V.TableContainer,{component:u.Paper,children:(0,n.jsxs)(U.Table,{children:[(0,n.jsx)(G.TableHead,{children:(0,n.jsxs)(J.TableRow,{children:[(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,n.jsx)(_.TableBody,{children:0===e.length?(0,n.jsx)(J.TableRow,{children:(0,n.jsx)(H.TableCell,{colSpan:6,align:"center",sx:{py:4},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,n.jsxs)(J.TableRow,{hover:!0,children:[(0,n.jsx)(H.TableCell,{children:e.client}),(0,n.jsx)(H.TableCell,{children:e.subject}),(0,n.jsx)(H.TableCell,{children:(0,n.jsx)(q.Chip,{label:e.status,size:"small",color:eo(e.status)})}),(0,n.jsx)(H.TableCell,{children:(0,n.jsx)(q.Chip,{label:e.priority,size:"small",color:ec(e.priority)})}),(0,n.jsx)(H.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)(H.TableCell,{align:"right",children:(0,n.jsx)(Y.IconButton,{size:"small",onClick:t=>{var i;return i=e.id,void(t.stopPropagation(),O(t.currentTarget),D(i))},children:(0,n.jsx)(ee.default,{})})})]},e.id))})]})}),(0,n.jsxs)(et.Menu,{anchorEl:L,open:!!L,onClose:()=>{O(null),D(null)},children:[(0,n.jsxs)(M.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===R);t&&(j(t),f(null),y(!0))},children:[(0,n.jsx)(X.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,n.jsxs)(M.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===R);t&&(f(t),j(null),en({subject:t.subject,description:t.description,priority:t.priority,status:t.status}),y(!0),O(null),D(null))},children:[(0,n.jsx)(Z.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,n.jsxs)(S.Dialog,{open:m,onClose:()=>{y(!1),j(null),f(null),C(null),$({client:"",subject:"",description:"",priority:"medium"}),en({subject:"",description:"",priority:"medium",status:"open"})},maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(w.DialogTitle,{children:g?"Support Request Details":v?"Edit Support Request":"Create Support Request"}),(0,n.jsx)(T.DialogContent,{children:v?(0,n.jsxs)(A.Stack,{spacing:3,sx:{mt:1},children:[(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Subject",value:ei.subject,onChange:e=>en({...ei,subject:e.target.value})}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:ei.description,onChange:e=>en({...ei,description:e.target.value})}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Priority"}),(0,n.jsxs)(W.Select,{value:ei.priority,label:"Priority",onChange:e=>en({...ei,priority:e.target.value}),children:[(0,n.jsx)(M.MenuItem,{value:"low",children:"Low"}),(0,n.jsx)(M.MenuItem,{value:"medium",children:"Medium"}),(0,n.jsx)(M.MenuItem,{value:"high",children:"High"})]})]}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Status"}),(0,n.jsxs)(W.Select,{value:ei.status,label:"Status",onChange:e=>en({...ei,status:e.target.value}),children:[(0,n.jsx)(M.MenuItem,{value:"open",children:"Open"}),(0,n.jsx)(M.MenuItem,{value:"in-progress",children:"In Progress"}),(0,n.jsx)(M.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):g?(0,n.jsx)(o.Box,{children:(0,n.jsxs)(A.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.client})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.subject})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.description})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,n.jsx)(q.Chip,{label:g.status,color:eo(g.status)})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,n.jsx)(q.Chip,{label:g.priority,color:ec(g.priority)})]})]})]})}):(0,n.jsxs)(A.Stack,{spacing:3,sx:{mt:1},children:[(0,n.jsx)(K.Autocomplete,{fullWidth:!0,options:i,getOptionLabel:e=>e.company||e.name||"",value:b,onChange:(e,t)=>{C(t),$({...N,client:t?t.company||t.name:""})},renderInput:e=>(0,n.jsx)(I.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,n.jsx)(o.Box,{component:"li",...e,children:(0,n.jsxs)(A.Stack,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:t.company||t.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Subject",value:N.subject,onChange:e=>$({...N,subject:e.target.value})}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:N.description,onChange:e=>$({...N,description:e.target.value})}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Priority"}),(0,n.jsxs)(W.Select,{value:N.priority,label:"Priority",onChange:e=>$({...N,priority:e.target.value}),children:[(0,n.jsx)(M.MenuItem,{value:"low",children:"Low"}),(0,n.jsx)(M.MenuItem,{value:"medium",children:"Medium"}),(0,n.jsx)(M.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:()=>{y(!1),j(null),f(null),C(null),$({client:"",subject:"",description:"",priority:"medium"}),en({subject:"",description:"",priority:"medium",status:"open"})},children:g?"Close":"Cancel"}),v?(0,n.jsx)(P.Button,{variant:"contained",onClick:el,children:"Update Request"}):!g&&(0,n.jsx)(P.Button,{variant:"contained",onClick:es,children:"Create Request"})]})]})]})}var en=e.i(45162),er=e.i(3430),ea=e.i(62555),el=e.i(98721),es=e.i(72695),eo=e.i(7065);function ec({title:e,value:t,subtitle:i,progress:r,icon:a,color:l="primary"}){return(0,x.useTheme)(),(0,n.jsx)(en.Card,{className:"dashboard-card metric-card",sx:{height:"100%"},children:(0,n.jsxs)(er.CardContent,{sx:{p:3},children:[(0,n.jsxs)(o.Box,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[(0,n.jsxs)(o.Box,{sx:{flex:1},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:e}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,sx:{mb:1},children:t}),i&&(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:i})]}),(0,n.jsx)(o.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",bgcolor:`${l}.main`,color:"white"},children:a})]}),void 0!==r&&(0,n.jsxs)(o.Box,{sx:{mt:2},children:[(0,n.jsx)(ea.LinearProgress,{variant:"determinate",value:r,sx:{height:8,borderRadius:4,bgcolor:"action.disabledBackground","& .MuiLinearProgress-bar":{borderRadius:4}}}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[r,"% complete"]})]})]})})}function ed({metrics:e}){let t={clients:0,projects:0,tasks:0,completion:0,...e};return(0,n.jsxs)(o.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2,mb:3},children:[(0,n.jsx)(ec,{title:"Active Clients",value:t.clients||0,subtitle:"This month",icon:(0,n.jsx)(g.default,{}),color:"primary"}),(0,n.jsx)(ec,{title:"Projects",value:t.projects||0,subtitle:"In progress",icon:(0,n.jsx)(el.default,{}),color:"info"}),(0,n.jsx)(ec,{title:"Tasks",value:t.tasks||0,subtitle:"Completed today",icon:(0,n.jsx)(es.default,{}),color:"success"}),(0,n.jsx)(ec,{title:"Progress",value:`${t.completion||0}%`,subtitle:"Overall completion",progress:t.completion||0,icon:(0,n.jsx)(eo.default,{}),color:"warning"})]})}var eu=e.i(62992),eh=e.i(10251),ep=e.i(73208),ex=e.i(62696),em=e.i(59904),ey=e.i(92080),eg=e.i(22617),ej=e.i(53251),ev=e.i(13109),ef=e.i(10600),eb=e.i(67453),eC=e.i(75912);e.i(96335);var eS=e.i(80622),ew=e.i(84933),eT=e.i(81706),ek=e.i(15127),eP=e.i(96861),eI=e.i(95262),eA=e.i(51480),eB=e.i(13740);function eE(e){return(0,eB.default)("MuiStepper",e)}(0,eA.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var eW=e.i(18420);let eM=l.createContext({}),eF=l.createContext({});function ez(e){return(0,eB.default)("MuiStepConnector",e)}(0,eA.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let eL=["className"],eO=(0,eI.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.completed&&t.completed]}})(({ownerState:e})=>(0,ew.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),eR=(0,eI.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.line,t[`line${(0,eW.default)(i.orientation)}`]]}})(({ownerState:e,theme:t})=>{let i="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,ew.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:i},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),eD=l.forwardRef(function(e,t){let i=(0,eP.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:r}=i,a=(0,eS.default)(i,eL),{alternativeLabel:s,orientation:o="horizontal"}=l.useContext(eM),{active:c,disabled:d,completed:u}=l.useContext(eF),h=(0,ew.default)({},i,{alternativeLabel:s,orientation:o,active:c,completed:u,disabled:d}),p=(e=>{let{classes:t,orientation:i,alternativeLabel:n,active:r,completed:a,disabled:l}=e,s={root:["root",i,n&&"alternativeLabel",r&&"active",a&&"completed",l&&"disabled"],line:["line",`line${(0,eW.default)(i)}`]};return(0,ek.default)(s,ez,t)})(h);return(0,n.jsx)(eO,(0,ew.default)({className:(0,eT.default)(p.root,r),ref:t,ownerState:h},a,{children:(0,n.jsx)(eR,{className:p.line,ownerState:h})}))}),eN=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],e$=(0,eI.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,ew.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),eq=(0,n.jsx)(eD,{}),eU=l.forwardRef(function(e,t){let i=(0,eP.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:a=!1,children:s,className:o,component:c="div",connector:d=eq,nonLinear:u=!1,orientation:h="horizontal"}=i,p=(0,eS.default)(i,eN),x=(0,ew.default)({},i,{nonLinear:u,alternativeLabel:a,orientation:h,component:c}),m=(e=>{let{orientation:t,nonLinear:i,alternativeLabel:n,classes:r}=e;return(0,ek.default)({root:["root",t,i&&"nonLinear",n&&"alternativeLabel"]},eE,r)})(x),y=l.Children.toArray(s).filter(Boolean),g=y.map((e,t)=>l.cloneElement(e,(0,ew.default)({index:t,last:t+1===y.length},e.props))),j=l.useMemo(()=>({activeStep:r,alternativeLabel:a,connector:d,nonLinear:u,orientation:h}),[r,a,d,u,h]);return(0,n.jsx)(eM.Provider,{value:j,children:(0,n.jsx)(e$,(0,ew.default)({as:c,ownerState:x,className:(0,eT.default)(m.root,o),ref:t},p,{children:g}))})});function e_(e){return(0,eB.default)("MuiStep",e)}(0,eA.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let eH=["active","children","className","component","completed","disabled","expanded","index","last"],eV=(0,eI.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.completed&&t.completed]}})(({ownerState:e})=>(0,ew.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),eG=l.forwardRef(function(e,t){let i=(0,eP.useDefaultProps)({props:e,name:"MuiStep"}),{active:r,children:a,className:s,component:o="div",completed:c,disabled:d,expanded:u=!1,index:h,last:p}=i,x=(0,eS.default)(i,eH),{activeStep:m,connector:y,alternativeLabel:g,orientation:j,nonLinear:v}=l.useContext(eM),[f=!1,b=!1,C=!1]=[r,c,d];m===h?f=void 0===r||r:!v&&m>h?b=void 0===c||c:!v&&m<h&&(C=void 0===d||d);let S=l.useMemo(()=>({index:h,last:p,expanded:u,icon:h+1,active:f,completed:b,disabled:C}),[h,p,u,f,b,C]),w=(0,ew.default)({},i,{active:f,orientation:j,alternativeLabel:g,completed:b,disabled:C,expanded:u,component:o}),T=(e=>{let{classes:t,orientation:i,alternativeLabel:n,completed:r}=e;return(0,ek.default)({root:["root",i,n&&"alternativeLabel",r&&"completed"]},e_,t)})(w),k=(0,n.jsxs)(eV,(0,ew.default)({as:o,className:(0,eT.default)(T.root,s),ref:t,ownerState:w},x,{children:[y&&g&&0!==h?y:null,a]}));return(0,n.jsx)(eF.Provider,{value:S,children:y&&!g&&0!==h?(0,n.jsxs)(l.Fragment,{children:[y,k]}):k})});var eJ=e.i(62731);let eY=(0,eJ.default)((0,n.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),eK=(0,eJ.default)((0,n.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var eQ=e.i(48040);function eX(e){return(0,eB.default)("MuiStepIcon",e)}let eZ=(0,eA.default)("MuiStepIcon",["root","active","completed","error","text"]),e0=["active","className","completed","error","icon"],e1=(0,eI.default)(eQ.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${eZ.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${eZ.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${eZ.error}`]:{color:(e.vars||e).palette.error.main}})),e2=(0,eI.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),e5=l.forwardRef(function(e,i){let r=(0,eP.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:a=!1,className:l,completed:s=!1,error:o=!1,icon:c}=r,d=(0,eS.default)(r,e0),u=(0,ew.default)({},r,{active:a,completed:s,error:o}),h=(e=>{let{classes:t,active:i,completed:n,error:r}=e;return(0,ek.default)({root:["root",i&&"active",n&&"completed",r&&"error"],text:["text"]},eX,t)})(u);if("number"==typeof c||"string"==typeof c){let e=(0,eT.default)(l,h.root);return o?(0,n.jsx)(e1,(0,ew.default)({as:eK,className:e,ref:i,ownerState:u},d)):s?(0,n.jsx)(e1,(0,ew.default)({as:eY,className:e,ref:i,ownerState:u},d)):(0,n.jsxs)(e1,(0,ew.default)({className:e,ref:i,ownerState:u},d,{children:[t||(t=(0,n.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,n.jsx)(e2,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:c})]}))}return c});function e4(e){return(0,eB.default)("MuiStepLabel",e)}let e3=(0,eA.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),e6=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],e9=(0,eI.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation]]}})(({ownerState:e})=>(0,ew.default)({display:"flex",alignItems:"center",[`&.${e3.alternativeLabel}`]:{flexDirection:"column"},[`&.${e3.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),e7=(0,eI.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,ew.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${e3.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${e3.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${e3.alternativeLabel}`]:{marginTop:16},[`&.${e3.error}`]:{color:(e.vars||e).palette.error.main}})),e8=(0,eI.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${e3.alternativeLabel}`]:{paddingRight:0}})),te=(0,eI.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${e3.alternativeLabel}`]:{textAlign:"center"}})),tt=l.forwardRef(function(e,t){var i;let r=(0,eP.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:a,className:s,componentsProps:o={},error:c=!1,icon:d,optional:u,slotProps:h={},StepIconComponent:p,StepIconProps:x}=r,m=(0,eS.default)(r,e6),{alternativeLabel:y,orientation:g}=l.useContext(eM),{active:j,disabled:v,completed:f,icon:b}=l.useContext(eF),C=d||b,S=p;C&&!S&&(S=e5);let w=(0,ew.default)({},r,{active:j,alternativeLabel:y,completed:f,disabled:v,error:c,orientation:g}),T=(e=>{let{classes:t,orientation:i,active:n,completed:r,error:a,disabled:l,alternativeLabel:s}=e;return(0,ek.default)({root:["root",i,a&&"error",l&&"disabled",s&&"alternativeLabel"],label:["label",n&&"active",r&&"completed",a&&"error",l&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",r&&"completed",a&&"error",l&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},e4,t)})(w),k=null!=(i=h.label)?i:o.label;return(0,n.jsxs)(e9,(0,ew.default)({className:(0,eT.default)(T.root,s),ref:t,ownerState:w},m,{children:[C||S?(0,n.jsx)(e8,{className:T.iconContainer,ownerState:w,children:(0,n.jsx)(S,(0,ew.default)({completed:f,active:j,error:c,icon:C},x))}):null,(0,n.jsxs)(te,{className:T.labelContainer,ownerState:w,children:[a?(0,n.jsx)(e7,(0,ew.default)({ownerState:w},k,{className:(0,eT.default)(T.label,null==k?void 0:k.className),children:a})):null,u]})]}))});tt.muiName="StepLabel";var ti=e.i(35153);function tn(e){return(0,eB.default)("MuiStepContent",e)}(0,eA.default)("MuiStepContent",["root","last","transition"]);let tr=["children","className","TransitionComponent","transitionDuration","TransitionProps"],ta=(0,eI.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.last&&t.last]}})(({ownerState:e,theme:t})=>(0,ew.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),tl=(0,eI.default)(ti.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),ts=l.forwardRef(function(e,t){let i=(0,eP.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:r,className:a,TransitionComponent:s=ti.default,transitionDuration:o="auto",TransitionProps:c}=i,d=(0,eS.default)(i,tr),{orientation:u}=l.useContext(eM),{active:h,last:p,expanded:x}=l.useContext(eF),m=(0,ew.default)({},i,{last:p}),y=(e=>{let{classes:t,last:i}=e;return(0,ek.default)({root:["root",i&&"last"],transition:["transition"]},tn,t)})(m),g=o;return"auto"!==o||s.muiSupportAuto||(g=void 0),(0,n.jsx)(ta,(0,ew.default)({className:(0,eT.default)(y.root,a),ref:t,ownerState:m},d,{children:(0,n.jsx)(tl,(0,ew.default)({as:s,in:h||x,className:y.transition,ownerState:m,timeout:g,unmountOnExit:!0},c,{children:r}))}))});var to=e.i(92487),tc=e.i(94660),td=e.i(43884),tu=e.i(29360),th=e.i(56553),tp=e.i(52377),tx=e.i(11425);function tm(){let[e,t]=(0,l.useState)(0),[i,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[m,y]=(0,l.useState)(""),[g,j]=(0,l.useState)(!1),[v,f]=(0,l.useState)(null),[b,C]=(0,l.useState)(!1),[B,E]=(0,l.useState)(!1),W=["Guide","Quiz","SEO Audit","Generate Script"],M={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with value—like a free SEO audit or actionable insights—you immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:`• Personalization is non-negotiable
• Focus on their problems, not your solutions
• Use data and insights, not flattery
• Make it easy for them to say yes
• Follow up with more value, not pressure`}]},L=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],O=()=>{1!==e||L.every(e=>i.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||a.trim()?t(e=>Math.min(e+1,W.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},R=()=>{t(e=>Math.max(e-1,0))},N=async()=>{j(!0),y(""),f(null);try{let e=(0,z.getBackendUrl)(),t=i.map(e=>{let t=L.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),n=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${c||"Not provided"}
- Website: ${a}
- Industry: ${p||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,r=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:n}]})});if(!r.ok)throw Error("Failed to generate script");let l=await r.json();y(l.text);try{let e=l.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let i=JSON.parse(e);f({script:i.script||l.text,seoAudit:i.seoAudit||"SEO audit details will be generated.",valueProposition:i.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(i.nextSteps)?i.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){f({script:l.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}C(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{j(!1)}};return(0,n.jsx)(o.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,n.jsxs)(A.Stack,{spacing:3,children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(q.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,n.jsx)(tu.default,{}),sx:{fontWeight:700,mb:2}}),(0,n.jsx)(h.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,n.jsx)(F.Alert,{severity:"info",sx:{mb:2},children:(0,n.jsxs)(h.Typography,{variant:"body2",children:[(0,n.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,n.jsx)(P.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,n.jsx)(ej.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,n.jsx)(u.Paper,{sx:{p:3},children:(0,n.jsxs)(eU,{activeStep:e,orientation:"vertical",children:[(0,n.jsxs)(eG,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,n.jsxs)(ts,{children:[(0,n.jsxs)(o.Box,{sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:M.title}),(0,n.jsx)(A.Stack,{spacing:3,children:M.sections.map((e,t)=>(0,n.jsxs)(to.Accordion,{defaultExpanded:0===t,children:[(0,n.jsx)(tc.AccordionSummary,{expandIcon:(0,n.jsx)(tx.default,{}),children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,n.jsx)(td.AccordionDetails,{children:(0,n.jsx)(h.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,n.jsx)(P.Button,{variant:"contained",onClick:O,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,n.jsxs)(eG,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,n.jsxs)(ts,{children:[(0,n.jsxs)(A.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),L.map(e=>{let t=i.find(t=>t.questionId===e.id);return(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,n.jsx)(I.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var i,n;return i=e.id,n=t.target.value,void r(e=>e.find(e=>e.questionId===i)?e.map(e=>e.questionId===i?{...e,answer:n}:e):[...e,{questionId:i,answer:n}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(P.Button,{onClick:R,children:"Back"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:O,children:"Continue to SEO Audit"})]})]})]}),(0,n.jsxs)(eG,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,n.jsxs)(ts,{children:[(0,n.jsxs)(A.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Client Name",value:c,onChange:e=>d(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Client Website URL",value:a,onChange:e=>s(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Industry",value:p,onChange:e=>x(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(P.Button,{onClick:R,children:"Back"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:O,children:"Generate Script"})]})]})]}),(0,n.jsxs)(eG,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,n.jsxs)(ts,{children:[(0,n.jsxs)(A.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,n.jsxs)(A.Stack,{spacing:1,children:[(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Client:"})," ",c||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Website:"})," ",a||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Industry:"})," ",p||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Quiz Answers:"})," ",i.length," / ",L.length]})]})]})})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(P.Button,{onClick:R,children:"Back"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:N,disabled:g,startIcon:(0,n.jsx)(th.default,{}),size:"large",children:g?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,n.jsxs)(S.Dialog,{open:b,onClose:()=>C(!1),maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(w.DialogTitle,{children:(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,children:[(0,n.jsx)(Y.IconButton,{onClick:()=>{v&&(navigator.clipboard.writeText(v.script),E(!0),setTimeout(()=>E(!1),2e3))},title:"Copy Script",children:(0,n.jsx)(tp.default,{})}),(0,n.jsx)(Y.IconButton,{onClick:()=>{if(v){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${c||"N/A"}
Website: ${a}

SCRIPT:
${v.script}

SEO AUDIT SUMMARY:
${v.seoAudit}

VALUE PROPOSITION:
${v.valueProposition}

NEXT STEPS:
${v.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`seo-prospecting-script-${c||"client"}-${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,n.jsx)(D.default,{})})]})]})}),(0,n.jsx)(T.DialogContent,{dividers:!0,children:v&&(0,n.jsxs)(A.Stack,{spacing:3,children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:v.script})})]}),(0,n.jsx)(eh.Divider,{}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:v.seoAudit})})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:v.valueProposition})})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,n.jsx)(A.Stack,{spacing:1,children:v.nextSteps.map((e,t)=>(0,n.jsx)(q.Chip,{label:`${t+1}. ${e}`,icon:(0,n.jsx)(es.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:()=>C(!1),children:"Close"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:()=>{C(!1),t(0),f(null),r([]),s(""),d(""),x("")},children:"Create Another Script"})]})]}),B&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>E(!1),children:"Script copied to clipboard!"})]})})}let ty=[{id:"video-1",title:"Learning Hub Video Classes",description:"A comprehensive collection of video classes covering various topics and learning paths.",instructor:"iShareHow",duration:"Playlist",level:"Beginner",category:"General",videoUrl:"https://www.youtube.com/embed/videoseries?list=PLwyVPJ9qE2K-g5CQgIYtOfnrfl7ebWRkp",uploadDate:new Date().toISOString().split("T")[0]},{id:"course-1",title:"Introduction to Ai Development",description:"Learn the fundamentals of AI development including machine learning, neural networks, and data processing basics.",instructor:"iShareHow",duration:"Self Paced",level:"Beginner",category:"AI Development",videoUrl:"https://www.youtube.com/playlist?list=PLwyVPJ9qE2K8vj0Wfb4rxAmZntkysHPlE",uploadDate:new Date().toISOString().split("T")[0]}],tg=[{id:"pdf-1",title:"Complete JavaScript Guide",description:"Comprehensive guide covering JavaScript fundamentals, ES6+, and modern best practices.",category:"Programming",url:"/resources/javascript-guide.pdf",fileSize:"2.4 MB",pages:145,uploadDate:"2024-01-15"}],tj=({content:e,onClick:t})=>(0,n.jsxs)(en.Card,{variant:"outlined",onClick:t,sx:{borderRadius:3,height:"100%",p:3,borderColor:"divider",display:"flex",flexDirection:"column",gap:2,transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[e.videoUrl?(0,n.jsx)(o.Box,{sx:{position:"relative",width:"100%",paddingTop:"56.25%",borderRadius:2,overflow:"hidden",bgcolor:"grey.200"},children:(0,n.jsx)("iframe",{src:e.videoUrl,title:e.title,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):e.thumbnail?(0,n.jsx)(o.Box,{component:"img",src:e.thumbnail,alt:e.title,sx:{width:"100%",height:160,objectFit:"cover",borderRadius:2}}):(0,n.jsx)(o.Box,{sx:{width:"100%",height:160,borderRadius:2,bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(em.default,{sx:{fontSize:64,color:"primary.main"}})}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(q.Chip,{label:e.level,size:"small",color:"Advanced"===e.level?"secondary":"Intermediate"===e.level?"default":"primary",sx:{fontWeight:600}}),e.lessons&&(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",children:[e.lessons," lessons"]})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:e.title}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.description}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:["By ",e.instructor," · ",e.duration]})]}),(0,n.jsx)(eh.Divider,{}),(0,n.jsx)(P.Button,{variant:"contained",color:"primary",startIcon:(0,n.jsx)(em.default,{}),sx:{textTransform:"none",fontWeight:700,mt:"auto"},onClick:e=>{e.stopPropagation(),t()},children:e.videoUrl?"Watch Class":"Start Course"})]}),tv=({pdf:e})=>(0,n.jsxs)(en.Card,{variant:"outlined",sx:{borderRadius:3,p:3,borderColor:"divider",display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:2}},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,sx:{flexGrow:1},children:[(0,n.jsx)(eu.Avatar,{variant:"rounded",sx:{bgcolor:"error.light",color:"error.main",width:56,height:56},children:(0,n.jsx)(ey.default,{fontSize:"large"})}),(0,n.jsxs)(A.Stack,{spacing:1,sx:{flexGrow:1},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(q.Chip,{label:e.category,size:"small",color:"primary",sx:{fontWeight:600}}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.fileSize}),e.pages&&(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:["· ",e.pages," pages"]})]}),(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:e.title}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:e.description}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:["Uploaded ",new Date(e.uploadDate).toLocaleDateString()]})]})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,children:[(0,n.jsx)(P.Button,{href:e.url,target:"_blank",rel:"noopener noreferrer",variant:"outlined",color:"primary",startIcon:(0,n.jsx)(ej.default,{}),sx:{textTransform:"none",fontWeight:700},children:"View"}),(0,n.jsx)(P.Button,{href:e.url,download:!0,variant:"outlined",color:"primary",startIcon:(0,n.jsx)(D.default,{}),sx:{textTransform:"none",fontWeight:700},children:"Download"})]})]});function tf(e){let{children:t,value:i,index:r,...a}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:i!==r,id:`learning-tabpanel-${r}`,"aria-labelledby":`learning-tab-${r}`,...a,children:i===r&&(0,n.jsx)(o.Box,{sx:{pt:3},children:t})})}function tb(){let e=(0,s.useRouter)(),[t,i]=(0,l.useState)(0),[r,a]=(0,l.useState)(null),[p,x]=(0,l.useState)({}),m={courses:0,pdfs:1,tools:2};(0,l.useEffect)(()=>{let t=e.query.subtab;t&&void 0!==m[t]&&i(m[t])},[e.query.subtab]),(0,l.useEffect)(()=>{let e=localStorage.getItem("learningHubNotes");if(e)try{x(JSON.parse(e))}catch(e){console.error("Failed to load notes:",e)}},[]),(0,l.useEffect)(()=>{(Object.keys(p).length>0||localStorage.getItem("learningHubNotes"))&&localStorage.setItem("learningHubNotes",JSON.stringify(p))},[p]);let y=()=>{a(null)};return(0,n.jsxs)(o.Box,{sx:{height:"100%",overflow:"auto",p:{xs:2,sm:3}},children:[(0,n.jsxs)(A.Stack,{spacing:4,children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(q.Chip,{label:"Learning Hub",color:"primary",icon:(0,n.jsx)(eg.default,{fontSize:"small"}),sx:{fontWeight:700,mb:2,alignSelf:"flex-start"}}),(0,n.jsx)(h.Typography,{variant:"h4",sx:{fontWeight:900,mb:2,background:"linear-gradient(90deg, #22D3EE, #6366F1)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Your Learning Hub"}),(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{maxWidth:720},children:"Access your courses and video classes all in one place. Click any class to watch in a larger view and take notes."})]}),(0,n.jsx)(o.Box,{sx:{borderBottom:1,borderColor:"divider"},children:(0,n.jsxs)(c.Tabs,{value:t,onChange:(t,n)=>{i(n);let r=Object.keys(m).find(e=>m[e]===n);r&&e.push({pathname:e.pathname,query:{...e.query,tab:"learning",subtab:r}},void 0,{shallow:!0})},"aria-label":"learning content tabs",variant:"scrollable",scrollButtons:"auto",children:[(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(ep.default,{}),iconPosition:"start",label:"Courses & Classes",sx:{textTransform:"none",fontWeight:600}}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(ex.default,{}),iconPosition:"start",label:"PDFs",sx:{textTransform:"none",fontWeight:600}}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(eC.default,{}),iconPosition:"start",label:"Tools",sx:{textTransform:"none",fontWeight:600}})]})}),(0,n.jsx)(tf,{value:t,index:0,children:(0,n.jsxs)(A.Stack,{spacing:3,children:[(0,n.jsxs)(A.Stack,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:800,mb:1},children:"My Courses & Classes"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Click any course or class to watch videos in a larger view and take notes."})]}),(0,n.jsx)(P.Button,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(ev.default,{}),sx:{textTransform:"none",fontWeight:600},children:"Filter"})]}),(0,n.jsx)(R.Grid,{container:!0,spacing:3,children:ty.map(e=>(0,n.jsx)(R.Grid,{item:!0,xs:12,md:4,children:(0,n.jsx)(tj,{content:e,onClick:()=>{a(e),p[e.id]||x(t=>({...t,[e.id]:""}))}})},e.id))})]})}),(0,n.jsx)(tf,{value:t,index:1,children:(0,n.jsxs)(A.Stack,{spacing:3,children:[(0,n.jsxs)(A.Stack,{direction:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:800,mb:1},children:"PDF Resources"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Downloadable guides, references, and study materials to supplement your learning."})]}),(0,n.jsx)(P.Button,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(ev.default,{}),sx:{textTransform:"none",fontWeight:600},children:"Filter"})]}),(0,n.jsx)(A.Stack,{spacing:2,children:tg.map(e=>(0,n.jsx)(tv,{pdf:e},e.id))})]})}),(0,n.jsx)(tf,{value:t,index:2,children:(0,n.jsx)(tm,{})})]}),(0,n.jsx)(S.Dialog,{open:!!r,onClose:y,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",maxHeight:"90vh"}},children:r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.DialogTitle,{children:(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700},children:r.title}),(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",children:["By ",r.instructor," · ",r.duration]})]}),(0,n.jsx)(Y.IconButton,{onClick:y,children:(0,n.jsx)(ef.default,{})})]})}),(0,n.jsx)(T.DialogContent,{dividers:!0,children:(0,n.jsxs)(R.Grid,{container:!0,spacing:3,sx:{height:"calc(90vh - 120px)"},children:[(0,n.jsxs)(R.Grid,{item:!0,xs:12,md:8,children:[(0,n.jsx)(o.Box,{sx:{position:"relative",width:"100%",paddingTop:"56.25%",borderRadius:2,overflow:"hidden",bgcolor:"grey.200",mb:2},children:r.videoUrl?(0,n.jsx)("iframe",{src:r.videoUrl,title:r.title,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):(0,n.jsx)(o.Box,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"primary.light"},children:(0,n.jsx)(em.default,{sx:{fontSize:80,color:"primary.main"}})})}),(0,n.jsxs)(o.Box,{children:[(0,n.jsxs)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:["About This ",r.videoUrl?"Class":"Course"]}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:r.description}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,sx:{mt:2},children:[(0,n.jsx)(q.Chip,{label:r.level,size:"small",color:"Advanced"===r.level?"secondary":"Intermediate"===r.level?"default":"primary"}),(0,n.jsx)(q.Chip,{label:r.category,size:"small",variant:"outlined"})]})]})]}),(0,n.jsx)(R.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",p:2},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(eb.default,{color:"primary"}),(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"My Notes"})]}),(0,n.jsx)(I.TextField,{multiline:!0,fullWidth:!0,rows:20,placeholder:"Take notes while watching...",value:p[r.id]||"",onChange:e=>{var t,i;return t=r.id,i=e.target.value,void x(e=>({...e,[t]:i}))},variant:"outlined",sx:{flexGrow:1,"& .MuiInputBase-root":{height:"100%",alignItems:"flex-start"},"& textarea":{height:"100% !important",overflow:"auto !important"}}})]})})]})})]})})]})}var tC=e.i(94544),tS=e.i(1911),tw=e.i(25449),tT=e.i(5385);function tk(){let{settings:e}=(0,tT.useSettings)(),[t,i]=(0,l.useState)([]),[r,a]=(0,l.useState)(null),[s,c]=(0,l.useState)(!1),[d,p]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[y,g]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[f,C]=(0,l.useState)("");(0,l.useEffect)(()=>{C(e.apiKeys?.revidApiKey||"")},[e.apiKeys]),(0,l.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{i(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]);let S=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),i(e)},w=()=>{a(null),p(""),m(""),c(!0),g(null)},T=async e=>{if(!f)return void g("Revid.ai API key is required. Please add it in Settings.");g(null),v("Generating video... This may take a few minutes.");try{let i=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({script:e.content,title:e.title})});if(!i.ok)throw Error("Failed to generate video");await i.json();let n=t.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);S(n),v("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>v(null),5e3)}catch(e){g(e.message||"Failed to generate video. Please check your API key and try again."),v(null)}};return(0,n.jsxs)(o.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(b.default,{sx:{fontSize:32,color:"primary.main"}}),(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700},children:"AI Agent Content Manager"})]}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily. Add your Revid.ai API key in Settings to enable video generation."}),!f&&(0,n.jsx)(F.Alert,{severity:"warning",sx:{mb:3},children:"Revid.ai API key not configured. Please add it in Settings to enable video generation."}),j&&(0,n.jsx)(F.Alert,{severity:"success",sx:{mb:2},onClose:()=>v(null),children:j}),y&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>g(null),children:y}),s?(0,n.jsxs)(u.Paper,{sx:{p:3},children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{mb:2},children:r?"Edit Content":"Add New Content"}),(0,n.jsxs)(A.Stack,{spacing:2,children:[(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Title",value:d,onChange:e=>p(e.target.value),placeholder:"Enter content title",required:!0}),(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Content",value:x,onChange:e=>m(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:8,required:!0}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(P.Button,{variant:"contained",onClick:()=>{if(!d.trim()||!x.trim())return void g("Title and content are required");if(!f)return void g("Revid.ai API key is required. Please add it in Settings.");let e=r?{...r,title:d,content:x}:{id:Date.now().toString(),title:d,content:x,createdAt:new Date().toISOString(),status:"active"};S(r?t.map(t=>t.id===r.id?e:t):[...t,e]),c(!1),p(""),m(""),a(null),v(r?"Content updated successfully":"Content added successfully"),setTimeout(()=>v(null),3e3)},children:r?"Update":"Save"}),(0,n.jsx)(P.Button,{variant:"outlined",onClick:()=>{c(!1),p(""),m(""),a(null),g(null)},children:"Cancel"})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.Box,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(h.Typography,{variant:"h6",children:"Content Library"}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(Q.default,{}),onClick:w,disabled:!f,children:"Add Content"})]}),0===t.length?(0,n.jsxs)(u.Paper,{sx:{p:4,textAlign:"center"},children:[(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,n.jsx)(P.Button,{variant:"outlined",startIcon:(0,n.jsx)(Q.default,{}),onClick:w,disabled:!f,children:"Add Your First Content"})]}):(0,n.jsx)(A.Stack,{spacing:2,children:t.filter(e=>"active"===e.status).map(e=>(0,n.jsx)(en.Card,{elevation:2,children:(0,n.jsx)(er.CardContent,{children:(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",sx:{mb:2},children:[(0,n.jsxs)(o.Box,{sx:{flexGrow:1},children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{mb:1},children:e.title}),(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,200),e.content.length>200?"...":""]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,n.jsx)(q.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,n.jsx)(q.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,children:[(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>T(e),title:"Generate Video",disabled:!f,children:(0,n.jsx)(tS.default,{})}),(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>{v("Scheduling feature coming soon!"),setTimeout(()=>v(null),3e3)},title:"Schedule",disabled:!f,children:(0,n.jsx)(tw.default,{})}),(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>{a(e),p(e.title),m(e.content),c(!0),g(null)},title:"Edit",children:(0,n.jsx)(Z.default,{})}),(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>{var i;return i=e.id,void(confirm("Are you sure you want to delete this content?")&&(S(t.filter(e=>e.id!==i)),v("Content deleted successfully"),setTimeout(()=>v(null),3e3)))},title:"Delete",color:"error",children:(0,n.jsx)(tC.default,{})})]})]})})},e.id))})]})]})}var tP=e.i(88795),tI=e.i(68418),tA=e.i(85760);function tB(e){return(0,eB.default)("MuiInputAdornment",e)}let tE=(0,eA.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),tW=["children","className","component","disablePointerEvents","disableTypography","position","variant"],tM=(0,eI.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`position${(0,eW.default)(i.position)}`],!0===i.disablePointerEvents&&t.disablePointerEvents,t[i.variant]]}})(({theme:e,ownerState:t})=>(0,ew.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${tE.positionStart}&:not(.${tE.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),tF=l.forwardRef(function(e,t){let r=(0,eP.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:a,className:s,component:o="div",disablePointerEvents:c=!1,disableTypography:d=!1,position:u,variant:h}=r,p=(0,eS.default)(r,tW),x=(0,tA.default)()||{},m=h;h&&x.variant,x&&!m&&(m=x.variant);let y=(0,ew.default)({},r,{hiddenLabel:x.hiddenLabel,size:x.size,disablePointerEvents:c,position:u,variant:m}),g=(e=>{let{classes:t,disablePointerEvents:i,hiddenLabel:n,position:r,size:a,variant:l}=e,s={root:["root",i&&"disablePointerEvents",r&&`position${(0,eW.default)(r)}`,l,n&&"hiddenLabel",a&&`size${(0,eW.default)(a)}`]};return(0,ek.default)(s,tB,t)})(y);return(0,n.jsx)(tI.default.Provider,{value:null,children:(0,n.jsx)(tM,(0,ew.default)({as:o,ownerState:y,className:(0,eT.default)(g.root,s),ref:t},p,{children:"string"!=typeof a||d?(0,n.jsxs)(l.Fragment,{children:["start"===u?i||(i=(0,n.jsx)("span",{className:"notranslate",children:"​"})):null,a]}):(0,n.jsx)(tP.default,{color:"text.secondary",children:a})}))})});var tz=e.i(31862),tL=e.i(85106),tO=e.i(28097),tR=e.i(12895),tD=e.i(88522);function tN({open:e,onClose:t,client:i,onSave:r,readOnly:a=!1}){let[s,c]=(0,l.useState)({name:"",email:"",company:"",phone:"",status:"pending",tier:"starter",notes:""}),[d,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i&&c({name:i.name||"",email:i.email||"",company:i.company||"",phone:i.phone||"",status:i.status||"pending",tier:i.tier||"starter",notes:i.notes||""})},[i]);let x=async()=>{if(a)return void t();u(""),p(!0);try{let e=await fetch(`${(0,z.getBackendUrl)()}/api/creative/clients/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to update client"}));throw Error(t.error||"Failed to update client")}r(),t()}catch(e){u(e.message||"Failed to update client")}finally{p(!1)}};return(0,n.jsxs)(S.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(w.DialogTitle,{children:a?"View Client":"Edit Client"}),(0,n.jsx)(T.DialogContent,{children:(0,n.jsxs)(o.Box,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[d&&(0,n.jsx)(F.Alert,{severity:"error",children:d}),(0,n.jsx)(I.TextField,{label:"Name",value:s.name,onChange:e=>c({...s,name:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(I.TextField,{label:"Email",type:"email",value:s.email,onChange:e=>c({...s,email:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(I.TextField,{label:"Company",value:s.company,onChange:e=>c({...s,company:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(I.TextField,{label:"Phone",value:s.phone,onChange:e=>c({...s,phone:e.target.value}),fullWidth:!0,disabled:a}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,disabled:a,children:[(0,n.jsx)(E.InputLabel,{children:"Status"}),(0,n.jsxs)(W.Select,{value:s.status,onChange:e=>c({...s,status:e.target.value}),label:"Status",children:[(0,n.jsx)(M.MenuItem,{value:"pending",children:"Pending"}),(0,n.jsx)(M.MenuItem,{value:"active",children:"Active"}),(0,n.jsx)(M.MenuItem,{value:"inactive",children:"Inactive"}),(0,n.jsx)(M.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,disabled:a,children:[(0,n.jsx)(E.InputLabel,{children:"Tier"}),(0,n.jsxs)(W.Select,{value:s.tier,onChange:e=>c({...s,tier:e.target.value}),label:"Tier",children:[(0,n.jsx)(M.MenuItem,{value:"starter",children:"Starter"}),(0,n.jsx)(M.MenuItem,{value:"professional",children:"Professional"}),(0,n.jsx)(M.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,n.jsx)(I.TextField,{label:"Notes",value:s.notes,onChange:e=>c({...s,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3,disabled:a})]})}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:t,children:a?"Close":"Cancel"}),!a&&(0,n.jsx)(P.Button,{onClick:x,variant:"contained",disabled:h,children:h?"Saving...":"Save Changes"})]})]})}function t$({open:e,onClose:t,clientId:i,clientName:r,currentEmployee:a,onAssign:s}){let[c,d]=(0,l.useState)([]),[u,p]=(0,l.useState)(null),[x,m]=(0,l.useState)(""),[y,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!1),[C,L]=(0,l.useState)(null);(0,l.useEffect)(()=>{e?(R(),a&&(m(a),g(!0))):(p(null),m(""),g(!1),L(null))},[e,a]);let R=async()=>{b(!0),L(null);try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let i=await t.json();if(d(i.employees||[]),a&&i.employees){let e=i.employees.find(e=>e.name===a||e.email===a);e&&(p(e),g(!1))}}catch(e){console.error("Error fetching employees:",e),L(e.message||"Failed to load employees")}finally{b(!1)}},D=async()=>{v(!0),L(null);try{let e=y?null:u?.id||null,i=y?x.trim():u?.name||null;if(!i&&!e){L("Please select an employee or enter a custom name"),v(!1);return}await s(e,i),t()}catch(e){L(e.message||"Failed to assign employee")}finally{v(!1)}},N=async()=>{v(!0),L(null);try{await s(null,null),t()}catch(e){L(e.message||"Failed to remove employee assignment")}finally{v(!1)}};return(0,n.jsxs)(S.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(w.DialogTitle,{children:["Assign Employee to ",r]}),(0,n.jsx)(T.DialogContent,{children:(0,n.jsxs)(A.Stack,{spacing:3,sx:{mt:1},children:[C&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>L(null),children:C}),f?(0,n.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,n.jsx)(O.CircularProgress,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Assignment Type"}),(0,n.jsxs)(W.Select,{value:y?"custom":"employee",onChange:e=>g("custom"===e.target.value),label:"Assignment Type",children:[(0,n.jsx)(M.MenuItem,{value:"employee",children:"Select from Employees"}),(0,n.jsx)(M.MenuItem,{value:"custom",children:"Enter Custom Name"})]})]}),y?(0,n.jsx)(I.TextField,{fullWidth:!0,label:"Employee Name",value:x,onChange:e=>m(e.target.value),placeholder:"Enter employee name",helperText:"Use this for external employees or contractors"}):(0,n.jsx)(K.Autocomplete,{options:c,getOptionLabel:e=>`${e.name} (${e.email})`,value:u,onChange:(e,t)=>p(t),loading:f,renderInput:e=>(0,n.jsx)(I.TextField,{...e,label:"Select Employee",placeholder:"Search employees..."}),renderOption:(e,t)=>(0,n.jsx)(o.Box,{component:"li",...e,children:(0,n.jsxs)(A.Stack,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:t.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})})]})]})}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:t,disabled:j,children:"Cancel"}),a&&(0,n.jsx)(P.Button,{onClick:N,color:"error",disabled:j,children:"Remove Assignment"}),(0,n.jsx)(P.Button,{onClick:D,variant:"contained",disabled:j||(y?!x.trim():!u),children:j?(0,n.jsx)(O.CircularProgress,{size:20}):"Assign"})]})]})}function tq({onAssignmentChange:e,onAddClient:t}){let[i,r]=(0,l.useState)([]),[a,s]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[p,x]=(0,l.useState)(!0),[m,y]=(0,l.useState)(null),[j,v]=(0,l.useState)(null),[f,b]=(0,l.useState)(""),[C,D]=(0,l.useState)(null),[N,$]=(0,l.useState)(!1),[K,ei]=(0,l.useState)(""),[ea,eo]=(0,l.useState)("all"),[ec,ed]=(0,l.useState)("all"),[eu,ep]=(0,l.useState)(null),[ex,em]=(0,l.useState)(null),[ey,eg]=(0,l.useState)(!1),[ej,ev]=(0,l.useState)(!1),[ef,eb]=(0,l.useState)(!1),[eC,eS]=(0,l.useState)(!1),[ew,eT]=(0,l.useState)(!1),[ek,eP]=(0,l.useState)(null),[eI,eA]=(0,l.useState)({name:"",email:"",company:"",phone:"",notes:""});(0,l.useEffect)(()=>{eB()},[ea,ec,K]);let eB=async()=>{x(!0),y(null);try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let i=await t.json();r(i.employees||[]);let n=new URLSearchParams;"all"!==ea&&n.append("status",ea),"all"!==ec&&"unassigned"!==ec&&n.append("employee_id",ec),K&&n.append("search",K);let a=await fetch(`${e}/api/creative/clients?${n.toString()}`,{credentials:"include"});if(!a.ok)throw Error("Failed to fetch clients");let l=(await a.json()).clients||[],o=l;"unassigned"===ec&&(o=o.filter(e=>!e.assignedEmployee)),s(o);let c=l.filter(e=>"prospect"===e.status);d(c)}catch(e){console.error("Error fetching data:",e),y(e.message||"Failed to load data")}finally{x(!1)}},eE=async()=>{if(!f||!C)return void y("Please select both a client and an employee");$(!0),y(null),v(null);try{let t=(0,z.getBackendUrl)(),n=i.find(e=>e.id===C),r=await fetch(`${t}/api/creative/clients/${f}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:C,employee_name:n?.name||null})});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to assign employee"}));throw Error(e.error||"Failed to assign employee")}v(`Successfully assigned ${n?.name} to ${a.find(e=>e.id===f)?.name}`),await eB(),b(""),D(null),e&&e()}catch(e){console.error("Error assigning employee:",e),y(e.message||"Failed to assign employee")}finally{$(!1)}},eW=()=>{ep(null),em(null)},eM=async()=>{if(!ex)return void eW();try{let e=(0,z.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${ex.id}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete client");await eB()}catch(e){console.error("Error deleting client:",e),alert(e.message||"Failed to delete client")}eW()},eF=async()=>{eW(),ev(!0)},ez=async(e,t)=>{if(ex)try{let i=(0,z.getBackendUrl)();if(!(await fetch(`${i}/api/creative/clients/${ex.id}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:e,employee_name:t})})).ok)throw Error("Failed to assign employee");await eB()}catch(e){throw console.error("Error assigning employee:",e),e}},eL=async()=>{if(!eI.name||!eI.email||!eI.company)return void y("Name, email, and company are required");try{let e=(0,z.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:eI.name,email:eI.email,company:eI.company,phone:eI.phone,notes:eI.notes,status:"prospect"})})).ok)throw Error("Failed to create prospect");eT(!1),eA({name:"",email:"",company:"",phone:"",notes:""}),await eB(),v("Prospect created successfully")}catch(e){console.error("Error creating prospect:",e),y(e.message||"Failed to create prospect")}},eO=async()=>{if(!ek||!eI.name||!eI.email||!eI.company)return void y("Name, email, and company are required");try{let e=(0,z.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${ek.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:eI.name,email:eI.email,company:eI.company,phone:eI.phone,notes:eI.notes,status:"prospect"})})).ok)throw Error("Failed to update prospect");eT(!1),eP(null),eA({name:"",email:"",company:"",phone:"",notes:""}),await eB(),v("Prospect updated successfully")}catch(e){console.error("Error updating prospect:",e),y(e.message||"Failed to update prospect")}},eR=async e=>{alert(`Send email to ${e.email} - Feature coming soon`)},eD=async e=>{alert(`Send notification to ${e.name} - Feature coming soon`)},eN=Array.from(new Set(a.filter(e=>e.assignedEmployee).map(e=>e.assignedEmployee)));return p?(0,n.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(O.CircularProgress,{})}):(0,n.jsxs)(o.Box,{children:[m&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>y(null),sx:{mb:2},children:m}),j&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>v(null),sx:{mb:2},children:j}),(0,n.jsxs)(R.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(R.Grid,{item:!0,xs:12,children:(0,n.jsx)(en.Card,{elevation:2,children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,n.jsx)(el.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Prospects"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"People we need to keep prospecting with email and notifications to finish checkout"})]})]}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(Q.default,{}),onClick:()=>{eP(null),eA({name:"",email:"",company:"",phone:"",notes:""}),eT(!0)},children:"Add Prospect"})]}),0===c.length?(0,n.jsxs)(u.Paper,{sx:{p:4,textAlign:"center"},children:[(0,n.jsx)(el.default,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,n.jsx)(h.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No prospects yet"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add prospects to track and nurture potential clients"})]}):(0,n.jsx)(R.Grid,{container:!0,spacing:2,children:c.map(e=>(0,n.jsx)(R.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",sx:{mb:1},children:[(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",children:e.name}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:e.company}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.email})]}),(0,n.jsx)(q.Chip,{label:"Prospect",size:"small",color:"warning"})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,sx:{mt:2},children:[(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>{eP(e),eA({name:e.name,email:e.email,company:e.company,phone:e.phone||"",notes:e.notes||""}),eT(!0)},color:"primary",children:(0,n.jsx)(Z.default,{})}),(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>eR(e),color:"info",children:(0,n.jsx)(tR.default,{})}),(0,n.jsx)(Y.IconButton,{size:"small",onClick:()=>eD(e),color:"secondary",children:(0,n.jsx)(tD.default,{})})]})]})})},e.id))})]})})}),(0,n.jsx)(R.Grid,{item:!0,xs:12,children:(0,n.jsx)(en.Card,{elevation:2,children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,n.jsx)(tL.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Client List"})]}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(tO.default,{}),onClick:()=>{t?t():eS(!0)},children:"Add Client"})]}),(0,n.jsx)(u.Paper,{sx:{p:2,mb:3},children:(0,n.jsxs)(A.Stack,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,n.jsx)(I.TextField,{fullWidth:!0,size:"small",placeholder:"Search clients...",value:K,onChange:e=>ei(e.target.value),InputProps:{startAdornment:(0,n.jsx)(tF,{position:"start",children:(0,n.jsx)(tu.default,{})})}}),(0,n.jsxs)(B.FormControl,{size:"small",sx:{minWidth:150},children:[(0,n.jsx)(E.InputLabel,{children:"Status"}),(0,n.jsxs)(W.Select,{value:ea,label:"Status",onChange:e=>eo(e.target.value),children:[(0,n.jsx)(M.MenuItem,{value:"all",children:"All Status"}),(0,n.jsx)(M.MenuItem,{value:"active",children:"Active"}),(0,n.jsx)(M.MenuItem,{value:"inactive",children:"Inactive"}),(0,n.jsx)(M.MenuItem,{value:"pending",children:"Pending"}),(0,n.jsx)(M.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,n.jsxs)(B.FormControl,{size:"small",sx:{minWidth:150},children:[(0,n.jsx)(E.InputLabel,{children:"Employee"}),(0,n.jsxs)(W.Select,{value:ec,label:"Employee",onChange:e=>ed(e.target.value),children:[(0,n.jsx)(M.MenuItem,{value:"all",children:"All Employees"}),(0,n.jsx)(M.MenuItem,{value:"unassigned",children:"Unassigned"}),eN.map(e=>(0,n.jsx)(M.MenuItem,{value:e,children:e},e))]})]})]})}),(0,n.jsx)(V.TableContainer,{children:(0,n.jsxs)(U.Table,{children:[(0,n.jsx)(G.TableHead,{children:(0,n.jsxs)(J.TableRow,{children:[(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Client Name"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Email"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},children:"Systems Connected"}),(0,n.jsx)(H.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,n.jsx)(_.TableBody,{children:0===a.length?(0,n.jsx)(J.TableRow,{children:(0,n.jsx)(H.TableCell,{colSpan:6,align:"center",sx:{py:4},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:'No clients found. Click "Add Client" to get started.'})})}):a.map(e=>(0,n.jsxs)(J.TableRow,{hover:!0,children:[(0,n.jsxs)(H.TableCell,{children:[(0,n.jsx)(h.Typography,{variant:"body2",fontWeight:600,children:e.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.company})]}),(0,n.jsx)(H.TableCell,{children:e.email}),(0,n.jsx)(H.TableCell,{children:(0,n.jsx)(q.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"pending"===e.status||"prospect"===e.status?"warning":"default"})}),(0,n.jsx)(H.TableCell,{children:e.assignedEmployee||(0,n.jsx)(q.Chip,{label:"Unassigned",size:"small",variant:"outlined"})}),(0,n.jsx)(H.TableCell,{children:(0,n.jsx)(A.Stack,{direction:"row",spacing:.5,flexWrap:"wrap",children:e.systemsConnected.map(e=>(0,n.jsx)(q.Chip,{label:e,size:"small",variant:"outlined"},e))})}),(0,n.jsx)(H.TableCell,{align:"right",children:(0,n.jsx)(Y.IconButton,{size:"small",onClick:t=>{ep(t.currentTarget),em(e)},children:(0,n.jsx)(ee.default,{})})})]},e.id))})]})})]})})}),(0,n.jsx)(R.Grid,{item:!0,xs:12,children:(0,n.jsx)(en.Card,{elevation:2,children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(tz.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Match Clients & Employees"})]}),(0,n.jsxs)(R.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(R.Grid,{item:!0,xs:12,md:6,children:(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(tL.default,{color:"primary"}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Select Client"})]}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Client"}),(0,n.jsxs)(W.Select,{value:f,onChange:e=>b(e.target.value),label:"Client",children:[(0,n.jsx)(M.MenuItem,{value:"",children:(0,n.jsx)("em",{children:"Select a client..."})}),a.map(e=>(0,n.jsx)(M.MenuItem,{value:e.id,children:(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:e.name}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:[e.company," • ",e.email]}),e.assignedEmployee&&(0,n.jsx)(q.Chip,{label:`Assigned to: ${e.assignedEmployee}`,size:"small",color:"info",sx:{mt:.5}})]})},e.id))]})]}),a.find(e=>e.id===f)&&(0,n.jsxs)(o.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Client:"}),(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:a.find(e=>e.id===f)?.name}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:a.find(e=>e.id===f)?.company})]})]})})}),(0,n.jsx)(R.Grid,{item:!0,xs:12,md:6,children:(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(g.default,{color:"secondary"}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Select Employee"})]}),(0,n.jsxs)(B.FormControl,{fullWidth:!0,children:[(0,n.jsx)(E.InputLabel,{children:"Employee"}),(0,n.jsxs)(W.Select,{value:C||"",onChange:e=>D(e.target.value?Number(e.target.value):null),label:"Employee",children:[(0,n.jsx)(M.MenuItem,{value:"",children:(0,n.jsx)("em",{children:"Select an employee..."})}),i.map(e=>(0,n.jsx)(M.MenuItem,{value:e.id,children:(0,n.jsxs)(o.Box,{children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"body1",children:e.name}),e.is_admin&&(0,n.jsx)(q.Chip,{label:"Admin",size:"small",color:"error"})]}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.email})]})},e.id))]})]}),i.find(e=>e.id===C)&&(0,n.jsxs)(o.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Employee:"}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:i.find(e=>e.id===C)?.name}),i.find(e=>e.id===C)?.is_admin&&(0,n.jsx)(q.Chip,{label:"Admin",size:"small",color:"error"})]})]})]})})})]}),(0,n.jsx)(eh.Divider,{sx:{my:3}}),(0,n.jsxs)(o.Box,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,n.jsx)(P.Button,{variant:"outlined",onClick:eB,disabled:N,children:"Refresh Lists"}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:N?(0,n.jsx)(O.CircularProgress,{size:20}):(0,n.jsx)(es.default,{}),onClick:eE,disabled:!f||!C||N,size:"large",children:N?"Assigning...":"Assign Employee to Client"})]}),(0,n.jsxs)(o.Box,{sx:{mt:4},children:[(0,n.jsx)(h.Typography,{variant:"h6",gutterBottom:!0,children:"Current Assignments"}),(0,n.jsxs)(R.Grid,{container:!0,spacing:2,children:[a.filter(e=>e.assignedEmployee).map(e=>(0,n.jsx)(R.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(en.Card,{variant:"outlined",children:(0,n.jsxs)(er.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:e.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.company}),(0,n.jsx)(q.Chip,{label:`→ ${e.assignedEmployee}`,size:"small",color:"primary",sx:{mt:1}})]})})},e.id)),0===a.filter(e=>e.assignedEmployee).length&&(0,n.jsx)(R.Grid,{item:!0,xs:12,children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No assignments yet. Use the form above to assign employees to clients."})})]})]})]})})})]}),(0,n.jsxs)(et.Menu,{anchorEl:eu,open:!!eu,onClose:eW,children:[(0,n.jsxs)(M.MenuItem,{onClick:()=>{eb(!0),eg(!0),eW()},children:[(0,n.jsx)(X.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,n.jsxs)(M.MenuItem,{onClick:()=>{eb(!1),eg(!0),eW()},children:[(0,n.jsx)(Z.default,{sx:{mr:1,fontSize:20}}),"Edit"]}),(0,n.jsxs)(M.MenuItem,{onClick:eF,children:[(0,n.jsx)(tO.default,{sx:{mr:1,fontSize:20}}),"Assign Employee"]}),(0,n.jsxs)(M.MenuItem,{onClick:eM,sx:{color:"error.main"},children:[(0,n.jsx)(tC.default,{sx:{mr:1,fontSize:20}}),"Delete"]})]}),(0,n.jsx)(L,{open:eC,onClose:()=>{eS(!1),eB()}}),(0,n.jsx)(tN,{open:ey,onClose:()=>{eg(!1),em(null),eb(!1),eB()},client:ex,onSave:()=>eB(),readOnly:ef}),(0,n.jsx)(t$,{open:ej,onClose:()=>{ev(!1),em(null)},clientId:ex?.id||"",clientName:ex?.name||"",currentEmployee:ex?.assignedEmployee,onAssign:ez}),(0,n.jsxs)(S.Dialog,{open:ew,onClose:()=>eT(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(w.DialogTitle,{children:ek?"Edit Prospect":"Add New Prospect"}),(0,n.jsx)(T.DialogContent,{children:(0,n.jsxs)(A.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsx)(I.TextField,{label:"Name",value:eI.name,onChange:e=>eA({...eI,name:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(I.TextField,{label:"Email",type:"email",value:eI.email,onChange:e=>eA({...eI,email:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(I.TextField,{label:"Company",value:eI.company,onChange:e=>eA({...eI,company:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(I.TextField,{label:"Phone",value:eI.phone,onChange:e=>eA({...eI,phone:e.target.value}),fullWidth:!0}),(0,n.jsx)(I.TextField,{label:"Notes",value:eI.notes,onChange:e=>eA({...eI,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3})]})}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:()=>{eT(!1),eP(null),eA({name:"",email:"",company:"",phone:"",notes:""})},children:"Cancel"}),(0,n.jsx)(P.Button,{variant:"contained",onClick:ek?eO:eL,children:ek?"Update":"Create"})]})]})]})}var tU=e.i(4591),t_=e.i(84579),tH=e.i(60472),tV=e.i(68914),tG=e.i(15254);function tJ(){let{user:e}=(0,tG.useAuth)(),[t,i]=(0,l.useState)([]),[r,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)(null),[d,p]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),[y,g]=(0,l.useState)(null),[j,v]=(0,l.useState)(""),[f,b]=(0,l.useState)(""),[B,E]=(0,l.useState)(!1),[W,M]=(0,l.useState)(null);(0,l.useEffect)(()=>{L()},[]);let L=async()=>{a(!0),c(null);try{let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/admin/users`,{credentials:"include"});if(t.ok){let e=await t.json();i(e.users||[])}else{let e=await t.json().catch(()=>({error:`HTTP ${t.status}`}));c(e.error||`Failed to load users (${t.status})`)}}catch(e){console.error("Error fetching employees:",e),c(e.message||"Failed to load users")}finally{a(!1)}},R=async(e,t)=>{try{let i=(0,z.getBackendUrl)(),n=await fetch(`${i}/api/admin/users/${e}/employee`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isEmployee:!t})});if(n.ok)L();else{let e=await n.json();c(e.error||"Failed to update employee status")}}catch(e){c(e.message||"Failed to update employee status")}},D=async(e,t)=>{try{let i=(0,z.getBackendUrl)(),n=await fetch(`${i}/api/admin/users/${e}/admin`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!t})});if(n.ok)L();else{let e=await n.json();c(e.error||"Failed to update admin status")}}catch(e){c(e.message||"Failed to update admin status")}},$=()=>{m(!1),g(null),v(""),b(""),M(null)},U=async()=>{if(y){if(!j||j.length<6)return void M("Password must be at least 6 characters");if(j!==f)return void M("Passwords do not match");E(!0),M(null);try{let e=(0,z.getBackendUrl)(),t=y.id||y.username||y.user_id,i=encodeURIComponent(t),n=await fetch(`${e}/api/admin/users/${i}/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:j})});if(n.ok)$();else{let e=await n.json();M(e.error||"Failed to change password")}}catch(e){M(e.message||"Failed to change password")}finally{E(!1)}}},_=e?.isAdmin||!1;return _?(0,n.jsxs)(o.Box,{children:[(0,n.jsxs)(u.Paper,{elevation:3,sx:{p:4,mb:3},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(C.default,{sx:{color:"primary.main",fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Employee Management"})]}),(0,n.jsx)(eh.Divider,{sx:{mb:3}}),s&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:3},onClose:()=>c(null),children:s}),(0,n.jsx)(h.Typography,{variant:"body1",sx:{mb:3},children:"Manage employee status for users. Employees have access to the Creative Dashboard and can be assigned to clients."}),r?(0,n.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(O.CircularProgress,{})}):0===t.length?(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"No users found."}):(0,n.jsx)(A.Stack,{spacing:2,children:t.map(t=>(0,n.jsx)(u.Paper,{variant:"outlined",sx:{p:2},children:(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(o.Box,{sx:{flex:1},children:[(0,n.jsx)(h.Typography,{variant:"body1",sx:{fontWeight:600},children:t.name||t.username||t.email||"Unknown User"}),(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",children:[t.ensName||t.id," ",t.email&&`• ${t.email}`]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[t.isAdmin&&(0,n.jsx)(q.Chip,{label:"Admin",color:"error",size:"small"}),t.isEmployee&&(0,n.jsx)(q.Chip,{label:"Employee",color:"secondary",size:"small"}),t.isPaidMember&&(0,n.jsx)(q.Chip,{label:"Paid Member",color:"success",size:"small",variant:"outlined"})]})]}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,n.jsx)(t_.FormControlLabel,{control:(0,n.jsx)(tU.Switch,{checked:t.isAdmin||!1,onChange:()=>D(t.id||t.user_id,t.isAdmin||!1),disabled:t.id===e?.id||t.username===e?.username}),label:"Admin"}),(0,n.jsx)(t_.FormControlLabel,{control:(0,n.jsx)(tU.Switch,{checked:t.isEmployee||!1,onChange:()=>R(t.id||t.user_id,t.isEmployee||!1),disabled:t.isAdmin}),label:t.isEmployee?"Employee":"Not Employee"}),(0,n.jsx)(P.Button,{variant:"outlined",size:"small",onClick:()=>{g(t),v(""),b(""),M(null),m(!0)},sx:{ml:2},children:"Change Password"})]})]})},t.id))}),(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,sx:{mt:3},children:[(0,n.jsx)(P.Button,{variant:"outlined",startIcon:(0,n.jsx)(N.default,{}),onClick:L,disabled:r,children:r?"Loading...":"Refresh List"}),(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(tz.default,{}),onClick:()=>p(!0),disabled:r,children:"Manage Client Assignments"})]})]}),(0,n.jsxs)(u.Paper,{elevation:3,sx:{p:4},children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(tz.default,{sx:{color:"primary.main",fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Client Assignment Management"})]}),(0,n.jsx)(eh.Divider,{sx:{mb:3}}),(0,n.jsx)(h.Typography,{variant:"body1",sx:{mb:3},children:"Assign clients to employees. Admins can reassign any client to any employee. Employees can view their assigned clients."}),(0,n.jsx)(A.Stack,{direction:"row",spacing:2,children:(0,n.jsx)(P.Button,{variant:"contained",startIcon:(0,n.jsx)(tz.default,{}),onClick:()=>p(!0),children:"Open Assignment Dialog"})})]}),(0,n.jsx)(tV.default,{open:d,onClose:()=>p(!1),currentUser:e,isAdminView:_}),(0,n.jsxs)(S.Dialog,{open:x,onClose:$,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(w.DialogTitle,{children:(0,n.jsxs)(A.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(A.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(tH.default,{}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Change Password"})]}),(0,n.jsx)(P.Button,{onClick:$,size:"small",sx:{minWidth:"auto"},children:(0,n.jsx)(ef.default,{})})]})}),(0,n.jsxs)(T.DialogContent,{children:[y&&(0,n.jsxs)(o.Box,{sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Changing password for:"}),(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:y.name||y.username||y.email}),y.email&&(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:y.email})]}),W&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>M(null),children:W}),(0,n.jsxs)(A.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsx)(I.TextField,{fullWidth:!0,type:"password",label:"New Password",value:j,onChange:e=>v(e.target.value),placeholder:"Enter new password (min 6 characters)",disabled:B,helperText:"Password must be at least 6 characters long"}),(0,n.jsx)(I.TextField,{fullWidth:!0,type:"password",label:"Confirm Password",value:f,onChange:e=>b(e.target.value),placeholder:"Confirm new password",disabled:B,error:""!==f&&j!==f,helperText:""!==f&&j!==f?"Passwords do not match":""})]})]}),(0,n.jsxs)(k.DialogActions,{children:[(0,n.jsx)(P.Button,{onClick:$,disabled:B,children:"Cancel"}),(0,n.jsx)(P.Button,{onClick:U,variant:"contained",disabled:B||!j||!f||j!==f||j.length<6,startIcon:B?(0,n.jsx)(O.CircularProgress,{size:20}):(0,n.jsx)(tH.default,{}),children:B?"Changing...":"Change Password"})]})]})]}):(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:3},children:"Authentication required. Admin access only."}),(0,n.jsxs)(u.Paper,{elevation:3,sx:{p:4},children:[(0,n.jsx)(h.Typography,{variant:"h6",gutterBottom:!0,children:"Employee & Client Management"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"This section is only accessible to administrators."})]})]})}function tY(e){let{children:t,value:i,index:r,...a}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:i!==r,id:`creative-tabpanel-${r}`,"aria-labelledby":`creative-tab-${r}`,...a,children:i===r&&(0,n.jsx)(o.Box,{sx:{py:3},children:t})})}function tK(){let e=(0,x.useTheme)(),t=(0,m.useMediaQuery)(e.breakpoints.down("md")),i=(0,s.useRouter)(),[r,a]=(0,l.useState)(0),[S,w]=(0,l.useState)(!1),{user:T}=(0,tG.useAuth)(),k=T?.isAdmin||!1,P={overview:0,analytics:1,support:2,match:3,management:4,learning:k?5:4,ai:k?6:5};return(0,l.useEffect)(()=>{let e=i.query.tab;e&&void 0!==P[e]&&a(P[e])},[i.query.tab,k]),(0,n.jsxs)(o.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(u.Paper,{elevation:0,sx:{p:3,background:"linear-gradient(135deg, #6366F1 0%, #8b5cf6 100%)",color:"white",borderRadius:0},children:(0,n.jsxs)(p.Container,{maxWidth:"xl",children:[(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"Creative Dashboard"}),(0,n.jsx)(h.Typography,{variant:"body1",sx:{opacity:.9},children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,n.jsx)(u.Paper,{elevation:1,sx:{borderRadius:0},children:(0,n.jsx)(p.Container,{maxWidth:"xl",children:(0,n.jsxs)(c.Tabs,{value:r,onChange:(e,t)=>{a(t);let n=Object.keys(P).find(e=>P[e]===t);n&&i.push({pathname:i.pathname,query:{...i.query,tab:n}},void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:[(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(y.default,{}),iconPosition:"start",label:"Overview",id:"creative-tab-0","aria-controls":"creative-tabpanel-0"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(j.default,{}),iconPosition:"start",label:"Analytics & Activity",id:"creative-tab-1","aria-controls":"creative-tabpanel-1"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(v.default,{}),iconPosition:"start",label:"Support Requests",id:"creative-tab-2","aria-controls":"creative-tabpanel-2"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(g.default,{}),iconPosition:"start",label:"Match Clients & Employees",id:"creative-tab-3","aria-controls":"creative-tabpanel-3"}),k&&(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(C.default,{}),iconPosition:"start",label:"Employee & Client Management",id:"creative-tab-4","aria-controls":"creative-tabpanel-4"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(f.default,{}),iconPosition:"start",label:"Learning Hub",id:k?"creative-tab-5":"creative-tab-4","aria-controls":k?"creative-tabpanel-5":"creative-tabpanel-4"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(b.default,{}),iconPosition:"start",label:"AI Agent",id:k?"creative-tab-6":"creative-tab-5","aria-controls":k?"creative-tabpanel-6":"creative-tabpanel-5"})]})})}),(0,n.jsx)(o.Box,{sx:{flexGrow:1,overflow:"auto",bgcolor:"background.default"},children:(0,n.jsxs)(p.Container,{maxWidth:"xl",sx:{py:3},children:[(0,n.jsx)(tY,{value:r,index:0,children:(0,n.jsx)(tQ,{onAddClient:()=>w(!0)})}),(0,n.jsx)(tY,{value:r,index:1,children:(0,n.jsx)($,{})}),(0,n.jsx)(tY,{value:r,index:2,children:(0,n.jsx)(ei,{})}),(0,n.jsx)(tY,{value:r,index:3,children:(0,n.jsx)(tq,{onAddClient:()=>w(!0)})}),k&&(0,n.jsx)(tY,{value:r,index:4,children:(0,n.jsx)(tJ,{})}),(0,n.jsx)(tY,{value:r,index:k?5:4,children:(0,n.jsx)(tb,{})}),(0,n.jsx)(tY,{value:r,index:k?6:5,children:(0,n.jsx)(tk,{})})]})}),(0,n.jsx)(L,{open:S,onClose:()=>w(!1)})]})}function tQ({onAddClient:e}){let[t,i]=(0,l.useState)({clients:0,projects:0,tasks:0,completion:0}),[r,a]=(0,l.useState)(!0),[s,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{a(!0);let e=(0,z.getBackendUrl)(),t=await fetch(`${e}/api/creative/metrics`,{credentials:"include"});if(t.ok){let e=await t.json();i({clients:e.clients||0,projects:e.projects||0,tasks:e.tasks||0,completion:e.completion||0}),c(null)}else{let e=await t.json().catch(()=>({error:"Failed to fetch metrics"}));c(e.error||"Failed to load metrics"),i({clients:0,projects:0,tasks:0,completion:0})}}catch(e){console.error("Error fetching metrics:",e),c(e.message||"Failed to load metrics"),i({clients:0,projects:0,tasks:0,completion:0})}finally{a(!1)}})()},[]),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Overview"}),(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Welcome to your mission control for managing clients across all your dashboards and systems."}),(0,n.jsxs)(o.Box,{sx:{mb:4},children:[r?(0,n.jsx)(o.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(h.Typography,{children:"Loading metrics..."})}):s?(0,n.jsx)(o.Box,{sx:{p:2,bgcolor:"error.light",borderRadius:1,mb:2},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"error",children:s})}):null,(0,n.jsx)(ed,{metrics:t})]}),(0,n.jsxs)(o.Box,{sx:{mb:4},children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Key Features"}),(0,n.jsxs)(o.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(2, 1fr)"},gap:2},children:[(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Centralized Client Directory"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"View and manage all your client accounts in one place"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Integrations with Dashboards"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Connect clients to Co-Work and Rise dashboards"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Quick Add/Edit/Remove Clients"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Streamline onboarding and administration"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Analytics & Activity Tracking"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Track client usage, activity, and generate reports"})]})]})]}),(0,n.jsxs)(o.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Quick Actions"}),(0,n.jsxs)(u.Paper,{sx:{p:3,bgcolor:"primary.main",color:"white"},children:[(0,n.jsx)(h.Typography,{variant:"body1",gutterBottom:!0,children:"Ready to add a new client?"}),(0,n.jsx)(h.Typography,{variant:"body2",sx:{opacity:.9,mb:2},children:"Add client leads and send them to the sign-up page to get started."}),(0,n.jsx)(o.Box,{component:"button",onClick:e,sx:{bgcolor:"white",color:"primary.main",border:"none",px:3,py:1.5,borderRadius:1,fontWeight:600,cursor:"pointer","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},children:"Add New Client"})]})]})]})}e.s(["default",0,function(){return(0,n.jsx)(a.default,{children:(0,n.jsx)(r.default,{active:"creative",children:(0,n.jsx)(tK,{})})})}],11500)},24144,(e,t,i)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(11500)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);