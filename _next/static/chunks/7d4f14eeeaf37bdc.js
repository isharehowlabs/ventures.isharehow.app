(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41850,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)((0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language")},84216,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)((0,a.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},70307,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},91329,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)((0,a.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},39416,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)((0,a.jsx)("path",{d:"M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48"}),"Gesture")},51209,e=>{"use strict";var t=e.i(91788),i=e.i(1645);function n(){let[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[l,d]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[x,m]=(0,t.useState)({}),[f,g]=(0,t.useState)(!1),[y,j]=(0,t.useState)(null);return{files:e,components:r,tokens:o,likedComponents:l,savedComponents:c,draftedComponents:h,componentStatuses:x,isLoading:f,error:y,fetchFiles:async()=>{try{g(!0),j(null);let e=(0,i.getBackendUrl)(),t=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),r=await t.json();n(r.projects||[])}catch(e){j(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,i.getBackendUrl)(),n=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await n.json()).file}catch(e){throw j(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,i.getBackendUrl)(),n=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),r=await n.json();return a(r.components||[]),r.components}catch(e){throw j(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw j(e.message),e}let t=e.trim();try{g(!0),j(null);let e=(0,i.getBackendUrl)(),n=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),r=await n.json();return s(r.tokens||[]),r.tokens}catch(e){throw j(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let r=(0,i.getBackendUrl)(),a=await (0,i.fetchWithErrorHandling)(`${r}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:n})}),o=await a.json();return o.success&&(m(i=>({...i,[e]:{...i[e],liked:t}})),t?d(t=>t.includes(e)?t:[...t,e]):d(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let r=(0,i.getBackendUrl)(),a=await (0,i.fetchWithErrorHandling)(`${r}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:n})}),o=await a.json();return o.success&&(m(i=>({...i,[e]:{...i[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,n)=>{try{g(!0),j(null);let r=(0,i.getBackendUrl)(),a=await (0,i.fetchWithErrorHandling)(`${r}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:n})}),o=await a.json();return o.success&&(m(i=>({...i,[e]:{...i[e],drafted:t}})),t?p(t=>t.includes(e)?t:[...t,e]):p(t=>t.filter(t=>t!==e))),o}catch(e){throw j(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),j(null);let e=(0,i.getBackendUrl)(),t=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),n=await t.json();return d(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),j(null);let e=(0,i.getBackendUrl)(),t=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),n=await t.json();return u(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),j(null);let e=(0,i.getBackendUrl)(),t=await (0,i.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),n=await t.json();return p(n.componentIds||[]),n.componentIds||[]}catch(e){throw j(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,i.getBackendUrl)(),n=await (0,i.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),r=await n.json();return m(t=>({...t,[e]:{liked:r.liked||!1,saved:r.saved||!1,drafted:r.drafted||!1}})),r}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),j(null);let t=(0,i.getBackendUrl)(),n=e?JSON.stringify({componentIds:e}):void 0,r=await (0,i.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:n}),a=await r.json();if(a.preferences){m(e=>{let t={...e};return Object.entries(a.preferences).forEach(([e,i])=>{t[e]={liked:i.liked||!1,saved:i.saved||!1,drafted:i.drafted||!1}}),t});let e=Object.entries(a.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(a.preferences).filter(([e,t])=>t.saved).map(([e])=>e),i=Object.entries(a.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);d(e),u(t),p(i)}return a}catch(e){throw j(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>n])},72850,e=>{"use strict";var t=e.i(91788),i=e.i(1645);function n(){let[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)([]),[o,s]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),c=async e=>{try{s(!0),d(null);let t=(0,i.getBackendUrl)(),r=new URL(`${t}/api/mcp/code-links`);e&&r.searchParams.append("figmaFileId",e);let a=await fetch(r.toString(),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch code links");let o=await a.json();n(o.links||[])}catch(e){d(e.message)}finally{s(!1)}},u=async()=>{try{s(!0),d(null);let e=(0,i.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let n=await t.json();a(n.tokens||[])}catch(e){d(e.message)}finally{s(!1)}};return{links:e,tokens:r,isLoading:o,error:l,linkComponentToCode:async(e,t,n,r)=>{try{s(!0),d(null);let a=(0,i.getBackendUrl)(),o=await fetch(`${a}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:n,figmaFileId:r})});if(!o.ok)throw Error("Failed to link component");let l=await o.json();return await c(),l}catch(e){throw d(e.message),e}finally{s(!1)}},fetchCodeLinks:c,syncTokens:async e=>{try{s(!0),d(null);let t=(0,i.getBackendUrl)(),n=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!n.ok)throw Error("Failed to sync tokens");let r=await n.json();return await u(),r}catch(e){throw d(e.message),e}finally{s(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{s(!0),d(null);let n=(0,i.getBackendUrl)(),r=await fetch(`${n}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!r.ok)throw Error("Failed to generate code");return await r.json()}catch(e){throw d(e.message),e}finally{s(!1)}}}}e.s(["useMCP",()=>n])},98457,(e,t,i)=>{"use strict";var n=e.r(78509);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(e.r(21506)),a=e.r(91398);i.default=(0,r.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")},84394,e=>{"use strict";var t,i=e.i(91398),n=e.i(58678),r=e.i(9122),a=e.i(69945),o=e.i(91788),s=e.i(3828),l=e.i(17563),d=e.i(5553),c=e.i(56119),u=e.i(83664),h=e.i(86042),p=e.i(77882),x=e.i(63257),m=e.i(6692),f=e.i(74266),g=e.i(62999),y=e.i(61005),j=e.i(41850),b=e.i(98447),v=e.i(50993),S=e.i(97986),C=e.i(1645),k=e.i(21627),w=e.i(86779),T=e.i(16135),I=e.i(24456),A=e.i(64260),P=e.i(27399),B=e.i(86298),E=e.i(50278),L=e.i(44725),F=e.i(21432),O=e.i(46896),W=e.i(5604),M=e.i(51107),z=e.i(80596),$=e.i(64056),D=e.i(38802),R=e.i(48310),N=e.i(13419),q=e.i(76733),U=e.i(9790),H=e.i(58524),G=e.i(59974),_=e.i(89200),J=e.i(24057),K=e.i(47167);function V(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),[d,u]=(0,o.useState)([]),[h,x]=(0,o.useState)(!0),[m,f]=(0,o.useState)(null),[y,j]=(0,o.useState)(null),[b,v]=(0,o.useState)(!1),[S,V]=(0,o.useState)(null),[Y,X]=(0,o.useState)(null),[Q,Z]=(0,o.useState)(null),[ee,et]=(0,o.useState)(null),[ei,en]=(0,o.useState)(null),[er,ea]=(0,o.useState)(null),[eo,es]=(0,o.useState)(null),[el,ed]=(0,o.useState)({client:"",subject:"",description:"",priority:"medium"}),[ec,eu]=(0,o.useState)({subject:"",description:"",priority:"medium",status:"open",assignedTo:""});(0,o.useEffect)(()=>{em(),eh(),ep(),ex()},[]);let eh=async()=>{try{let e=(0,C.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();r(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},ep=async()=>{try{let e=(0,C.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(t.ok){let e=await t.json();s(e.employees||[])}}catch(e){console.error("Error fetching employees:",e)}},ex=async()=>{try{let e=(0,C.getBackendUrl)(),t=await fetch(`${e}/api/tasks`,{credentials:"include"});if(t.ok){let e=await t.json();u(e.tasks||[])}}catch(e){console.error("Error fetching tasks:",e)}},em=async()=>{x(!0),f(null);try{let e=(0,C.getBackendUrl)(),i=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({error:"Failed to fetch support requests"}));throw Error(e.error||e.details||"Failed to fetch support requests")}let n=await i.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),f(e.message||"Failed to load support requests"),t([])}finally{x(!1)}},ef=async()=>{if(!Y||!Y.id||!ec.subject||!ec.description)return void f("Subject and description are required");let i=Y.id;x(!0),f(null);try{let n=(0,C.getBackendUrl)(),r=await fetch(`${n}/api/creative/support-requests/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:ec.subject,description:ec.description,priority:ec.priority,status:ec.status,assignedTo:ee?ee.name||ee.email:ec.assignedTo||null})});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to update support request"})),t=e.error||e.message||`Failed to update support request (${r.status})`;throw Error(t)}let a=await r.json();if(ei&&ei.id&&i)try{await fetch(`${n}/api/tasks/${ei.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:i})})}catch(e){console.error("Error linking task:",e)}t(e.map(e=>e.id===i?a:e)),X(null),et(null),en(null),eu({subject:"",description:"",priority:"medium",status:"open",assignedTo:""}),v(!1),em(),ex()}catch(e){console.error("Error updating support request:",e),f(e.message||"Failed to update support request")}finally{x(!1)}},eg=async()=>{if(!el.subject||!el.description)return void f("Subject and description are required");x(!0),f(null);try{let i=(0,C.getBackendUrl)(),n=await fetch(`${i}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:Q?Q.company||Q.name:el.client,clientId:Q?.id,subject:el.subject,description:el.description,priority:el.priority,assignedTo:ee?ee.name||ee.email:null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let r=await n.json();if(ei&&ei.id&&r&&r.id)try{await fetch(`${i}/api/tasks/${ei.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({supportRequestId:r.id})})}catch(e){console.error("Error linking task:",e)}t([r,...e]),j("Support request created successfully"),ed({client:"",subject:"",description:"",priority:"medium"}),Z(null),et(null),en(null),v(!1),setTimeout(()=>j(null),3e3),em(),ex()}catch(e){console.error("Error creating support request:",e),f(e.message||"Failed to create support request")}finally{x(!1)}},ey=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ej=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,i.jsxs)(l.Box,{children:[y&&(0,i.jsx)(g.Alert,{severity:"success",onClose:()=>j(null),sx:{mb:2},children:y}),m&&(0,i.jsx)(g.Alert,{severity:"error",onClose:()=>f(null),sx:{mb:2},children:m}),(0,i.jsxs)(w.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,i.jsx)(k.Button,{variant:"contained",startIcon:(0,i.jsx)(R.default,{}),onClick:()=>{V(null),v(!0)},children:"New Request"})]}),(0,i.jsx)(B.TableContainer,{component:p.Paper,children:(0,i.jsxs)(I.Table,{children:[(0,i.jsx)(E.TableHead,{children:(0,i.jsxs)(L.TableRow,{children:[(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,i.jsx)(P.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,i.jsx)(A.TableBody,{children:0===e.length?(0,i.jsx)(L.TableRow,{children:(0,i.jsx)(P.TableCell,{colSpan:7,align:"center",sx:{py:4},children:(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,i.jsxs)(L.TableRow,{hover:!0,children:[(0,i.jsx)(P.TableCell,{children:e.client}),(0,i.jsx)(P.TableCell,{children:e.subject}),(0,i.jsx)(P.TableCell,{children:e.assignedTo?(0,i.jsx)(T.Chip,{label:e.assignedTo,size:"small",variant:"outlined"}):(0,i.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:"Unassigned"})}),(0,i.jsx)(P.TableCell,{children:(0,i.jsx)(T.Chip,{label:e.status,size:"small",color:ey(e.status)})}),(0,i.jsx)(P.TableCell,{children:(0,i.jsx)(T.Chip,{label:e.priority,size:"small",color:ej(e.priority)})}),(0,i.jsx)(P.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsx)(P.TableCell,{align:"right",children:(0,i.jsx)(F.IconButton,{size:"small",onClick:t=>{var i;return i=e.id,void(t.stopPropagation(),ea(t.currentTarget),es(i))},children:(0,i.jsx)(U.default,{})})})]},e.id))})]})}),(0,i.jsxs)(K.Menu,{anchorEl:er,open:!!er,onClose:()=>{ea(null),es(null)},children:[(0,i.jsxs)(G.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===eo);t&&(V(t),X(null),v(!0))},children:[(0,i.jsx)(N.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,i.jsxs)(G.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===eo);t&&(X(t),V(null),et((t.assignedTo?a.find(e=>e.name===t.assignedTo||e.email===t.assignedTo):null)||null),en((t.linkedTasks&&t.linkedTasks.length>0&&t.linkedTasks[0]?.id?d.find(e=>e.id===t.linkedTasks[0].id):null)||null),eu({subject:t.subject,description:t.description,priority:t.priority,status:t.status,assignedTo:t.assignedTo||""}),v(!0),ea(null),es(null))},children:[(0,i.jsx)(q.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,i.jsxs)(O.Dialog,{open:b,onClose:()=>{v(!1),V(null),X(null),Z(null),ed({client:"",subject:"",description:"",priority:"medium"}),eu({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},maxWidth:"md",fullWidth:!0,children:[(0,i.jsx)(W.DialogTitle,{children:S?"Support Request Details":Y?"Edit Support Request":"Create Support Request"}),(0,i.jsx)(M.DialogContent,{children:Y?(0,i.jsxs)(w.Stack,{spacing:3,sx:{mt:1},children:[(0,i.jsx)($.TextField,{fullWidth:!0,label:"Subject",value:ec.subject,onChange:e=>eu({...ec,subject:e.target.value})}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:ec.description,onChange:e=>eu({...ec,description:e.target.value})}),(0,i.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,i.jsx)(J.InputLabel,{children:"Assigned Employee"}),(0,i.jsxs)(H.Select,{value:ee?.id||"",label:"Assigned Employee",onChange:e=>{let t=a.find(t=>t.id===Number(e.target.value));et(t||null),eu({...ec,assignedTo:t?t.name||t.email:""})},children:[(0,i.jsx)(G.MenuItem,{value:"",children:"Unassigned"}),a.map(e=>(0,i.jsxs)(G.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,i.jsx)(D.Autocomplete,{fullWidth:!0,options:d.filter(e=>!e.supportRequestId||e.supportRequestId===Y?.id),getOptionLabel:e=>{let t=e.supportRequestId?" (Linked)":"";return`${e.title||""}${t}`},value:ei,onChange:(e,t)=>{en(t)},renderInput:e=>(0,i.jsx)($.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,i.jsx)(l.Box,{component:"li",...e,children:(0,i.jsxs)(w.Stack,{children:[(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(c.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&t.supportRequestId!==Y?.id&&(0,i.jsx)(T.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,i.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,sx:{mt:.5},children:[(0,i.jsx)(T.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.createdAt&&(0,i.jsx)(c.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,i.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,i.jsx)(J.InputLabel,{children:"Priority"}),(0,i.jsxs)(H.Select,{value:ec.priority,label:"Priority",onChange:e=>eu({...ec,priority:e.target.value}),children:[(0,i.jsx)(G.MenuItem,{value:"low",children:"Low"}),(0,i.jsx)(G.MenuItem,{value:"medium",children:"Medium"}),(0,i.jsx)(G.MenuItem,{value:"high",children:"High"})]})]}),(0,i.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,i.jsx)(J.InputLabel,{children:"Status"}),(0,i.jsxs)(H.Select,{value:ec.status,label:"Status",onChange:e=>eu({...ec,status:e.target.value}),children:[(0,i.jsx)(G.MenuItem,{value:"open",children:"Open"}),(0,i.jsx)(G.MenuItem,{value:"in-progress",children:"In Progress"}),(0,i.jsx)(G.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):S?(0,i.jsx)(l.Box,{children:(0,i.jsxs)(w.Stack,{spacing:2,sx:{mt:1},children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,i.jsx)(c.Typography,{variant:"body1",children:S.client})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Assigned To"}),(0,i.jsx)(c.Typography,{variant:"body1",children:S.assignedTo||"Unassigned"})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,i.jsx)(c.Typography,{variant:"body1",children:S.subject})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,i.jsx)(c.Typography,{variant:"body1",children:S.description})]}),S.linkedTasks&&S.linkedTasks.length>0&&(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Linked Tasks"}),(0,i.jsx)(w.Stack,{spacing:1,children:S.linkedTasks.map(e=>(0,i.jsx)(T.Chip,{label:e.title,size:"small",variant:"outlined",sx:{mr:1,mb:1}},e.id))})]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,i.jsx)(T.Chip,{label:S.status,color:ey(S.status)})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,i.jsx)(T.Chip,{label:S.priority,color:ej(S.priority)})]})]})]})}):(0,i.jsxs)(w.Stack,{spacing:3,sx:{mt:1},children:[(0,i.jsx)(D.Autocomplete,{fullWidth:!0,options:n,getOptionLabel:e=>e.company||e.name||"",value:Q,onChange:(e,t)=>{Z(t),ed({...el,client:t?t.company||t.name:""})},renderInput:e=>(0,i.jsx)($.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,i.jsx)(l.Box,{component:"li",...e,children:(0,i.jsxs)(w.Stack,{children:[(0,i.jsx)(c.Typography,{variant:"body1",children:t.company||t.name}),(0,i.jsx)(c.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Subject",value:el.subject,onChange:e=>ed({...el,subject:e.target.value})}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:el.description,onChange:e=>ed({...el,description:e.target.value})}),(0,i.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,i.jsx)(J.InputLabel,{children:"Assigned Employee"}),(0,i.jsxs)(H.Select,{value:ee?.id||"",label:"Assigned Employee",onChange:e=>{et(a.find(t=>t.id===Number(e.target.value))||null)},children:[(0,i.jsx)(G.MenuItem,{value:"",children:"Unassigned"}),a.map(e=>(0,i.jsxs)(G.MenuItem,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,i.jsx)(D.Autocomplete,{fullWidth:!0,options:d,getOptionLabel:e=>{let t=e.supportRequestId?" (Already Linked)":"";return`${e.title||""}${t}`},value:ei,onChange:(e,t)=>{t&&!t.supportRequestId?en(t):t&&t.supportRequestId?(f("This task is already linked to another support request"),setTimeout(()=>f(null),3e3)):en(null)},renderInput:e=>(0,i.jsx)($.TextField,{...e,label:"Link Task (Optional)",placeholder:"Select a task to link...",helperText:"Link a task from AI Agent or Co-Work tab. Shows all tasks including old ones."}),renderOption:(e,t)=>(0,i.jsx)(l.Box,{component:"li",...e,children:(0,i.jsxs)(w.Stack,{children:[(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(c.Typography,{variant:"body1",children:t.title}),t.supportRequestId&&(0,i.jsx)(T.Chip,{label:"Already Linked",size:"small",color:"info",variant:"outlined"})]}),(0,i.jsxs)(c.Typography,{variant:"caption",color:"text.secondary",children:[t.description?.substring(0,50),"..."]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,sx:{mt:.5},flexWrap:"wrap",children:[(0,i.jsx)(T.Chip,{label:t.status,size:"small",color:"completed"===t.status?"success":"in-progress"===t.status?"warning":"default"}),t.assignedToName&&(0,i.jsx)(T.Chip,{label:`Assigned: ${t.assignedToName}`,size:"small",variant:"outlined"}),t.createdAt&&(0,i.jsx)(c.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:new Date(t.createdAt).toLocaleDateString()})]})]})})}),(0,i.jsxs)(_.FormControl,{fullWidth:!0,children:[(0,i.jsx)(J.InputLabel,{children:"Priority"}),(0,i.jsxs)(H.Select,{value:el.priority,label:"Priority",onChange:e=>ed({...el,priority:e.target.value}),children:[(0,i.jsx)(G.MenuItem,{value:"low",children:"Low"}),(0,i.jsx)(G.MenuItem,{value:"medium",children:"Medium"}),(0,i.jsx)(G.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,i.jsxs)(z.DialogActions,{children:[(0,i.jsx)(k.Button,{onClick:()=>{v(!1),V(null),X(null),Z(null),et(null),en(null),ed({client:"",subject:"",description:"",priority:"medium"}),eu({subject:"",description:"",priority:"medium",status:"open",assignedTo:""})},children:S?"Close":"Cancel"}),Y?(0,i.jsx)(k.Button,{variant:"contained",onClick:ef,children:"Update Request"}):!S&&(0,i.jsx)(k.Button,{variant:"contained",onClick:eg,children:"Create Request"})]})]})]})}var Y=e.i(17803),X=e.i(27242),Q=e.i(1084),Z=e.i(74872),ee=e.i(84216),et=e.i(78319),ei=e.i(84835),en=e.i(70307),er=e.i(19512),ea=e.i(61433),eo=e.i(41891);e.i(50461);var es=e.i(60997),el=e.i(75907),ed=e.i(56206),ec=e.i(961),eu=e.i(95724),eh=e.i(96851),ep=e.i(13149),ex=e.i(46739);function em(e){return(0,ex.default)("MuiStepper",e)}(0,ep.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var ef=e.i(64107);let eg=o.createContext({}),ey=o.createContext({});function ej(e){return(0,ex.default)("MuiStepConnector",e)}(0,ep.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let eb=["className"],ev=(0,eh.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.completed&&t.completed]}})(({ownerState:e})=>(0,el.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),eS=(0,eh.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.line,t[`line${(0,ef.default)(i.orientation)}`]]}})(({ownerState:e,theme:t})=>{let i="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,el.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:i},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),eC=o.forwardRef(function(e,t){let n=(0,eu.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:r}=n,a=(0,es.default)(n,eb),{alternativeLabel:s,orientation:l="horizontal"}=o.useContext(eg),{active:d,disabled:c,completed:u}=o.useContext(ey),h=(0,el.default)({},n,{alternativeLabel:s,orientation:l,active:d,completed:u,disabled:c}),p=(e=>{let{classes:t,orientation:i,alternativeLabel:n,active:r,completed:a,disabled:o}=e,s={root:["root",i,n&&"alternativeLabel",r&&"active",a&&"completed",o&&"disabled"],line:["line",`line${(0,ef.default)(i)}`]};return(0,ec.default)(s,ej,t)})(h);return(0,i.jsx)(ev,(0,el.default)({className:(0,ed.default)(p.root,r),ref:t,ownerState:h},a,{children:(0,i.jsx)(eS,{className:p.line,ownerState:h})}))}),ek=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],ew=(0,eh.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,el.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),eT=(0,i.jsx)(eC,{}),eI=o.forwardRef(function(e,t){let n=(0,eu.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:a=!1,children:s,className:l,component:d="div",connector:c=eT,nonLinear:u=!1,orientation:h="horizontal"}=n,p=(0,es.default)(n,ek),x=(0,el.default)({},n,{nonLinear:u,alternativeLabel:a,orientation:h,component:d}),m=(e=>{let{orientation:t,nonLinear:i,alternativeLabel:n,classes:r}=e;return(0,ec.default)({root:["root",t,i&&"nonLinear",n&&"alternativeLabel"]},em,r)})(x),f=o.Children.toArray(s).filter(Boolean),g=f.map((e,t)=>o.cloneElement(e,(0,el.default)({index:t,last:t+1===f.length},e.props))),y=o.useMemo(()=>({activeStep:r,alternativeLabel:a,connector:c,nonLinear:u,orientation:h}),[r,a,c,u,h]);return(0,i.jsx)(eg.Provider,{value:y,children:(0,i.jsx)(ew,(0,el.default)({as:d,ownerState:x,className:(0,ed.default)(m.root,l),ref:t},p,{children:g}))})});function eA(e){return(0,ex.default)("MuiStep",e)}(0,ep.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let eP=["active","children","className","component","completed","disabled","expanded","index","last"],eB=(0,eh.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation],i.alternativeLabel&&t.alternativeLabel,i.completed&&t.completed]}})(({ownerState:e})=>(0,el.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),eE=o.forwardRef(function(e,t){let n=(0,eu.useDefaultProps)({props:e,name:"MuiStep"}),{active:r,children:a,className:s,component:l="div",completed:d,disabled:c,expanded:u=!1,index:h,last:p}=n,x=(0,es.default)(n,eP),{activeStep:m,connector:f,alternativeLabel:g,orientation:y,nonLinear:j}=o.useContext(eg),[b=!1,v=!1,S=!1]=[r,d,c];m===h?b=void 0===r||r:!j&&m>h?v=void 0===d||d:!j&&m<h&&(S=void 0===c||c);let C=o.useMemo(()=>({index:h,last:p,expanded:u,icon:h+1,active:b,completed:v,disabled:S}),[h,p,u,b,v,S]),k=(0,el.default)({},n,{active:b,orientation:y,alternativeLabel:g,completed:v,disabled:S,expanded:u,component:l}),w=(e=>{let{classes:t,orientation:i,alternativeLabel:n,completed:r}=e;return(0,ec.default)({root:["root",i,n&&"alternativeLabel",r&&"completed"]},eA,t)})(k),T=(0,i.jsxs)(eB,(0,el.default)({as:l,className:(0,ed.default)(w.root,s),ref:t,ownerState:k},x,{children:[f&&g&&0!==h?f:null,a]}));return(0,i.jsx)(ey.Provider,{value:C,children:f&&!g&&0!==h?(0,i.jsxs)(o.Fragment,{children:[f,T]}):T})});var eL=e.i(59540);let eF=(0,eL.default)((0,i.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),eO=(0,eL.default)((0,i.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var eW=e.i(8277);function eM(e){return(0,ex.default)("MuiStepIcon",e)}let ez=(0,ep.default)("MuiStepIcon",["root","active","completed","error","text"]),e$=["active","className","completed","error","icon"],eD=(0,eh.default)(eW.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${ez.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${ez.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${ez.error}`]:{color:(e.vars||e).palette.error.main}})),eR=(0,eh.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),eN=o.forwardRef(function(e,n){let r=(0,eu.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:a=!1,className:o,completed:s=!1,error:l=!1,icon:d}=r,c=(0,es.default)(r,e$),u=(0,el.default)({},r,{active:a,completed:s,error:l}),h=(e=>{let{classes:t,active:i,completed:n,error:r}=e;return(0,ec.default)({root:["root",i&&"active",n&&"completed",r&&"error"],text:["text"]},eM,t)})(u);if("number"==typeof d||"string"==typeof d){let e=(0,ed.default)(o,h.root);return l?(0,i.jsx)(eD,(0,el.default)({as:eO,className:e,ref:n,ownerState:u},c)):s?(0,i.jsx)(eD,(0,el.default)({as:eF,className:e,ref:n,ownerState:u},c)):(0,i.jsxs)(eD,(0,el.default)({className:e,ref:n,ownerState:u},c,{children:[t||(t=(0,i.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,i.jsx)(eR,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:d})]}))}return d});function eq(e){return(0,ex.default)("MuiStepLabel",e)}let eU=(0,ep.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),eH=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],eG=(0,eh.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.orientation]]}})(({ownerState:e})=>(0,el.default)({display:"flex",alignItems:"center",[`&.${eU.alternativeLabel}`]:{flexDirection:"column"},[`&.${eU.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),e_=(0,eh.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,el.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${eU.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${eU.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${eU.alternativeLabel}`]:{marginTop:16},[`&.${eU.error}`]:{color:(e.vars||e).palette.error.main}})),eJ=(0,eh.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${eU.alternativeLabel}`]:{paddingRight:0}})),eK=(0,eh.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${eU.alternativeLabel}`]:{textAlign:"center"}})),eV=o.forwardRef(function(e,t){var n;let r=(0,eu.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:a,className:s,componentsProps:l={},error:d=!1,icon:c,optional:u,slotProps:h={},StepIconComponent:p,StepIconProps:x}=r,m=(0,es.default)(r,eH),{alternativeLabel:f,orientation:g}=o.useContext(eg),{active:y,disabled:j,completed:b,icon:v}=o.useContext(ey),S=c||v,C=p;S&&!C&&(C=eN);let k=(0,el.default)({},r,{active:y,alternativeLabel:f,completed:b,disabled:j,error:d,orientation:g}),w=(e=>{let{classes:t,orientation:i,active:n,completed:r,error:a,disabled:o,alternativeLabel:s}=e;return(0,ec.default)({root:["root",i,a&&"error",o&&"disabled",s&&"alternativeLabel"],label:["label",n&&"active",r&&"completed",a&&"error",o&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",r&&"completed",a&&"error",o&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},eq,t)})(k),T=null!=(n=h.label)?n:l.label;return(0,i.jsxs)(eG,(0,el.default)({className:(0,ed.default)(w.root,s),ref:t,ownerState:k},m,{children:[S||C?(0,i.jsx)(eJ,{className:w.iconContainer,ownerState:k,children:(0,i.jsx)(C,(0,el.default)({completed:b,active:y,error:d,icon:S},x))}):null,(0,i.jsxs)(eK,{className:w.labelContainer,ownerState:k,children:[a?(0,i.jsx)(e_,(0,el.default)({ownerState:k},T,{className:(0,ed.default)(w.label,null==T?void 0:T.className),children:a})):null,u]})]}))});eV.muiName="StepLabel";var eY=e.i(31269);function eX(e){return(0,ex.default)("MuiStepContent",e)}(0,ep.default)("MuiStepContent",["root","last","transition"]);let eQ=["children","className","TransitionComponent","transitionDuration","TransitionProps"],eZ=(0,eh.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.last&&t.last]}})(({ownerState:e,theme:t})=>(0,el.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),e0=(0,eh.default)(eY.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),e1=o.forwardRef(function(e,t){let n=(0,eu.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:r,className:a,TransitionComponent:s=eY.default,transitionDuration:l="auto",TransitionProps:d}=n,c=(0,es.default)(n,eQ),{orientation:u}=o.useContext(eg),{active:h,last:p,expanded:x}=o.useContext(ey),m=(0,el.default)({},n,{last:p}),f=(e=>{let{classes:t,last:i}=e;return(0,ec.default)({root:["root",i&&"last"],transition:["transition"]},eX,t)})(m),g=l;return"auto"!==l||s.muiSupportAuto||(g=void 0),(0,i.jsx)(eZ,(0,el.default)({className:(0,ed.default)(f.root,a),ref:t,ownerState:m},c,{children:(0,i.jsx)(e0,(0,el.default)({as:s,in:h||x,className:f.transition,ownerState:m,timeout:g,unmountOnExit:!0},d,{children:r}))}))});var e2=e.i(88740),e3=e.i(94365),e5=e.i(39609),e4=e.i(96490),e6=e.i(24427),e8=e.i(36333),e9=e.i(90536),e7=e.i(11724),te=e.i(62440),tt=e.i(420);function ti(){let[e,t]=(0,o.useState)(0),[n,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[h,x]=(0,o.useState)(""),[m,f]=(0,o.useState)(""),[y,j]=(0,o.useState)(!1),[b,v]=(0,o.useState)(null),[S,I]=(0,o.useState)(!1),[A,P]=(0,o.useState)(!1),B=["Guide","Quiz","SEO Audit","Generate Script"],E={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with value—like a free SEO audit or actionable insights—you immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:`• Personalization is non-negotiable
• Focus on their problems, not your solutions
• Use data and insights, not flattery
• Make it easy for them to say yes
• Follow up with more value, not pressure`}]},L=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],D=()=>{1!==e||L.every(e=>n.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||a.trim()?t(e=>Math.min(e+1,B.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},R=()=>{t(e=>Math.max(e-1,0))},N=async()=>{j(!0),f(""),v(null);try{let e=(0,C.getBackendUrl)(),t=n.map(e=>{let t=L.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),i=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${d||"Not provided"}
- Website: ${a}
- Industry: ${h||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,r=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:i}]})});if(!r.ok)throw Error("Failed to generate script");let o=await r.json();f(o.text);try{let e=o.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let i=JSON.parse(e);v({script:i.script||o.text,seoAudit:i.seoAudit||"SEO audit details will be generated.",valueProposition:i.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(i.nextSteps)?i.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){v({script:o.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}I(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{j(!1)}};return(0,i.jsx)(l.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,i.jsxs)(w.Stack,{spacing:3,children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(T.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,i.jsx)(e4.default,{}),sx:{fontWeight:700,mb:2}}),(0,i.jsx)(c.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,i.jsx)(c.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,i.jsx)(g.Alert,{severity:"info",sx:{mb:2},children:(0,i.jsxs)(c.Typography,{variant:"body2",children:[(0,i.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,i.jsx)(k.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,i.jsx)(e7.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,i.jsx)(p.Paper,{sx:{p:3},children:(0,i.jsxs)(eI,{activeStep:e,orientation:"vertical",children:[(0,i.jsxs)(eE,{children:[(0,i.jsx)(eV,{children:(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,i.jsxs)(e1,{children:[(0,i.jsxs)(l.Box,{sx:{mb:3},children:[(0,i.jsx)(c.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:E.title}),(0,i.jsx)(w.Stack,{spacing:3,children:E.sections.map((e,t)=>(0,i.jsxs)(e2.Accordion,{defaultExpanded:0===t,children:[(0,i.jsx)(e3.AccordionSummary,{expandIcon:(0,i.jsx)(te.default,{}),children:(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,i.jsx)(e5.AccordionDetails,{children:(0,i.jsx)(c.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,i.jsx)(k.Button,{variant:"contained",onClick:D,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,i.jsxs)(eE,{children:[(0,i.jsx)(eV,{children:(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,i.jsxs)(e1,{children:[(0,i.jsxs)(w.Stack,{spacing:3,sx:{mb:3},children:[(0,i.jsx)(g.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),L.map(e=>{let t=n.find(t=>t.questionId===e.id);return(0,i.jsx)(X.Card,{variant:"outlined",children:(0,i.jsxs)(Q.CardContent,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,i.jsx)($.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var i,n;return i=e.id,n=t.target.value,void r(e=>e.find(e=>e.questionId===i)?e.map(e=>e.questionId===i?{...e,answer:n}:e):[...e,{questionId:i,answer:n}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,children:[(0,i.jsx)(k.Button,{onClick:R,children:"Back"}),(0,i.jsx)(k.Button,{variant:"contained",onClick:D,children:"Continue to SEO Audit"})]})]})]}),(0,i.jsxs)(eE,{children:[(0,i.jsx)(eV,{children:(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,i.jsxs)(e1,{children:[(0,i.jsxs)(w.Stack,{spacing:3,sx:{mb:3},children:[(0,i.jsx)(g.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Client Name",value:d,onChange:e=>u(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Client Website URL",value:a,onChange:e=>s(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Industry",value:h,onChange:e=>x(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,children:[(0,i.jsx)(k.Button,{onClick:R,children:"Back"}),(0,i.jsx)(k.Button,{variant:"contained",onClick:D,children:"Generate Script"})]})]})]}),(0,i.jsxs)(eE,{children:[(0,i.jsx)(eV,{children:(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,i.jsxs)(e1,{children:[(0,i.jsxs)(w.Stack,{spacing:3,sx:{mb:3},children:[(0,i.jsx)(g.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,i.jsx)(X.Card,{variant:"outlined",children:(0,i.jsxs)(Q.CardContent,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,i.jsxs)(w.Stack,{spacing:1,children:[(0,i.jsxs)(c.Typography,{children:[(0,i.jsx)("strong",{children:"Client:"})," ",d||"Not provided"]}),(0,i.jsxs)(c.Typography,{children:[(0,i.jsx)("strong",{children:"Website:"})," ",a||"Not provided"]}),(0,i.jsxs)(c.Typography,{children:[(0,i.jsx)("strong",{children:"Industry:"})," ",h||"Not provided"]}),(0,i.jsxs)(c.Typography,{children:[(0,i.jsx)("strong",{children:"Quiz Answers:"})," ",n.length," / ",L.length]})]})]})})]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,children:[(0,i.jsx)(k.Button,{onClick:R,children:"Back"}),(0,i.jsx)(k.Button,{variant:"contained",onClick:N,disabled:y,startIcon:(0,i.jsx)(e6.default,{}),size:"large",children:y?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,i.jsxs)(O.Dialog,{open:S,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:[(0,i.jsx)(W.DialogTitle,{children:(0,i.jsxs)(w.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(c.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,children:[(0,i.jsx)(F.IconButton,{onClick:()=>{b&&(navigator.clipboard.writeText(b.script),P(!0),setTimeout(()=>P(!1),2e3))},title:"Copy Script",children:(0,i.jsx)(e8.default,{})}),(0,i.jsx)(F.IconButton,{onClick:()=>{if(b){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${d||"N/A"}
Website: ${a}

SCRIPT:
${b.script}

SEO AUDIT SUMMARY:
${b.seoAudit}

VALUE PROPOSITION:
${b.valueProposition}

NEXT STEPS:
${b.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`seo-prospecting-script-${d||"client"}-${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,i.jsx)(e9.default,{})})]})]})}),(0,i.jsx)(M.DialogContent,{dividers:!0,children:b&&(0,i.jsxs)(w.Stack,{spacing:3,children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,i.jsx)(p.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,i.jsx)(c.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:b.script})})]}),(0,i.jsx)(Y.Divider,{}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,i.jsx)(p.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,i.jsx)(c.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:b.seoAudit})})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,i.jsx)(p.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,i.jsx)(c.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:b.valueProposition})})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,i.jsx)(w.Stack,{spacing:1,children:b.nextSteps.map((e,t)=>(0,i.jsx)(T.Chip,{label:`${t+1}. ${e}`,icon:(0,i.jsx)(tt.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,i.jsxs)(z.DialogActions,{children:[(0,i.jsx)(k.Button,{onClick:()=>I(!1),children:"Close"}),(0,i.jsx)(k.Button,{variant:"contained",onClick:()=>{I(!1),t(0),v(null),r([]),s(""),u(""),x("")},children:"Create Another Script"})]})]}),A&&(0,i.jsx)(g.Alert,{severity:"success",onClose:()=>P(!1),children:"Script copied to clipboard!"})]})})}function tn(){let{settings:e,updateApiKeys:t}=(0,ea.useSettings)(),[n,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(null),[d,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(""),[m,f]=(0,o.useState)(""),[y,j]=(0,o.useState)(null),[b,v]=(0,o.useState)(null),[S,C]=(0,o.useState)("");(0,o.useEffect)(()=>{fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:useEffect-mount",message:"Component mounted, loading API key",data:{settingsApiKeyLength:e.apiKeys?.revidApiKey?.length||0},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{});let i=(e=>{if(fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:getCookie",message:"Reading cookie",data:{cookieName:e,allCookies:"undefined"!=typeof document?document.cookie.substring(0,200):"no-document"},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),"undefined"==typeof document)return null;let t=e+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let r=i[n];for(;" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t)){let i=decodeURIComponent(r.substring(t.length,r.length));return fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:getCookie",message:"Cookie found",data:{cookieName:e,valueLength:i?.length||0},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),i}}return fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:getCookie",message:"Cookie not found",data:{cookieName:e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),null})("revid_api_key");i?(fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:useEffect-mount",message:"Cookie key found, setting state",data:{cookieKeyLength:i.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),C(i),t({revidApiKey:i})):(fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:useEffect-mount",message:"No cookie found, using settings fallback",data:{settingsApiKeyLength:e.apiKeys?.revidApiKey?.length||0},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),C(e.apiKeys?.revidApiKey||""))},[]);let I=()=>{fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:handleSaveApiKey",message:"Save button clicked",data:{apiKeyLength:S?.length||0,isEmpty:!S.trim()},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),S.trim()?(((e,t,i=365)=>{if(fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:setCookie",message:"Setting cookie",data:{cookieName:e,valueLength:t?.length||0,days:i},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),"undefined"==typeof document)return;let n=new Date;n.setTime(n.getTime()+24*i*36e5);let r=`${e}=${encodeURIComponent(t)};expires=${n.toUTCString()};path=/;SameSite=Lax`;document.cookie=r,fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:setCookie",message:"Cookie set",data:{cookieName:e,allCookies:document.cookie.substring(0,200),cookieString:r.substring(0,100)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{})})("revid_api_key",S,365),t({revidApiKey:S}),fetch("http://localhost:7242/ingest/e16e948f-78c5-4368-bec3-74cffd33f8bf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AiAgentPanel.tsx:handleSaveApiKey",message:"API key saved to cookie and settings",data:{apiKeyLength:S.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),v("API key saved successfully!"),setTimeout(()=>v(null),3e3)):j("Please enter an API key before saving.")};(0,o.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{r(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]);let A=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),r(e)},P=()=>{s(null),x(""),f(""),u(!0),j(null)},B=async e=>{if(!S)return void j("Revid.ai API key is required. Please add your API key above.");j(null),v("Generating video... This may take a few minutes.");try{let t=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({script:e.content,title:e.title})});if(!t.ok)throw Error("Failed to generate video");await t.json();let i=n.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);A(i),v("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>v(null),5e3)}catch(e){j(e.message||"Failed to generate video. Please check your API key and try again."),v(null)}};return(0,i.jsx)(l.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,i.jsxs)(Z.Grid,{container:!0,spacing:3,children:[(0,i.jsx)(Z.Grid,{item:!0,xs:12,children:(0,i.jsx)(p.Paper,{elevation:2,sx:{p:3,minHeight:900},children:(0,i.jsx)(eo.default,{height:900})})}),(0,i.jsx)(Z.Grid,{item:!0,xs:12,children:(0,i.jsxs)(p.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,i.jsx)(ee.default,{sx:{fontSize:32,color:"primary.main"}}),(0,i.jsx)(c.Typography,{variant:"h5",sx:{fontWeight:700},children:"Ai Content Agent"})]}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily."}),(0,i.jsx)(l.Box,{sx:{mb:3},children:(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,i.jsx)($.TextField,{fullWidth:!0,label:"Revid.ai API Key",type:"password",value:S,onChange:e=>{C(e.target.value),y&&y.includes("API key")&&j(null)},placeholder:"Enter your Revid.ai API key",helperText:"Required for AI Agent panel to generate and auto-post videos",size:"small",onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&I()}}),(0,i.jsx)(k.Button,{variant:"contained",startIcon:(0,i.jsx)(er.default,{}),onClick:I,sx:{mt:.5,minWidth:120},size:"small",children:"Save"})]})}),b&&(0,i.jsx)(g.Alert,{severity:"success",sx:{mb:2},onClose:()=>v(null),children:b}),y&&(0,i.jsx)(g.Alert,{severity:"error",sx:{mb:2},onClose:()=>j(null),children:y}),(0,i.jsx)(l.Box,{sx:{flexGrow:1,overflow:"auto"},children:d?(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{mb:2},children:a?"Edit Content":"Add New Content"}),(0,i.jsxs)(w.Stack,{spacing:2,children:[(0,i.jsx)($.TextField,{fullWidth:!0,label:"Title",value:h,onChange:e=>x(e.target.value),placeholder:"Enter content title",required:!0,size:"small"}),(0,i.jsx)($.TextField,{fullWidth:!0,label:"Content",value:m,onChange:e=>f(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:6,required:!0,size:"small"}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:2,children:[(0,i.jsx)(k.Button,{variant:"contained",onClick:()=>{if(!h.trim()||!m.trim())return void j("Title and content are required");if(!S)return void j("Revid.ai API key is required. Please add your API key above.");let e=a?{...a,title:h,content:m}:{id:Date.now().toString(),title:h,content:m,createdAt:new Date().toISOString(),status:"active"};A(a?n.map(t=>t.id===a.id?e:t):[...n,e]),u(!1),x(""),f(""),s(null),v(a?"Content updated successfully":"Content added successfully"),setTimeout(()=>v(null),3e3)},size:"small",children:a?"Update":"Save"}),(0,i.jsx)(k.Button,{variant:"outlined",onClick:()=>{u(!1),x(""),f(""),s(null),j(null)},size:"small",children:"Cancel"})]})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(c.Typography,{variant:"h6",children:"Content Library"}),(0,i.jsx)(k.Button,{variant:"contained",startIcon:(0,i.jsx)(R.default,{}),onClick:P,disabled:!S,size:"small",children:"Add Content"})]}),0===n.length?(0,i.jsxs)(l.Box,{sx:{textAlign:"center",py:4},children:[(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,i.jsx)(k.Button,{variant:"outlined",startIcon:(0,i.jsx)(R.default,{}),onClick:P,disabled:!S,size:"small",children:"Add Your First Content"})]}):(0,i.jsx)(w.Stack,{spacing:2,children:n.filter(e=>"active"===e.status).map(e=>(0,i.jsx)(X.Card,{elevation:1,children:(0,i.jsx)(Q.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,i.jsxs)(w.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",children:[(0,i.jsxs)(l.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,i.jsx)(c.Typography,{variant:"subtitle1",fontWeight:500,sx:{mb:.5},children:e.title}),(0,i.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,i.jsx)(T.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,i.jsx)(T.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,i.jsxs)(w.Stack,{direction:"row",spacing:.5,children:[(0,i.jsx)(F.IconButton,{size:"small",onClick:()=>B(e),title:"Generate Video",disabled:!S,children:(0,i.jsx)(ei.default,{fontSize:"small"})}),(0,i.jsx)(F.IconButton,{size:"small",onClick:()=>{v("Scheduling feature coming soon!"),setTimeout(()=>v(null),3e3)},title:"Schedule",disabled:!S,children:(0,i.jsx)(en.default,{fontSize:"small"})}),(0,i.jsx)(F.IconButton,{size:"small",onClick:()=>{s(e),x(e.title),f(e.content),u(!0),j(null)},title:"Edit",children:(0,i.jsx)(q.default,{fontSize:"small"})}),(0,i.jsx)(F.IconButton,{size:"small",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this content?")&&(A(n.filter(e=>e.id!==t)),v("Content deleted successfully"),setTimeout(()=>v(null),3e3)))},title:"Delete",color:"error",children:(0,i.jsx)(et.default,{fontSize:"small"})})]})]})})},e.id))})]})})]})}),(0,i.jsx)(Z.Grid,{item:!0,xs:12,children:(0,i.jsxs)(p.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,mb:2},children:"How to Format Video Scripts"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Format this into a video script that follows these tips:"}),(0,i.jsxs)(w.Stack,{spacing:2,children:[(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"1. Use short and punctuated sentences"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Correct punctuation helps the generated voice to be much better."})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"2. Use brackets for media guidance"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"When generating voice, [text between brackets] will be ignored but can be used to guide the AI with the media generation."})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"3. Add pauses with break tags"}),(0,i.jsxs)(c.Typography,{variant:"body2",color:"text.secondary",component:"div",children:["Use ",(0,i.jsx)("code",{style:{backgroundColor:"#f5f5f5",padding:"2px 4px",borderRadius:"3px"},children:'<break time="1.0s" />'})," to mark a pause in the generated voice."]})]}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"4. Use line breaks for slide separation"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Use breaking lines to force slide separation and media change."})]}),(0,i.jsx)(Y.Divider,{sx:{my:2}}),(0,i.jsxs)(l.Box,{children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2},children:"Script Example:"}),(0,i.jsx)(p.Paper,{elevation:0,sx:{p:2,bgcolor:"#f9f9f9",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:300},children:`[close-up of a cat]
Did you know how to make viral videos?

[cat playing with a ball]
First, you need to grab the viewer's attention.

<break time="1.0s" />

[cat chasing a laser pointer]
Then, you need to keep them engaged.

[cat sleeping]
Finally, you need to make them share it.`})]})]})]})}),(0,i.jsx)(Z.Grid,{item:!0,xs:12,children:(0,i.jsx)(p.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:(0,i.jsx)(ti,{})})})]})})}var tr=e.i(79741),ta=e.i(99246),to=e.i(20158),ts=e.i(91329),tl=e.i(39416),td=e.i(2157),tc=e.i(5877);function tu(){let{user:t}=(0,tc.useAuth)(),[n,r]=(0,o.useState)(0),a=(0,o.useMemo)(()=>`design_${t?.id||"shared"}`,[t?.id]),s=function(){try{let t=e.r(51209),i=t.useFigma||t.default?.useFigma;if(i)return i()}catch(e){}return{files:[],components:[],tokens:[],componentStatuses:{},isLoading:!1,error:null,fetchFiles:()=>Promise.resolve(),fetchComponents:()=>Promise.resolve(),likeComponent:()=>Promise.resolve(),saveComponent:()=>Promise.resolve()}}(),d=function(){try{let t=e.r(72850),i=t.useMCP||t.default?.useMCP;if(i)return i()}catch(e){}return{links:[],tokens:[],isLoading:!1,error:null,fetchCodeLinks:()=>Promise.resolve(),linkComponentToCode:()=>Promise.resolve()}}(),x=(0,o.useMemo)(()=>s?.files||[],[s?.files]),m=(0,o.useMemo)(()=>s?.components||[],[s?.components]),y=(0,o.useMemo)(()=>s?.componentStatuses||{},[s?.componentStatuses]);s?.isLoading;let j=s?.error||null,b=(0,o.useCallback)(()=>s?.fetchFiles?s.fetchFiles():Promise.resolve(),[s?.fetchFiles]),S=(0,o.useCallback)(e=>s?.fetchComponents?s.fetchComponents(e):Promise.resolve(),[s?.fetchComponents]),C=(0,o.useCallback)((e,t,i)=>s?.likeComponent?s.likeComponent(e,t,i):Promise.resolve(),[s?.likeComponent]),w=(0,o.useCallback)((e,t,i)=>s?.saveComponent?s.saveComponent(e,t,i):Promise.resolve(),[s?.saveComponent]),T=(0,o.useCallback)(()=>d?.fetchCodeLinks?d.fetchCodeLinks():Promise.resolve(),[d?.fetchCodeLinks]),I=(0,o.useCallback)((e,t,i,n)=>d?.linkComponentToCode?d.linkComponentToCode(e,t,i,n):Promise.resolve(),[d?.linkComponentToCode]),[A,P]=(0,o.useState)(null),[B,E]=(0,o.useState)(!1),[L,D]=(0,o.useState)(""),[R,N]=(0,o.useState)(""),[q,U]=(0,o.useState)(""),[K,V]=(0,o.useState)(!1),[Y,ee]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!(s?.fetchFiles&&d?.fetchCodeLinks)||Y)return;let e=!0;return(async()=>{try{await Promise.all([b(),T()]),e&&ee(!0)}catch(t){e&&console.error("Error loading Figma data:",t)}})(),()=>{e=!1}},[b,T,Y]),(0,o.useEffect)(()=>{if(!A||!s?.fetchComponents)return;let e=!0;return V(!0),S(A).then(()=>{if(!e)return}).catch(t=>{e&&console.error("Error fetching components:",t)}).finally(()=>{e&&V(!1)}),()=>{e=!1}},[A,S,s]);let et=(0,o.useCallback)(()=>{A?S(A):b()},[A,S,b]),ei=(0,o.useCallback)(async(e,t)=>{t.stopPropagation();let i=y[e]?.liked||!1;try{await C(e,!i,A||void 0)}catch(e){console.error("Error liking component:",e)}},[y,C,A]),en=(0,o.useCallback)(async(e,t)=>{t.stopPropagation();let i=y[e]?.saved||!1;try{await w(e,!i,A||void 0)}catch(e){console.error("Error saving component:",e)}},[y,w,A]),er=(0,o.useCallback)(async()=>{if(L&&R)try{await I(L,R,q,A||""),E(!1),T(),D(""),N(""),U("")}catch(e){console.error("Error linking component:",e)}},[L,R,q,A,I,T]),ea=(0,o.useMemo)(()=>m.map(e=>(0,i.jsx)(Z.Grid,{item:!0,xs:12,sm:6,children:(0,i.jsx)(X.Card,{elevation:1,children:(0,i.jsxs)(Q.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,i.jsx)(c.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,i.jsxs)(l.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,i.jsx)(F.IconButton,{size:"small",onClick:t=>ei(e.key,t),color:y[e.key]?.liked?"error":"default",children:(0,i.jsx)(to.default,{fontSize:"small"})}),(0,i.jsx)(F.IconButton,{size:"small",onClick:t=>en(e.key,t),color:y[e.key]?.saved?"primary":"default",children:(0,i.jsx)(ts.default,{fontSize:"small"})})]})]})})},e.key)),[m,y,ei,en]);return(0,i.jsxs)(l.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(p.Paper,{elevation:2,sx:{p:3,flexGrow:1,display:"flex",flexDirection:"column",minHeight:0},children:[(0,i.jsx)(l.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,i.jsx)(c.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"})}),(0,i.jsx)(l.Box,{sx:{borderBottom:1,borderColor:"divider",mb:3,flexShrink:0},children:(0,i.jsxs)(u.Tabs,{value:n,onChange:(e,t)=>r(t),children:[(0,i.jsx)(h.Tab,{icon:(0,i.jsx)(v.default,{}),iconPosition:"start",label:"Figma Components"}),(0,i.jsx)(h.Tab,{icon:(0,i.jsx)(tl.default,{}),iconPosition:"start",label:"Collaboration Board"})]})}),0===n&&(0,i.jsxs)(l.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,i.jsxs)(l.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,i.jsx)(c.Typography,{variant:"h6",children:"Figma Integration"}),(0,i.jsxs)(l.Box,{sx:{display:"flex",gap:1},children:[(0,i.jsx)(tr.Tooltip,{title:"Refresh",children:(0,i.jsx)(F.IconButton,{onClick:et,size:"small",children:(0,i.jsx)(ta.default,{})})}),(0,i.jsx)(k.Button,{variant:"outlined",size:"small",onClick:()=>E(!0),disabled:!A||0===m.length,children:"Link to Code"})]})]}),s?.fetchFiles&&d?.fetchCodeLinks?(0,i.jsxs)(l.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[j&&(0,i.jsx)(g.Alert,{severity:"error",sx:{mb:2},children:j}),(0,i.jsx)(l.Box,{sx:{mb:2},children:(0,i.jsxs)(_.FormControl,{fullWidth:!0,size:"small",children:[(0,i.jsx)(J.InputLabel,{children:"Select Figma File"}),(0,i.jsxs)(H.Select,{value:A||"",label:"Select Figma File",onChange:e=>P(e.target.value),children:[(0,i.jsx)(G.MenuItem,{value:"",children:"-- Select a file --"}),x.map(e=>(0,i.jsx)(G.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),A&&(0,i.jsx)(l.Box,{sx:{flexGrow:1,overflow:"auto"},children:K?(0,i.jsxs)(l.Box,{sx:{textAlign:"center",py:4},children:[(0,i.jsx)(f.CircularProgress,{size:24}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,i.jsxs)(Z.Grid,{container:!0,spacing:2,children:[ea,0===m.length&&(0,i.jsx)(Z.Grid,{item:!0,xs:12,children:(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!A&&(0,i.jsx)(l.Box,{sx:{textAlign:"center",py:4},children:(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,i.jsx)(g.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]}),1===n&&(0,i.jsxs)(l.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",minHeight:0},children:[(0,i.jsxs)(l.Box,{sx:{mb:2,flexShrink:0},children:[(0,i.jsxs)(c.Typography,{variant:"h6",gutterBottom:!0,children:["Collaboration Board - ",a]}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Collaborate, design, and create together with your team in real-time"})]}),(0,i.jsx)(l.Box,{sx:{flexGrow:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",bgcolor:"background.default",borderRadius:1},children:(0,i.jsx)(l.Box,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column","& > div":{height:"100% !important",minHeight:"100% !important"}},children:(0,i.jsx)(td.default,{boardId:a,userId:t?.id?.toString()||"anonymous",userName:t?.name||t?.email||"Anonymous User"})})})]})]}),(0,i.jsxs)(O.Dialog,{open:B,onClose:()=>E(!1),maxWidth:"sm",fullWidth:!0,children:[(0,i.jsx)(W.DialogTitle,{children:"Link Figma Component to Code"}),(0,i.jsxs)(M.DialogContent,{children:[(0,i.jsxs)(_.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,i.jsx)(J.InputLabel,{children:"Figma Component"}),(0,i.jsx)(H.Select,{value:L,label:"Figma Component",onChange:e=>D(e.target.value),children:m.map(e=>(0,i.jsx)(G.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,i.jsx)($.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:R,onChange:e=>N(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,i.jsx)($.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:q,onChange:e=>U(e.target.value),placeholder:"Button"})]}),(0,i.jsxs)(z.DialogActions,{children:[(0,i.jsx)(k.Button,{onClick:()=>E(!1),children:"Cancel"}),(0,i.jsx)(k.Button,{onClick:er,variant:"contained",disabled:!L||!R,children:"Link"})]})]})]})}var th=e.i(9036),tp=e.i(59436),tx=e.i(58204),tm=e.i(12057),tf=e.i(98457);function tg(){let[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(null),[m,f]=(0,o.useState)("gemini-3-pro-preview"),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{g.current&&e&&(g.current.scrollTop=g.current.scrollHeight)},[n,e]);let y=async e=>{if(e.preventDefault(),!a.trim()||d)return;let t={role:"user",text:a};r(e=>[...e,t]),s(""),u(!0),x(null);try{let e=(0,C.getBackendUrl)(),i=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[...n,t],model:m})});if(!i.ok){let e=i.headers.get("content-type");if(e&&e.includes("application/json")){let e=await i.json(),t=e.text||e.error||e.message||`Server error: ${i.status}`,n=e.details?` (${e.details})`:"";throw Error(`${t}${n}`)}{let e=await i.text();throw Error(`Server error: ${i.status} ${i.statusText}${e?` - ${e.substring(0,100)}`:""}`)}}let a=await i.json();if(!a.text||"string"!=typeof a.text)throw Error("Invalid response format from server");let o={role:"model",text:a.text};r(e=>[...e,o])}catch(n){let e=n?.message||"An unexpected error occurred",t=e.toLowerCase().includes("not configured")||e.toLowerCase().includes("api key")||e.toLowerCase().includes("configuration");t||console.error("Error sending message:",n),x(e);let i=t?"The AI chat feature is not yet configured. Please contact an administrator to set up the Gemini API key.":`Sorry, I encountered an error: ${e}`;r(e=>[...e,{role:"model",text:i}])}finally{u(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(th.Fab,{color:"primary","aria-label":"AI Chat",onClick:()=>t(!e),sx:{position:"fixed",bottom:24,right:24,zIndex:1300,boxShadow:3},children:e?(0,i.jsx)(tm.default,{}):(0,i.jsx)(tf.default,{})}),(0,i.jsx)(tp.Collapse,{in:e,orientation:"vertical",children:(0,i.jsxs)(p.Paper,{elevation:8,sx:{position:"fixed",bottom:100,right:24,width:{xs:"calc(100vw - 48px)",sm:400,md:450},height:{xs:"calc(100vh - 150px)",sm:600},maxHeight:{sm:600},zIndex:1300,display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",border:1,borderColor:"divider"},children:[(0,i.jsxs)(l.Box,{sx:{p:2,borderBottom:1,borderColor:"divider",bgcolor:"primary.main",color:"primary.contrastText",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{flex:1},children:[(0,i.jsx)(b.default,{}),(0,i.jsxs)(l.Box,{sx:{flex:1,minWidth:0},children:[(0,i.jsx)(c.Typography,{variant:"h6",sx:{fontWeight:700,fontSize:"1rem"},children:"AI Journal"}),(0,i.jsx)(c.Typography,{variant:"caption",sx:{opacity:.9,fontSize:"0.7rem"},children:"Gemini-powered digital consciousness"})]}),(0,i.jsxs)(_.FormControl,{size:"small",sx:{minWidth:140,"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.2)",color:"inherit","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"rgba(255, 255, 255, 0.7)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.9)"},"& .MuiSvgIcon-root":{color:"rgba(255, 255, 255, 0.9)"}},children:[(0,i.jsx)(J.InputLabel,{id:"model-select-label",sx:{fontSize:"0.7rem"},children:"Model"}),(0,i.jsxs)(H.Select,{labelId:"model-select-label",value:m,label:"Model",onChange:e=>f(e.target.value),disabled:d,sx:{fontSize:"0.75rem","& .MuiSelect-select":{py:.5}},children:[(0,i.jsx)(G.MenuItem,{value:"gemini-3-pro-preview",sx:{fontSize:"0.75rem"},children:"Gemini 3 Pro Preview"}),(0,i.jsx)(G.MenuItem,{value:"gemini-2.5-pro",sx:{fontSize:"0.75rem"},children:"Gemini 2.5 Pro"})]})]})]}),(0,i.jsxs)(l.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,i.jsx)(tr.Tooltip,{title:"Refresh chat",children:(0,i.jsx)(F.IconButton,{onClick:()=>{r([]),x(null),s(""),u(!1)},disabled:d,size:"small",sx:{color:"inherit"},children:(0,i.jsx)(ta.default,{fontSize:"small"})})}),(0,i.jsx)(tr.Tooltip,{title:"Close",children:(0,i.jsx)(F.IconButton,{onClick:()=>t(!1),size:"small",sx:{color:"inherit"},children:(0,i.jsx)(tm.default,{fontSize:"small"})})})]})]}),(0,i.jsxs)(l.Box,{ref:g,sx:{flexGrow:1,p:2,overflowY:"auto",display:"flex",flexDirection:"column",gap:2,minHeight:0,bgcolor:"background.default"},children:[0===n.length&&(0,i.jsxs)(l.Box,{sx:{textAlign:"center",py:4},children:[(0,i.jsx)(b.default,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,i.jsx)(c.Typography,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"Welcome to your AI Journal"}),(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",children:"Start a conversation with your digital consciousness. Ask questions, explore thoughts, or simply reflect."})]}),n.map((e,t)=>(0,i.jsx)(l.Box,{sx:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",mb:1},children:(0,i.jsx)(p.Paper,{elevation:1,sx:{p:1.5,maxWidth:"80%",bgcolor:"user"===e.role?"primary.main":"rgba(0, 0, 0, 0.02)",color:"user"===e.role?"white":"text.primary",borderRadius:"user"===e.role?"18px 18px 4px 18px":"18px 18px 18px 4px"},children:(0,i.jsx)(c.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap",fontSize:"0.875rem"},children:e.text})})},t)),d&&(0,i.jsx)(l.Box,{sx:{display:"flex",justifyContent:"flex-start",mb:1},children:(0,i.jsx)(p.Paper,{elevation:1,sx:{p:1.5,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:"18px 18px 18px 4px"},children:(0,i.jsx)(c.Typography,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Thinking..."})})})]}),(0,i.jsxs)(l.Box,{sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:"transparent"},children:[(0,i.jsx)("form",{onSubmit:y,children:(0,i.jsxs)(w.Stack,{direction:"row",spacing:1,alignItems:"flex-end",children:[(0,i.jsx)($.TextField,{fullWidth:!0,multiline:!0,maxRows:3,value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),!d&&a.trim())){let t=e.currentTarget.closest("form");t&&t.requestSubmit()}},placeholder:"Share your thoughts...",variant:"outlined",disabled:d,size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,i.jsx)(th.Fab,{type:"submit",color:"primary",disabled:d||!a.trim(),size:"small",sx:{minWidth:40,height:40},children:(0,i.jsx)(tx.default,{sx:{fontSize:18}})})]})}),h&&(0,i.jsx)(c.Typography,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:h})]})]})})]})}function ty(e){let{children:t,value:n,index:r,...a}=e;return n!==r?null:(0,i.jsx)("div",{role:"tabpanel",id:`creative-tabpanel-${r}`,"aria-labelledby":`creative-tab-${r}`,...a,children:(0,i.jsx)(l.Box,{sx:{py:3},children:t})})}function tj(){let e=(0,x.useTheme)(),t=(0,m.useMediaQuery)(e.breakpoints.down("md")),n=(0,s.useRouter)(),[r,a]=(0,o.useState)(0),[f,g]=(0,o.useState)(!1),{user:C}=(0,tc.useAuth)();C?.isAdmin;let k={support:0,browser:1,design:2,ai:3},w=[{key:"support",label:"Support",icon:(0,i.jsx)(y.default,{})},{key:"browser",label:"Browser",icon:(0,i.jsx)(j.default,{})},{key:"design",label:"Design & Figma",icon:(0,i.jsx)(v.default,{})},{key:"ai",label:"AI Agent",icon:(0,i.jsx)(b.default,{})}];return(0,o.useEffect)(()=>{let e=n.query.tab;e&&void 0!==k[e]&&a(k[e])},[n.query.tab]),(0,i.jsxs)(l.Box,{sx:{bgcolor:"background.default",minHeight:"100vh",pb:4},children:[(0,i.jsx)(l.Box,{sx:{mb:4,pt:2},children:(0,i.jsxs)(d.Container,{maxWidth:"xl",children:[(0,i.jsx)(c.Typography,{variant:"h4",fontWeight:700,gutterBottom:!0,sx:e=>({background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}),children:"Creative Dashboard"}),(0,i.jsx)(c.Typography,{variant:"body1",color:"text.secondary",sx:{maxWidth:"60ch"},children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,i.jsxs)(d.Container,{maxWidth:"xl",children:[(0,i.jsx)(p.Paper,{sx:{mb:3},children:(0,i.jsx)(u.Tabs,{value:r,onChange:(e,t)=>{a(t);let i=Object.keys(k).find(e=>k[e]===t);i&&n.push(`/creative?tab=${i}`,void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:!!t&&"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.95rem",fontWeight:500,"&.Mui-selected":{fontWeight:600}},"& .MuiTabs-indicator":{height:3}},children:w.map((e,t)=>(0,i.jsx)(h.Tab,{label:e.label,icon:e.icon,iconPosition:"start",id:`creative-tab-${t}`,"aria-controls":`creative-tabpanel-${t}`},e.key))})}),(0,i.jsx)(ty,{value:r,index:0,children:(0,i.jsx)(V,{})}),(0,i.jsx)(ty,{value:r,index:1,children:(0,i.jsx)(tb,{})}),(0,i.jsx)(ty,{value:r,index:2,children:(0,i.jsx)(tu,{})}),(0,i.jsx)(ty,{value:r,index:3,children:(0,i.jsx)(tn,{})})]}),(0,i.jsx)(S.default,{open:f,onClose:()=>g(!1)}),1===r&&(0,i.jsx)(tg,{})]})}function tb(){let[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)(!0),[a,s]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{u(!0);let e=(0,C.getBackendUrl)(),i=window.location.hostname,n=await fetch(`${e}/api/hyperbeam/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({parent:i})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||`HTTP ${n.status}`)}let r=await n.json();if(r.success&&r.embedUrl)s(r.embedUrl),t(null);else throw Error(r.error||"Failed to get Hyperbeam session URL")}catch(e){console.error("Error creating Hyperbeam session:",e),t(e.message||"Failed to create Hyperbeam session. Please try refreshing the page.")}finally{u(!1)}})()},[]),(0,i.jsxs)(l.Box,{children:[(0,i.jsxs)(l.Box,{sx:{mb:3},children:[(0,i.jsx)(c.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Browser Session"}),(0,i.jsx)(c.Typography,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Shared browser powered by Hyperbeam"})]}),d&&(0,i.jsx)(l.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,i.jsx)(f.CircularProgress,{})}),e&&(0,i.jsx)(g.Alert,{severity:"error",sx:{mb:2},children:e}),!d&&a&&(0,i.jsxs)(p.Paper,{sx:{position:"relative",width:"100%",height:"70vh",bgcolor:"#000",overflow:"hidden"},children:[n&&(0,i.jsx)(l.Box,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)"},children:(0,i.jsx)(f.CircularProgress,{})}),(0,i.jsx)("iframe",{src:a,style:{width:"100%",height:"100%",border:"none",display:"block"},allow:"clipboard-read; clipboard-write; microphone; camera; display-capture",onLoad:()=>r(!1),onError:()=>{r(!1),t("Failed to load Hyperbeam session")}})]})]})}e.s(["default",0,function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.default,{children:[(0,i.jsx)("title",{children:"Creative Dashboard - iShareHow Labs"}),(0,i.jsx)("link",{rel:"canonical",href:"https://ventures.isharehow.app/creative"}),(0,i.jsx)("meta",{name:"description",content:"Creative dashboard for managing creative projects and requests."})]}),(0,i.jsx)(a.default,{children:(0,i.jsx)(r.default,{active:"creative",children:(0,i.jsx)(tj,{})})})]})}],84394)},26727,(e,t,i)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(84394)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);