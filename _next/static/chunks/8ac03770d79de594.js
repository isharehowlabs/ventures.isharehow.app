(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17310,e=>{"use strict";var n=e.i(44855),t=e.i(58891),i=e.i(74614),a=e.i(75557),s=e.i(65790),o=e.i(15708),d=e.i(15915),l=e.i(7136),r=e.i(36042),c=e.i(78191),h=e.i(43632),u=e.i(36268);e.s(["default",0,()=>{let[e,p]=(0,t.useState)({nodes:[],edges:[]}),[g,j,x]=(0,u.useNodesState)([]),[y,f,v]=(0,u.useEdgesState)([]),[C,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{fetch("/api/rise-journey/graph").then(e=>e.json()).then(e=>{p(e),j(e.nodes||[]),f(e.edges||[])}).catch(()=>{})},[j,f]);let m=(0,t.useCallback)(e=>f(n=>(0,u.addEdge)(e,n)),[f]),S=async()=>{b(!0);try{await fetch("/api/rise-journey/graph",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodes:g,edges:y})})}finally{b(!1)}};return(0,n.jsxs)(s.Paper,{sx:{p:2},children:[(0,n.jsxs)(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:1},children:[(0,n.jsx)(d.Typography,{variant:"h5",fontWeight:700,children:"Journey Builder (Admin)"}),(0,n.jsxs)(o.Stack,{direction:"row",spacing:1,children:[(0,n.jsx)(a.Button,{variant:"outlined",onClick:()=>{let e=`level-${Date.now()}`;j(n=>[...n,{id:e,position:{x:400*Math.random(),y:300*Math.random()},data:{label:"Level",kind:"level"},type:"default"}])},children:"Add Level"}),(0,n.jsx)(a.Button,{variant:"outlined",onClick:()=>{let e=`lesson-${Date.now()}`;j(n=>[...n,{id:e,position:{x:200+400*Math.random(),y:100+300*Math.random()},data:{label:"Lesson",kind:"lesson"},type:"default"}])},children:"Add Lesson"}),(0,n.jsx)(a.Button,{variant:"contained",onClick:S,disabled:C,children:C?"Saving...":"Save"})]})]}),(0,n.jsx)(i.Box,{sx:{height:560,borderRadius:1,overflow:"hidden"},children:(0,n.jsxs)(l.default,{nodes:g,edges:y,onNodesChange:x,onEdgesChange:v,onConnect:m,fitView:!0,children:[(0,n.jsx)(h.MiniMap,{}),(0,n.jsx)(c.Controls,{}),(0,n.jsx)(r.Background,{gap:16})]})})]})}])},9586,e=>{e.n(e.i(17310))}]);