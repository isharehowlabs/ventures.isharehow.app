(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,562438,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},369326,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m7.46 7.12-2.78 1.15c-.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78c2.1.8 3.77 2.47 4.58 4.57M12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3M9.13 4.54l1.17 2.78c-1.38.5-2.47 1.59-2.98 2.97L4.54 9.13c.81-2.11 2.48-3.78 4.59-4.59M4.54 14.87l2.78-1.15c.51 1.38 1.59 2.46 2.97 2.96l-1.17 2.78c-2.1-.81-3.77-2.48-4.58-4.59m10.34 4.59-1.15-2.78c1.37-.51 2.45-1.59 2.95-2.97l2.78 1.17c-.81 2.1-2.48 3.77-4.58 4.58"}),"Support")},319391,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy")},496181,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},946242,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"Key")},334164,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},812214,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},26712,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},425449,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},27367,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},216875,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},926482,e=>{"use strict";var t=e.i(958891),r=e.i(513654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[l,o]=(0,t.useState)([]),[s,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[x,m]=(0,t.useState)({}),[y,g]=(0,t.useState)(!1),[j,f]=(0,t.useState)(null);return{files:e,components:i,tokens:l,likedComponents:s,savedComponents:d,draftedComponents:h,componentStatuses:x,isLoading:y,error:j,fetchFiles:async()=>{try{g(!0),f(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),i=await t.json();n(i.projects||[])}catch(e){f(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw f(e.message),e}let t=e.trim();try{g(!0),f(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await n.json()).file}catch(e){throw f(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw f(e.message),e}let t=e.trim();try{g(!0),f(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),i=await n.json();return a(i.components||[]),i.components}catch(e){throw f(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw f(e.message),e}let t=e.trim();try{g(!0),f(null);let e=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),i=await n.json();return o(i.tokens||[]),i.tokens}catch(e){throw f(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,n)=>{try{g(!0),f(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:n})}),l=await a.json();return l.success&&(m(r=>({...r,[e]:{...r[e],liked:t}})),t?c(t=>t.includes(e)?t:[...t,e]):c(t=>t.filter(t=>t!==e))),l}catch(e){throw f(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,n)=>{try{g(!0),f(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:n})}),l=await a.json();return l.success&&(m(r=>({...r,[e]:{...r[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),l}catch(e){throw f(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,n)=>{try{g(!0),f(null);let i=(0,r.getBackendUrl)(),a=await (0,r.fetchWithErrorHandling)(`${i}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:n})}),l=await a.json();return l.success&&(m(r=>({...r,[e]:{...r[e],drafted:t}})),t?p(t=>t.includes(e)?t:[...t,e]):p(t=>t.filter(t=>t!==e))),l}catch(e){throw f(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),f(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),n=await t.json();return c(n.componentIds||[]),n.componentIds||[]}catch(e){throw f(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),f(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),n=await t.json();return u(n.componentIds||[]),n.componentIds||[]}catch(e){throw f(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),f(null);let e=(0,r.getBackendUrl)(),t=await (0,r.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),n=await t.json();return p(n.componentIds||[]),n.componentIds||[]}catch(e){throw f(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,r.getBackendUrl)(),n=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),i=await n.json();return m(t=>({...t,[e]:{liked:i.liked||!1,saved:i.saved||!1,drafted:i.drafted||!1}})),i}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),f(null);let t=(0,r.getBackendUrl)(),n=e?JSON.stringify({componentIds:e}):void 0,i=await (0,r.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:n}),a=await i.json();if(a.preferences){m(e=>{let t={...e};return Object.entries(a.preferences).forEach(([e,r])=>{t[e]={liked:r.liked||!1,saved:r.saved||!1,drafted:r.drafted||!1}}),t});let e=Object.entries(a.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(a.preferences).filter(([e,t])=>t.saved).map(([e])=>e),r=Object.entries(a.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);c(e),u(t),p(r)}return a}catch(e){throw f(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>n])},538568,e=>{"use strict";var t=e.i(958891),r=e.i(513654);function n(){let[e,n]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[l,o]=(0,t.useState)(!1),[s,c]=(0,t.useState)(null),d=async e=>{try{o(!0),c(null);let t=(0,r.getBackendUrl)(),i=new URL(`${t}/api/mcp/code-links`);e&&i.searchParams.append("figmaFileId",e);let a=await fetch(i.toString(),{credentials:"include"});if(!a.ok)throw Error("Failed to fetch code links");let l=await a.json();n(l.links||[])}catch(e){c(e.message)}finally{o(!1)}},u=async()=>{try{o(!0),c(null);let e=(0,r.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let n=await t.json();a(n.tokens||[])}catch(e){c(e.message)}finally{o(!1)}};return{links:e,tokens:i,isLoading:l,error:s,linkComponentToCode:async(e,t,n,i)=>{try{o(!0),c(null);let a=(0,r.getBackendUrl)(),l=await fetch(`${a}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:n,figmaFileId:i})});if(!l.ok)throw Error("Failed to link component");let s=await l.json();return await d(),s}catch(e){throw c(e.message),e}finally{o(!1)}},fetchCodeLinks:d,syncTokens:async e=>{try{o(!0),c(null);let t=(0,r.getBackendUrl)(),n=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!n.ok)throw Error("Failed to sync tokens");let i=await n.json();return await u(),i}catch(e){throw c(e.message),e}finally{o(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{o(!0),c(null);let n=(0,r.getBackendUrl)(),i=await fetch(`${n}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!i.ok)throw Error("Failed to generate code");return await i.json()}catch(e){throw c(e.message),e}finally{o(!1)}}}}e.s(["useMCP",()=>n])},331862,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},418805,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},528097,(e,t,r)=>{"use strict";var n=e.r(991074);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e.r(764800)),a=e.r(444855);r.default=(0,i.default)((0,a.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},711500,e=>{"use strict";var t,r,n=e.i(444855),i=e.i(820887),a=e.i(21504),l=e.i(958891),o=e.i(983344),s=e.i(574614),c=e.i(732327),d=e.i(454385),u=e.i(65790),h=e.i(715915),p=e.i(672204),x=e.i(383378),m=e.i(670095),y=e.i(18394),g=e.i(562438),j=e.i(48177),f=e.i(369326),v=e.i(319391),b=e.i(633948),C=e.i(718295),S=e.i(92279),w=e.i(147379),T=e.i(975557),k=e.i(192378),I=e.i(415708),A=e.i(683161),P=e.i(647617),B=e.i(39972),E=e.i(920161),F=e.i(809109),W=e.i(513654);function M({open:e,onClose:t}){let r=(0,o.useRouter)(),[i,a]=(0,l.useState)({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),[s,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!1),p=e=>t=>{a(r=>({...r,[e]:t.target.value})),c(null)},x=async()=>{if(!i.name||!i.email||!i.phone)return void c("Please fill in all required fields (Name, Email, Phone)");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email))return void c("Please enter a valid email address");u(!0),c(null);try{let e=(0,W.getBackendUrl)(),n=await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:i.name,email:i.email,company:i.company,phone:i.phone||void 0,tier:i.tier||void 0,notes:i.notes||void 0,marketingBudget:i.marketingBudget||void 0,status:"pending"})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create client"}));throw Error(e.error||"Failed to create client")}if(t(),i.tier){let e=new URLSearchParams({name:i.name,email:i.email,company:i.company,tier:i.tier});r.push(`/demo?${e.toString()}`)}else window.location.reload();a({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""})}catch(e){c(e.message||"Failed to add client. Please try again.")}finally{u(!1)}},m=()=>{a({name:"",email:"",company:"",phone:"",tier:"",notes:"",marketingBudget:""}),c(null),t()};return(0,n.jsxs)(b.Dialog,{open:e,onClose:m,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(C.DialogTitle,{children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:700,children:"Add New Client"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Add a client lead and send them to the sign-up page"})]}),(0,n.jsx)(S.DialogContent,{children:(0,n.jsxs)(I.Stack,{spacing:3,sx:{mt:1},children:[s&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>c(null),children:s}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Client Name",required:!0,value:i.name,onChange:p("name"),placeholder:"John Doe"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Email Address",type:"email",required:!0,value:i.email,onChange:p("email"),placeholder:"john@company.com"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Company Name (Optional)",value:i.company,onChange:p("company"),placeholder:"Company Inc."}),(0,n.jsx)(k.TextField,{fullWidth:!0,required:!0,label:"Phone Number",type:"tel",value:i.phone,onChange:p("phone"),placeholder:"+1 (555) 123-4567"}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Recommended Tier"}),(0,n.jsxs)(B.Select,{value:i.tier,label:"Recommended Tier",onChange:e=>{a(t=>({...t,tier:e.target.value}))},children:[(0,n.jsx)(E.MenuItem,{value:"",children:"None"}),(0,n.jsx)(E.MenuItem,{value:"starter",children:"Starter"}),(0,n.jsx)(E.MenuItem,{value:"professional",children:"Professional"}),(0,n.jsx)(E.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,value:i.notes,onChange:p("notes"),placeholder:"Any additional information about this client..."}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Marketing Budget",value:i.marketingBudget,onChange:p("marketingBudget"),placeholder:"Do you have a marketing budget available or willing to get one?",helperText:"Do you have a marketing budget available or willing to get one?"})]})}),(0,n.jsxs)(w.DialogActions,{sx:{p:2},children:[(0,n.jsx)(T.Button,{onClick:m,children:"Cancel"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:x,disabled:d,children:d?"Sending...":"Send to Sign-Up"})]})]})}var z=e.i(337025),L=e.i(354704),$=e.i(555360),O=e.i(910251),D=e.i(945680),N=e.i(424918),R=e.i(811425),U=e.i(496181),q=e.i(946242),G=e.i(334164);function _(){let e,[t,r]=(0,l.useState)("all"),[i,a]=(0,l.useState)([]),[o,c]=(0,l.useState)(!1),[d,p]=(0,l.useState)(!0),[x,m]=(0,l.useState)(null),[y,g]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[b,C]=(0,l.useState)(null),[S,w]=(0,l.useState)(!1),[M,_]=(0,l.useState)({propertyId:"",measurementId:"",apiKey:"",viewId:""}),[X,H]=(0,l.useState)(""),[V,K]=(0,l.useState)(!1),[J,Y]=(0,l.useState)(null),[Q,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();a(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}finally{p(!1)}})()},[]),(0,l.useEffect)(()=>{if(t&&"all"!==t){let e=i.find(e=>e.id===t);e&&H(e.googleAnalyticsPropertyKey||"")}else H("")},[t,i]);let ee=async()=>{c(!0);try{await new Promise(e=>setTimeout(e,2e3)),m(new Date)}catch(e){console.error("Failed to sync analytics:",e)}finally{c(!1)}},et=e=>t=>{_(r=>({...r,[e]:t.target.value})),C(null)},er=async e=>{e.preventDefault(),v(!0),C(null),w(!1);try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/analytics/connect`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(M)});if(!t.ok){let e=await t.json().catch(()=>({message:"Failed to connect"}));throw Error(e.message||"Failed to connect to Google Analytics")}w(!0),g(!1),_({propertyId:"",measurementId:"",apiKey:"",viewId:""}),setTimeout(()=>{ee()},1e3)}catch(e){C(e.message||"An error occurred while connecting to Google Analytics")}finally{v(!1)}},en=async()=>{if(!t||"all"===t)return void Y("Please select a client first");K(!0),Y(null),Z(!1);try{let e=(0,W.getBackendUrl)(),r=await fetch(`${e}/api/creative/clients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({googleAnalyticsPropertyKey:X||null})});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to save"}));throw Error(e.error||"Failed to save analytics key")}let n=await r.json();a(e=>e.map(e=>e.id===t?{...e,googleAnalyticsPropertyKey:n.googleAnalyticsPropertyKey}:e)),Z(!0),setTimeout(()=>{Z(!1)},3e3)}catch(e){Y(e.message||"An error occurred while saving the analytics key")}finally{K(!1)}};return(0,n.jsxs)(s.Box,{children:[(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Analytics & Activity"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Track client usage, activity, and system analytics with Google Analytics integration"})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(T.Button,{variant:"outlined",startIcon:(0,n.jsx)(N.default,{}),onClick:ee,disabled:o,children:o?(0,n.jsx)(z.CircularProgress,{size:20}):"Sync Analytics"}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(D.default,{}),onClick:()=>{console.log("Exporting analytics report...")},children:"Export Report"})]})]}),x&&(0,n.jsxs)(F.Alert,{severity:"success",sx:{mb:3},children:["Last synced: ",x.toLocaleString()]}),(0,n.jsxs)(u.Paper,{elevation:2,sx:{p:3,mb:3,bgcolor:"primary.main",color:"white"},children:[(0,n.jsxs)(I.Stack,{spacing:2,children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:700,children:"Google Analytics Integration"}),(0,n.jsx)(h.Typography,{variant:"body2",sx:{opacity:.9},children:"Connect your Google Analytics account to import project data for clients. Analytics data will be automatically synced and displayed here."}),(0,n.jsx)(T.Button,{variant:"contained",size:"large",endIcon:y?(0,n.jsx)(U.default,{}):(0,n.jsx)(R.default,{}),sx:{bgcolor:"white",color:"primary.main",alignSelf:"flex-start","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},onClick:()=>{g(!y),C(null),w(!1)},children:"Connect Google Analytics"})]}),(0,n.jsx)($.Collapse,{in:y,children:(0,n.jsx)(s.Box,{component:"form",onSubmit:er,sx:{mt:3,p:3,bgcolor:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)"},children:(0,n.jsxs)(I.Stack,{spacing:3,children:[S&&(0,n.jsx)(F.Alert,{severity:"success",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white"},children:"Successfully connected to Google Analytics! Syncing data..."}),b&&(0,n.jsx)(F.Alert,{severity:"error",sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"white"},children:b}),(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,sx:{color:"white"},children:"Enter your Google Analytics credentials"}),(0,n.jsx)(k.TextField,{fullWidth:!0,required:!0,label:"Property ID",value:M.propertyId,onChange:et("propertyId"),placeholder:"G-XXXXXXXXXX",disabled:f,InputProps:{startAdornment:(0,n.jsx)(G.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your Google Analytics 4 Property ID (starts with G-)"}),(0,n.jsx)(k.TextField,{fullWidth:!0,required:!0,label:"Measurement ID",value:M.measurementId,onChange:et("measurementId"),placeholder:"G-XXXXXXXXXX",disabled:f,InputProps:{startAdornment:(0,n.jsx)(j.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your GA4 Measurement ID (usually same as Property ID)"}),(0,n.jsx)(k.TextField,{fullWidth:!0,required:!0,label:"API Key",type:"password",value:M.apiKey,onChange:et("apiKey"),placeholder:"Enter your Google Analytics API key",disabled:f,InputProps:{startAdornment:(0,n.jsx)(q.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Your Google Analytics API key (from Google Cloud Console)"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"View ID (Optional)",value:M.viewId,onChange:et("viewId"),placeholder:"Enter View ID for Universal Analytics (if applicable)",disabled:f,InputProps:{startAdornment:(0,n.jsx)(G.default,{sx:{mr:1,color:"rgba(255, 255, 255, 0.7)"}})},sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255, 255, 255, 0.9)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.8)"}},helperText:"Only needed for Universal Analytics (GA3) properties"}),(0,n.jsx)(O.Divider,{sx:{borderColor:"rgba(255, 255, 255, 0.2)"}}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,n.jsx)(T.Button,{variant:"outlined",onClick:()=>{g(!1),C(null),w(!1)},disabled:f,sx:{borderColor:"white",color:"white","&:hover":{borderColor:"rgba(255, 255, 255, 0.8)",bgcolor:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"}),(0,n.jsx)(T.Button,{type:"submit",variant:"contained",disabled:f||!M.propertyId||!M.measurementId||!M.apiKey,sx:{bgcolor:"white",color:"primary.main","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"},"&:disabled":{bgcolor:"rgba(255, 255, 255, 0.5)",color:"rgba(0, 0, 0, 0.3)"}},startIcon:f?(0,n.jsx)(z.CircularProgress,{size:20}):(0,n.jsx)(j.default,{}),children:f?"Connecting...":"Connect & Sync"})]})]})})})]}),(0,n.jsx)(u.Paper,{sx:{p:2,mb:3},children:(0,n.jsxs)(I.Stack,{spacing:2,children:[(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Select Client"}),(0,n.jsxs)(B.Select,{value:t,label:"Select Client",onChange:e=>r(e.target.value),disabled:d,children:[(0,n.jsx)(E.MenuItem,{value:"all",children:"All Clients"}),i.map(e=>(0,n.jsx)(E.MenuItem,{value:e.id,children:e.company||e.name},e.id))]})]}),t&&"all"!==t&&(0,n.jsx)(s.Box,{children:(0,n.jsxs)(I.Stack,{spacing:2,children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",fontWeight:600,color:"text.secondary",children:"Client Google Analytics Property Key"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Add or update the Google Analytics Property ID (G-XXXXXXXXXX) for this client to track their analytics growth."}),Q&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>Z(!1),children:"Analytics key saved successfully!"}),J&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>Y(null),children:J}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Google Analytics Property Key",value:X,onChange:e=>H(e.target.value),placeholder:"G-XXXXXXXXXX",helperText:"Enter the client's Google Analytics 4 Property ID",InputProps:{startAdornment:(0,n.jsx)(G.default,{sx:{mr:1,color:"text.secondary"}})},disabled:V}),(0,n.jsx)(T.Button,{variant:"contained",onClick:en,disabled:V||!X.trim(),startIcon:V?(0,n.jsx)(z.CircularProgress,{size:20}):(0,n.jsx)(q.default,{}),sx:{minWidth:150},children:V?"Saving...":"Save Key"})]}),t&&"all"!==t&&(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:(e=i.find(e=>e.id===t),e?.googleAnalyticsPropertyKey?`Current key: ${e.googleAnalyticsPropertyKey}`:"No analytics key set for this client")})]})})]})}),(0,n.jsxs)(L.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(L.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"primary.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Total Sessions"})]})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"success.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Active Users"})]})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Paper,{sx:{p:3,textAlign:"center"},children:[(0,n.jsx)(j.default,{sx:{fontSize:40,color:"warning.main",mb:1}}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,children:"--"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Page Views"})]})})]}),(0,n.jsxs)(u.Paper,{sx:{p:3,mt:3},children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Recent Activity"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Activity logs will appear here once Google Analytics is connected and synced."})]})]})}var X=e.i(1051),H=e.i(694367),V=e.i(187225),K=e.i(533932),J=e.i(163104),Y=e.i(707656),Q=e.i(950723),Z=e.i(86012),ee=e.i(363640),et=e.i(134699),er=e.i(812214),en=e.i(95532),ei=e.i(26712),ea=e.i(892297);function el(){let[e,t]=(0,l.useState)([]),[r,i]=(0,l.useState)([]),[a,o]=(0,l.useState)(!0),[c,d]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[M,z]=(0,l.useState)(null),[L,$]=(0,l.useState)(null),[O,D]=(0,l.useState)(null),[N,R]=(0,l.useState)({client:"",subject:"",description:"",priority:"medium"}),[U,q]=(0,l.useState)({subject:"",description:"",priority:"medium",status:"open"});(0,l.useEffect)(()=>{_(),G()},[]);let G=async()=>{try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/creative/clients`,{credentials:"include"});if(t.ok){let e=await t.json();i(e.clients||[])}}catch(e){console.error("Error fetching clients:",e)}},_=async()=>{o(!0),d(null);try{let e=(0,W.getBackendUrl)(),r=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to fetch support requests"}));throw Error(e.error||e.details||"Failed to fetch support requests")}let n=await r.json();t(n.requests||[])}catch(e){console.error("Error fetching support requests:",e),d(e.message||"Failed to load support requests"),t([])}finally{o(!1)}},el=async()=>{if(!f||!U.subject||!U.description)return void d("Subject and description are required");o(!0),d(null);try{let r=(0,W.getBackendUrl)(),n=await fetch(`${r}/api/creative/support-requests/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:U.subject,description:U.description,priority:U.priority,status:U.status})});if(!n.ok)throw Error("Failed to update support request");let i=await n.json();t(e.map(e=>e.id===f.id?i:e)),v(null),q({subject:"",description:"",priority:"medium",status:"open"}),y(!1)}catch(e){console.error("Error updating support request:",e),d(e.message||"Failed to update support request")}finally{o(!1)}},eo=async()=>{if(!N.subject||!N.description)return void d("Subject and description are required");o(!0),d(null);try{let r=(0,W.getBackendUrl)(),n=await fetch(`${r}/api/creative/support-requests`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({client:M?M.company||M.name:N.client,client_id:M?.id,subject:N.subject,description:N.description,priority:N.priority})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to create support request"}));throw Error(e.error||e.details||"Failed to create support request")}let i=await n.json();t([i,...e]),x("Support request created successfully"),R({client:"",subject:"",description:"",priority:"medium"}),z(null),y(!1),setTimeout(()=>x(null),3e3)}catch(e){console.error("Error creating support request:",e),d(e.message||"Failed to create support request")}finally{o(!1)}},es=e=>{switch(e){case"resolved":return"success";case"in-progress":return"warning";default:return"default"}},ec=e=>{switch(e){case"high":return"error";case"medium":return"warning";default:return"default"}};return(0,n.jsxs)(s.Box,{children:[p&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>x(null),sx:{mb:2},children:p}),c&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>d(null),sx:{mb:2},children:c}),(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"iShareHow Support Requests"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Manage and track support requests from clients"})]}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(et.default,{}),onClick:()=>{j(null),y(!0)},children:"New Request"})]}),(0,n.jsx)(J.TableContainer,{component:u.Paper,children:(0,n.jsxs)(H.Table,{children:[(0,n.jsx)(Y.TableHead,{children:(0,n.jsxs)(Q.TableRow,{children:[(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Client"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Subject"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Priority"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Created"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,n.jsx)(V.TableBody,{children:0===e.length?(0,n.jsx)(Q.TableRow,{children:(0,n.jsx)(K.TableCell,{colSpan:6,align:"center",sx:{py:4},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"No support requests yet."})})}):e.map(e=>(0,n.jsxs)(Q.TableRow,{hover:!0,children:[(0,n.jsx)(K.TableCell,{children:e.client}),(0,n.jsx)(K.TableCell,{children:e.subject}),(0,n.jsx)(K.TableCell,{children:(0,n.jsx)(X.Chip,{label:e.status,size:"small",color:es(e.status)})}),(0,n.jsx)(K.TableCell,{children:(0,n.jsx)(X.Chip,{label:e.priority,size:"small",color:ec(e.priority)})}),(0,n.jsx)(K.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)(K.TableCell,{align:"right",children:(0,n.jsx)(Z.IconButton,{size:"small",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),$(t.currentTarget),D(r))},children:(0,n.jsx)(ei.default,{})})})]},e.id))})]})}),(0,n.jsxs)(ea.Menu,{anchorEl:L,open:!!L,onClose:()=>{$(null),D(null)},children:[(0,n.jsxs)(E.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===O);t&&(j(t),v(null),y(!0))},children:[(0,n.jsx)(er.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,n.jsxs)(E.MenuItem,{onClick:()=>{let t=e.find(e=>e.id===O);t&&(v(t),j(null),q({subject:t.subject,description:t.description,priority:t.priority,status:t.status}),y(!0),$(null),D(null))},children:[(0,n.jsx)(en.default,{sx:{mr:1,fontSize:20}}),"Edit"]})]}),(0,n.jsxs)(b.Dialog,{open:m,onClose:()=>{y(!1),j(null),v(null),z(null),R({client:"",subject:"",description:"",priority:"medium"}),q({subject:"",description:"",priority:"medium",status:"open"})},maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:g?"Support Request Details":f?"Edit Support Request":"Create Support Request"}),(0,n.jsx)(S.DialogContent,{children:f?(0,n.jsxs)(I.Stack,{spacing:3,sx:{mt:1},children:[(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Subject",value:U.subject,onChange:e=>q({...U,subject:e.target.value})}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:U.description,onChange:e=>q({...U,description:e.target.value})}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Priority"}),(0,n.jsxs)(B.Select,{value:U.priority,label:"Priority",onChange:e=>q({...U,priority:e.target.value}),children:[(0,n.jsx)(E.MenuItem,{value:"low",children:"Low"}),(0,n.jsx)(E.MenuItem,{value:"medium",children:"Medium"}),(0,n.jsx)(E.MenuItem,{value:"high",children:"High"})]})]}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Status"}),(0,n.jsxs)(B.Select,{value:U.status,label:"Status",onChange:e=>q({...U,status:e.target.value}),children:[(0,n.jsx)(E.MenuItem,{value:"open",children:"Open"}),(0,n.jsx)(E.MenuItem,{value:"in-progress",children:"In Progress"}),(0,n.jsx)(E.MenuItem,{value:"resolved",children:"Resolved"})]})]})]}):g?(0,n.jsx)(s.Box,{children:(0,n.jsxs)(I.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Client"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.client})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.subject})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Description"}),(0,n.jsx)(h.Typography,{variant:"body1",children:g.description})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Status"}),(0,n.jsx)(X.Chip,{label:g.status,color:es(g.status)})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",color:"text.secondary",children:"Priority"}),(0,n.jsx)(X.Chip,{label:g.priority,color:ec(g.priority)})]})]})]})}):(0,n.jsxs)(I.Stack,{spacing:3,sx:{mt:1},children:[(0,n.jsx)(ee.Autocomplete,{fullWidth:!0,options:r,getOptionLabel:e=>e.company||e.name||"",value:M,onChange:(e,t)=>{z(t),R({...N,client:t?t.company||t.name:""})},renderInput:e=>(0,n.jsx)(k.TextField,{...e,label:"Client",placeholder:"Select a client..."}),renderOption:(e,t)=>(0,n.jsx)(s.Box,{component:"li",...e,children:(0,n.jsxs)(I.Stack,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:t.company||t.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Subject",value:N.subject,onChange:e=>R({...N,subject:e.target.value})}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:N.description,onChange:e=>R({...N,description:e.target.value})}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Priority"}),(0,n.jsxs)(B.Select,{value:N.priority,label:"Priority",onChange:e=>R({...N,priority:e.target.value}),children:[(0,n.jsx)(E.MenuItem,{value:"low",children:"Low"}),(0,n.jsx)(E.MenuItem,{value:"medium",children:"Medium"}),(0,n.jsx)(E.MenuItem,{value:"high",children:"High"})]})]})]})}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:()=>{y(!1),j(null),v(null),z(null),R({client:"",subject:"",description:"",priority:"medium"}),q({subject:"",description:"",priority:"medium",status:"open"})},children:g?"Close":"Cancel"}),f?(0,n.jsx)(T.Button,{variant:"contained",onClick:el,children:"Update Request"}):!g&&(0,n.jsx)(T.Button,{variant:"contained",onClick:eo,children:"Create Request"})]})]})]})}var eo=e.i(45162),es=e.i(803430),ec=e.i(262555),ed=e.i(898721),eu=e.i(372695),eh=e.i(107065);function ep({title:e,value:t,subtitle:r,progress:i,icon:a,color:l="primary"}){return(0,x.useTheme)(),(0,n.jsx)(eo.Card,{className:"dashboard-card metric-card",sx:{height:"100%"},children:(0,n.jsxs)(es.CardContent,{sx:{p:3},children:[(0,n.jsxs)(s.Box,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[(0,n.jsxs)(s.Box,{sx:{flex:1},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:e}),(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:700,sx:{mb:1},children:t}),r&&(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:r})]}),(0,n.jsx)(s.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",bgcolor:`${l}.main`,color:"white"},children:a})]}),void 0!==i&&(0,n.jsxs)(s.Box,{sx:{mt:2},children:[(0,n.jsx)(ec.LinearProgress,{variant:"determinate",value:i,sx:{height:8,borderRadius:4,bgcolor:"action.disabledBackground","& .MuiLinearProgress-bar":{borderRadius:4}}}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[i,"% complete"]})]})]})})}function ex({metrics:e}){let t={clients:0,projects:0,tasks:0,completion:0,...e};return(0,n.jsxs)(s.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2,mb:3},children:[(0,n.jsx)(ep,{title:"Active Clients",value:t.clients||0,subtitle:"This month",icon:(0,n.jsx)(g.default,{}),color:"primary"}),(0,n.jsx)(ep,{title:"Projects",value:t.projects||0,subtitle:"In progress",icon:(0,n.jsx)(ed.default,{}),color:"info"}),(0,n.jsx)(ep,{title:"Tasks",value:t.tasks||0,subtitle:"Completed today",icon:(0,n.jsx)(eu.default,{}),color:"success"}),(0,n.jsx)(ep,{title:"Progress",value:`${t.completion||0}%`,subtitle:"Overall completion",progress:t.completion||0,icon:(0,n.jsx)(eh.default,{}),color:"warning"})]})}var em=e.i(598807),ey=e.i(694544),eg=e.i(501911),ej=e.i(425449),ef=e.i(27367),ev=e.i(216875),eb=e.i(505385),eC=e.i(662574);e.i(896335);var eS=e.i(680622),ew=e.i(884933),eT=e.i(381706),ek=e.i(715127),eI=e.i(196861),eA=e.i(595262),eP=e.i(651480),eB=e.i(985741);function eE(e){return(0,eB.default)("MuiStepper",e)}(0,eP.default)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var eF=e.i(318420);let eW=l.createContext({}),eM=l.createContext({});function ez(e){return(0,eB.default)("MuiStepConnector",e)}(0,eP.default)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);let eL=["className"],e$=(0,eA.default)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ew.default)({flex:"1 1 auto"},"vertical"===e.orientation&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),eO=(0,eA.default)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.line,t[`line${(0,eF.default)(r.orientation)}`]]}})(({ownerState:e,theme:t})=>{let r="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,ew.default)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:r},"horizontal"===e.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===e.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),eD=l.forwardRef(function(e,t){let r=(0,eI.useDefaultProps)({props:e,name:"MuiStepConnector"}),{className:i}=r,a=(0,eS.default)(r,eL),{alternativeLabel:o,orientation:s="horizontal"}=l.useContext(eW),{active:c,disabled:d,completed:u}=l.useContext(eM),h=(0,ew.default)({},r,{alternativeLabel:o,orientation:s,active:c,completed:u,disabled:d}),p=(e=>{let{classes:t,orientation:r,alternativeLabel:n,active:i,completed:a,disabled:l}=e,o={root:["root",r,n&&"alternativeLabel",i&&"active",a&&"completed",l&&"disabled"],line:["line",`line${(0,eF.default)(r)}`]};return(0,ek.default)(o,ez,t)})(h);return(0,n.jsx)(e$,(0,ew.default)({className:(0,eT.default)(p.root,i),ref:t,ownerState:h},a,{children:(0,n.jsx)(eO,{className:p.line,ownerState:h})}))}),eN=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],eR=(0,eA.default)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})(({ownerState:e})=>(0,ew.default)({display:"flex"},"horizontal"===e.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===e.orientation&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),eU=(0,n.jsx)(eD,{}),eq=l.forwardRef(function(e,t){let r=(0,eI.useDefaultProps)({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:a=!1,children:o,className:s,component:c="div",connector:d=eU,nonLinear:u=!1,orientation:h="horizontal"}=r,p=(0,eS.default)(r,eN),x=(0,ew.default)({},r,{nonLinear:u,alternativeLabel:a,orientation:h,component:c}),m=(e=>{let{orientation:t,nonLinear:r,alternativeLabel:n,classes:i}=e;return(0,ek.default)({root:["root",t,r&&"nonLinear",n&&"alternativeLabel"]},eE,i)})(x),y=l.Children.toArray(o).filter(Boolean),g=y.map((e,t)=>l.cloneElement(e,(0,ew.default)({index:t,last:t+1===y.length},e.props))),j=l.useMemo(()=>({activeStep:i,alternativeLabel:a,connector:d,nonLinear:u,orientation:h}),[i,a,d,u,h]);return(0,n.jsx)(eW.Provider,{value:j,children:(0,n.jsx)(eR,(0,ew.default)({as:c,ownerState:x,className:(0,eT.default)(m.root,s),ref:t},p,{children:g}))})});function eG(e){return(0,eB.default)("MuiStep",e)}(0,eP.default)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);let e_=["active","children","className","component","completed","disabled","expanded","index","last"],eX=(0,eA.default)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})(({ownerState:e})=>(0,ew.default)({},"horizontal"===e.orientation&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),eH=l.forwardRef(function(e,t){let r=(0,eI.useDefaultProps)({props:e,name:"MuiStep"}),{active:i,children:a,className:o,component:s="div",completed:c,disabled:d,expanded:u=!1,index:h,last:p}=r,x=(0,eS.default)(r,e_),{activeStep:m,connector:y,alternativeLabel:g,orientation:j,nonLinear:f}=l.useContext(eW),[v=!1,b=!1,C=!1]=[i,c,d];m===h?v=void 0===i||i:!f&&m>h?b=void 0===c||c:!f&&m<h&&(C=void 0===d||d);let S=l.useMemo(()=>({index:h,last:p,expanded:u,icon:h+1,active:v,completed:b,disabled:C}),[h,p,u,v,b,C]),w=(0,ew.default)({},r,{active:v,orientation:j,alternativeLabel:g,completed:b,disabled:C,expanded:u,component:s}),T=(e=>{let{classes:t,orientation:r,alternativeLabel:n,completed:i}=e;return(0,ek.default)({root:["root",r,n&&"alternativeLabel",i&&"completed"]},eG,t)})(w),k=(0,n.jsxs)(eX,(0,ew.default)({as:s,className:(0,eT.default)(T.root,o),ref:t,ownerState:w},x,{children:[y&&g&&0!==h?y:null,a]}));return(0,n.jsx)(eM.Provider,{value:S,children:y&&!g&&0!==h?(0,n.jsxs)(l.Fragment,{children:[y,k]}):k})});var eV=e.i(462731);let eK=(0,eV.default)((0,n.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),eJ=(0,eV.default)((0,n.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var eY=e.i(848040);function eQ(e){return(0,eB.default)("MuiStepIcon",e)}let eZ=(0,eP.default)("MuiStepIcon",["root","active","completed","error","text"]),e0=["active","className","completed","error","icon"],e1=(0,eA.default)(eY.default,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${eZ.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${eZ.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${eZ.error}`]:{color:(e.vars||e).palette.error.main}})),e2=(0,eA.default)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),e5=l.forwardRef(function(e,r){let i=(0,eI.useDefaultProps)({props:e,name:"MuiStepIcon"}),{active:a=!1,className:l,completed:o=!1,error:s=!1,icon:c}=i,d=(0,eS.default)(i,e0),u=(0,ew.default)({},i,{active:a,completed:o,error:s}),h=(e=>{let{classes:t,active:r,completed:n,error:i}=e;return(0,ek.default)({root:["root",r&&"active",n&&"completed",i&&"error"],text:["text"]},eQ,t)})(u);if("number"==typeof c||"string"==typeof c){let e=(0,eT.default)(l,h.root);return s?(0,n.jsx)(e1,(0,ew.default)({as:eJ,className:e,ref:r,ownerState:u},d)):o?(0,n.jsx)(e1,(0,ew.default)({as:eK,className:e,ref:r,ownerState:u},d)):(0,n.jsxs)(e1,(0,ew.default)({className:e,ref:r,ownerState:u},d,{children:[t||(t=(0,n.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,n.jsx)(e2,{className:h.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:c})]}))}return c});function e4(e){return(0,eB.default)("MuiStepLabel",e)}let e3=(0,eP.default)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),e6=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],e7=(0,eA.default)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation]]}})(({ownerState:e})=>(0,ew.default)({display:"flex",alignItems:"center",[`&.${e3.alternativeLabel}`]:{flexDirection:"column"},[`&.${e3.disabled}`]:{cursor:"default"}},"vertical"===e.orientation&&{textAlign:"left",padding:"8px 0"})),e8=(0,eA.default)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>(0,ew.default)({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${e3.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${e3.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${e3.alternativeLabel}`]:{marginTop:16},[`&.${e3.error}`]:{color:(e.vars||e).palette.error.main}})),e9=(0,eA.default)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${e3.alternativeLabel}`]:{paddingRight:0}})),te=(0,eA.default)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${e3.alternativeLabel}`]:{textAlign:"center"}})),tt=l.forwardRef(function(e,t){var r;let i=(0,eI.useDefaultProps)({props:e,name:"MuiStepLabel"}),{children:a,className:o,componentsProps:s={},error:c=!1,icon:d,optional:u,slotProps:h={},StepIconComponent:p,StepIconProps:x}=i,m=(0,eS.default)(i,e6),{alternativeLabel:y,orientation:g}=l.useContext(eW),{active:j,disabled:f,completed:v,icon:b}=l.useContext(eM),C=d||b,S=p;C&&!S&&(S=e5);let w=(0,ew.default)({},i,{active:j,alternativeLabel:y,completed:v,disabled:f,error:c,orientation:g}),T=(e=>{let{classes:t,orientation:r,active:n,completed:i,error:a,disabled:l,alternativeLabel:o}=e;return(0,ek.default)({root:["root",r,a&&"error",l&&"disabled",o&&"alternativeLabel"],label:["label",n&&"active",i&&"completed",a&&"error",l&&"disabled",o&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",i&&"completed",a&&"error",l&&"disabled",o&&"alternativeLabel"],labelContainer:["labelContainer",o&&"alternativeLabel"]},e4,t)})(w),k=null!=(r=h.label)?r:s.label;return(0,n.jsxs)(e7,(0,ew.default)({className:(0,eT.default)(T.root,o),ref:t,ownerState:w},m,{children:[C||S?(0,n.jsx)(e9,{className:T.iconContainer,ownerState:w,children:(0,n.jsx)(S,(0,ew.default)({completed:v,active:j,error:c,icon:C},x))}):null,(0,n.jsxs)(te,{className:T.labelContainer,ownerState:w,children:[a?(0,n.jsx)(e8,(0,ew.default)({ownerState:w},k,{className:(0,eT.default)(T.label,null==k?void 0:k.className),children:a})):null,u]})]}))});tt.muiName="StepLabel";var tr=e.i(635153);function tn(e){return(0,eB.default)("MuiStepContent",e)}(0,eP.default)("MuiStepContent",["root","last","transition"]);let ti=["children","className","TransitionComponent","transitionDuration","TransitionProps"],ta=(0,eA.default)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.last&&t.last]}})(({ownerState:e,theme:t})=>(0,ew.default)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),tl=(0,eA.default)(tr.default,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),to=l.forwardRef(function(e,t){let r=(0,eI.useDefaultProps)({props:e,name:"MuiStepContent"}),{children:i,className:a,TransitionComponent:o=tr.default,transitionDuration:s="auto",TransitionProps:c}=r,d=(0,eS.default)(r,ti),{orientation:u}=l.useContext(eW),{active:h,last:p,expanded:x}=l.useContext(eM),m=(0,ew.default)({},r,{last:p}),y=(e=>{let{classes:t,last:r}=e;return(0,ek.default)({root:["root",r&&"last"],transition:["transition"]},tn,t)})(m),g=s;return"auto"!==s||o.muiSupportAuto||(g=void 0),(0,n.jsx)(ta,(0,ew.default)({className:(0,eT.default)(y.root,a),ref:t,ownerState:m},d,{children:(0,n.jsx)(tl,(0,ew.default)({as:o,in:h||x,className:y.transition,ownerState:m,timeout:g,unmountOnExit:!0},c,{children:i}))}))});var ts=e.i(692487),tc=e.i(394660),td=e.i(843884),tu=e.i(229360),th=e.i(556553),tp=e.i(852377),tx=e.i(453251);function tm(){let[e,t]=(0,l.useState)(0),[r,i]=(0,l.useState)([]),[a,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[m,y]=(0,l.useState)(""),[g,j]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null),[A,P]=(0,l.useState)(!1),[B,E]=(0,l.useState)(!1),M=["Guide","Quiz","SEO Audit","Generate Script"],z={title:"The 'Add Value First' Approach to SEO Prospecting",sections:[{title:"What is 'Add Value First'?",content:'The "Add Value First" philosophy, inspired by Grant Cardone and Alex Hormozi, means providing genuine value to prospects BEFORE asking for anything in return. This approach builds trust, demonstrates expertise, and dramatically increases response rates.'},{title:"Why It Works",content:`Traditional cold outreach gets ignored because it's self-serving. When you lead with valuelike a free SEO audit or actionable insightsyou immediately differentiate yourself. Prospects see you as a helpful expert, not just another salesperson.`},{title:"The Framework",content:`1. Research: Understand their business, pain points, and SEO opportunities
2. Provide Value: Offer a free SEO audit or specific insights
3. Build Rapport: Show genuine interest in their success
4. Soft Ask: Invite them to a conversation, not a sales pitch
5. Follow Up: Continue providing value even if they don't respond immediately`},{title:"Key Principles",content:` Personalization is non-negotiable
 Focus on their problems, not your solutions
 Use data and insights, not flattery
 Make it easy for them to say yes
 Follow up with more value, not pressure`}]},L=[{id:"q1",question:"What is the prospect's primary business goal?",placeholder:"e.g., Increase online sales, Generate more leads, Build brand awareness"},{id:"q2",question:"What SEO challenges do you think they're facing?",placeholder:"e.g., Low organic traffic, Poor keyword rankings, High bounce rate"},{id:"q3",question:"What specific value can you offer them immediately?",placeholder:"e.g., Free SEO audit, Competitor analysis, Content gap analysis"},{id:"q4",question:"What makes your approach unique for their industry?",placeholder:"e.g., Experience with e-commerce, Local SEO expertise, Technical SEO focus"},{id:"q5",question:"What's the best way to reach them?",placeholder:"e.g., Email, LinkedIn, Phone, In-person"}],$=()=>{1!==e||L.every(e=>r.some(t=>t.questionId===e.id&&t.answer.trim()))?2!==e||a.trim()?t(e=>Math.min(e+1,M.length-1)):alert("Please enter the client website URL for SEO audit."):alert("Please answer all quiz questions before proceeding.")},N=()=>{t(e=>Math.max(e-1,0))},U=async()=>{j(!0),y(""),v(null);try{let e=(0,W.getBackendUrl)(),t=r.map(e=>{let t=L.find(t=>t.id===e.questionId);return`${t?.question}: ${e.answer}`}).join("\n"),n=`You are an expert SEO prospecting script writer following the "Add Value First" approach inspired by Grant Cardone and Alex Hormozi.

Client Information:
- Name: ${c||"Not provided"}
- Website: ${a}
- Industry: ${p||"Not provided"}

Quiz Answers:
${t}

Please create a prospecting script that:
1. Leads with genuine value (mention the SEO audit)
2. Shows understanding of their business and challenges
3. Uses a warm, consultative tone (not salesy)
4. Includes a soft ask for a conversation
5. Is personalized based on the quiz answers
6. Follows the "Add Value First" framework

Also provide:
- A brief SEO audit summary (3-5 key findings)
- The value proposition (what makes this offer compelling)
- Next steps (how to follow up)

Format the response as a JSON object with these keys: script, seoAudit, valueProposition, nextSteps (array).`,i=await fetch(`${e}/api/gemini-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({messages:[{role:"user",text:n}]})});if(!i.ok)throw Error("Failed to generate script");let l=await i.json();y(l.text);try{let e=l.text,t=e.match(/```json\s*([\s\S]*?)\s*```/)||e.match(/```\s*([\s\S]*?)\s*```/);t&&(e=t[1]);let r=JSON.parse(e);v({script:r.script||l.text,seoAudit:r.seoAudit||"SEO audit details will be generated.",valueProposition:r.valueProposition||"Value proposition will be generated.",nextSteps:Array.isArray(r.nextSteps)?r.nextSteps:["Follow up in 3-5 days","Share additional insights","Offer a free consultation"]})}catch(e){v({script:l.text,seoAudit:"Review the generated script for SEO audit insights.",valueProposition:"The value is embedded in the script above.",nextSteps:["Review and customize the script","Test with a small batch","Follow up consistently"]})}P(!0)}catch(e){console.error("Error generating script:",e),alert(`Error generating script: ${e.message}`)}finally{j(!1)}};return(0,n.jsx)(s.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:(0,n.jsxs)(I.Stack,{spacing:3,children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(X.Chip,{label:"10X SEO Prospecting",color:"primary",icon:(0,n.jsx)(tu.default,{}),sx:{fontWeight:700,mb:2}}),(0,n.jsx)(h.Typography,{variant:"h4",sx:{fontWeight:900,mb:1},children:"SEO Prospecting Script Builder"}),(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{mb:2},children:'Use our AI-powered tool to create personalized "Add Value First" prospecting scripts with integrated SEO audits. Perfect for agencies looking to 10X their client acquisition.'}),(0,n.jsx)(F.Alert,{severity:"info",sx:{mb:2},children:(0,n.jsxs)(h.Typography,{variant:"body2",children:[(0,n.jsx)("strong",{children:"New:"})," Get the complete 10X SEO Prospecting Workshop for just $97 (86% OFF). Includes live training, AI templates, and access to our co-work community."," ",(0,n.jsx)(T.Button,{size:"small",variant:"outlined",href:"https://shop.isharehow.app/products/flash-sale-10x-your-seo-prospecting?utm_source=creative-dashboard&utm_medium=learning-hub&utm_content=seo-builder",target:"_blank",endIcon:(0,n.jsx)(tx.default,{}),sx:{ml:1},children:"Learn More"})]})})]}),(0,n.jsx)(u.Paper,{sx:{p:3},children:(0,n.jsxs)(eq,{activeStep:e,orientation:"vertical",children:[(0,n.jsxs)(eH,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Learn the Framework"})}),(0,n.jsxs)(to,{children:[(0,n.jsxs)(s.Box,{sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:z.title}),(0,n.jsx)(I.Stack,{spacing:3,children:z.sections.map((e,t)=>(0,n.jsxs)(ts.Accordion,{defaultExpanded:0===t,children:[(0,n.jsx)(tc.AccordionSummary,{expandIcon:(0,n.jsx)(R.default,{}),children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,n.jsx)(td.AccordionDetails,{children:(0,n.jsx)(h.Typography,{variant:"body1",sx:{whiteSpace:"pre-line"},children:e.content})})]},t))})]}),(0,n.jsx)(T.Button,{variant:"contained",onClick:$,sx:{mt:2},children:"Continue to Quiz"})]})]}),(0,n.jsxs)(eH,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Answer Questions About Your Prospect"})}),(0,n.jsxs)(to,{children:[(0,n.jsxs)(I.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"info",children:"Answer these questions to help our AI create a personalized prospecting script."}),L.map(e=>{let t=r.find(t=>t.questionId===e.id);return(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:e.question}),(0,n.jsx)(k.TextField,{fullWidth:!0,multiline:!0,rows:3,value:t?.answer||"",onChange:t=>{var r,n;return r=e.id,n=t.target.value,void i(e=>e.find(e=>e.questionId===r)?e.map(e=>e.questionId===r?{...e,answer:n}:e):[...e,{questionId:r,answer:n}])},placeholder:e.placeholder,variant:"outlined"})]})},e.id)})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(T.Button,{onClick:N,children:"Back"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:$,children:"Continue to SEO Audit"})]})]})]}),(0,n.jsxs)(eH,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Enter Client Information for SEO Audit"})}),(0,n.jsxs)(to,{children:[(0,n.jsxs)(I.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"info",children:"Provide client information to generate an SEO audit that will be included in your prospecting script."}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Client Name",value:c,onChange:e=>d(e.target.value),placeholder:"e.g., Acme Corporation",variant:"outlined"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Client Website URL",value:a,onChange:e=>o(e.target.value),placeholder:"e.g., https://example.com",variant:"outlined",required:!0,helperText:"This will be used to generate SEO audit insights"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Industry",value:p,onChange:e=>x(e.target.value),placeholder:"e.g., E-commerce, SaaS, Healthcare",variant:"outlined"})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(T.Button,{onClick:N,children:"Back"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:$,children:"Generate Script"})]})]})]}),(0,n.jsxs)(eH,{children:[(0,n.jsx)(tt,{children:(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700},children:"Generate Your Prospecting Script"})}),(0,n.jsxs)(to,{children:[(0,n.jsxs)(I.Stack,{spacing:3,sx:{mb:3},children:[(0,n.jsx)(F.Alert,{severity:"success",children:'Ready to generate! Click the button below to create your personalized "Add Value First" prospecting script with integrated SEO audit.'}),(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:600,mb:2},children:"Summary"}),(0,n.jsxs)(I.Stack,{spacing:1,children:[(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Client:"})," ",c||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Website:"})," ",a||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Industry:"})," ",p||"Not provided"]}),(0,n.jsxs)(h.Typography,{children:[(0,n.jsx)("strong",{children:"Quiz Answers:"})," ",r.length," / ",L.length]})]})]})})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(T.Button,{onClick:N,children:"Back"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:U,disabled:g,startIcon:(0,n.jsx)(th.default,{}),size:"large",children:g?"Generating Script...":"Generate Script with AI"})]})]})]})]})}),(0,n.jsxs)(b.Dialog,{open:A,onClose:()=>P(!1),maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700},children:"Your Prospecting Script"}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,children:[(0,n.jsx)(Z.IconButton,{onClick:()=>{f&&(navigator.clipboard.writeText(f.script),E(!0),setTimeout(()=>E(!1),2e3))},title:"Copy Script",children:(0,n.jsx)(tp.default,{})}),(0,n.jsx)(Z.IconButton,{onClick:()=>{if(f){let e=new Blob([`SEO Prospecting Script
Generated: ${new Date().toLocaleString()}
Client: ${c||"N/A"}
Website: ${a}

SCRIPT:
${f.script}

SEO AUDIT SUMMARY:
${f.seoAudit}

VALUE PROPOSITION:
${f.valueProposition}

NEXT STEPS:
${f.nextSteps.map((e,t)=>`${t+1}. ${e}`).join("\n")}
`],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`seo-prospecting-script-${c||"client"}-${Date.now()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},title:"Download Script",children:(0,n.jsx)(D.default,{})})]})]})}),(0,n.jsx)(S.DialogContent,{dividers:!0,children:f&&(0,n.jsxs)(I.Stack,{spacing:3,children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Script"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"grey.50",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:f.script})})]}),(0,n.jsx)(O.Divider,{}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"SEO Audit Summary"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"info.light",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:f.seoAudit})})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Value Proposition"}),(0,n.jsx)(u.Paper,{sx:{p:2,bgcolor:"success.light",border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(h.Typography,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:f.valueProposition})})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{fontWeight:700,mb:1},children:"Next Steps"}),(0,n.jsx)(I.Stack,{spacing:1,children:f.nextSteps.map((e,t)=>(0,n.jsx)(X.Chip,{label:`${t+1}. ${e}`,icon:(0,n.jsx)(eu.default,{}),variant:"outlined",sx:{justifyContent:"flex-start"}},t))})]})]})}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:()=>P(!1),children:"Close"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:()=>{P(!1),t(0),v(null),i([]),o(""),d(""),x("")},children:"Create Another Script"})]})]}),B&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>E(!1),children:"Script copied to clipboard!"})]})})}let ty=null,tg=null;try{let t=e.r(926482);ty=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(538568);tg=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function tj(){let{settings:e,updateApiKeys:t}=(0,eb.useSettings)(),[r,i]=(0,l.useState)([]),[a,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1),[p,x]=(0,l.useState)(""),[m,y]=(0,l.useState)(""),[g,j]=(0,l.useState)(null),[f,W]=(0,l.useState)(null),[M,$]=(0,l.useState)(""),O=null,D=null;try{ty&&(O=ty())}catch(e){console.warn("Figma hook not available:",e)}try{tg&&(D=tg())}catch(e){console.warn("MCP hook not available:",e)}let R=O?.files||[],U=O?.components||[],q=O?.componentStatuses||{};O?.isLoading;let G=O?.error||null,_=O?.fetchFiles||(()=>Promise.resolve()),H=O?.fetchComponents||(()=>Promise.resolve()),V=O?.likeComponent||(()=>Promise.resolve()),K=O?.saveComponent||(()=>Promise.resolve()),J=O?.fetchComponentStatus||(()=>Promise.resolve()),Y=D?.linkComponentToCode||(()=>Promise.resolve()),Q=D?.fetchCodeLinks||(()=>Promise.resolve()),[ee,er]=(0,l.useState)(null),[ei,ea]=(0,l.useState)(!1),[el,ec]=(0,l.useState)(""),[ed,eu]=(0,l.useState)(""),[eh,ep]=(0,l.useState)(""),[ex,eS]=(0,l.useState)(!1);(0,l.useEffect)(()=>{$(e.apiKeys?.revidApiKey||"")},[e.apiKeys]),(0,l.useEffect)(()=>{let e=localStorage.getItem("ai_agent_content");if(e)try{i(JSON.parse(e))}catch(e){console.error("Error loading content items:",e)}},[]),(0,l.useEffect)(()=>{ty&&tg&&(async()=>{try{await Promise.all([_(),Q()])}catch(e){console.error("Error loading Figma data:",e)}})()},[]),(0,l.useEffect)(()=>{ee&&ty&&(eS(!0),H(ee).then(()=>{U.length>0&&Promise.all(U.map(e=>J(e.key,ee)))}).catch(e=>console.error("Error fetching components:",e)).finally(()=>eS(!1)))},[ee]);let ew=e=>{localStorage.setItem("ai_agent_content",JSON.stringify(e)),i(e)},eT=()=>{o(null),x(""),y(""),d(!0),j(null)},ek=async e=>{if(!M)return void j("Revid.ai API key is required. Please add your API key above.");j(null),W("Generating video... This may take a few minutes.");try{let t=await fetch("https://api.revid.ai/v1/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({script:e.content,title:e.title})});if(!t.ok)throw Error("Failed to generate video");await t.json();let n=r.map(t=>t.id===e.id?{...t,lastUsed:new Date().toISOString()}:t);ew(n),W("Video generated successfully! Check your Revid.ai dashboard."),setTimeout(()=>W(null),5e3)}catch(e){j(e.message||"Failed to generate video. Please check your API key and try again."),W(null)}},eI=async(e,t)=>{t.stopPropagation();let r=q[e]?.liked||!1;try{await V(e,!r,ee||void 0)}catch(e){console.error("Error liking component:",e)}},eA=async(e,t)=>{t.stopPropagation();let r=q[e]?.saved||!1;try{await K(e,!r,ee||void 0)}catch(e){console.error("Error saving component:",e)}},eP=async()=>{if(el&&ed)try{await Y(el,ed,eh,ee||""),ea(!1),Q()}catch(e){console.error("Error linking component:",e)}};return(0,n.jsxs)(s.Box,{sx:{p:3,height:"100%",overflow:"auto"},children:[(0,n.jsxs)(L.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(L.Grid,{item:!0,xs:12,md:4,children:(0,n.jsx)(eC.default,{height:600})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,md:8,children:(0,n.jsxs)(u.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"}),(0,n.jsxs)(s.Box,{sx:{display:"flex",gap:1},children:[(0,n.jsx)(em.Tooltip,{title:"Refresh",children:(0,n.jsx)(Z.IconButton,{onClick:()=>{ee?H(ee):_()},size:"small",children:(0,n.jsx)(N.default,{})})}),(0,n.jsx)(T.Button,{variant:"outlined",size:"small",onClick:()=>ea(!0),disabled:!ee||0===U.length,children:"Link to Code"})]})]}),ty&&tg?(0,n.jsxs)(s.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[G&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},children:G}),(0,n.jsx)(s.Box,{sx:{mb:2},children:(0,n.jsxs)(A.FormControl,{fullWidth:!0,size:"small",children:[(0,n.jsx)(P.InputLabel,{children:"Select Figma File"}),(0,n.jsxs)(B.Select,{value:ee||"",label:"Select Figma File",onChange:e=>er(e.target.value),children:[(0,n.jsx)(E.MenuItem,{value:"",children:"-- Select a file --"}),R.map(e=>(0,n.jsx)(E.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),ee&&(0,n.jsx)(s.Box,{sx:{flexGrow:1,overflow:"auto"},children:ex?(0,n.jsxs)(s.Box,{sx:{textAlign:"center",py:4},children:[(0,n.jsx)(z.CircularProgress,{size:24}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,n.jsxs)(L.Grid,{container:!0,spacing:2,children:[U.map(e=>(0,n.jsx)(L.Grid,{item:!0,xs:12,sm:6,children:(0,n.jsx)(eo.Card,{elevation:1,children:(0,n.jsxs)(es.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,n.jsxs)(s.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,n.jsx)(Z.IconButton,{size:"small",onClick:t=>eI(e.key,t),color:q[e.key]?.liked?"error":"default",children:(0,n.jsx)(ef.default,{fontSize:"small"})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:t=>eA(e.key,t),color:q[e.key]?.saved?"primary":"default",children:(0,n.jsx)(ev.default,{fontSize:"small"})})]})]})})},e.key)),0===U.length&&(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!ee&&(0,n.jsx)(s.Box,{sx:{textAlign:"center",py:4},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,n.jsx)(F.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,md:8,children:(0,n.jsxs)(u.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(v.default,{sx:{fontSize:32,color:"primary.main"}}),(0,n.jsx)(h.Typography,{variant:"h5",sx:{fontWeight:700},children:"AI Agent Content Manager"})]}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create and manage content for your AI agent to automatically generate and post videos daily."}),(0,n.jsx)(s.Box,{sx:{mb:3},children:(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Revid.ai API Key",type:"password",value:M,onChange:e=>{let r=e.target.value;$(r),t({revidApiKey:r})},placeholder:"Enter your Revid.ai API key",helperText:"Required for AI Agent panel to generate and auto-post videos",size:"small"})}),f&&(0,n.jsx)(F.Alert,{severity:"success",sx:{mb:2},onClose:()=>W(null),children:f}),g&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>j(null),children:g}),(0,n.jsx)(s.Box,{sx:{flexGrow:1,overflow:"auto"},children:c?(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",sx:{mb:2},children:a?"Edit Content":"Add New Content"}),(0,n.jsxs)(I.Stack,{spacing:2,children:[(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Title",value:p,onChange:e=>x(e.target.value),placeholder:"Enter content title",required:!0,size:"small"}),(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Content",value:m,onChange:e=>y(e.target.value),placeholder:"Enter the content/script for your AI agent to use",multiline:!0,rows:6,required:!0,size:"small"}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,children:[(0,n.jsx)(T.Button,{variant:"contained",onClick:()=>{if(!p.trim()||!m.trim())return void j("Title and content are required");if(!M)return void j("Revid.ai API key is required. Please add your API key above.");let e=a?{...a,title:p,content:m}:{id:Date.now().toString(),title:p,content:m,createdAt:new Date().toISOString(),status:"active"};ew(a?r.map(t=>t.id===a.id?e:t):[...r,e]),d(!1),x(""),y(""),o(null),W(a?"Content updated successfully":"Content added successfully"),setTimeout(()=>W(null),3e3)},size:"small",children:a?"Update":"Save"}),(0,n.jsx)(T.Button,{variant:"outlined",onClick:()=>{d(!1),x(""),y(""),o(null),j(null)},size:"small",children:"Cancel"})]})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(h.Typography,{variant:"h6",children:"Content Library"}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(et.default,{}),onClick:eT,disabled:!M,size:"small",children:"Add Content"})]}),0===r.length?(0,n.jsxs)(s.Box,{sx:{textAlign:"center",py:4},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"No content items yet. Create your first content item to get started."}),(0,n.jsx)(T.Button,{variant:"outlined",startIcon:(0,n.jsx)(et.default,{}),onClick:eT,disabled:!M,size:"small",children:"Add Your First Content"})]}):(0,n.jsx)(I.Stack,{spacing:2,children:r.filter(e=>"active"===e.status).map(e=>(0,n.jsx)(eo.Card,{elevation:1,children:(0,n.jsx)(es.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",children:[(0,n.jsxs)(s.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:500,sx:{mb:.5},children:e.title}),(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[e.content.substring(0,150),e.content.length>150?"...":""]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[(0,n.jsx)(X.Chip,{label:`Created: ${new Date(e.createdAt).toLocaleDateString()}`,size:"small",variant:"outlined"}),e.lastUsed&&(0,n.jsx)(X.Chip,{label:`Last used: ${new Date(e.lastUsed).toLocaleDateString()}`,size:"small",variant:"outlined"})]})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:.5,children:[(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>ek(e),title:"Generate Video",disabled:!M,children:(0,n.jsx)(eg.default,{fontSize:"small"})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>{W("Scheduling feature coming soon!"),setTimeout(()=>W(null),3e3)},title:"Schedule",disabled:!M,children:(0,n.jsx)(ej.default,{fontSize:"small"})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>{o(e),x(e.title),y(e.content),d(!0),j(null)},title:"Edit",children:(0,n.jsx)(en.default,{fontSize:"small"})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>{var t;return t=e.id,void(confirm("Are you sure you want to delete this content?")&&(ew(r.filter(e=>e.id!==t)),W("Content deleted successfully"),setTimeout(()=>W(null),3e3)))},title:"Delete",color:"error",children:(0,n.jsx)(ey.default,{fontSize:"small"})})]})]})})},e.id))})]})})]})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(u.Paper,{elevation:2,sx:{p:3,minHeight:600,display:"flex",flexDirection:"column"},children:(0,n.jsx)(tm,{})})})]}),(0,n.jsxs)(b.Dialog,{open:ei,onClose:()=>ea(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:"Link Figma Component to Code"}),(0,n.jsxs)(S.DialogContent,{children:[(0,n.jsxs)(A.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,n.jsx)(P.InputLabel,{children:"Figma Component"}),(0,n.jsx)(B.Select,{value:el,label:"Figma Component",onChange:e=>ec(e.target.value),children:U.map(e=>(0,n.jsx)(E.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,n.jsx)(k.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:ed,onChange:e=>eu(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,n.jsx)(k.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:eh,onChange:e=>ep(e.target.value),placeholder:"Button"})]}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:()=>ea(!1),children:"Cancel"}),(0,n.jsx)(T.Button,{onClick:eP,variant:"contained",disabled:!el||!ed,children:"Link"})]})]})]})}var tf=e.i(888795),tv=e.i(468418),tb=e.i(485760);function tC(e){return(0,eB.default)("MuiInputAdornment",e)}let tS=(0,eP.default)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),tw=["children","className","component","disablePointerEvents","disableTypography","position","variant"],tT=(0,eA.default)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`position${(0,eF.default)(r.position)}`],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(({theme:e,ownerState:t})=>(0,ew.default)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${tS.positionStart}&:not(.${tS.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),tk=l.forwardRef(function(e,t){let i=(0,eI.useDefaultProps)({props:e,name:"MuiInputAdornment"}),{children:a,className:o,component:s="div",disablePointerEvents:c=!1,disableTypography:d=!1,position:u,variant:h}=i,p=(0,eS.default)(i,tw),x=(0,tb.default)()||{},m=h;h&&x.variant,x&&!m&&(m=x.variant);let y=(0,ew.default)({},i,{hiddenLabel:x.hiddenLabel,size:x.size,disablePointerEvents:c,position:u,variant:m}),g=(e=>{let{classes:t,disablePointerEvents:r,hiddenLabel:n,position:i,size:a,variant:l}=e,o={root:["root",r&&"disablePointerEvents",i&&`position${(0,eF.default)(i)}`,l,n&&"hiddenLabel",a&&`size${(0,eF.default)(a)}`]};return(0,ek.default)(o,tC,t)})(y);return(0,n.jsx)(tv.default.Provider,{value:null,children:(0,n.jsx)(tT,(0,ew.default)({as:s,ownerState:y,className:(0,eT.default)(g.root,o),ref:t},p,{children:"string"!=typeof a||d?(0,n.jsxs)(l.Fragment,{children:["start"===u?r||(r=(0,n.jsx)("span",{className:"notranslate",children:""})):null,a]}):(0,n.jsx)(tf.default,{color:"text.secondary",children:a})}))})});var tI=e.i(984579),tA=e.i(204591),tP=e.i(331862),tB=e.i(285106),tE=e.i(418805),tF=e.i(528097),tW=e.i(212895),tM=e.i(888522),tz=e.i(310600);function tL({open:e,onClose:t,client:r,onSave:i,readOnly:a=!1}){let[o,c]=(0,l.useState)({name:"",email:"",company:"",phone:"",status:"pending",tier:"starter",notes:"",googleAnalyticsPropertyKey:""}),[d,u]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{r&&c({name:r.name||"",email:r.email||"",company:r.company||"",phone:r.phone||"",status:r.status||"pending",tier:r.tier||"starter",notes:r.notes||"",googleAnalyticsPropertyKey:r.googleAnalyticsPropertyKey||""})},[r]);let x=async()=>{if(a)return void t();u(""),p(!0);try{let e=await fetch(`${(0,W.getBackendUrl)()}/api/creative/clients/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to update client"}));throw Error(t.error||"Failed to update client")}i(),t()}catch(e){u(e.message||"Failed to update client")}finally{p(!1)}};return(0,n.jsxs)(b.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:a?"View Client":"Edit Client"}),(0,n.jsx)(S.DialogContent,{children:(0,n.jsxs)(s.Box,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[d&&(0,n.jsx)(F.Alert,{severity:"error",children:d}),(0,n.jsx)(k.TextField,{label:"Name",value:o.name,onChange:e=>c({...o,name:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(k.TextField,{label:"Email",type:"email",value:o.email,onChange:e=>c({...o,email:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(k.TextField,{label:"Company",value:o.company,onChange:e=>c({...o,company:e.target.value}),fullWidth:!0,required:!0,disabled:a}),(0,n.jsx)(k.TextField,{label:"Phone",value:o.phone,onChange:e=>c({...o,phone:e.target.value}),fullWidth:!0,disabled:a}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,disabled:a,children:[(0,n.jsx)(P.InputLabel,{children:"Status"}),(0,n.jsxs)(B.Select,{value:o.status,onChange:e=>c({...o,status:e.target.value}),label:"Status",children:[(0,n.jsx)(E.MenuItem,{value:"pending",children:"Pending"}),(0,n.jsx)(E.MenuItem,{value:"active",children:"Active"}),(0,n.jsx)(E.MenuItem,{value:"inactive",children:"Inactive"}),(0,n.jsx)(E.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,disabled:a,children:[(0,n.jsx)(P.InputLabel,{children:"Tier"}),(0,n.jsxs)(B.Select,{value:o.tier,onChange:e=>c({...o,tier:e.target.value}),label:"Tier",children:[(0,n.jsx)(E.MenuItem,{value:"starter",children:"Starter"}),(0,n.jsx)(E.MenuItem,{value:"professional",children:"Professional"}),(0,n.jsx)(E.MenuItem,{value:"enterprise",children:"Enterprise"})]})]}),(0,n.jsx)(k.TextField,{label:"Notes",value:o.notes,onChange:e=>c({...o,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3,disabled:a}),(0,n.jsx)(k.TextField,{label:"Google Analytics Property Key",value:o.googleAnalyticsPropertyKey,onChange:e=>c({...o,googleAnalyticsPropertyKey:e.target.value}),fullWidth:!0,placeholder:"G-XXXXXXXXXX",helperText:"Google Analytics 4 Property ID for tracking client analytics growth",disabled:a})]})}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:t,children:a?"Close":"Cancel"}),!a&&(0,n.jsx)(T.Button,{onClick:x,variant:"contained",disabled:h,children:h?"Saving...":"Save Changes"})]})]})}function t$({open:e,onClose:t,clientId:r,clientName:i,currentEmployee:a,onAssign:o}){let[c,d]=(0,l.useState)([]),[u,p]=(0,l.useState)(null),[x,m]=(0,l.useState)(""),[y,g]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[v,M]=(0,l.useState)(!1),[L,$]=(0,l.useState)(null);(0,l.useEffect)(()=>{e?(O(),a&&(m(a),g(!0))):(p(null),m(""),g(!1),$(null))},[e,a]);let O=async()=>{M(!0),$(null);try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let r=await t.json();if(d(r.employees||[]),a&&r.employees){let e=r.employees.find(e=>e.name===a||e.email===a);e&&(p(e),g(!1))}}catch(e){console.error("Error fetching employees:",e),$(e.message||"Failed to load employees")}finally{M(!1)}},D=async()=>{f(!0),$(null);try{let e=y?null:u?.id||null,r=y?x.trim():u?.name||null;if(!r&&!e){$("Please select an employee or enter a custom name"),f(!1);return}await o(e,r),t()}catch(e){$(e.message||"Failed to assign employee")}finally{f(!1)}},N=async()=>{f(!0),$(null);try{await o(null,null),t()}catch(e){$(e.message||"Failed to remove employee assignment")}finally{f(!1)}};return(0,n.jsxs)(b.Dialog,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(C.DialogTitle,{children:["Assign Employee to ",i]}),(0,n.jsx)(S.DialogContent,{children:(0,n.jsxs)(I.Stack,{spacing:3,sx:{mt:1},children:[L&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>$(null),children:L}),v?(0,n.jsx)(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,n.jsx)(z.CircularProgress,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Assignment Type"}),(0,n.jsxs)(B.Select,{value:y?"custom":"employee",onChange:e=>g("custom"===e.target.value),label:"Assignment Type",children:[(0,n.jsx)(E.MenuItem,{value:"employee",children:"Select from Employees"}),(0,n.jsx)(E.MenuItem,{value:"custom",children:"Enter Custom Name"})]})]}),y?(0,n.jsx)(k.TextField,{fullWidth:!0,label:"Employee Name",value:x,onChange:e=>m(e.target.value),placeholder:"Enter employee name",helperText:"Use this for external employees or contractors"}):(0,n.jsx)(ee.Autocomplete,{options:c,getOptionLabel:e=>`${e.name} (${e.email})`,value:u,onChange:(e,t)=>p(t),loading:v,renderInput:e=>(0,n.jsx)(k.TextField,{...e,label:"Select Employee",placeholder:"Search employees..."}),renderOption:(e,t)=>(0,n.jsx)(s.Box,{component:"li",...e,children:(0,n.jsxs)(I.Stack,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:t.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:t.email})]})})})]})]})}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:t,disabled:j,children:"Cancel"}),a&&(0,n.jsx)(T.Button,{onClick:N,color:"error",disabled:j,children:"Remove Assignment"}),(0,n.jsx)(T.Button,{onClick:D,variant:"contained",disabled:j||(y?!x.trim():!u),children:j?(0,n.jsx)(z.CircularProgress,{size:20}):"Assign"})]})]})}var tO=e.i(815254),tD=e.i(268914),tN=e.i(235134),tR=e.i(560472);function tU({onAssignmentChange:e,onAddClient:t}){let{user:r}=(0,tO.useAuth)(),i=r?.isAdmin||!1,[a,o]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[p,x]=(0,l.useState)([]),[m,y]=(0,l.useState)(!0),[j,f]=(0,l.useState)(null),[v,$]=(0,l.useState)(null),[D,R]=(0,l.useState)([]),[U,q]=(0,l.useState)(!1),[G,_]=(0,l.useState)(null),[ee,el]=(0,l.useState)(!1),[ec,eh]=(0,l.useState)(null),[ep,ex]=(0,l.useState)(""),[em,eg]=(0,l.useState)(""),[ej,ef]=(0,l.useState)(!1),[ev,eb]=(0,l.useState)(null),[eC,eS]=(0,l.useState)(!1),[ew,eT]=(0,l.useState)(!1),[ek,eI]=(0,l.useState)(null),[eA,eP]=(0,l.useState)(!1),[eB,eE]=(0,l.useState)(null),[eF,eW]=(0,l.useState)(""),[eM,ez]=(0,l.useState)(null),[eL,e$]=(0,l.useState)(!1),[eO,eD]=(0,l.useState)(""),[eN,eR]=(0,l.useState)("all"),[eU,eq]=(0,l.useState)("all"),[eG,e_]=(0,l.useState)(null),[eX,eH]=(0,l.useState)(null),[eV,eK]=(0,l.useState)(!1),[eJ,eY]=(0,l.useState)(!1),[eQ,eZ]=(0,l.useState)(!1),[e0,e1]=(0,l.useState)(!1),[e2,e5]=(0,l.useState)(!1),[e4,e3]=(0,l.useState)(null),[e6,e7]=(0,l.useState)({name:"",email:"",company:"",phone:"",notes:""});(0,l.useEffect)(()=>{ta(),i&&e8()},[eN,eU,eO,i]);let e8=async()=>{if(i){q(!0),_(null);try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/admin/users`,{credentials:"include"});if(t.ok){let e=await t.json();R(e.users||[])}else{let e=await t.json().catch(()=>({error:`HTTP ${t.status}`}));_(e.error||`Failed to load users (${t.status})`)}}catch(e){console.error("Error fetching users:",e),_(e.message||"Failed to load users")}finally{q(!1)}}},e9=async(e,t)=>{try{let r=(0,W.getBackendUrl)(),n=await fetch(`${r}/api/admin/users/${e}/employee`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isEmployee:!t})});if(n.ok)await e8(),await ta(),$(`Employee status ${!t?"enabled":"disabled"} successfully`);else{let e=await n.json();_(e.error||"Failed to update employee status")}}catch(e){_(e.message||"Failed to update employee status")}},te=async(e,t)=>{try{let r=(0,W.getBackendUrl)(),n=await fetch(`${r}/api/admin/users/${e}/admin`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({isAdmin:!t})});if(n.ok)await e8(),$(`Admin status ${!t?"enabled":"disabled"} successfully`);else{let e=await n.json();_(e.error||"Failed to update admin status")}}catch(e){_(e.message||"Failed to update admin status")}},tt=()=>{el(!1),eh(null),ex(""),eg(""),eb(null)},tr=async()=>{if(ec){if(!ep||ep.length<6)return void eb("Password must be at least 6 characters");if(ep!==em)return void eb("Passwords do not match");ef(!0),eb(null);try{let e=(0,W.getBackendUrl)(),t=ec.id||ec.username||ec.user_id,r=encodeURIComponent(t),n=await fetch(`${e}/api/admin/users/${r}/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:ep})});if(n.ok)tt(),$("Password changed successfully");else{let e=await n.json();eb(e.error||"Failed to change password")}}catch(e){eb(e.message||"Failed to change password")}finally{ef(!1)}}},tn=()=>{eT(!1),eI(null),eE(null)},ti=async()=>{if(!ek)return;let e=ek.id||ek.user_id;if(e===r?.id||ek.username===r?.username)return void eE("Cannot delete your own account");eP(!0),eE(null);try{let t=(0,W.getBackendUrl)(),r=encodeURIComponent(e),n=await fetch(`${t}/api/admin/users/${r}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(n.ok)tn(),await e8(),await ta(),$("User deleted successfully");else{let e="Failed to delete user";try{let t=await n.json();e=t.error||t.message||e,t.details&&(e+=`: ${t.details}`)}catch(t){e=`HTTP ${n.status}: ${n.statusText}`}eE(e)}}catch(e){eE(e.message||"Failed to delete user"),console.error("Error deleting user:",e)}finally{eP(!1)}},ta=async()=>{y(!0),f(null);try{let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/creative/employees`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch employees");let r=await t.json();o(r.employees||[]);let n=new URLSearchParams;"all"!==eN&&n.append("status",eN),"all"!==eU&&"unassigned"!==eU&&n.append("employee_id",eU),eO&&n.append("search",eO);let i=await fetch(`${e}/api/creative/clients?${n.toString()}`,{credentials:"include"});if(!i.ok)throw Error("Failed to fetch clients");let a=(await i.json()).clients||[],l=a;"unassigned"===eU&&(l=l.filter(e=>!e.assignedEmployee)),d(l);let s=a.filter(e=>"prospect"===e.status);x(s)}catch(e){console.error("Error fetching data:",e),f(e.message||"Failed to load data")}finally{y(!1)}},tl=async()=>{if(!eF||!eM)return void f("Please select both a client and an employee");e$(!0),f(null),$(null);try{let t=(0,W.getBackendUrl)(),r=a.find(e=>e.id===eM),n=await fetch(`${t}/api/creative/clients/${eF}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:eM,employee_name:r?.name||null})});if(!n.ok){let e=await n.json().catch(()=>({error:"Failed to assign employee"}));throw Error(e.error||"Failed to assign employee")}$(`Successfully assigned ${r?.name} to ${c.find(e=>e.id===eF)?.name}`),await ta(),eW(""),ez(null),e&&e()}catch(e){console.error("Error assigning employee:",e),f(e.message||"Failed to assign employee")}finally{e$(!1)}},to=()=>{e_(null),eH(null)},ts=async()=>{if(!eX)return void to();try{let e=(0,W.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${eX.id}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete client");await ta()}catch(e){console.error("Error deleting client:",e),alert(e.message||"Failed to delete client")}to()},tc=async()=>{to(),eY(!0)},td=async(e,t)=>{if(eX)try{let r=(0,W.getBackendUrl)();if(!(await fetch(`${r}/api/creative/clients/${eX.id}/assign-employee`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({employee_id:e,employee_name:t})})).ok)throw Error("Failed to assign employee");await ta()}catch(e){throw console.error("Error assigning employee:",e),e}},th=async()=>{if(!e6.name||!e6.email||!e6.phone)return void f("Name, email, and phone are required");try{let e=(0,W.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e6.name,email:e6.email,company:e6.company,phone:e6.phone,notes:e6.notes,status:"prospect"})})).ok)throw Error("Failed to create prospect");e5(!1),e7({name:"",email:"",company:"",phone:"",notes:""}),await ta(),$("Prospect created successfully")}catch(e){console.error("Error creating prospect:",e),f(e.message||"Failed to create prospect")}},tp=async()=>{if(!e4||!e6.name||!e6.email||!e6.phone)return void f("Name, email, and phone are required");try{let e=(0,W.getBackendUrl)();if(!(await fetch(`${e}/api/creative/clients/${e4.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e6.name,email:e6.email,company:e6.company,phone:e6.phone,notes:e6.notes,status:"prospect"})})).ok)throw Error("Failed to update prospect");e5(!1),e3(null),e7({name:"",email:"",company:"",phone:"",notes:""}),await ta(),$("Prospect updated successfully")}catch(e){console.error("Error updating prospect:",e),f(e.message||"Failed to update prospect")}},tx=async e=>{alert(`Send email to ${e.email} - Feature coming soon`)},tm=async e=>{alert(`Send notification to ${e.name} - Feature coming soon`)},ty=Array.from(new Set(c.filter(e=>e.assignedEmployee).map(e=>e.assignedEmployee)));return m?(0,n.jsx)(s.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(z.CircularProgress,{})}):(0,n.jsxs)(s.Box,{children:[j&&(0,n.jsx)(F.Alert,{severity:"error",onClose:()=>f(null),sx:{mb:2},children:j}),v&&(0,n.jsx)(F.Alert,{severity:"success",onClose:()=>$(null),sx:{mb:2},children:v}),(0,n.jsxs)(L.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(eo.Card,{elevation:2,children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,n.jsx)(ed.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Prospects"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"People we need to keep prospecting with email and notifications to finish checkout"})]})]}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(et.default,{}),onClick:()=>{e3(null),e7({name:"",email:"",company:"",phone:"",notes:""}),e5(!0)},children:"Add Prospect"})]}),0===p.length?(0,n.jsxs)(u.Paper,{sx:{p:4,textAlign:"center"},children:[(0,n.jsx)(ed.default,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,n.jsx)(h.Typography,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No prospects yet"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add prospects to track and nurture potential clients"})]}):(0,n.jsx)(L.Grid,{container:!0,spacing:2,children:p.map(e=>(0,n.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"start",sx:{mb:1},children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",children:e.name}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:e.company}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.email})]}),(0,n.jsx)(X.Chip,{label:"Prospect",size:"small",color:"warning"})]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,sx:{mt:2},children:[(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>{e3(e),e7({name:e.name,email:e.email,company:e.company,phone:e.phone||"",notes:e.notes||""}),e5(!0)},color:"primary",children:(0,n.jsx)(en.default,{})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>tx(e),color:"info",children:(0,n.jsx)(tW.default,{})}),(0,n.jsx)(Z.IconButton,{size:"small",onClick:()=>tm(e),color:"secondary",children:(0,n.jsx)(tM.default,{})})]})]})})},e.id))})]})})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(eo.Card,{elevation:2,children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",children:[(0,n.jsx)(tB.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Client List"})]}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(tF.default,{}),onClick:()=>{t?t():e1(!0)},children:"Add Client"})]}),(0,n.jsx)(u.Paper,{sx:{p:2,mb:3},children:(0,n.jsxs)(I.Stack,{direction:{xs:"column",md:"row"},spacing:2,children:[(0,n.jsx)(k.TextField,{fullWidth:!0,size:"small",placeholder:"Search clients...",value:eO,onChange:e=>eD(e.target.value),InputProps:{startAdornment:(0,n.jsx)(tk,{position:"start",children:(0,n.jsx)(tu.default,{})})}}),(0,n.jsxs)(A.FormControl,{size:"small",sx:{minWidth:150},children:[(0,n.jsx)(P.InputLabel,{children:"Status"}),(0,n.jsxs)(B.Select,{value:eN,label:"Status",onChange:e=>eR(e.target.value),children:[(0,n.jsx)(E.MenuItem,{value:"all",children:"All Status"}),(0,n.jsx)(E.MenuItem,{value:"active",children:"Active"}),(0,n.jsx)(E.MenuItem,{value:"inactive",children:"Inactive"}),(0,n.jsx)(E.MenuItem,{value:"pending",children:"Pending"}),(0,n.jsx)(E.MenuItem,{value:"prospect",children:"Prospect"})]})]}),(0,n.jsxs)(A.FormControl,{size:"small",sx:{minWidth:150},children:[(0,n.jsx)(P.InputLabel,{children:"Employee"}),(0,n.jsxs)(B.Select,{value:eU,label:"Employee",onChange:e=>eq(e.target.value),children:[(0,n.jsx)(E.MenuItem,{value:"all",children:"All Employees"}),(0,n.jsx)(E.MenuItem,{value:"unassigned",children:"Unassigned"}),ty.map(e=>(0,n.jsx)(E.MenuItem,{value:e,children:e},e))]})]})]})}),(0,n.jsx)(J.TableContainer,{children:(0,n.jsxs)(H.Table,{children:[(0,n.jsx)(Y.TableHead,{children:(0,n.jsxs)(Q.TableRow,{children:[(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Client Name"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Email"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Status"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Assigned To"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},children:"Systems Connected"}),(0,n.jsx)(K.TableCell,{sx:{fontWeight:700},align:"right",children:"Actions"})]})}),(0,n.jsx)(V.TableBody,{children:0===c.length?(0,n.jsx)(Q.TableRow,{children:(0,n.jsx)(K.TableCell,{colSpan:6,align:"center",sx:{py:4},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:'No clients found. Click "Add Client" to get started.'})})}):c.map(e=>(0,n.jsxs)(Q.TableRow,{hover:!0,children:[(0,n.jsxs)(K.TableCell,{children:[(0,n.jsx)(h.Typography,{variant:"body2",fontWeight:600,children:e.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.company})]}),(0,n.jsx)(K.TableCell,{children:e.email}),(0,n.jsx)(K.TableCell,{children:(0,n.jsx)(X.Chip,{label:e.status,size:"small",color:"active"===e.status?"success":"pending"===e.status||"prospect"===e.status?"warning":"default"})}),(0,n.jsx)(K.TableCell,{children:e.assignedEmployee||(0,n.jsx)(X.Chip,{label:"Unassigned",size:"small",variant:"outlined"})}),(0,n.jsx)(K.TableCell,{children:(0,n.jsx)(I.Stack,{direction:"row",spacing:.5,flexWrap:"wrap",children:e.systemsConnected.map(e=>(0,n.jsx)(X.Chip,{label:e,size:"small",variant:"outlined"},e))})}),(0,n.jsx)(K.TableCell,{align:"right",children:(0,n.jsx)(Z.IconButton,{size:"small",onClick:t=>{e_(t.currentTarget),eH(e)},children:(0,n.jsx)(ei.default,{})})})]},e.id))})]})})]})})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(eo.Card,{elevation:2,children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(tP.default,{color:"primary",sx:{fontSize:32}}),(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,children:"Match Clients & Employees"})]}),(0,n.jsxs)(L.Grid,{container:!0,spacing:3,children:[(0,n.jsx)(L.Grid,{item:!0,xs:12,md:6,children:(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(tB.default,{color:"primary"}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Select Client"})]}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Client"}),(0,n.jsxs)(B.Select,{value:eF,onChange:e=>eW(e.target.value),label:"Client",children:[(0,n.jsx)(E.MenuItem,{value:"",children:(0,n.jsx)("em",{children:"Select a client..."})}),c.map(e=>(0,n.jsx)(E.MenuItem,{value:e.id,children:(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"body1",children:e.name}),(0,n.jsxs)(h.Typography,{variant:"caption",color:"text.secondary",children:[e.company,"  ",e.email]}),e.assignedEmployee&&(0,n.jsx)(X.Chip,{label:`Assigned to: ${e.assignedEmployee}`,size:"small",color:"info",sx:{mt:.5}})]})},e.id))]})]}),c.find(e=>e.id===eF)&&(0,n.jsxs)(s.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Client:"}),(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:c.find(e=>e.id===eF)?.name}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:c.find(e=>e.id===eF)?.company})]})]})})}),(0,n.jsx)(L.Grid,{item:!0,xs:12,md:6,children:(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[(0,n.jsx)(g.default,{color:"secondary"}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Select Employee"})]}),(0,n.jsxs)(A.FormControl,{fullWidth:!0,children:[(0,n.jsx)(P.InputLabel,{children:"Employee"}),(0,n.jsxs)(B.Select,{value:eM||"",onChange:e=>ez(e.target.value?Number(e.target.value):null),label:"Employee",children:[(0,n.jsx)(E.MenuItem,{value:"",children:(0,n.jsx)("em",{children:"Select an employee..."})}),a.map(e=>(0,n.jsx)(E.MenuItem,{value:e.id,children:(0,n.jsxs)(s.Box,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"body1",children:e.name}),e.is_admin&&(0,n.jsx)(X.Chip,{label:"Admin",size:"small",color:"error"})]}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.email})]})},e.id))]})]}),a.find(e=>e.id===eM)&&(0,n.jsxs)(s.Box,{sx:{mt:2,p:2,bgcolor:"action.hover",borderRadius:1},children:[(0,n.jsx)(h.Typography,{variant:"subtitle2",gutterBottom:!0,children:"Selected Employee:"}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:a.find(e=>e.id===eM)?.name}),a.find(e=>e.id===eM)?.is_admin&&(0,n.jsx)(X.Chip,{label:"Admin",size:"small",color:"error"})]})]})]})})})]}),(0,n.jsx)(O.Divider,{sx:{my:3}}),(0,n.jsxs)(s.Box,{sx:{display:"flex",justifyContent:"center",gap:2},children:[(0,n.jsx)(T.Button,{variant:"outlined",onClick:ta,disabled:eL,children:"Refresh Lists"}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:eL?(0,n.jsx)(z.CircularProgress,{size:20}):(0,n.jsx)(eu.default,{}),onClick:tl,disabled:!eF||!eM||eL,size:"large",children:eL?"Assigning...":"Assign Employee to Client"})]}),(0,n.jsxs)(s.Box,{sx:{mt:4},children:[(0,n.jsx)(h.Typography,{variant:"h6",gutterBottom:!0,children:"Current Assignments"}),(0,n.jsxs)(L.Grid,{container:!0,spacing:2,children:[c.filter(e=>e.assignedEmployee).map(e=>(0,n.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsxs)(es.CardContent,{children:[(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:e.name}),(0,n.jsx)(h.Typography,{variant:"caption",color:"text.secondary",children:e.company}),(0,n.jsx)(X.Chip,{label:` ${e.assignedEmployee}`,size:"small",color:"primary",sx:{mt:1}})]})})},e.id)),0===c.filter(e=>e.assignedEmployee).length&&(0,n.jsx)(L.Grid,{item:!0,xs:12,children:(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"No assignments yet. Use the form above to assign employees to clients."})})]})]}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Divider,{sx:{my:4}}),(0,n.jsxs)(s.Box,{children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(tN.default,{color:"primary",sx:{fontSize:28}}),(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:700,children:"Employee Management (Admin Only)"})]}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Manage employee status for users. Employees have access to the Creative Dashboard and can be assigned to clients."}),G&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>_(null),children:G}),U?(0,n.jsx)(s.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(z.CircularProgress,{})}):0===D.length?(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"No users found."}):(0,n.jsx)(L.Grid,{container:!0,spacing:2,children:D.map(e=>(0,n.jsx)(L.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(eo.Card,{variant:"outlined",children:(0,n.jsx)(es.CardContent,{children:(0,n.jsxs)(I.Stack,{spacing:2,children:[(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"body1",sx:{fontWeight:600},children:e.name||e.username||e.email||"Unknown User"}),(0,n.jsxs)(h.Typography,{variant:"body2",color:"text.secondary",children:[e.ensName||e.id," ",e.email&&` ${e.email}`]}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[e.isAdmin&&(0,n.jsx)(X.Chip,{label:"Admin",color:"error",size:"small"}),e.isEmployee&&(0,n.jsx)(X.Chip,{label:"Employee",color:"secondary",size:"small"}),e.isPaidMember&&(0,n.jsx)(X.Chip,{label:"Paid Member",color:"success",size:"small",variant:"outlined"})]})]}),(0,n.jsx)(O.Divider,{}),(0,n.jsxs)(I.Stack,{spacing:1,children:[(0,n.jsx)(tI.FormControlLabel,{control:(0,n.jsx)(tA.Switch,{checked:e.isAdmin||!1,onChange:()=>te(e.id||e.user_id,e.isAdmin||!1),disabled:e.id===r?.id||e.username===r?.username,size:"small"}),label:"Admin"}),(0,n.jsx)(tI.FormControlLabel,{control:(0,n.jsx)(tA.Switch,{checked:e.isEmployee||!1,onChange:()=>e9(e.id||e.user_id,e.isEmployee||!1),disabled:e.isAdmin,size:"small"}),label:e.isEmployee?"Employee: On":"Employee: Off"}),(0,n.jsx)(T.Button,{variant:"outlined",size:"small",startIcon:(0,n.jsx)(tR.default,{}),onClick:()=>{eh(e),ex(""),eg(""),eb(null),el(!0)},fullWidth:!0,children:"Change Password"}),(0,n.jsx)(T.Button,{variant:"outlined",size:"small",color:"error",startIcon:(0,n.jsx)(ey.default,{}),onClick:()=>{eI(e),eE(null),eT(!0)},fullWidth:!0,disabled:e.id===r?.id||e.username===r?.username,children:"Delete User"})]})]})})})},e.id||e.user_id))}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,sx:{mt:3},children:[(0,n.jsx)(T.Button,{variant:"outlined",startIcon:(0,n.jsx)(N.default,{}),onClick:e8,disabled:U,children:U?"Loading...":"Refresh Users"}),(0,n.jsx)(T.Button,{variant:"contained",startIcon:(0,n.jsx)(tP.default,{}),onClick:()=>eS(!0),disabled:U,children:"Manage Client Assignments"})]})]})]})]})})})]}),(0,n.jsxs)(ea.Menu,{anchorEl:eG,open:!!eG,onClose:to,children:[(0,n.jsxs)(E.MenuItem,{onClick:()=>{eZ(!0),eK(!0),to()},children:[(0,n.jsx)(er.default,{sx:{mr:1,fontSize:20}}),"View Details"]}),(0,n.jsxs)(E.MenuItem,{onClick:()=>{eZ(!1),eK(!0),to()},children:[(0,n.jsx)(en.default,{sx:{mr:1,fontSize:20}}),"Edit"]}),(0,n.jsxs)(E.MenuItem,{onClick:tc,children:[(0,n.jsx)(tF.default,{sx:{mr:1,fontSize:20}}),"Assign Employee"]}),(0,n.jsxs)(E.MenuItem,{onClick:ts,sx:{color:"error.main"},children:[(0,n.jsx)(ey.default,{sx:{mr:1,fontSize:20}}),"Delete"]})]}),(0,n.jsx)(M,{open:e0,onClose:()=>{e1(!1),ta()}}),(0,n.jsx)(tL,{open:eV,onClose:()=>{eK(!1),eH(null),eZ(!1),ta()},client:eX,onSave:()=>ta(),readOnly:eQ}),(0,n.jsx)(t$,{open:eJ,onClose:()=>{eY(!1),eH(null)},clientId:eX?.id||"",clientName:eX?.name||"",currentEmployee:eX?.assignedEmployee,onAssign:td}),i&&(0,n.jsx)(tD.default,{open:eC,onClose:()=>eS(!1),currentUser:r,isAdminView:i}),(0,n.jsxs)(b.Dialog,{open:ew,onClose:tn,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(tE.default,{color:"error"}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Delete User"})]}),(0,n.jsx)(T.Button,{onClick:tn,size:"small",sx:{minWidth:"auto"},children:(0,n.jsx)(tz.default,{})})]})}),(0,n.jsxs)(S.DialogContent,{children:[ek&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Alert,{severity:"warning",sx:{mb:2},children:[(0,n.jsx)(h.Typography,{variant:"body2",fontWeight:600,children:"This action cannot be undone!"}),(0,n.jsx)(h.Typography,{variant:"body2",children:"Deleting this user will permanently remove their account and all associated data."})]}),(0,n.jsxs)(s.Box,{sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"User to delete:"}),(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:ek.name||ek.username||ek.email}),ek.email&&(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:ek.email}),(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,sx:{mt:1},children:[ek.isAdmin&&(0,n.jsx)(X.Chip,{label:"Admin",color:"error",size:"small"}),ek.isEmployee&&(0,n.jsx)(X.Chip,{label:"Employee",color:"secondary",size:"small"})]})]})]}),eB&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>eE(null),children:eB}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Are you sure you want to delete this user? This will permanently delete:"}),(0,n.jsxs)(s.Box,{component:"ul",sx:{mt:1,pl:2},children:[(0,n.jsx)(h.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"User account and profile"}),(0,n.jsx)(h.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All client assignments"}),(0,n.jsx)(h.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All notifications"}),(0,n.jsx)(h.Typography,{component:"li",variant:"body2",color:"text.secondary",children:"All subscriptions"})]})]}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:tn,disabled:eA,children:"Cancel"}),(0,n.jsx)(T.Button,{onClick:ti,variant:"contained",color:"error",disabled:eA,startIcon:eA?(0,n.jsx)(z.CircularProgress,{size:20}):(0,n.jsx)(ey.default,{}),children:eA?"Deleting...":"Delete User"})]})]}),(0,n.jsxs)(b.Dialog,{open:ee,onClose:tt,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:(0,n.jsxs)(I.Stack,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(I.Stack,{direction:"row",spacing:1,alignItems:"center",children:[(0,n.jsx)(tR.default,{}),(0,n.jsx)(h.Typography,{variant:"h6",children:"Change Password"})]}),(0,n.jsx)(T.Button,{onClick:tt,size:"small",sx:{minWidth:"auto"},children:(0,n.jsx)(tz.default,{})})]})}),(0,n.jsxs)(S.DialogContent,{children:[ec&&(0,n.jsxs)(s.Box,{sx:{mb:3},children:[(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Changing password for:"}),(0,n.jsx)(h.Typography,{variant:"body1",fontWeight:600,children:ec.name||ec.username||ec.email}),ec.email&&(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:ec.email})]}),ev&&(0,n.jsx)(F.Alert,{severity:"error",sx:{mb:2},onClose:()=>eb(null),children:ev}),(0,n.jsxs)(I.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsx)(k.TextField,{fullWidth:!0,type:"password",label:"New Password",value:ep,onChange:e=>ex(e.target.value),placeholder:"Enter new password (min 6 characters)",disabled:ej,helperText:"Password must be at least 6 characters long"}),(0,n.jsx)(k.TextField,{fullWidth:!0,type:"password",label:"Confirm Password",value:em,onChange:e=>eg(e.target.value),placeholder:"Confirm new password",disabled:ej,error:""!==em&&ep!==em,helperText:""!==em&&ep!==em?"Passwords do not match":""})]})]}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:tt,disabled:ej,children:"Cancel"}),(0,n.jsx)(T.Button,{onClick:tr,variant:"contained",disabled:ej||!ep||!em||ep!==em||ep.length<6,startIcon:ej?(0,n.jsx)(z.CircularProgress,{size:20}):(0,n.jsx)(tR.default,{}),children:ej?"Changing...":"Change Password"})]})]}),(0,n.jsxs)(b.Dialog,{open:e2,onClose:()=>e5(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(C.DialogTitle,{children:e4?"Edit Prospect":"Add New Prospect"}),(0,n.jsx)(S.DialogContent,{children:(0,n.jsxs)(I.Stack,{spacing:2,sx:{mt:1},children:[(0,n.jsx)(k.TextField,{label:"Name",value:e6.name,onChange:e=>e7({...e6,name:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(k.TextField,{label:"Email",type:"email",value:e6.email,onChange:e=>e7({...e6,email:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(k.TextField,{label:"Company (Optional)",value:e6.company,onChange:e=>e7({...e6,company:e.target.value}),fullWidth:!0}),(0,n.jsx)(k.TextField,{label:"Phone",value:e6.phone,onChange:e=>e7({...e6,phone:e.target.value}),fullWidth:!0,required:!0}),(0,n.jsx)(k.TextField,{label:"Notes",value:e6.notes,onChange:e=>e7({...e6,notes:e.target.value}),fullWidth:!0,multiline:!0,rows:3})]})}),(0,n.jsxs)(w.DialogActions,{children:[(0,n.jsx)(T.Button,{onClick:()=>{e5(!1),e3(null),e7({name:"",email:"",company:"",phone:"",notes:""})},children:"Cancel"}),(0,n.jsx)(T.Button,{variant:"contained",onClick:e4?tp:th,children:e4?"Update":"Create"})]})]})]})}function tq(e){let{children:t,value:r,index:i,...a}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:r!==i,id:`creative-tabpanel-${i}`,"aria-labelledby":`creative-tab-${i}`,...a,children:r===i&&(0,n.jsx)(s.Box,{sx:{py:3},children:t})})}function tG(){let e=(0,x.useTheme)(),t=(0,m.useMediaQuery)(e.breakpoints.down("md")),r=(0,o.useRouter)(),[i,a]=(0,l.useState)(0),[b,C]=(0,l.useState)(!1),{user:S}=(0,tO.useAuth)(),w=S?.isAdmin||!1;(0,l.useEffect)(()=>{console.log("[CreativeDashboard] Admin check:",{isAdmin:w,userIsAdmin:S?.isAdmin,userId:S?.id,username:S?.username,fullUser:S})},[S,w]);let T={overview:0,analytics:1,support:2,match:3,ai:4};return(0,l.useEffect)(()=>{let e=r.query.tab;e&&void 0!==T[e]&&a(T[e])},[r.query.tab]),(0,n.jsxs)(s.Box,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(u.Paper,{elevation:0,sx:{p:3,background:"linear-gradient(135deg, #6366F1 0%, #8b5cf6 100%)",color:"white",borderRadius:0},children:(0,n.jsxs)(p.Container,{maxWidth:"xl",children:[(0,n.jsx)(h.Typography,{variant:"h4",fontWeight:800,gutterBottom:!0,children:"Creative Dashboard"}),(0,n.jsx)(h.Typography,{variant:"body1",sx:{opacity:.9},children:"Your central hub for managing clients across all dashboards and systems"})]})}),(0,n.jsx)(u.Paper,{elevation:1,sx:{borderRadius:0},children:(0,n.jsx)(p.Container,{maxWidth:"xl",children:(0,n.jsxs)(c.Tabs,{value:i,onChange:(e,t)=>{a(t);let n=Object.keys(T).find(e=>T[e]===t);n&&r.push({pathname:r.pathname,query:{...r.query,tab:n}},void 0,{shallow:!0})},variant:t?"scrollable":"standard",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:[(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(y.default,{}),iconPosition:"start",label:"Overview",id:"creative-tab-0","aria-controls":"creative-tabpanel-0"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(j.default,{}),iconPosition:"start",label:"Analytics & Activity",id:"creative-tab-1","aria-controls":"creative-tabpanel-1"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(f.default,{}),iconPosition:"start",label:"Support Requests",id:"creative-tab-2","aria-controls":"creative-tabpanel-2"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(g.default,{}),iconPosition:"start",label:"Match Clients & Employees",id:"creative-tab-3","aria-controls":"creative-tabpanel-3"}),(0,n.jsx)(d.Tab,{icon:(0,n.jsx)(v.default,{}),iconPosition:"start",label:"AI Agent",id:"creative-tab-4","aria-controls":"creative-tabpanel-4"})]})})}),(0,n.jsx)(s.Box,{sx:{flexGrow:1,overflow:"auto",bgcolor:"background.default"},children:(0,n.jsxs)(p.Container,{maxWidth:"xl",sx:{py:3},children:[(0,n.jsx)(tq,{value:i,index:0,children:(0,n.jsx)(t_,{onAddClient:()=>C(!0)})}),(0,n.jsx)(tq,{value:i,index:1,children:(0,n.jsx)(_,{})}),(0,n.jsx)(tq,{value:i,index:2,children:(0,n.jsx)(el,{})}),(0,n.jsx)(tq,{value:i,index:3,children:(0,n.jsx)(tU,{onAddClient:()=>C(!0)})}),(0,n.jsx)(tq,{value:i,index:4,children:(0,n.jsx)(tj,{})})]})}),(0,n.jsx)(M,{open:b,onClose:()=>C(!1)})]})}function t_({onAddClient:e}){let[t,r]=(0,l.useState)({clients:0,projects:0,tasks:0,completion:0}),[i,a]=(0,l.useState)(!0),[o,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{a(!0);let e=(0,W.getBackendUrl)(),t=await fetch(`${e}/api/creative/metrics`,{credentials:"include"});if(t.ok){let e=await t.json();r({clients:e.clients||0,projects:e.projects||0,tasks:e.tasks||0,completion:e.completion||0}),c(null)}else{let e=await t.json().catch(()=>({error:"Failed to fetch metrics"}));c(e.error||"Failed to load metrics"),r({clients:0,projects:0,tasks:0,completion:0})}}catch(e){console.error("Error fetching metrics:",e),c(e.message||"Failed to load metrics"),r({clients:0,projects:0,tasks:0,completion:0})}finally{a(!1)}})()},[]),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Overview"}),(0,n.jsx)(h.Typography,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Welcome to your mission control for managing clients across all your dashboards and systems."}),(0,n.jsxs)(s.Box,{sx:{mb:4},children:[i?(0,n.jsx)(s.Box,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,n.jsx)(h.Typography,{children:"Loading metrics..."})}):o?(0,n.jsx)(s.Box,{sx:{p:2,bgcolor:"error.light",borderRadius:1,mb:2},children:(0,n.jsx)(h.Typography,{variant:"body2",color:"error",children:o})}):null,(0,n.jsx)(ex,{metrics:t})]}),(0,n.jsxs)(s.Box,{sx:{mb:4},children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Key Features"}),(0,n.jsxs)(s.Box,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(2, 1fr)"},gap:2},children:[(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Centralized Client Directory"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"View and manage all your client accounts in one place"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Integrations with Dashboards"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Connect clients to Co-Work and Rise dashboards"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Quick Add/Edit/Remove Clients"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Streamline onboarding and administration"})]}),(0,n.jsxs)(u.Paper,{sx:{p:2},children:[(0,n.jsx)(h.Typography,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Analytics & Activity Tracking"}),(0,n.jsx)(h.Typography,{variant:"body2",color:"text.secondary",children:"Track client usage, activity, and generate reports"})]})]})]}),(0,n.jsxs)(s.Box,{children:[(0,n.jsx)(h.Typography,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Quick Actions"}),(0,n.jsxs)(u.Paper,{sx:{p:3,bgcolor:"primary.main",color:"white"},children:[(0,n.jsx)(h.Typography,{variant:"body1",gutterBottom:!0,children:"Ready to add a new client?"}),(0,n.jsx)(h.Typography,{variant:"body2",sx:{opacity:.9,mb:2},children:"Add client leads and send them to the sign-up page to get started."}),(0,n.jsx)(s.Box,{component:"button",onClick:e,sx:{bgcolor:"white",color:"primary.main",border:"none",px:3,py:1.5,borderRadius:1,fontWeight:600,cursor:"pointer","&:hover":{bgcolor:"rgba(255, 255, 255, 0.9)"}},children:"Add New Client"})]})]})]})}e.s(["default",0,function(){return(0,n.jsx)(a.default,{children:(0,n.jsx)(i.default,{active:"creative",children:(0,n.jsx)(tG,{})})})}],711500)},924144,(e,t,r)=>{let n="/creative";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(711500)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);