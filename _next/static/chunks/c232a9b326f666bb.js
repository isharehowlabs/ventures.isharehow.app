(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34699,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},24676,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},33948,18295,92279,47379,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),o=e.i(81706),i=e.i(15127),n=e.i(40762),l=e.i(18420),s=e.i(26437),d=e.i(28722),c=e.i(79413),u=e.i(96861),h=e.i(95262),p=e.i(51480),f=e.i(13740);function m(e){return(0,f.default)("MuiDialog",e)}let x=(0,p.default)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),g=r.createContext({});var v=e.i(69909),y=e.i(2844),b=e.i(44855);let k=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],j=(0,h.default)(v.default,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),w=(0,h.default)(s.default,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),C=(0,h.default)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.container,t[`scroll${(0,l.default)(a.scroll)}`]]}})(({ownerState:e})=>(0,a.default)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),S=(0,h.default)(c.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.paper,t[`scrollPaper${(0,l.default)(a.scroll)}`],t[`paperWidth${(0,l.default)(String(a.maxWidth))}`],a.fullWidth&&t.paperFullWidth,a.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>(0,a.default)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${x.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${x.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${x.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),B=r.forwardRef(function(e,s){let h=(0,u.useDefaultProps)({props:e,name:"MuiDialog"}),p=(0,y.default)(),f={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{"aria-describedby":x,"aria-labelledby":v,BackdropComponent:B,BackdropProps:T,children:P,className:F,disableEscapeKeyDown:M=!1,fullScreen:W=!1,fullWidth:D=!1,maxWidth:E="sm",onBackdropClick:I,onClick:z,onClose:R,open:$,PaperComponent:A=c.default,PaperProps:O={},scroll:N="paper",TransitionComponent:H=d.default,transitionDuration:L=f,TransitionProps:_}=h,U=(0,t.default)(h,k),q=(0,a.default)({},h,{disableEscapeKeyDown:M,fullScreen:W,fullWidth:D,maxWidth:E,scroll:N}),G=(e=>{let{classes:t,scroll:a,maxWidth:r,fullWidth:o,fullScreen:n}=e,s={root:["root"],container:["container",`scroll${(0,l.default)(a)}`],paper:["paper",`paperScroll${(0,l.default)(a)}`,`paperWidth${(0,l.default)(String(r))}`,o&&"paperFullWidth",n&&"paperFullScreen"]};return(0,i.default)(s,m,t)})(q),V=r.useRef(),J=(0,n.default)(v),Y=r.useMemo(()=>({titleId:J}),[J]);return(0,b.jsx)(w,(0,a.default)({className:(0,o.default)(G.root,F),closeAfterTransition:!0,components:{Backdrop:j},componentsProps:{backdrop:(0,a.default)({transitionDuration:L,as:B},T)},disableEscapeKeyDown:M,onClose:R,open:$,ref:s,onClick:e=>{z&&z(e),V.current&&(V.current=null,I&&I(e),R&&R(e,"backdropClick"))},ownerState:q},U,{children:(0,b.jsx)(H,(0,a.default)({appear:!0,in:$,timeout:L,role:"presentation"},_,{children:(0,b.jsx)(C,{className:(0,o.default)(G.container),onMouseDown:e=>{V.current=e.target===e.currentTarget},ownerState:q,children:(0,b.jsx)(S,(0,a.default)({as:A,elevation:24,role:"dialog","aria-describedby":x,"aria-labelledby":J},O,{className:(0,o.default)(G.paper,O.className),ownerState:q,children:(0,b.jsx)(g.Provider,{value:Y,children:P})}))})}))}))});e.s(["Dialog",0,B],33948);var T=e.i(88795);function P(e){return(0,f.default)("MuiDialogTitle",e)}let F=(0,p.default)("MuiDialogTitle",["root"]),M=["className","id"],W=(0,h.default)(T.default,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),D=r.forwardRef(function(e,n){let l=(0,u.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:s,id:d}=l,c=(0,t.default)(l,M),h=(e=>{let{classes:t}=e;return(0,i.default)({root:["root"]},P,t)})(l),{titleId:p=d}=r.useContext(g);return(0,b.jsx)(W,(0,a.default)({component:"h2",className:(0,o.default)(h.root,s),ownerState:l,ref:n,variant:"h6",id:null!=d?d:p},c))});function E(e){return(0,f.default)("MuiDialogContent",e)}e.s(["DialogTitle",0,D],18295),(0,p.default)("MuiDialogContent",["root","dividers"]);let I=["className","dividers"],z=(0,h.default)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>(0,a.default)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${F.root} + &`]:{paddingTop:0}})),R=r.forwardRef(function(e,r){let n=(0,u.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:l,dividers:s=!1}=n,d=(0,t.default)(n,I),c=(0,a.default)({},n,{dividers:s}),h=(e=>{let{classes:t,dividers:a}=e;return(0,i.default)({root:["root",a&&"dividers"]},E,t)})(c);return(0,b.jsx)(z,(0,a.default)({className:(0,o.default)(h.root,l),ownerState:c,ref:r},d))});function $(e){return(0,f.default)("MuiDialogActions",e)}e.s(["DialogContent",0,R],92279),(0,p.default)("MuiDialogActions",["root","spacing"]);let A=["className","disableSpacing"],O=(0,h.default)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,a.default)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),N=r.forwardRef(function(e,r){let n=(0,u.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:l,disableSpacing:s=!1}=n,d=(0,t.default)(n,A),c=(0,a.default)({},n,{disableSpacing:s}),h=(e=>{let{classes:t,disableSpacing:a}=e;return(0,i.default)({root:["root",!a&&"spacing"]},$,t)})(c);return(0,b.jsx)(O,(0,a.default)({className:(0,o.default)(h.root,l),ownerState:c,ref:r},d))});e.s(["DialogActions",0,N],47379)},90598,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),o=e.i(81706),i=e.i(15127),n=e.i(18420),l=e.i(95262),s=e.i(96861),d=e.i(49948),c=e.i(11488),u=e.i(88795),h=e.i(51480),p=e.i(13740);function f(e){return(0,p.default)("MuiLink",e)}let m=(0,h.default)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var x=e.i(19610),g=e.i(96163);let v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"};var y=e.i(44855);let b=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],k=(0,l.default)(u.default,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[`underline${(0,n.default)(a.underline)}`],"button"===a.component&&t.button]}})(({theme:e,ownerState:t})=>(0,a.default)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&(0,a.default)({textDecoration:"underline"},"inherit"!==t.color&&{textDecorationColor:(({theme:e,ownerState:t})=>{let a,r=v[a=t.color]||a,o=(0,x.getPath)(e,`palette.${r}`,!1)||t.color,i=(0,x.getPath)(e,`palette.${r}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:(0,g.alpha)(o,.4)})({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===t.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${m.focusVisible}`]:{outline:"auto"}})),j=r.forwardRef(function(e,l){let u=(0,s.useDefaultProps)({props:e,name:"MuiLink"}),{className:h,color:p="primary",component:m="a",onBlur:x,onFocus:g,TypographyClasses:j,underline:w="always",variant:C="inherit",sx:S}=u,B=(0,t.default)(u,b),{isFocusVisibleRef:T,onBlur:P,onFocus:F,ref:M}=(0,d.default)(),[W,D]=r.useState(!1),E=(0,c.default)(l,M),I=(0,a.default)({},u,{color:p,component:m,focusVisible:W,underline:w,variant:C}),z=(e=>{let{classes:t,component:a,focusVisible:r,underline:o}=e,l={root:["root",`underline${(0,n.default)(o)}`,"button"===a&&"button",r&&"focusVisible"]};return(0,i.default)(l,f,t)})(I);return(0,y.jsx)(k,(0,a.default)({color:p,className:(0,o.default)(z.root,h),classes:j,component:m,onBlur:e=>{P(e),!1===T.current&&D(!1),x&&x(e)},onFocus:e=>{F(e),!0===T.current&&D(!0),g&&g(e)},ref:E,ownerState:I,variant:C,sx:[...Object.keys(v).includes(p)?[]:[{color:p}],...Array.isArray(S)?S:[S]]},B))});e.s(["Link",0,j],90598)},21504,e=>{"use strict";var t=e.i(44855),a=e.i(58891),r=e.i(74614),o=e.i(37025),i=e.i(15915),n=e.i(75557),l=e.i(15254),s=e.i(92378),d=e.i(9109),c=e.i(90598),u=e.i(13654);function h({onSuccess:e,onRegisterClick:l}){let[h,p]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1),b=async t=>{t.preventDefault(),g(null),y(!0);try{let t=(0,u.getBackendUrl)(),a=await fetch(`${t}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:h,password:f})}),r=await a.json();a.ok?(r.token&&localStorage.setItem("auth_token",r.token),e(r.token,r.user)):g(r.error||"Login failed")}catch(e){g(e.message||"Network error")}finally{y(!1)}};return(0,t.jsxs)(r.Box,{sx:{p:4,textAlign:"center",maxWidth:400,mx:"auto"},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Sign In"}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter your username and password to continue"}),x&&(0,t.jsx)(d.Alert,{severity:"error",sx:{mb:3,textAlign:"left"},children:x}),(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Username or Email",name:"username",id:"username",autoComplete:"username",value:h,onChange:e=>p(e.target.value),margin:"normal",required:!0,autoFocus:!0,disabled:v}),(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Password",name:"password",id:"password",type:"password",autoComplete:"current-password",value:f,onChange:e=>m(e.target.value),margin:"normal",required:!0,disabled:v}),(0,t.jsx)(n.Button,{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:v||!h||!f,sx:{mt:3,mb:2,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:v?(0,t.jsx)(o.CircularProgress,{size:24}):"Sign In"})]}),l&&(0,t.jsxs)(i.Typography,{variant:"body2",sx:{mt:2},children:["Don't have an account?"," ",(0,t.jsx)(c.Link,{component:"button",variant:"body2",onClick:l,sx:{cursor:"pointer"},children:"Register here"})]})]})}function p({onSuccess:e,onLoginClick:l}){let[h,p]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[x,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[b,k]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1),C=async t=>{if(t.preventDefault(),k(null),x!==v)return void k("Passwords do not match");if(x.length<6)return void k("Password must be at least 6 characters");w(!0);try{let t=(0,u.getBackendUrl)(),a=await fetch(`${t}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:h,email:f,password:x})}),r=await a.json();a.ok?(r.token&&localStorage.setItem("auth_token",r.token),e(r.token,r.user)):k(r.error||"Registration failed")}catch(e){k(e.message||"Network error")}finally{w(!1)}};return(0,t.jsxs)(r.Box,{sx:{p:4,textAlign:"center",maxWidth:400,mx:"auto"},children:[(0,t.jsx)(i.Typography,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Create Account"}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create an account to get started. You'll connect your Patreon account next."}),b&&(0,t.jsx)(d.Alert,{severity:"error",sx:{mb:3,textAlign:"left"},children:b}),(0,t.jsxs)("form",{onSubmit:C,children:[(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Username",name:"username",id:"username",autoComplete:"username",value:h,onChange:e=>p(e.target.value),margin:"normal",required:!0,autoFocus:!0,disabled:j}),(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Email (Optional)",name:"email",id:"email",type:"email",autoComplete:"email",value:f,onChange:e=>m(e.target.value),margin:"normal",disabled:j}),(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Password",name:"new-password",id:"new-password",type:"password",autoComplete:"new-password",value:x,onChange:e=>g(e.target.value),margin:"normal",required:!0,disabled:j,helperText:"Must be at least 6 characters"}),(0,t.jsx)(s.TextField,{fullWidth:!0,label:"Confirm Password",name:"confirm-password",id:"confirm-password",type:"password",autoComplete:"new-password",value:v,onChange:e=>y(e.target.value),margin:"normal",required:!0,disabled:j}),(0,t.jsx)(n.Button,{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:j||!h||!x||x!==v,sx:{mt:3,mb:2,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:j?(0,t.jsx)(o.CircularProgress,{size:24}):"Create Account"})]}),l&&(0,t.jsxs)(i.Typography,{variant:"body2",sx:{mt:2},children:["Already have an account?"," ",(0,t.jsx)(c.Link,{component:"button",variant:"body2",onClick:l,sx:{cursor:"pointer"},children:"Sign in here"})]})]})}function f({onSuccess:e}){let[r,o]=(0,a.useState)("login");(0,a.useEffect)(()=>{{let e=new URLSearchParams(window.location.search);("true"===e.get("patreon_connected")||"success"===e.get("auth"))&&(window.history.replaceState({},"",window.location.pathname),setTimeout(()=>{window.location.reload()},500))}},[]);let i=(t,a)=>{e?e():window.location.reload()};return"register"===r?(0,t.jsx)(p,{onSuccess:i,onLoginClick:()=>o("login")}):(0,t.jsx)(h,{onSuccess:i,onRegisterClick:()=>o("register")})}function m({children:e}){let{isAuthenticated:s,isLoading:d,user:c,logout:u,error:h}=(0,l.useAuth)(),[p,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1),[b,k]=(0,a.useState)(0);if((0,a.useEffect)(()=>{if("success"===new URLSearchParams(window.location.search).get("auth")&&d){m(!0);let e=setTimeout(()=>{m(!1)},1500);return()=>clearTimeout(e)}},[d]),(0,a.useEffect)(()=>{d||s||!h?s&&k(0):k(e=>e+1)},[d,s,h]),(0,a.useEffect)(()=>{if(b>=3||d&&!p){let e=setTimeout(()=>{y(!0)},b>=3?0:3e3);return()=>clearTimeout(e)}y(!1)},[b,d,p]),d||p)return(0,t.jsxs)(r.Box,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:[(0,t.jsx)(o.CircularProgress,{}),(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Verifying authentication..."}),v&&(0,t.jsxs)(r.Box,{sx:{mt:2,textAlign:"center"},children:[(0,t.jsx)(i.Typography,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Having trouble? Clear your session and try again."}),(0,t.jsx)(n.Button,{variant:"outlined",size:"small",onClick:()=>{u(),window.location.reload()},children:"Clear Session & Retry"})]})]});if(!s)return(0,t.jsxs)(r.Box,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh",p:4,textAlign:"center"},children:[b>0&&(0,t.jsxs)(r.Box,{sx:{mb:2},children:[(0,t.jsx)(i.Typography,{variant:"body2",color:"error",sx:{mb:1},children:"Authentication failed. Please try clearing your session."}),(0,t.jsx)(n.Button,{variant:"outlined",size:"small",onClick:()=>{u(),window.location.reload()},sx:{mr:1},children:"Clear Session"})]}),(0,t.jsx)(f,{})]});let j="/labs"===window.location.pathname||"/rise"===window.location.pathname;return!(c?.isPaidMember||c?.isEmployee||c?.isAdmin||c?.id&&"string"==typeof c.id&&"isharehow"===c.id.toLowerCase())&&j?(0,t.jsxs)(r.Box,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh",p:4,textAlign:"center"},children:[(0,t.jsx)(i.Typography,{variant:"h4",gutterBottom:!0,children:"Membership Required"}),(0,t.jsx)(i.Typography,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:500},children:"You need to be an active paid member of our Patreon to access the dashboard. Please become a patron to continue."}),(0,t.jsx)(n.Button,{variant:"contained",href:"https://www.patreon.com/cw/JamelEliYah",target:"_blank",sx:{bgcolor:"#FF424D","&:hover":{bgcolor:"#E63946"}},children:"Join Patreon"})]}):(0,t.jsx)(t.Fragment,{children:e})}e.s(["default",()=>m],21504)},95532,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},45162,3430,e=>{"use strict";e.i(96335);var t=e.i(84933),a=e.i(80622),r=e.i(58891),o=e.i(81706),i=e.i(15127),n=e.i(95262),l=e.i(96861),s=e.i(79413),d=e.i(51480),c=e.i(13740);function u(e){return(0,c.default)("MuiCard",e)}(0,d.default)("MuiCard",["root"]);var h=e.i(44855);let p=["className","raised"],f=(0,n.default)(s.default,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),m=r.forwardRef(function(e,r){let n=(0,l.useDefaultProps)({props:e,name:"MuiCard"}),{className:s,raised:d=!1}=n,c=(0,a.default)(n,p),m=(0,t.default)({},n,{raised:d}),x=(e=>{let{classes:t}=e;return(0,i.default)({root:["root"]},u,t)})(m);return(0,h.jsx)(f,(0,t.default)({className:(0,o.default)(x.root,s),elevation:d?8:void 0,ref:r,ownerState:m},c))});function x(e){return(0,c.default)("MuiCardContent",e)}e.s(["Card",0,m],45162),(0,d.default)("MuiCardContent",["root"]);let g=["className","component"],v=(0,n.default)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),y=r.forwardRef(function(e,r){let n=(0,l.useDefaultProps)({props:e,name:"MuiCardContent"}),{className:s,component:d="div"}=n,c=(0,a.default)(n,g),u=(0,t.default)({},n,{component:d}),p=(e=>{let{classes:t}=e;return(0,i.default)({root:["root"]},x,t)})(u);return(0,h.jsx)(v,(0,t.default)({as:d,className:(0,o.default)(p.root,s),ownerState:u,ref:r},c))});e.s(["CardContent",0,y],3430)},27446,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),o=e.i(81706),i=e.i(15127),n=e.i(18420),l=e.i(95262),s=e.i(32869),d=e.i(95403),c=e.i(85760),u=e.i(12396),h=e.i(51480),p=e.i(13740);function f(e){return(0,p.default)("PrivateSwitchBase",e)}(0,h.default)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var m=e.i(44855);let x=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],g=(0,l.default)(u.default,{name:"MuiSwitchBase"})(({ownerState:e})=>(0,a.default)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),v=(0,l.default)("input",{name:"MuiSwitchBase",shouldForwardProp:s.rootShouldForwardProp})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=r.forwardRef(function(e,r){let{autoFocus:l,checked:s,checkedIcon:u,className:h,defaultChecked:p,disabled:y,disableFocusRipple:b=!1,edge:k=!1,icon:j,id:w,inputProps:C,inputRef:S,name:B,onBlur:T,onChange:P,onFocus:F,readOnly:M,required:W=!1,tabIndex:D,type:E,value:I}=e,z=(0,t.default)(e,x),[R,$]=(0,d.default)({controlled:s,default:!!p,name:"SwitchBase",state:"checked"}),A=(0,c.default)(),O=y;A&&void 0===O&&(O=A.disabled);let N="checkbox"===E||"radio"===E,H=(0,a.default)({},e,{checked:R,disabled:O,disableFocusRipple:b,edge:k}),L=(e=>{let{classes:t,checked:a,disabled:r,edge:o}=e,l={root:["root",a&&"checked",r&&"disabled",o&&`edge${(0,n.default)(o)}`],input:["input"]};return(0,i.default)(l,f,t)})(H);return(0,m.jsxs)(g,(0,a.default)({component:"span",className:(0,o.default)(L.root,h),centerRipple:!0,focusRipple:!b,disabled:O,tabIndex:null,role:void 0,onFocus:e=>{F&&F(e),A&&A.onFocus&&A.onFocus(e)},onBlur:e=>{T&&T(e),A&&A.onBlur&&A.onBlur(e)},ownerState:H,ref:r},z,{children:[(0,m.jsx)(v,(0,a.default)({autoFocus:l,checked:s,defaultChecked:p,className:L.input,disabled:O,id:N?w:void 0,name:B,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;$(t),P&&P(e,t)},readOnly:M,ref:S,required:W,ownerState:H,tabIndex:D,type:E},"checkbox"===E&&void 0===I?{}:{value:I},C)),R?u:j]}))});e.s(["default",0,y],27446)},37451,e=>{"use strict";e.i(96335);var t=e.i(80622),a=e.i(84933),r=e.i(58891),o=e.i(81706),i=e.i(15127),n=e.i(96163),l=e.i(27446),s=e.i(62731),d=e.i(44855);let c=(0,s.default)((0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,s.default)((0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,s.default)((0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var p=e.i(18420),f=e.i(96861),m=e.i(95262),x=e.i(32869),g=e.i(51480),v=e.i(13740);function y(e){return(0,v.default)("MuiCheckbox",e)}let b=(0,g.default)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],j=(0,m.default)(l.default,{shouldForwardProp:e=>(0,x.rootShouldForwardProp)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${(0,p.default)(a.size)}`],"default"!==a.color&&t[`color${(0,p.default)(a.color)}`]]}})(({theme:e,ownerState:t})=>(0,a.default)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,n.alpha)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${b.checked}, &.${b.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${b.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),w=(0,d.jsx)(u,{}),C=(0,d.jsx)(c,{}),S=(0,d.jsx)(h,{}),B=r.forwardRef(function(e,n){var l,s;let c=(0,f.useDefaultProps)({props:e,name:"MuiCheckbox"}),{checkedIcon:u=w,color:h="primary",icon:m=C,indeterminate:x=!1,indeterminateIcon:g=S,inputProps:v,size:b="medium",className:B}=c,T=(0,t.default)(c,k),P=x?g:m,F=x?g:u,M=(0,a.default)({},c,{color:h,indeterminate:x,size:b}),W=(e=>{let{classes:t,indeterminate:r,color:o,size:n}=e,l={root:["root",r&&"indeterminate",`color${(0,p.default)(o)}`,`size${(0,p.default)(n)}`]},s=(0,i.default)(l,y,t);return(0,a.default)({},t,s)})(M);return(0,d.jsx)(j,(0,a.default)({type:"checkbox",inputProps:(0,a.default)({"data-indeterminate":x},v),icon:r.cloneElement(P,{fontSize:null!=(l=P.props.fontSize)?l:b}),checkedIcon:r.cloneElement(F,{fontSize:null!=(s=F.props.fontSize)?s:b}),ownerState:M,ref:n,className:(0,o.default)(W.root,B)},T,{classes:W}))});e.s(["Checkbox",0,B],37451)},25972,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code")},94556,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")},20012,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle")},99700,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"}),"Link")},27367,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")},16875,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")},26482,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[o,i]=(0,t.useState)([]),[n,l]=(0,t.useState)([]),[s,d]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)({}),[x,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null);return{files:e,components:o,tokens:n,likedComponents:s,savedComponents:c,draftedComponents:h,componentStatuses:f,isLoading:x,error:v,fetchFiles:async()=>{try{g(!0),y(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/files`,{method:"GET"}),o=await t.json();r(o.projects||[])}catch(e){y(e.message),console.error("Error fetching Figma files:",e)}finally{g(!1)}},fetchFile:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw y(e.message),e}let t=e.trim();try{g(!0),y(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}`,{method:"GET"});return(await r.json()).file}catch(e){throw y(e?.message||"Failed to fetch Figma file"),e}finally{g(!1)}},fetchComponents:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw y(e.message),e}let t=e.trim();try{g(!0),y(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/components`,{method:"GET"}),o=await r.json();return i(o.components||[]),o.components}catch(e){throw y(e?.message||"Failed to fetch Figma components"),e}finally{g(!1)}},fetchTokens:async e=>{if(!e||"string"!=typeof e||""===e.trim()||"undefined"===e||"null"===e){let e=Error("Invalid file ID: file ID is required and must be a valid string");throw y(e.message),e}let t=e.trim();try{g(!0),y(null);let e=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/file/${t}/tokens`,{method:"GET"}),o=await r.json();return l(o.tokens||[]),o.tokens}catch(e){throw y(e?.message||"Failed to fetch Figma tokens"),e}finally{g(!1)}},likeComponent:async(e,t=!0,r)=>{try{g(!0),y(null);let o=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${o}/api/figma/component/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,liked:t,fileId:r})}),n=await i.json();return n.success&&(m(a=>({...a,[e]:{...a[e],liked:t}})),t?d(t=>t.includes(e)?t:[...t,e]):d(t=>t.filter(t=>t!==e))),n}catch(e){throw y(e?.message||"Failed to like component"),e}finally{g(!1)}},saveComponent:async(e,t=!0,r)=>{try{g(!0),y(null);let o=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${o}/api/figma/component/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,saved:t,fileId:r})}),n=await i.json();return n.success&&(m(a=>({...a,[e]:{...a[e],saved:t}})),t?u(t=>t.includes(e)?t:[...t,e]):u(t=>t.filter(t=>t!==e))),n}catch(e){throw y(e?.message||"Failed to save component"),e}finally{g(!1)}},draftComponent:async(e,t=!0,r)=>{try{g(!0),y(null);let o=(0,a.getBackendUrl)(),i=await (0,a.fetchWithErrorHandling)(`${o}/api/figma/component/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({componentId:e,drafted:t,draftData:r})}),n=await i.json();return n.success&&(m(a=>({...a,[e]:{...a[e],drafted:t}})),t?p(t=>t.includes(e)?t:[...t,e]):p(t=>t.filter(t=>t!==e))),n}catch(e){throw y(e?.message||"Failed to draft component"),e}finally{g(!1)}},fetchLikedComponents:async()=>{try{g(!0),y(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/liked`,{method:"GET"}),r=await t.json();return d(r.componentIds||[]),r.componentIds||[]}catch(e){throw y(e?.message||"Failed to fetch liked components"),e}finally{g(!1)}},fetchSavedComponents:async()=>{try{g(!0),y(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/saved`,{method:"GET"}),r=await t.json();return u(r.componentIds||[]),r.componentIds||[]}catch(e){throw y(e?.message||"Failed to fetch saved components"),e}finally{g(!1)}},fetchDraftedComponents:async()=>{try{g(!0),y(null);let e=(0,a.getBackendUrl)(),t=await (0,a.fetchWithErrorHandling)(`${e}/api/figma/components/drafted`,{method:"GET"}),r=await t.json();return p(r.componentIds||[]),r.componentIds||[]}catch(e){throw y(e?.message||"Failed to fetch drafted components"),e}finally{g(!1)}},fetchComponentStatus:async e=>{try{let t=(0,a.getBackendUrl)(),r=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/component/${e}/status`,{method:"GET"}),o=await r.json();return m(t=>({...t,[e]:{liked:o.liked||!1,saved:o.saved||!1,drafted:o.drafted||!1}})),o}catch(e){return console.error("Error fetching component status:",e),{liked:!1,saved:!1,drafted:!1}}},fetchComponentPreferences:async e=>{try{g(!0),y(null);let t=(0,a.getBackendUrl)(),r=e?JSON.stringify({componentIds:e}):void 0,o=await (0,a.fetchWithErrorHandling)(`${t}/api/figma/components/preferences`,{method:e?"POST":"GET",headers:e?{"Content-Type":"application/json"}:void 0,body:r}),i=await o.json();if(i.preferences){m(e=>{let t={...e};return Object.entries(i.preferences).forEach(([e,a])=>{t[e]={liked:a.liked||!1,saved:a.saved||!1,drafted:a.drafted||!1}}),t});let e=Object.entries(i.preferences).filter(([e,t])=>t.liked).map(([e])=>e),t=Object.entries(i.preferences).filter(([e,t])=>t.saved).map(([e])=>e),a=Object.entries(i.preferences).filter(([e,t])=>t.drafted).map(([e])=>e);d(e),u(t),p(a)}return i}catch(e){throw y(e?.message||"Failed to fetch component preferences"),e}finally{g(!1)}}}}e.s(["useFigma",()=>r])},38568,e=>{"use strict";var t=e.i(58891),a=e.i(13654);function r(){let[e,r]=(0,t.useState)([]),[o,i]=(0,t.useState)([]),[n,l]=(0,t.useState)(!1),[s,d]=(0,t.useState)(null),c=async e=>{try{l(!0),d(null);let t=(0,a.getBackendUrl)(),o=new URL(`${t}/api/mcp/code-links`);e&&o.searchParams.append("figmaFileId",e);let i=await fetch(o.toString(),{credentials:"include"});if(!i.ok)throw Error("Failed to fetch code links");let n=await i.json();r(n.links||[])}catch(e){d(e.message)}finally{l(!1)}},u=async()=>{try{l(!0),d(null);let e=(0,a.getBackendUrl)(),t=await fetch(`${e}/api/mcp/tokens`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch tokens");let r=await t.json();i(r.tokens||[])}catch(e){d(e.message)}finally{l(!1)}};return{links:e,tokens:o,isLoading:n,error:s,linkComponentToCode:async(e,t,r,o)=>{try{l(!0),d(null);let i=(0,a.getBackendUrl)(),n=await fetch(`${i}/api/mcp/figma-to-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({figmaComponentId:e,codeFilePath:t,codeComponentName:r,figmaFileId:o})});if(!n.ok)throw Error("Failed to link component");let s=await n.json();return await c(),s}catch(e){throw d(e.message),e}finally{l(!1)}},fetchCodeLinks:c,syncTokens:async e=>{try{l(!0),d(null);let t=(0,a.getBackendUrl)(),r=await fetch(`${t}/api/mcp/sync-tokens`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tokens:e})});if(!r.ok)throw Error("Failed to sync tokens");let o=await r.json();return await u(),o}catch(e){throw d(e.message),e}finally{l(!1)}},fetchTokens:u,generateCode:async(e,t)=>{try{l(!0),d(null);let r=(0,a.getBackendUrl)(),o=await fetch(`${r}/api/mcp/generate-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({componentId:e,language:t})});if(!o.ok)throw Error("Failed to generate code");return await o.json()}catch(e){throw d(e.message),e}finally{l(!1)}}}}e.s(["useMCP",()=>r])},27245,43892,e=>{"use strict";var t=e.i(44855),a=e.i(58891),r=e.i(74614),o=e.i(65790),i=e.i(54704),n=e.i(15915),l=e.i(92378),s=e.i(86012),d=e.i(75557),c=e.i(98807),u=e.i(1051),h=e.i(33948),p=e.i(18295),f=e.i(92279),m=e.i(47379),x=e.i(83161),g=e.i(47617),v=e.i(39972),y=e.i(20161),b=e.i(9109),k=e.i(37025),j=e.i(45162),w=e.i(3430),C=e.i(37451),S=e.i(34699),B=e.i(25972),T=e.i(95532),P=e.i(94544);e.i(72695),e.i(94556),e.i(20012);var F=e.i(99700),M=e.i(27367),W=e.i(16875),D=e.i(24918),E=e.i(13654),I=e.i(75016),z=e.i(9929),R=e.i(15254);let $=null,A=null;try{let t=e.r(26482);$=t.useFigma||t.default?.useFigma}catch(e){console.warn("Figma hook not available:",e)}try{let t=e.r(38568);A=t.useMCP||t.default?.useMCP}catch(e){console.warn("MCP hook not available:",e)}function O(){let{user:e}=(0,R.useAuth)(),{tasks:O,createTask:N,updateTask:H,deleteTask:L,isLoading:_,error:U,authRequired:q,refresh:G,isStale:V}=function(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!1),[i,n]=(0,a.useState)(null),[l,s]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[p,f]=(0,a.useState)(null),m=(0,a.useCallback)(async()=>{try{o(!0),n(null),s(!1);let e=(0,E.getBackendUrl)(),a=await (0,E.fetchWithErrorHandling)(`${e}/api/tasks`,{method:"GET"});if(401===a.status){s(!0),n("Authentication required"),t([]);return}let r=await a.json();t(r.tasks||[]),h(new Date),c(!1)}catch(e){e?.status===401||e?.message?.includes("Authentication required")?(s(!0),n("Authentication required"),t([])):(n(e?.message||"Failed to fetch tasks"),console.error("Error fetching tasks:",e))}finally{o(!1)}},[]),x=(0,a.useCallback)(()=>m(),[m]),g=async(e,t,a,r)=>{try{o(!0),n(null),s(!1);let i=(0,E.getBackendUrl)(),l=await (0,E.fetchWithErrorHandling)(`${i}/api/tasks`,{method:"POST",body:JSON.stringify({title:e,description:t,hyperlinks:a,status:r})});if(401===l.status)throw s(!0),Error("Authentication required");return(await l.json()).task}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),n(e.message),e}finally{o(!1)}},v=async(e,t)=>{try{o(!0),n(null),s(!1);let a=(0,E.getBackendUrl)(),r=await (0,E.fetchWithErrorHandling)(`${a}/api/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)});if(401===r.status)throw s(!0),Error("Authentication required");return(await r.json()).task}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),n(e.message),e}finally{o(!1)}},y=async e=>{try{o(!0),n(null),s(!1);let t=(0,E.getBackendUrl)(),a=await (0,E.fetchWithErrorHandling)(`${t}/api/tasks/${e}`,{method:"DELETE"});if(401===a.status)throw s(!0),Error("Authentication required")}catch(e){throw(e?.status===401||e?.message?.includes("Authentication required"))&&s(!0),n(e.message),e}finally{o(!1)}};return(0,a.useEffect)(()=>{m();let e=(0,I.getSocket)();f(e);let a=()=>{console.log("Socket.io connected for tasks")},r=e=>{console.warn("Socket.io connection error (tasks):",{message:e.message})},o=e=>{console.log("Socket.io disconnected (tasks):",e)};e.on("connect",a),e.on("connect_error",r),e.on("disconnect",o),e.on("task_created",e=>{t(t=>[...t,e]),h(new Date)}),e.on("task_updated",e=>{t(t=>t.map(t=>t.id===e.id?e:t)),h(new Date)}),e.on("task_deleted",e=>{t(t=>t.filter(t=>t.id!==e.id)),h(new Date)}),e.on("auth_restored_ack",()=>{s(!1),m()});let i=setInterval(()=>{u&&Date.now()-u.getTime()>3e5&&c(!0)},6e4);return()=>{e.off("connect",a),e.off("connect_error",r),e.off("disconnect",o),e.off("task_created"),e.off("task_updated"),e.off("task_deleted"),e.off("auth_restored_ack"),clearInterval(i)}},[m,u]),{tasks:e,isLoading:r,error:i,authRequired:l,isStale:d,lastUpdated:u,refresh:x,fetchTasks:m,createTask:g,updateTask:v,deleteTask:y}}(),J=null,Y=null;try{$&&(J=$())}catch(e){console.warn("Figma hook not available:",e)}try{A&&(Y=A())}catch(e){console.warn("MCP hook not available:",e)}let K=J?.files||[],X=J?.components||[];J?.tokens;let Q=J?.componentStatuses||{};J?.isLoading;let Z=J?.error||null,ee=J?.fetchFiles||(()=>Promise.resolve()),et=J?.fetchComponents||(()=>Promise.resolve()),ea=J?.likeComponent||(()=>Promise.resolve()),er=J?.saveComponent||(()=>Promise.resolve()),eo=J?.fetchLikedComponents||(()=>Promise.resolve()),ei=J?.fetchSavedComponents||(()=>Promise.resolve()),en=J?.fetchDraftedComponents||(()=>Promise.resolve()),el=J?.fetchComponentStatus||(()=>Promise.resolve());Y?.links,Y?.tokens;let es=Y?.linkComponentToCode||(()=>Promise.resolve()),ed=Y?.fetchCodeLinks||(()=>Promise.resolve()),ec=Y?.fetchTokens||(()=>Promise.resolve()),[eu,eh]=(0,a.useState)(""),[ep,ef]=(0,a.useState)(!1),[em,ex]=(0,a.useState)("create"),[eg,ev]=(0,a.useState)(null),[ey,eb]=(0,a.useState)(""),[ek,ej]=(0,a.useState)(""),[ew,eC]=(0,a.useState)(""),[eS,eB]=(0,a.useState)("pending"),[eT,eP]=(0,a.useState)(""),[eF,eM]=(0,a.useState)([]),[eW,eD]=(0,a.useState)(!1),[eE,eI]=(0,a.useState)(null),[ez,eR]=(0,a.useState)(!1),[e$,eA]=(0,a.useState)(""),[eO,eN]=(0,a.useState)(""),[eH,eL]=(0,a.useState)(""),[e_,eU]=(0,a.useState)(!1),eq=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("workspace_markdown");e&&eh(e)},[]),(0,a.useEffect)(()=>{""!==eu&&localStorage.setItem("workspace_markdown",eu)},[eu]),(0,a.useEffect)(()=>{(async()=>{if(e&&(e.isEmployee||e.isAdmin)){eD(!0);try{let e=(0,E.getBackendUrl)(),t=await fetch(`${e}/api/creative/support-requests`,{credentials:"include"});if(t.ok){let e=await t.json();eM(e.requests||[])}}catch(e){console.error("Error fetching support requests:",e)}finally{eD(!1)}}})()},[e]),(0,a.useEffect)(()=>{$&&A&&(async()=>{try{await Promise.all([ee(),ed(),ec(),eo(),ei(),en()])}catch(e){console.error("Error loading Figma data:",e)}})()},[]),(0,a.useEffect)(()=>{eE&&$&&(eU(!0),et(eE).then(()=>{X.length>0&&Promise.all(X.map(e=>el(e.key,eE)))}).catch(e=>console.error("Error fetching components:",e)).finally(()=>eU(!1)))},[eE]);let eG=async t=>{let a=O.find(e=>e.id===t);if(!a)return;let r="completed"===a.status?"pending":"completed";try{await H(t,{status:r}),"completed"===r&&(0,z.trackTaskCompleted)(t,e?.userRole||"user","cowork")}catch(e){console.error("Error toggling task:",e)}},eV=async()=>{if(ey.trim())try{let t=ew.split(",").map(e=>e.trim()).filter(e=>e);if("create"===em){let e=await N(ey.trim(),ek.trim(),t,eS);eT&&e?.id&&await H(e.id,{supportRequestId:eT})}else eg&&(await H(eg,{title:ey.trim(),description:ek.trim(),hyperlinks:t,status:eS,supportRequestId:eT||void 0}),"completed"===eS&&(0,z.trackTaskCompleted)(eg,e?.userRole||"user","cowork"));ef(!1)}catch(e){console.error("Error saving task:",e)}},eJ=async e=>{try{await L(e)}catch(e){console.error("Error deleting task:",e)}},eY=async(e,t)=>{t.stopPropagation();let a=Q[e]?.liked||!1;try{await ea(e,!a,eE||void 0)}catch(e){console.error("Error liking component:",e)}},eK=async(e,t)=>{t.stopPropagation();let a=Q[e]?.saved||!1;try{await er(e,!a,eE||void 0)}catch(e){console.error("Error saving component:",e)}},eX=async()=>{if(e$&&eO)try{await es(e$,eO,eH,eE||""),eR(!1),ed()}catch(e){console.error("Error linking component:",e)}};return(0,t.jsxs)(r.Box,{sx:{width:"100%"},children:[(0,t.jsxs)(i.Grid,{container:!0,spacing:3,children:[(0,t.jsx)(i.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(o.Paper,{elevation:2,sx:{p:3,height:500},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(n.Typography,{variant:"h5",fontWeight:700,children:"Collaborative Notes"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(c.Tooltip,{title:"Copy all",children:(0,t.jsx)(s.IconButton,{onClick:()=>{eq.current?(eq.current.select(),document.execCommand("copy")):navigator.clipboard.writeText(eu)},size:"small",children:(0,t.jsx)(B.default,{})})}),(0,t.jsx)(d.Button,{variant:"outlined",size:"small",onClick:()=>{eh(""),localStorage.removeItem("workspace_markdown")},children:"Clear"})]})]}),(0,t.jsx)(l.TextField,{fullWidth:!0,multiline:!0,rows:15,variant:"outlined",placeholder:"Write your collaborative notes here...",value:eu,onChange:e=>eh(e.target.value),inputRef:eq,sx:{"& .MuiInputBase-root":{height:"100%",alignItems:"flex-start"}}})]})}),(0,t.jsx)(i.Grid,{item:!0,xs:12,lg:6,children:(0,t.jsxs)(o.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(n.Typography,{variant:"h5",fontWeight:700,children:"Tasks"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(c.Tooltip,{title:"Refresh",children:(0,t.jsx)(s.IconButton,{onClick:G,size:"small",children:(0,t.jsx)(D.default,{})})}),(0,t.jsx)(d.Button,{variant:"contained",startIcon:(0,t.jsx)(S.default,{}),onClick:()=>{ex("create"),ev(null),eb(""),ej(""),eC(""),eB("pending"),eP(""),ef(!0)},size:"small",children:"Add Task"})]})]}),U&&(0,t.jsx)(b.Alert,{severity:"error",sx:{mb:2},children:U}),V&&(0,t.jsx)(b.Alert,{severity:"info",sx:{mb:2},action:(0,t.jsx)(d.Button,{size:"small",onClick:G,children:"Refresh"}),children:"Tasks may be out of date"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:[O.map(e=>(0,t.jsx)(j.Card,{sx:{mb:2},elevation:1,children:(0,t.jsx)(w.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:(0,t.jsxs)(r.Box,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,t.jsx)(C.Checkbox,{checked:"completed"===e.status,onChange:()=>eG(e.id),disabled:_,size:"small"}),(0,t.jsxs)(r.Box,{sx:{flexGrow:1,minWidth:0},children:[(0,t.jsx)(n.Typography,{variant:"subtitle1",fontWeight:500,sx:{textDecoration:"completed"===e.status?"line-through":"none"},children:e.title}),e.description&&(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[(0,t.jsx)(u.Chip,{label:e.status,size:"small",color:(e=>{switch(e){case"completed":return"success";case"in-progress":return"warning";default:return"default"}})(e.status)}),e.hyperlinks&&e.hyperlinks.length>0&&(0,t.jsx)(u.Chip,{icon:(0,t.jsx)(F.default,{}),label:`${e.hyperlinks.length}`,size:"small",variant:"outlined"})]})]}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5},children:[(0,t.jsx)(s.IconButton,{size:"small",onClick:()=>{ex("edit"),ev(e.id),eb(e.title),ej(e.description||""),eC(e.hyperlinks.join(", ")),eB(e.status),eP(e.supportRequestId||""),ef(!0)},children:(0,t.jsx)(T.default,{fontSize:"small"})}),(0,t.jsx)(s.IconButton,{size:"small",onClick:()=>eJ(e.id),children:(0,t.jsx)(P.default,{fontSize:"small"})})]})]})})},e.id)),0===O.length&&!_&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",children:"No tasks yet. Add your first task to get started!"})}),_&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(k.CircularProgress,{size:24})})]})]})}),(0,t.jsx)(i.Grid,{item:!0,xs:12,children:(0,t.jsxs)(o.Paper,{elevation:2,sx:{p:3,height:500,display:"flex",flexDirection:"column"},children:[(0,t.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsx)(n.Typography,{variant:"h5",fontWeight:700,children:"Design & Figma"}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:1},children:[(0,t.jsx)(c.Tooltip,{title:"Refresh",children:(0,t.jsx)(s.IconButton,{onClick:()=>{eE?et(eE):ee()},size:"small",children:(0,t.jsx)(D.default,{})})}),(0,t.jsx)(d.Button,{variant:"outlined",size:"small",onClick:()=>eR(!0),disabled:!eE||0===X.length,children:"Link to Code"})]})]}),$&&A?(0,t.jsxs)(r.Box,{sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[Z&&(0,t.jsx)(b.Alert,{severity:"error",sx:{mb:2},children:Z}),(0,t.jsx)(r.Box,{sx:{mb:2},children:(0,t.jsxs)(x.FormControl,{fullWidth:!0,size:"small",children:[(0,t.jsx)(g.InputLabel,{children:"Select Figma File"}),(0,t.jsxs)(v.Select,{value:eE||"",label:"Select Figma File",onChange:e=>eI(e.target.value),children:[(0,t.jsx)(y.MenuItem,{value:"",children:"-- Select a file --"}),K.map(e=>(0,t.jsx)(y.MenuItem,{value:e.key,children:e.name},e.key))]})]})}),eE&&(0,t.jsx)(r.Box,{sx:{flexGrow:1,overflow:"auto"},children:e_?(0,t.jsxs)(r.Box,{sx:{textAlign:"center",py:4},children:[(0,t.jsx)(k.CircularProgress,{size:24}),(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading components..."})]}):(0,t.jsxs)(i.Grid,{container:!0,spacing:2,children:[X.map(e=>(0,t.jsx)(i.Grid,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,t.jsx)(j.Card,{elevation:1,children:(0,t.jsxs)(w.CardContent,{sx:{py:1.5,"&:last-child":{pb:1.5}},children:[(0,t.jsx)(n.Typography,{variant:"subtitle2",noWrap:!0,fontWeight:500,children:e.name}),(0,t.jsxs)(r.Box,{sx:{display:"flex",gap:.5,mt:1},children:[(0,t.jsx)(s.IconButton,{size:"small",onClick:t=>eY(e.key,t),color:Q[e.key]?.liked?"error":"default",children:(0,t.jsx)(M.default,{fontSize:"small"})}),(0,t.jsx)(s.IconButton,{size:"small",onClick:t=>eK(e.key,t),color:Q[e.key]?.saved?"primary":"default",children:(0,t.jsx)(W.default,{fontSize:"small"})})]})]})})},e.key)),0===X.length&&(0,t.jsx)(i.Grid,{item:!0,xs:12,children:(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",textAlign:"center",py:4,children:"No components found in this file."})})]})}),!eE&&(0,t.jsx)(r.Box,{sx:{textAlign:"center",py:4},children:(0,t.jsx)(n.Typography,{variant:"body2",color:"text.secondary",children:"Select a Figma file to view components"})})]}):(0,t.jsx)(b.Alert,{severity:"info",children:"Figma integration not available. Check your configuration."})]})})]}),(0,t.jsxs)(h.Dialog,{open:ep,onClose:()=>ef(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(p.DialogTitle,{children:"create"===em?"Add Task":"Edit Task"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsx)(l.TextField,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,variant:"outlined",value:ey,onChange:e=>eb(e.target.value),sx:{mb:2,mt:1}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Description",fullWidth:!0,variant:"outlined",multiline:!0,rows:3,value:ek,onChange:e=>ej(e.target.value),sx:{mb:2}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Hyperlinks (comma-separated)",fullWidth:!0,variant:"outlined",value:ew,onChange:e=>eC(e.target.value),placeholder:"https://example.com, https://another.com",sx:{mb:2}}),eW?(0,t.jsx)(k.CircularProgress,{size:24}):eF.length>0&&(0,t.jsxs)(x.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,t.jsx)(g.InputLabel,{children:"Link to Support Request (Optional)"}),(0,t.jsxs)(v.Select,{value:eT,label:"Link to Support Request (Optional)",onChange:e=>eP(e.target.value),children:[(0,t.jsx)(y.MenuItem,{value:"",children:"None"}),eF.map(e=>(0,t.jsxs)(y.MenuItem,{value:e.id,children:[e.subject," (",e.status,")"]},e.id))]})]}),(0,t.jsxs)(x.FormControl,{fullWidth:!0,margin:"dense",children:[(0,t.jsx)(g.InputLabel,{children:"Status"}),(0,t.jsxs)(v.Select,{value:eS,label:"Status",onChange:e=>eB(e.target.value),children:[(0,t.jsx)(y.MenuItem,{value:"pending",children:"Pending"}),(0,t.jsx)(y.MenuItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(y.MenuItem,{value:"completed",children:"Completed"})]})]})]}),(0,t.jsxs)(m.DialogActions,{children:[(0,t.jsx)(d.Button,{onClick:()=>ef(!1),children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:eV,variant:"contained",disabled:!ey.trim()||_||q,children:"create"===em?"Add":"Save"})]})]}),(0,t.jsxs)(h.Dialog,{open:ez,onClose:()=>eR(!1),maxWidth:"sm",fullWidth:!0,children:[(0,t.jsx)(p.DialogTitle,{children:"Link Figma Component to Code"}),(0,t.jsxs)(f.DialogContent,{children:[(0,t.jsxs)(x.FormControl,{fullWidth:!0,margin:"dense",sx:{mb:2,mt:1},children:[(0,t.jsx)(g.InputLabel,{children:"Figma Component"}),(0,t.jsx)(v.Select,{value:e$,label:"Figma Component",onChange:e=>eA(e.target.value),children:X.map(e=>(0,t.jsx)(y.MenuItem,{value:e.key,children:e.name},e.key))})]}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Code File Path",fullWidth:!0,variant:"outlined",value:eO,onChange:e=>eN(e.target.value),placeholder:"/src/components/Button.tsx",sx:{mb:2}}),(0,t.jsx)(l.TextField,{margin:"dense",label:"Component Name (Optional)",fullWidth:!0,variant:"outlined",value:eH,onChange:e=>eL(e.target.value),placeholder:"Button"})]}),(0,t.jsxs)(m.DialogActions,{children:[(0,t.jsx)(d.Button,{onClick:()=>eR(!1),children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:eX,variant:"contained",disabled:!e$||!eO,children:"Link"})]})]})]})}e.s(["default",()=>O],27245),e.i(96335);var N=e.i(80622),H=e.i(84933),L=e.i(81706),_=e.i(15127),U=e.i(12396),q=e.i(18420),G=e.i(96861),V=e.i(51480),J=e.i(13740);function Y(e){return(0,J.default)("MuiFab",e)}let K=(0,V.default)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var X=e.i(95262),Q=e.i(32869);let Z=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],ee=(0,X.default)(U.default,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,Q.rootShouldForwardProp)(e)||"classes"===e,overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,q.default)(a.size)}`],"inherit"===a.color&&t.colorInherit,t[(0,q.default)(a.size)],t[a.color]]}})(({theme:e,ownerState:t})=>{var a,r;return(0,H.default)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(a=(r=e.palette).getContrastText)?void 0:a.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${K.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})},({theme:e,ownerState:t})=>(0,H.default)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${K.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),et=a.forwardRef(function(e,a){let r=(0,G.useDefaultProps)({props:e,name:"MuiFab"}),{children:o,className:i,color:n="default",component:l="button",disabled:s=!1,disableFocusRipple:d=!1,focusVisibleClassName:c,size:u="large",variant:h="circular"}=r,p=(0,N.default)(r,Z),f=(0,H.default)({},r,{color:n,component:l,disabled:s,disableFocusRipple:d,size:u,variant:h}),m=(e=>{let{color:t,variant:a,classes:r,size:o}=e,i={root:["root",a,`size${(0,q.default)(o)}`,"inherit"===t?"colorInherit":t]},n=(0,_.default)(i,Y,r);return(0,H.default)({},r,n)})(f);return(0,t.jsx)(ee,(0,H.default)({className:(0,L.default)(m.root,i),component:l,disabled:s,focusRipple:!d,focusVisibleClassName:(0,L.default)(m.focusVisible,c),ownerState:f,ref:a},p,{classes:m,children:o}))});e.s(["Fab",0,et],43892)},27796,(e,t,a)=>{"use strict";var r=e.r(91074);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(e.r(64800)),i=e.r(44855);a.default=(0,o.default)((0,i.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat")}]);